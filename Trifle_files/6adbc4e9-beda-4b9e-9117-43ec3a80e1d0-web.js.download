/*! @permutive/javascript-sdk v20.39.0 (web) (built 2025-06-16T09:16:49.976Z) */(()=>{"use strict";var __webpack_modules__={5654:(e,t,r)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}r.d(t,{w:()=>n})},842:(e,t,r)=>{r.d(t,{A:()=>a});var n=r(2169),i=r(8236);function a(e){return(0,n.zG)((0,i.Y3)((()=>JSON.parse(e))),(0,i.fS)(n.gn))}},2945:(e,t,r)=>{r.d(t,{Qt:()=>o,Yt:()=>p,ap:()=>a,gz:()=>l});var n=r(2169),i=r(8614);function a(e,t){return function(r){return function(n){return e.ap(e.map(n,(function(e){return function(r){return t.ap(e,r)}})),r)}}}function o(e){return function(t,r){return function(n){return e.ap(e.map(n,(function(e){return function(r){var n;return Object.assign({},e,((n={})[t]=r,n))}})),r)}}}function s(e,t,r){return function(n){for(var i=Array(r.length+1),a=0;a<r.length;a++)i[a]=r[a];return i[r.length]=n,0===t?e.apply(null,i):s(e,t-1,i)}}var u={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(i){return[e,t,r,n,i]}}}}}};function c(e){return i.e$.call(u,e)||(u[e]=s(n.bc,e-1,[])),u[e]}function l(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,i=c(n),a=e.map(t[0],i),o=1;o<n;o++)a=e.ap(a,t[o]);return a}}function p(e){return function(t){for(var r=Object.keys(t),n=r.length,i=function(e){var t=e.length;switch(t){case 1:return function(t){var r;return(r={})[e[0]]=t,r};case 2:return function(t){return function(r){var n;return(n={})[e[0]]=t,n[e[1]]=r,n}};case 3:return function(t){return function(r){return function(n){var i;return(i={})[e[0]]=t,i[e[1]]=r,i[e[2]]=n,i}}};case 4:return function(t){return function(r){return function(n){return function(i){var a;return(a={})[e[0]]=t,a[e[1]]=r,a[e[2]]=n,a[e[3]]=i,a}}}};case 5:return function(t){return function(r){return function(n){return function(i){return function(a){var o;return(o={})[e[0]]=t,o[e[1]]=r,o[e[2]]=n,o[e[3]]=i,o[e[4]]=a,o}}}}};default:return s((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var i={},a=0;a<t;a++)i[e[a]]=r[a];return i}),t-1,[])}}(r),a=e.map(t[r[0]],i),o=1;o<n;o++)a=e.ap(a,t[r[o]]);return a}}},9912:(e,t,r)=>{r.d(t,{oA:()=>b,t9:()=>m,DZ:()=>y,Ew:()=>c,f2:()=>l,xH:()=>v,jV:()=>f,uK:()=>S,tV:()=>I,u4:()=>k,DY:()=>d});var n=r(2169),i=(r(6289),r(8614)),a=r(6377);i.r1;var o=function(e){return[e]};a.xP,a.Lx,a.u4,a.OE,a.nq,a.iw,a.YM,a.ZN,a.Eh,i.F4,a.YM,a.Z$,a.VV,a.Fp,a.j0;a.ur;var s=r(7812),u=r(7049);r(3226);s.P5,s.YM,s.Z$;s.cx;function c(e){return s.Ew(e)}var l=s.f2;s.JO,s.qr;var p=function(e){return e.slice()},d=function(e){return function(t){return t.length<=1?p(t):t.slice().sort(e.compare)}};var m=s.t9;function f(e){var t=m(e);return function(r,n){if(void 0===n){var i=f(e);return function(e){return i(e,r)}}return r.filter((function(e){return t(e,n)}))}}s.kp,s.Eq;var _=o,g=function(e){return function(t){return(0,n.zG)(t,function(e){return function(t){for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},v=g(n.yR),h=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var a=e(n,t[n]);i.pC(a)&&r.push(a.value)}return r}},y=function(e){return h((function(t,r){return e(r)}))},b=y(n.yR),S=function(e){return w((function(t,r){return e(r)}))},w=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var a=t[i];e(i,a)?n.push(a):r.push(a)}return(0,u.s4)(r,n)}},I=function(e){return E((function(t,r){return e(r)}))},E=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var a=e(i,t[i]);"Left"===a._tag?r.push(a.left):n.push(a.right)}return(0,u.s4)(r,n)}},k=(s.Lx,s.xP,s.u4);s.OE,s.nq,s.iw,s.ZN,s.Eh,s.pR,s.pJ,s.oR,s.yW,s.j0,i.F4},6335:(e,t,r)=>{function n(e){return function(t){return function(r){return e.chain(r,(function(r){return e.map(t(r),(function(){return r}))}))}}}function i(e){return function(t,r){return function(n){return e.chain(n,(function(n){return e.map(r(n),(function(e){var r;return Object.assign({},n,((r={})[t]=e,r))}))}))}}}r.d(t,{a:()=>i,m:()=>n})},7144:(e,t,r)=>{r.d(t,{G5:()=>v,dO:()=>f,Pd:()=>S,ak:()=>R,tS:()=>y,Y$:()=>T,g_:()=>x,ij:()=>A,DT:()=>E,fS:()=>z,pF:()=>D,nM:()=>k,t$:()=>s,UI:()=>m,Vn:()=>w,EQ:()=>U,F2:()=>u,LF:()=>C,KC:()=>q,i$:()=>O,Y3:()=>M});var n=r(6335),i=r(4906),a=r(2169),o=(r(6289),r(8614)),s=o.t$,u=o.F2,c=function(e,t){return(0,a.zG)(e,m(t))},l=function(e,t){return(0,a.zG)(e,g(t))},p=function(e,t){return(0,a.zG)(e,y(t))},d="Either",m=function(e){return function(t){return k(t)?t:u(e(t.right))}},f={URI:d,map:c},_=u,g=function(e){return function(t){return k(t)?t:k(e)?e:u(t.right(e.right))}},v={URI:d,map:c,ap:l},h=function(e){return function(t){return k(t)?t:e(t.right)}},y=h,b={URI:d,map:c,ap:l,chain:p},S=function(e,t){return function(r){return k(r)?s(e(r.left)):u(t(r.right))}},w=function(e){return function(t){return k(t)?s(e(t.left)):t}},I={URI:d,fromEither:a.yR},E=(0,i.DT)(I),k=o.nM,G=(o.tO,function(e,t){return function(r){return k(r)?e(r.left):t(r.right)}}),P=G,U=G,x=U,D=function(e){return function(t){return k(t)?e(t.left):t.right}},z=D,T=(0,i.Y$)(I,b),C=function(e){return k(e)?u(e.left):s(e.right)},A=function(e){return function(t){return null==t?s(e):u(t)}},M=function(e,t){try{return u(e())}catch(e){return s(t(e))}},O=P(a.yR,a.yR);function q(e){return e instanceof Error?e:new Error(String(e))}o.F4;var R=(0,n.a)(b);o.Xl},7125:(e,t,r)=>{r.d(t,{EQ:()=>b,F2:()=>s,KQ:()=>d,LF:()=>G,LU:()=>k,LV:()=>S,NG:()=>m,Pd:()=>h,UI:()=>f,Vn:()=>y,ap:()=>_,dQ:()=>E,fS:()=>w,i$:()=>P,ij:()=>p,m8:()=>c,pk:()=>l,t$:()=>u,tS:()=>g,vx:()=>I,wp:()=>v});var n=r(2945),i=r(7144),a=r(2169),o=r(6289);function s(e){return(0,a.ls)(i.F2,e.of)}function u(e){return(0,a.ls)(i.t$,e.of)}function c(e){return function(t){return e.map(t,i.F2)}}function l(e){return function(t){return e.map(t,i.t$)}}function p(e){return function(t){return(0,a.ls)(i.ij(t),e.of)}}function d(e){var t=p(e);return function(e){var r=t(e);return function(e){return(0,a.ls)(e,r)}}}function m(e){var t=g(e),r=d(e);return function(e){var n=r(e);return function(e){return t(n(e))}}}function f(e){return(0,o.UI)(e,i.dO)}function _(e){return(0,n.ap)(e,i.G5)}function g(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?e.of(r):t(r.right)}))}}}function v(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t():e.of(r)}))}}}function h(e){return function(t,r){return function(n){return e.map(n,i.Pd(t,r))}}}function y(e){return function(t){return function(r){return e.map(r,i.Vn(t))}}}function b(e){return function(t,r){return function(n){return e.map(n,i.EQ(t,r))}}}function S(e){return function(t,r){return function(n){return e.chain(n,i.EQ(t,r))}}}function w(e){return function(t){return function(r){return e.chain(r,i.EQ(t,e.of))}}}function I(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t(r.left):e.of(r)}))}}}function E(e){var t=I(e);return function(r){return t((function(t){return e.map(r(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function k(e){return function(t){return function(r){return e.chain(r,i.EQ((function(r){return e.map(t(r),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function G(e){return function(t){return e.map(t,i.LF)}}function P(e){return function(t){return e.map(t,i.i$)}}},3689:(e,t,r)=>{r.d(t,{f7:()=>n,n_:()=>i,w4:()=>a});r(2169);var n=function(e){return{equals:function(t,r){return t===r||e(t,r)}}},i=function(e){return n((function(t,r){for(var n in e)if(!e[n].equals(t[n],r[n]))return!1;return!0}))},a={equals:function(e,t){return e===t}};a.equals},4906:(e,t,r)=>{r.d(t,{DT:()=>a,Y$:()=>u,fX:()=>s});var n=r(2169),i=r(8614);function a(e){return function(t,r){return function(n){return e.fromEither(t(n)?i.F2(n):i.t$(r(n)))}}}function o(e){return function(t){return(0,n.ls)(t,e.fromEither)}}function s(e,t){var r=o(e);return function(e){return function(n){return t.chain(n,r(e))}}}function u(e,t){return function(r,n){return function(a){return t.chain(a,(function(t){return e.fromEither(r(t)?i.F2(t):i.t$(n(t)))}))}}}},6289:(e,t,r)=>{function n(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.map(e,r)}))}}}function i(e){return function(t){return function(r){return e.map(r,(function(e){var r;return(r={})[t]=e,r}))}}}function a(e){return function(t,r){return function(n){return e.map(n,(function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))}))}}}r.d(t,{Hr:()=>a,UI:()=>n,YO:()=>i})},4694:(e,t,r)=>{r.d(t,{G5:()=>l,RD:()=>f,UI:()=>s,of:()=>u});var n=r(2169),i=(r(6289),r(8614)),a=function(e,t){return function(){return t(e())}},o=function(e,t){return function(){return e()(t())}},s=function(e){return function(t){return a(t,e)}},u=n.a9,c="IO",l={URI:c,map:a,ap:o},p=(n.yR,n.yR,i.F4,u(i.Xl)),d=function(e){var t=function(e){return function(t){return function(){for(var r=[e(0,i.YM(t))()],n=1;n<t.length;n++)r.push(e(n,t[n])());return r}}}(e);return function(e){return i.Od(e)?t(e):p}},m=function(e){return d((function(t,r){return e(r)}))},f=m(n.yR)},8236:(e,t,r)=>{r.d(t,{g1:()=>x,G5:()=>U,Ri:()=>R,xu:()=>j,dO:()=>k,wp:()=>T,tS:()=>D,fX:()=>ee,mU:()=>X,hX:()=>F,DZ:()=>L,xH:()=>J,g_:()=>V,Uo:()=>N,ij:()=>te,KQ:()=>ne,DT:()=>d,Eh:()=>I,IS:()=>m,fS:()=>Z,EK:()=>f,lo:()=>A,Wi:()=>K,pC:()=>Y,UI:()=>E,EQ:()=>H,aD:()=>W,YP:()=>l,of:()=>G,RD:()=>se,G:()=>p,FS:()=>ie,Y3:()=>re,bM:()=>C});var n=r(6335),i=r(4906),a=r(2169),o=(r(6289),r(8614)),s=r(4327),u=r(7049);r(3226);function c(e,t){return function(r){return r?t.of(void 0):e.zero()}}var l=o.YP,p=o.G;function d(e){return function(t){return e(t)?p(t):l}}var m=function(e){return"Right"===e._tag?l:p(e.left)},f=function(e){return"Left"===e._tag?l:p(e.right)},_=function(e,t){return(0,a.zG)(e,E(t))},g=function(e,t){return(0,a.zG)(e,P(t))},v=function(e,t){return(0,a.zG)(e,D(t))},h=function(e,t){return(0,a.zG)(e,F(t))},y=function(e,t){return(0,a.zG)(e,L(t))},b=function(e,t){return(0,a.zG)(e,B(t))},S=function(e,t){return(0,a.zG)(e,$(t))},w="Option",I=function(e){return{equals:function(t,r){return t===r||(K(t)?K(r):!K(r)&&e.equals(t.value,r.value))}}},E=function(e){return function(t){return K(t)?l:p(e(t.value))}},k={URI:w,map:_},G=p,P=function(e){return function(t){return K(t)||K(e)?l:p(t.value(e.value))}},U={URI:w,map:_,ap:g},x={URI:w,map:_,ap:g,of:G},D=function(e){return function(t){return K(t)?l:e(t.value)}},z={URI:w,map:_,ap:g,chain:v},T=function(e){return function(t){return K(t)?e():t}},C=function(){return l},A=c({URI:w,zero:C},{URI:w,of:G}),M=D(a.yR),O=(0,u.s4)(l,l),q=function(e){return K(e)?O:(0,u.s4)(m(e.value),f(e.value))},R={URI:w,compact:M,separate:q},F=function(e){return function(t){return K(t)?l:e(t.value)?t:l}},L=function(e){return function(t){return K(t)?l:e(t.value)}},B=function(e){return function(t){return(0,u.s4)(h(t,(0,s.ff)(e)),h(t,e))}},$=function(e){return(0,a.ls)(E(e),q)},j={URI:w,map:_,compact:M,separate:q,filter:h,filterMap:y,partition:b,partitionMap:S},N=f,Q={URI:w,fromEither:N},Y=o.pC,K=function(e){return"None"===e._tag},W=function(e,t){return function(r){return K(r)?e():t(r.value)}},H=W,V=H,Z=function(e){return function(t){return K(t)?e():t.value}},J=M,X=(0,n.m)(z),ee=(0,i.fX)(Q,z),te=function(e){return null==e?l:p(e)},re=function(e){try{return p(e())}catch(e){return l}},ne=function(e){return(0,a.ls)(e,te)},ie=H(a.r5,a.yR);o.F4;var ae=G(o.Xl),oe=function(e){var t=function(e){return function(t){var r=e(0,o.YM(t));if(K(r))return l;for(var n=[r.value],i=1;i<t.length;i++){var a=e(i,t[i]);if(K(a))return l;n.push(a.value)}return p(n)}}(e);return function(e){return o.Od(e)?t(e):ae}},se=function(e){return oe((function(t,r){return e(r)}))}(a.yR)},856:(e,t,r)=>{r.d(t,{Fp:()=>u,VV:()=>s,Zt:()=>o,uZ:()=>c});var n=r(3689),i=r(2169),a=function(e){return function(t,r){return t===r||0===e(t,r)}},o=function(e){return{equals:a(e),compare:function(t,r){return t===r?0:e(t,r)}}},s=(i.W8,function(e){return function(t,r){return t===r||e.compare(t,r)<1?t:r}}),u=function(e){return function(t,r){return t===r||e.compare(t,r)>-1?t:r}},c=function(e){var t=s(e),r=u(e);return function(e,n){return function(i){return r(t(i,n),e)}}};n.w4.equals},4327:(e,t,r)=>{r.d(t,{ff:()=>n});r(2169);var n=function(e){return function(t){return!e(t)}}},7812:(e,t,r)=>{r.d(t,{$R:()=>P,DZ:()=>j,EQ:()=>_,Eh:()=>ne,Eq:()=>C,Ew:()=>S,G:()=>pe,Hr:()=>fe,JO:()=>I,Lx:()=>H,OE:()=>V,Od:()=>m,P5:()=>v,Su:()=>F,UI:()=>R,YM:()=>h,YO:()=>me,Z$:()=>y,ZN:()=>te,bM:()=>M,bj:()=>G,cS:()=>ce,cx:()=>b,f2:()=>w,hX:()=>B,hp:()=>k,iw:()=>J,j0:()=>de,kp:()=>T,nI:()=>ue,nq:()=>Z,oA:()=>N,oR:()=>se,of:()=>A,oh:()=>L,pJ:()=>oe,pR:()=>ie,qr:()=>E,t9:()=>U,tS:()=>O,u4:()=>W,uK:()=>Q,uZ:()=>re,vP:()=>X,xH:()=>q,xP:()=>K,xb:()=>d,yW:()=>le,zo:()=>x});var n=r(3689),i=r(2169),a=r(6289),o=r(8614),s=r(3052),u=r(856),c=r(6377),l=r(7049),p=(r(3226),function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))}),d=function(e){return 0===e.length},m=c.Od,f=(c.Ce,c.ws,c.R3);c.Im;var _=function(e,t){return function(r){return m(r)?t(r):e()}},g=c.dC;function v(e,t){return void 0===t?function(t){return v(e,t)}:g(e,t)?o.YP:o.G(t[e])}var h=function(e){return m(e)?o.G(c.YM(e)):o.YP},y=function(e){return m(e)?o.G(c.Z$(e)):o.YP};var b=function(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(r);return o.YP}};function S(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(t[r]);return o.YP}}var w=function(e){return function(t){for(var r=0;r<t.length;r++){var n=e(t[r]);if(o.pC(n))return n}return o.YP}};var I=function(e){return function(t){for(var r=t.length-1;r>=0;r--){var n=e(t[r]);if(o.pC(n))return n}return o.YP}},E=function(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(r);return o.YP}},k=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Right"===n._tag&&t.push(n.right)}return t},G=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Left"===n._tag&&t.push(n.left)}return t};function P(e,t){return void 0===t?function(t){return P(t,e)}:function(e,t,r){for(var n=[],i=Math.min(e.length,t.length),a=0;a<i;a++)n[a]=r(e[a],t[a]);return n}(e,t,(function(e,t){return[e,t]}))}function U(e){return function(t,r){if(void 0===r){var n=U(e);return function(e){return n(t,e)}}for(var i,a=0;a<r.length;a++)if(i=r[a],e.equals(i,t))return!0;return!1}}var x=function(e){return function(t){return d(t)?e:d(e)?t:t.concat(e)}};var D=function(e,t){return(0,i.zG)(e,R(t))},z=function(e,t,r){return(0,i.zG)(e,W(t,r))},T=function(e,t){return(0,i.zG)(e,oe(t))},C=function(e,t){return(0,i.zG)(e,se(t))},A=c.of,M=function(){return ce},O=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){if(d(t))return ce;for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},q=O(i.yR),R=function(e){return function(t){return t.map((function(t){return e(t)}))}},F=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},L=function(e){for(var t=[],r=[],n=0,i=e;n<i.length;n++){var a=i[n];"Left"===a._tag?t.push(a.left):r.push(a.right)}return(0,l.s4)(t,r)},B=function(e){return function(t){return t.filter(e)}},$=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var i=e(n,t[n]);o.pC(i)&&r.push(i.value)}return r}},j=function(e){return $((function(t,r){return e(r)}))},N=j(i.yR),Q=function(e){return Y((function(t,r){return e(r)}))},Y=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var a=t[i];e(i,a)?n.push(a):r.push(a)}return(0,l.s4)(r,n)}},K=function(e){return function(t){return function(r){return r.reduce((function(r,n,i){return e.concat(r,t(i,n))}),e.empty)}}},W=function(e,t){return V(e,(function(e,r,n){return t(r,n)}))},H=function(e){var t=K(e);return function(e){return t((function(t,r){return e(r)}))}},V=function(e,t){return function(r){for(var n=r.length,i=e,a=0;a<n;a++)i=t(a,i,r[a]);return i}},Z=function(e,t){return J(e,(function(e,r,n){return t(r,n)}))},J=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},X=function(e){return function(t){return z(t,e.of(M()),(function(t,r){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,f(t))}})),r)}))}},ee="ReadonlyArray",te=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},re=function(){return{concat:function(e,t){return d(e)?t:d(t)?e:e.concat(t)},empty:ce}},ne=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},ie=function(e){return(0,u.Zt)((function(t,r){for(var n=t.length,i=r.length,a=Math.min(n,i),o=0;o<a;o++){var u=e.compare(t[o],r[o]);if(0!==u)return u}return s.Df.compare(n,i)}))},ae={URI:ee,map:D},oe=function(e){return function(t){for(var r=p([],e(t),!0),n=[];r.length>0;){var i=r.shift();o.nM(i)?r.unshift.apply(r,e(i.left)):n.push(i.right)}return n}},se=function(e){return function(t){var r=e(t),n=[],i=[];function a(t){o.nM(t)?e(t.left).forEach((function(e){return n.push(e)})):i.push(t.right)}for(var s=0,u=r;s<u.length;s++){a(u[s])}for(;n.length>0;)a(n.shift());return i}},ue=(c.oo,function(e){return d(e)?ce:e.slice()}),ce=c.cS;function le(e){return function(t){return t.every(e)}}var pe=function(e){return function(t){return t.some(e)}},de=function(e){var t=c.j0(e);return function(r){return _((function(){return e.empty}),t(r))}},me=(o.F4,(0,a.YO)(ae)),fe=(0,a.Hr)(ae);c.w6,c.QI,c.Ss},6377:(e,t,r)=>{r.d(t,{R3:()=>v,Im:()=>g,ur:()=>j,QI:()=>Q,cS:()=>p,Lx:()=>D,xP:()=>C,nI:()=>w,c2:()=>y,Eh:()=>q,ZN:()=>O,vM:()=>E,YM:()=>R,j0:()=>N,Od:()=>d,dC:()=>m,Z$:()=>L,UI:()=>P,Fp:()=>$,VV:()=>B,of:()=>G,Ce:()=>_,ws:()=>f,w6:()=>S,u4:()=>x,nq:()=>z,iw:()=>A,OE:()=>T,Ss:()=>Y,oo:()=>h});var n,i=r(3689),a=r(2169),o=(r(6289),r(8614)),s=r(856),u=function(e){return{concat:s.VV(e)}},c=function(e){return{concat:s.Fp(e)}};n=void 0;var l=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},p=o.Xl,d=o.Od,m=function(e,t){return e<0||e>=t.length},f=function(e){return function(t){return l([e],t,!0)}},_=f,g=function(e){return function(t){return l(l([],t,!0),[e],!1)}},v=g,h=function(e,t,r){if(d(r)){var n=o.r1(r);return n.splice(e,0,t),n}return[t]},y=function(e){return d(e)?o.G(e):o.YP},b=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},S=function(e,t){return e<=t?b((function(t){return e+t}))(t-e+1):[e]},w=function(e){return y(e.slice())};function I(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var E=function(e){return function(t){for(var r={},n=0,i=t;n<i.length;n++){var a=i[n],s=e(a);o.e$.call(r,s)?r[s].push(a):r[s]=[a]}return r}};var k=function(e){return function(t){for(var r=[e,t[0]],n=1;n<t.length;n++)r.push(e,t[n]);return r}},G=o.ri,P=function(e){return U((function(t,r){return e(r)}))},U=function(e){return function(t){for(var r=[e(0,R(t))],n=1;n<t.length;n++)r.push(e(n,t[n]));return r}},x=function(e,t){return T(e,(function(e,r,n){return t(r,n)}))},D=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n){return e.concat(r,t(n))}),t(r[0]))}}},z=function(e,t){return A(e,(function(e,r,n){return t(r,n)}))},T=function(e,t){return function(r){return r.reduce((function(e,r,n){return t(n,e,r)}),e)}},C=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n,i){return e.concat(r,t(i+1,n))}),t(0,r[0]))}}},A=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},M=o.YM,O=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},q=function(e){return(0,i.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},R=(o.F4,M),F=o.Gb,L=function(e){return e[e.length-1]},B=function(e){var t=u(e);return function(e){return e.reduce(t.concat)}},$=function(e){var t=c(e);return function(e){return e.reduce(t.concat)}},j=function(e){return function(t){return t.reduce(e.concat)}},N=function(e){var t=j(e);return function(e){return(0,a.ls)(function(e){return function(t){var r=F(t);return d(r)?(0,a.zG)(r,k(e),_(R(t))):t}}(e),t)}};function Q(e,t){return void 0===t?_(e):(0,a.zG)(t,_(e))}var Y=function(e,t){return(0,a.zG)(e,I([t]))}},6450:(e,t,r)=>{r.d(t,{Bu:()=>_,CC:()=>O,DZ:()=>X,EG:()=>f,EW:()=>j,Eh:()=>ue,G:()=>z,HA:()=>C,Hd:()=>G,I8:()=>R,P5:()=>g,RF:()=>q,RJ:()=>L,SW:()=>Q,Su:()=>h,UI:()=>y,Ub:()=>K,V_:()=>$,XP:()=>p,_Y:()=>B,_r:()=>k,dp:()=>u,dx:()=>d,e$:()=>m,hX:()=>J,jt:()=>P,kp:()=>M,mK:()=>V,mS:()=>F,nn:()=>A,nr:()=>le,nu:()=>N,oA:()=>ae,oh:()=>oe,qS:()=>H,ri:()=>I,sq:()=>x,t9:()=>T,tV:()=>te,uK:()=>ee,uZ:()=>ce,vA:()=>W,vP:()=>E,xb:()=>c,yW:()=>D,z7:()=>U,zV:()=>Y});var n=r(3689),i=r(2169),a=r(8614),o=r(7049),s=r(229),u=(r(3226),function(e){return Object.keys(e).length}),c=function(e){for(var t in e)if(a.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},p=l(s.Df);var d=function(e,t){return function(r){if(a.e$.call(r,e)&&r[e]===t)return r;var n=Object.assign({},r);return n[e]=t,n}},m=function(e,t){return a.e$.call(t,e)};function f(e){return function(t){if(!a.e$.call(t,e))return t;var r=Object.assign({},t);return delete r[e],r}}function _(e){return function(t,r){if(void 0===r){var n=_(e);return function(e){return n(e,t)}}for(var i in t)if(!a.e$.call(r,i)||!e.equals(t[i],r[i]))return!1;return!0}}function g(e,t){return void 0===t?function(t){return g(e,t)}:a.e$.call(t,e)?a.G(t[e]):a.YP}var v={};function h(e){return function(t){var r={};for(var n in t)a.e$.call(t,n)&&(r[n]=e(n,t[n]));return r}}function y(e){return h((function(t,r){return e(r)}))}function b(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return b(s.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,a=r(n),o=a.length,s=0;s<o;s++){var u=a[s];i=t(u,i,n[u])}return i}}}function S(e){if("compare"in e){var t=l(e);return function(e){return function(r){return function(n){for(var i=e.empty,a=t(n),o=a.length,s=0;s<o;s++){var u=a[s];i=e.concat(i,r(u,n[u]))}return i}}}}return S(s.Df)(e)}function w(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return w(s.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,a=r(n),o=a.length-1;o>=0;o--){var s=a[o];i=t(s,n[s],i)}return i}}}var I=function(e,t){var r;return(r={})[e]=t,r};function E(e){return V(s.Df)(e)}function k(e){return function(t){var r={},n={};for(var i in t)if(a.e$.call(t,i)){var s=e(i,t[i]);switch(s._tag){case"Left":r[i]=s.left;break;case"Right":n[i]=s.right}}return(0,o.s4)(r,n)}}function G(e){return function(t){var r={},n={};for(var i in t)if(a.e$.call(t,i)){var s=t[i];e(i,s)?n[i]=s:r[i]=s}return(0,o.s4)(r,n)}}function P(e){return function(t){var r={};for(var n in t)if(a.e$.call(t,n)){var i=e(n,t[n]);a.pC(i)&&(r[n]=i.value)}return r}}function U(e){return function(t){var r={},n=!1;for(var i in t)if(a.e$.call(t,i)){var o=t[i];e(i,o)?r[i]=o:n=!0}return n?r:t}}var x=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i[0]]=i[1]}return t};function D(e){return function(t){for(var r in t)if(!e(t[r]))return!1;return!0}}function z(e){return function(t){for(var r in t)if(e(t[r]))return!0;return!1}}function T(e){return function(t,r){if(void 0===r){var n=T(e);return function(e){return n(t,e)}}for(var i in r)if(e.equals(r[i],t))return!0;return!1}}var C=function(e,t){return(0,i.zG)(e,y(t))},A=function(e,t){return(0,i.zG)(e,h(t))},M=function(e){var t=re(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},O=function(e){return function(t){var r=ne(e)(t);return function(e,t){return(0,i.zG)(e,r(t))}}},q=function(e){var t=ie(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},R=function(e,t){return(0,i.zG)(e,J(t))},F=function(e,t){return(0,i.zG)(e,X(t))},L=function(e,t){return(0,i.zG)(e,ee(t))},B=function(e,t){return(0,i.zG)(e,te(t))},$=function(e){var t=b(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},j=function(e){var t=S(e);return function(e){var r=t(e);return function(e,t){return(0,i.zG)(e,r(t))}}},N=function(e){var t=w(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},Q=function(e,t){return(0,i.zG)(e,k(t))},Y=function(e,t){return(0,i.zG)(e,G(t))},K=function(e,t){return(0,i.zG)(e,P(t))},W=function(e,t){return(0,i.zG)(e,U(t))},H=function(e){var t=Z(e);return function(e){var r=t(e);return function(e,t){return r(e,(0,i.ls)(i.SK,t))}}},V=function(e){var t=H(e);return function(e){var r=t(e);return function(e){return r(e,i.yR)}}},Z=function(e){return function(t){var r=l(e);return function(e,n){var i=r(e);if(0===i.length)return t.of(v);for(var a=t.of({}),o=function(r){a=t.ap(t.map(a,(function(e){return function(t){var n;return Object.assign({},e,((n={})[r]=t,n))}})),n(r,e[r]))},s=0,u=i;s<u.length;s++){o(u[s])}return a}}},J=function(e){return U((function(t,r){return e(r)}))},X=function(e){return P((function(t,r){return e(r)}))},ee=function(e){return G((function(t,r){return e(r)}))},te=function(e){return k((function(t,r){return e(r)}))};function re(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=b(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return re(s.Df).apply(void 0,e)}function ne(e){if("compare"in e){var t=S(e);return function(e){var r=t(e);return function(e){return r((function(t,r){return e(r)}))}}}return ne(s.Df)(e)}function ie(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=w(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return ie(s.Df).apply(void 0,e)}var ae=function(e){var t={};for(var r in e)if(a.e$.call(e,r)){var n=e[r];a.pC(n)&&(t[r]=n.value)}return t},oe=function(e){var t={},r={};for(var n in e)if(a.e$.call(e,n)){var i=e[n];a.nM(i)?t[n]=i.left:r[n]=i.right}return(0,o.s4)(t,r)},se="ReadonlyRecord";function ue(e){var t=_(e);return(0,n.f7)((function(e,r){return t(e)(r)&&t(r)(e)}))}function ce(e){return{concat:function(t,r){if(c(t))return r;if(c(r))return t;var n=Object.assign({},t);for(var i in r)a.e$.call(r,i)&&(n[i]=a.e$.call(t,i)?e.concat(t[i],r[i]):r[i]);return n},empty:v}}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df;function le(e,t){return a.e$.call(void 0===t?this:t,e)}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df},3643:(e,t,r)=>{r.d(t,{H5:()=>s,Pd:()=>a,Yg:()=>i,li:()=>n,pL:()=>o});r(2169);function n(e){return e[0]}function i(e){return e[1]}var a=function(e,t){return function(r){return[t(n(r)),e(i(r))]}},o=function(e){return function(t){return[e(n(t)),i(t)]}},s=function(e){return function(t){return[n(t),e(i(t))]}}},5086:(e,t,r)=>{r.d(t,{ff:()=>n});var n=function(e){return function(t){return!e(t)}}},7049:(e,t,r)=>{r.d(t,{Pd:()=>i,s4:()=>n});r(2169);var n=function(e,t){return{left:e,right:t}},i=function(e,t){return function(r){return n(e(a(r)),t(o(r)))}},a=function(e){return e.left},o=function(e){return e.right}},2678:(e,t,r)=>{r.d(t,{qA:()=>S,Hi:()=>b,qo:()=>w,dO:()=>h,UA:()=>I,PM:()=>y,ap:()=>f,Qt:()=>x,ak:()=>U,YO:()=>P,tS:()=>g,mU:()=>E,At:()=>G,tD:()=>c,UI:()=>m,of:()=>_,uU:()=>C,pE:()=>A});var n=r(2945),i=r(6335),a=r(2169);function o(e,t){var r=(0,i.m)(t);return function(t){return r((0,a.ls)(t,e.fromIO))}}var s=r(6289),u=r(8614),c=function(e){return function(){return Promise.resolve().then(e)}};var l=function(e,t){return(0,a.zG)(e,m(t))},p=function(e,t){return(0,a.zG)(e,f(t))},d=function(e,t){return(0,a.zG)(e,g(t))},m=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},f=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},_=function(e){return function(){return Promise.resolve(e)}},g=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},v="Task";var h={URI:v,map:l},y={URI:v,of:_},b={URI:v,map:l,ap:p},S={URI:v,map:l,ap:p,of:_},w={URI:v,map:l,ap:p,chain:d},I={URI:v,map:l,of:_,ap:p,chain:d},E=(a.yR,(0,i.m)(w)),k={URI:v,fromIO:c},G=o(k,w),P=(u.F4,(0,s.YO)(h)),U=(0,i.a)(w),x=(0,n.Qt)(b),D=_(u.Xl),z=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,r){return Promise.resolve().then((function(){return e(r,t)()}))})))}}}(e);return function(e){return u.Od(e)?t(e):D}},T=function(e){var t=function(e){return function(t){return function(){return u.Gb(t).reduce((function(t,r,n){return t.then((function(t){return Promise.resolve().then(e(n+1,r)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,u.YM(t))).then(u.ri))}}}(e);return function(e){return u.Od(e)?t(e):D}},C=function(e){return z((function(t,r){return e(r)}))},A=function(e){return T((function(t,r){return e(r)}))}},132:(e,t,r)=>{r.d(t,{Do:()=>V,Qt:()=>X,ak:()=>J,tS:()=>O,fX:()=>Y,wE:()=>H,Zl:()=>q,Y$:()=>K,Uo:()=>S,tD:()=>y,fF:()=>b,fS:()=>E,t$:()=>f,Hr:()=>Z,UI:()=>T,Vn:()=>A,EQ:()=>w,LV:()=>I,of:()=>F,Ij:()=>ee,Y3:()=>k});var n=r(2945),i=r(6335),a=r(7125),o=r(4906),s=r(2169);function u(e,t){return function(r){var n=(0,s.ls)(r,e.fromTask);return function(e){return t.chain(e,n)}}}var c=r(6289),l=r(8614),p=r(2678),d=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))},m=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},f=a.t$(p.PM),_=a.F2(p.PM),g=a.m8(p.dO),v=a.pk(p.dO),h=(0,s.ls)(p.tD,g),y=(p.tD,h),b=g,S=p.of,w=(p.tD,a.EQ(p.dO)),I=a.LV(p.UA),E=a.fS(p.UA),k=function(e,t){return function(){return d(void 0,void 0,void 0,(function(){var r;return m(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(l.F2)];case 1:return[2,n.sent()];case 2:return r=n.sent(),[2,l.t$(t(r))];case 3:return[2]}}))}))}},G=(p.dO,p.PM,p.PM,p.UA,p.UA,p.UA,p.UA,p.dO,function(e,t){return(0,s.zG)(e,T(t))}),P=function(e,t){return(0,s.zG)(e,M(t))},U=function(e,t){return(0,s.zG)(e,O(t))},x=function(e,t,r){return(0,s.zG)(e,C(t,r))},D=function(e,t){return(0,s.zG)(e,A(t))},z=function(e,t){return(0,s.zG)(e,R(t))},T=a.UI(p.dO),C=a.Pd(p.dO),A=a.Vn(p.dO),M=a.ap(p.Hi),O=a.tS(p.UA),q=O,R=a.wp(p.UA),F=_,L=f,B="TaskEither";var $={URI:B,map:G},j={URI:B,map:G,ap:P},N={URI:B,map:G,ap:P,chain:U},Q={URI:B,fromEither:S},Y=(0,o.fX)(Q,N),K=(0,o.Y$)(Q,N),W={URI:B,fromIO:y,fromTask:b},H=u(W,N);var V=F(l.F4),Z=(0,c.Hr)($),J=(0,i.a)(N),X=(0,n.Qt)(j),ee=(l.Xl,{URI:B,bimap:x,mapLeft:D,map:G,of:F,ap:P,chain:U,alt:z,fromIO:y,fromTask:b,throwError:L})},3226:(e,t,r)=>{function n(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.separate)}}}function i(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.compact)}}}r.d(t,{BL:()=>i,Fj:()=>n})},2169:(e,t,r)=>{r.d(t,{MZ:()=>i,Q1:()=>c,SK:()=>m,W8:()=>o,a9:()=>a,bc:()=>p,gn:()=>s,ls:()=>l,r5:()=>u,yR:()=>n,zG:()=>d});function n(e){return e}var i=n;function a(e){return function(){return e}}var o=a(!0),s=a(null),u=a(void 0),c=u;function l(e,t,r,n,i,a,o,s,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return i(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return o(a(i(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return s(o(a(i(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return u(s(o(a(i(n(r(t(e.apply(this,arguments)))))))))}}}function p(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function d(e,t,r,n,i,a,o,s,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return i(n(r(t(e))));case 6:return a(i(n(r(t(e)))));case 7:return o(a(i(n(r(t(e))))));case 8:return s(o(a(i(n(r(t(e)))))));case 9:return u(s(o(a(i(n(r(t(e))))))));default:for(var c=arguments[0],l=1;l<arguments.length;l++)c=arguments[l](c);return c}}var m=function(e,t){return t}},8614:(e,t,r)=>{r.d(t,{F2:()=>p,F4:()=>v,G:()=>s,Gb:()=>_,Od:()=>m,Wi:()=>i,Xl:()=>g,YM:()=>f,YP:()=>o,e$:()=>h,nM:()=>u,pC:()=>a,r1:()=>y,ri:()=>d,t$:()=>l,tO:()=>c});var n=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},i=function(e){return"None"===e._tag},a=function(e){return"Some"===e._tag},o={_tag:"None"},s=function(e){return{_tag:"Some",value:e}},u=function(e){return"Left"===e._tag},c=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},p=function(e){return{_tag:"Right",right:e}},d=function(e){return[e]},m=function(e){return e.length>0},f=function(e){return e[0]},_=function(e){return e.slice(1)},g=[],v={},h=Object.prototype.hasOwnProperty,y=function(e){return n([e[0]],e.slice(1),!0)}},3052:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}};n.equals,i.compare},229:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n,pn:()=>o,xb:()=>a});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},a=function(e){return 0===e.length},o=function(e,t){return function(r){return r.endsWith(e,t)}}},8586:(e,t,r)=>{r.d(t,{GL:()=>s,HJ:()=>u,N1:()=>l,NC:()=>n,RP:()=>i,SF:()=>p,UM:()=>c,ho:()=>m,iE:()=>d});const n=performance.now(),i=(new Date).getTime();let a=[],o=!1;const s=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return u((()=>e(...r)))},u=(e,t)=>{if(!o){const r=self.setTimeout(e,t);return()=>self.clearTimeout(r)}let r;const n=()=>{void 0!==r&&o&&a.length<1e4&&a.push([r,performance.now()]),r=void 0},i=[self.setTimeout((()=>{r=performance.now(),self.requestAnimationFrame(n),e()}),t),self.setTimeout(n,t)];return()=>{void 0===r&&i.forEach((e=>self.clearTimeout(e)))}},c=(e,t)=>{if(!o){const r=self.setInterval(e,t);return()=>self.clearInterval(r)}let r=!1,n=()=>{};const i=self.setInterval((()=>{n=u((()=>{r||e()}))}),t);return()=>{r=!0,n(),self.clearInterval(i)}},l=e=>()=>{return t=e(),new Promise(((e,r)=>t.then(s(e),s(r))));var t},p=e=>{const t=l(e);return()=>new Promise((e=>u((()=>e(t())))))},d=()=>{const e=a;return a=[],e},m=e=>{o=e}},9519:(e,t,r)=>{r.d(t,{ap:()=>b,a9:()=>v,Ue:()=>f,gS:()=>_,D8:()=>U,VS:()=>S,xH:()=>w,En:()=>g,p4:()=>P,UI:()=>y,Rp:()=>I,vP:()=>E,bw:()=>x,yY:()=>G,YP:()=>h});var n=r(5654),i=r(7144),a=r(2169),o=r(8236),s=r(7812),u=r(3600);function c(e){let t=e,r=[],n=!1;return{addListener(e){if(n)return()=>{};let i=t;const a=()=>{Object.is(t,i)||(i=t,e(t))};r=[...r,a];return()=>{r=r.filter((e=>e!==a))}},notify(e){if(n)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,r.forEach((e=>e())))},terminate(){n=!0,r=[]}}}function l(e,t){let r=0;return function(){try{if(r++>0)throw new Error(e);return t(...arguments)}finally{r--}}}function p(e,t){let r=[...new Set(e)].filter((e=>"final"!==e.state));if(0===r.length)return{state:"final",onStateChange:()=>()=>{}};const n=()=>0===r.length?"final":r.some((e=>"might_change"===e.state))?"might_change":"nominal",[i,a]=d(n(),(e=>"might_change"!==e&&t())),o=()=>a(n());return r.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":r=e.filter((e=>"final"!==e.state)),o();break;case"might_change":a("might_change");break;case"nominal":o();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),i}function d(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:r,notify:n,addListener:i}=c(e),a={state:e,onStateChange:i},o=l("Disallowed recursion in Branch.",(e=>{if("final"===a.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{null==t||t(e),a.state=e,n(e)}finally{"final"===e&&r()}}));return[a,o]}var m=r(4694);function f(e){const[t,r,n]=function(){const[e,t]=d("nominal"),r=l("Disallowed recursion in Branch.",(r=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const n=e.state;try{t("might_change"),r()}finally{t(n)}}));return[e,r,()=>t("final")]}(),[i,a]=D(t,e);return[i,e=>r((()=>a(e))),n]}function _(e){let t=e.empty;const r=()=>()=>{const r=t;return t=e.empty,r},[n,i,a]=f(r());return[n,n=>{t=e.concat(t,n),i(r())},a]}function g(e,t){return r=>{let n=new Array(e).fill(t.empty);return new Array(e).fill(null).map(((e,i)=>(0,a.zG)(r,y(m.UI((e=>{const r=t.concat(n[i],e);return n=n.map(((r,n)=>n===i?t.empty:t.concat(r,e))),r}))))))}}function v(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function h(e){return t=>{const r=t.onChange(e);return e(t.current),r}}function y(e,t){if(t){const[r,n]=D(t.branch,e(t.current));return t.onChange((t=>n(e(t)))),r}return t=>y(e,t)}const b=e=>S((t=>y(t)(e)));function S(e,t){return t?w(y(e,t)):t=>w(y(e,t))}function w(e){if("final"===e.branch.state)return e.current;const[t,r]=function(e,t){let r=t;const n=[e.state,r.state].includes("might_change")?"might_change":"nominal",[i,a]=d(n),o=e=>t=>{switch(t){case"final":a(e().state);break;case"might_change":a("might_change");break;case"nominal":"might_change"===e().state?a("might_change"):a("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(o((()=>r)));const s=o((()=>e));let u=r.onStateChange(s);return[i,e=>{r=e,u(),u=e.onStateChange(s),s(r.state)}]}(e.branch,e.current.branch),[n,i]=D(t,e.current.current);let a=e.current.onChange(i);return e.onChange((e=>{a(),a=e.onChange(i),r(e.branch),i(e.current)})),n}function I(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{if(2===t.length){let r=t[0];return y((e=>(r=t[1](r,e),r)),e)}let r=o.bM();return y((e=>{const n=t[0](r,e);return r=o.G(n),n}),e)}}function E(){if(0===arguments.length||z(arguments.length<=0?void 0:arguments[0]))return k(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,a.zG)(Object.values(e),(e=>k(...e)),y((0,a.ls)(s.Su(((e,r)=>[t[e],r])),Object.fromEntries)))}function k(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return v([]);if(1===t.length)return y((e=>[e]))(t[0]);let n=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");n=!0}))));const i=t.map((0,u.vg)("branch")),a=()=>{n&&(n=!1,c(t.map((e=>e.current))))},o=p(i,a),[s,c]=D(o,t.map((e=>e.current)));return s}const G=e=>()=>o.pC(e.current)?Promise.resolve(e.current.value):new Promise((t=>{const r=(0,a.zG)(e,h(o.UI((e=>{r(),t(e)}))))}));function P(e){const[t,r,s]=f(o.YP);return e.then(i.F2).catch((0,a.ls)(n.w,i.t$)).then((0,a.ls)(o.G,r,s)),t}function U(e){const t=e.hasOwnProperty("equals")?e.equals:e;return function(e){return t=>{if("final"===t.branch.state)return t;let r=o.YP;return y((t=>{if(o.Wi(r))return r=o.G(t),t;const n=e(r.value,t);return r=o.G(n),n}),t)}}(((e,r)=>t(e,r)?e:r))}function x(e){return t=>(h(e)(t),t)}function D(e,t){if("final"===e.state)return[v(t),()=>{}];const r=c(t);e.onStateChange((e=>{"final"===e&&r.terminate()}));let n=t;return[{get current(){return n},onChange:r.addListener,branch:e},l("Disallowed recursion in Ref.",(e=>{n=e,r.notify(n)}))]}function z(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},3480:(e,t,r)=>{r.d(t,{Hr:()=>_,K4:()=>u,KD:()=>g,UI:()=>p,ak:()=>f,bw:()=>d,dQ:()=>c,of:()=>l,vP:()=>m});var n=r(9519),i=r(2169),a=r(3600),o=r(6450),s=r(8236);const u=e=>(0,i.ls)((t=>{let{previousState:r,...n}=t;return e(n)}),(e=>({value:e,state:n.a9(void 0)}))),c=i.yR,l=(0,i.ls)(i.a9,u),p=e=>t=>(0,i.ls)(t,(0,a.rO)({value:e})),d=e=>t=>(0,i.ls)(t,(0,a.rO)({value:(0,a.bw)(e)}));function m(e){return t=>{let{previousState:r,...a}=t;const s=y(r)?r:{},u=(0,i.zG)(e,o.Su(((e,t)=>t({previousState:s[e],...a}))));return{value:(0,i.zG)(u,o.UI((e=>e.value))),state:(0,i.zG)(u,o.UI((e=>e.state)),(e=>n.vP(e)))}}}function f(e,t){return r=>(0,i.ls)((0,a.rO)({previousState:h}),(a=>{const o=r(a),s=t(o.value)({...a,previousState:a.previousState[e]});return{value:(0,i.zG)([o.value,s.value],(t=>{let[r,n]=t;if(!y(r))throw new Error("Service.bind() was passed an upstream Service with a non-record value.");return{...r,[e]:n}})),state:(0,i.zG)(n.vP(o.state,s.state),n.UI((t=>{let[r,n]=t;if(void 0===r)return{[e]:n};if(!y(r))throw new Error("Service.bind() was passed an upstream Service with a non-record state.");return{...r,[e]:n}})))}}))}const _=(e,t)=>p((r=>({...r,[e]:t(r)})));const g=e=>{const t=e.slice(0,-1),r=e.slice(-1)[0],o=[...t.map((e=>{let[t,r]=e;return[t,(0,i.a9)(r)]})),(0,i.a9)(r)];return s=(0,a.lo)(o),(0,i.ls)(n.UI(s),v);var s};function v(e){const t=(0,i.zG)(e,n.Rp(0,(e=>e+1)));return r=>{let{previousState:a,stopped:o,...u}=r;return(0,i.zG)(n.vP(e,t),n.Rp(((e,r)=>{let[c,l]=r;return(0,i.zG)(e,s.UI((e=>e.state.current)),s.fS((()=>a)),(e=>c({previousState:e,stopped:(0,i.zG)(n.vP(o,t),n.UI((e=>{let[t,r]=e;return t||r!==l}))),...u})))})),(e=>({value:n.UI((e=>e.value),e),state:n.VS((e=>e.state),e)})))}}function h(e){return y(e)?e:{}}function y(e){return"object"==typeof e&&null!==e}},4436:(e,t,r)=>{r(9103)},9806:(e,t,r)=>{r.d(t,{lg:()=>f,Bt:()=>g});var n=r(9912),i=r(2169),a=r(8236),o=r(229),s=r(3600);var u=r(7144);class c{userId;network;api;logger;tcf;constructor(e,t,r,n,i){this.userId=e,this.network=t,this.api=r,this.logger=n,this.tcf=i}tag="appnexus";ttlInSeconds=86400;usedForThirdPartyData=!0;invalidAliases=["","0","-1"];logPrefix="identities[appnexus]:";async getId(){if((0,s.G6)(navigator.userAgent))return this.logger.debug(this.logPrefix,"skipped for Safari"),{type:"skipped"};const e=await this.tcf.getStatusOrAbortOnTimeout(2e3),t=(0,i.zG)(this.getGDPRParams(e),u.fS((()=>"")),(e=>`https://ib.adnxs.com/getuidj${e.length>0?`?${e}`:""}`));try{this.logger.debug(this.logPrefix,"start HTTP request");const e=await this.api.appnexus(t);return this.logger.debug(this.logPrefix,"end HTTP request"),{type:"attempted",result:(0,i.zG)(a.Y3((()=>e.uid)),a.tS(a.ij),a.hX((e=>this.isValidAlias(e))))}}catch(e){return this.logger.warn(this.logPrefix,"Failed to fetch id",e),{type:"attempted",result:a.YP}}}getGDPRParams(e){return u.Y3((()=>{if("missing"===e.type||"loaded"===e.type&&!e.data.gdprApplies)return"gdpr=0";return`gdpr=1&gdpr_consent=${"loaded"===e.type?e.data.tcString:""}`}),(e=>`Failed to retrieve GDPR query params. Got ${e}`))}reset(){return Promise.resolve()}isValidAlias(e){return!!e&&-1===this.invalidAliases.indexOf(e)}}var l=r(9519),p=r(6450),d=r(5086);const m=d.ff((e=>void 0===e));class f{metrics;trace;permutiveData;identityProviderEnv;logger;ref;setReady;thirdParty;rawRef;identityMapRef;setIdentityMap;providers={};static emailSHA256Regex=/^[a-f0-9]{64}$/;constructor(e,t,r,n,u){this.metrics=e,this.trace=t,this.permutiveData=r,this.identityProviderEnv=n,this.logger=u;const c=this.getCachedIdentitiesAndMigrateIfRequired(),[d,f]=l.Ue(c);this.identityMapRef=d,this.setIdentityMap=f,d.onChange((0,i.ls)(p.z7((e=>!_.has(e))),(0,s.bw)((e=>{this.logger.debug("[identities] Persisting",e),this.permutiveData.setData("identities",e)})))),this.rawRef=(0,i.zG)(d,l.UI((0,i.ls)(p.UI((e=>e.value)),p.hX(m))),l.D8(p.Eh(o.Eq)));const[g,v]=l.Ue(!1);this.ref=(0,i.zG)(l.vP(g,this.rawRef),l.UI((e=>{let[t,r]=e;return(0,i.zG)(r,(0,a.DT)((()=>t)))}))),this.setReady=()=>{e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"identity_ready",time_origin:"sdk_init"}),v(!0)},this.thirdParty=this.prepareThirdPartyIdentities()}get identities(){return this.identityMapRef.current}prepareThirdPartyIdentities(){this.logger.debug("[Identities]","loading 3rd party identities");const e=this.metrics.startTimer("sdk_get_third_party_identities_task_duration_seconds",{}),t=this.trace.startSpan("load_tpd_ids"),r=[{load:e=>(e.config,e.network,e.api,e.userId,e.logger,a.YP)},{load:e=>{return t=e.userId,r=e.network,n=e.api,i=e.logger,o=e.tcf,a.G(new c(t,r,n,i,o));var t,r,n,i,o}},{load:e=>(e.cookies,e.messages,a.YP)},{load:e=>(e.cookies,a.YP)},{load:e=>(e.metrics,e.permutiveData,e.permutive,e.messages,a.YP)}],o=(0,n.oA)(r.map((e=>e.load(this.identityProviderEnv)))).map((e=>this.shouldAskForNewIdentity(e)?this.retrieveIdentity(e):Promise.resolve((0,i.bc)(e,this.getCachedTPDIdentity(e.tag)))));return Promise.all(o).then((e=>e.map((e=>{let[t,r]=e;return this.providers[t.tag]=t,this.mapTPDIdentityIfPresent(t.tag,r,t.ttlInSeconds)})))).then((e=>this.setIdentities(e))).then((0,s.bw)((()=>{this.metrics.stopTimer("sdk_get_third_party_identities_task_duration_seconds",e),t.finish()})))}getPrioritizedIdentities(e){const t={default:0,appnexus:1},r=Object.entries(e).map((e=>{let[t,{id:r,expiry:n,priority:i}]=e;return{tag:t,...r?{id:r}:{},...n?{expiry:n}:{},...void 0!==i?{priority:i}:{}}})),i=r.filter((e=>((e,t)=>!!e.id&&!(0,n.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),s=r.filter((e=>((e,t)=>!!e.id&&!!(0,n.t9)(o.Eq)(e.tag,t))(e,Object.values(this.providers).map((e=>e.tag))))),u=(0,n.DZ)((e=>(0,a.ij)(e.priority)))(i),c=u.length>0?Math.max(...u):0,l=i.map((e=>void 0!==e.priority?{...e,priority:e.priority}:{...e,priority:c+1})),p=s.map((e=>void 0===t[e.tag]?{tag:e.tag,id:e.id,priority:c+v}:{tag:e.tag,id:e.id,priority:c+h}));return l.concat(p)}getIdentitiesMap(){return this.getFilteredIdentities(((e,t)=>!!t.value))}parseCustomerDefinedIdentities(e){const t=`Identify must be passed a non-empty string or list of { tag, id, priority? } tuples, value passed was '${JSON.stringify(e)}'`,r=e=>"string"==typeof e.id&&"string"==typeof e.tag,a=e=>"email_sha256"!==e.tag||f.emailSHA256Regex.test(e.id);return"string"==typeof e?(s=e).length>0?{left:[],right:[{id:s,tag:"default"}]}:{left:[t],right:[]}:Array.isArray(e)?(o=e,(0,i.zG)(o,n.tV((0,i.ls)(u.DT(r,(()=>t)),u.Y$(a,(()=>"Identify called with unsupported format of email_sha256 ID. The support format is hex-encoded 64 character long lowercase string.")))))):{left:[t],right:[]};var o,s}extractIdentifyFromQueue(e){let{global:t}=e;const r=()=>t.q.findIndex((e=>"identify"===e.functionName)),n=(e,i)=>{if(e<0)return i;const a=t.q.splice(e,1)[0],o=this.parseCustomerDefinedIdentities(a.arguments[0]);return n(r(),{left:i.left.concat(o.left),right:i.right.concat(o.right)})},{left:i,right:a}=n(r(),{left:[],right:[]});return i.forEach((e=>this.logger.warn("Invalid identity provided during init",e))),a}setIdentities(e){const t=e.reduce(((e,t)=>{let{tag:r,id:n,expiry:i,priority:a}=t;return void 0===this.identities[r]&&this.logger.debug(`identities[${r}]: added`),e[r]={...n?{value:n}:{},...i?{expiry:i}:{},...void 0!==a?{priority:a}:{}},e}),{}),r=this.rawRef.current;this.setIdentityMap({...this.identities,...t});const n=this.rawRef.current;return{identifyRequestRequired:()=>!p.xb(n)&&!p.Eh(o.Eq).equals(r,n)}}async reset(){this.setIdentityMap({}),await Promise.all(Object.values(this.providers).map((e=>e.reset())))}getFilteredIdentities(e){return(0,s.m8)(...Object.entries(this.identities).filter((t=>{let[r,n]=t;return e(r,n)})).map((e=>{let[t,{value:r,expiry:n,priority:a}]=e;return(0,i.bc)(t,{id:r,...n?{expiry:n}:{},...void 0!==a?{priority:a}:{}})})))}shouldAskForNewIdentity(e){var t;const r=(0,a.ij)(null===(t=this.identities)||void 0===t?void 0:t[e.tag]);return(0,a.g_)((()=>!0),this.isIdentityExpired)(r)}getCachedTPDIdentity(e){return this.identities[e]?(0,a.ij)(this.identities[e].value):a.YP}mapTPDIdentityIfPresent(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:86400;const n=()=>Date.now()+Math.floor(1e3*r);return(0,a.g_)((()=>({tag:e,expiry:n()})),(t=>({tag:e,id:t,expiry:n()})))(t)}retrieveIdentity(e){return e.getId().then((t=>"skipped"===t.type?(0,i.bc)(e,a.YP):(0,i.zG)(t.result,(t=>this.metrics.track({name:(0,a.pC)(t)?"sdk_third_party_identity_present_count":"sdk_third_party_identity_missing_count",value:1,labels:{identity_tag:e.tag}})),(r=>(0,i.bc)(e,t.result)))))}isIdentityExpired(e){return"number"==typeof e.expiry&&Date.now()>=e.expiry}getCachedIdentitiesAndMigrateIfRequired(){return(e=>(0,s.m8)(...Object.entries(e).filter((e=>{let[t,r]=e;return!this.isIdentityExpired(r)&&!_.has(t)}))))(this.permutiveData.getData("identities")||{})}}const _=new Set(["public","email","email_md5","ip_address"]),g=(e,t,r,i,a)=>{const s=(e,t)=>{const r=["(null)"];return r.indexOf(e)>-1||!!b[e]||(0,n.jV)(o.Eq)(t,r).length>0},u=e=>"721d6d85-35f0-4e35-bb38-13eb0d465158"===e,c={"be668577-07f5-444d-98e0-222b990951b1":s,"e43c8a90-d17b-4790-bfda-81b069b3b8c2":(e,t,r)=>["thestudentroom.co.uk"].some((e=>r.indexOf(e)>-1))&&(0,n.jV)(o.Eq)(t,["tsr-"]).length>0,"5d79bce7-5d2b-427e-a6c4-b89b6c7bf048":s,"366ab8da-5efa-4355-ab00-84db3b68ded2":e=>"96539955-4d7e-40df-882b-7e2fbacedb1c"===e||"345600e7-fb5f-48b1-9aa6-cde5396419b0"===e,"f3a06674-ebb9-4b9d-ba8f-0052018c0687":u,"38dadd0d-257a-4641-b332-b8b0fd20a6cb":u,"10453011-272d-49cd-9043-1964fdb36fd8":e=>"936ba6ac-9a8b-454d-ba98-facebd7553fe"===e},l={"fe68d1f7-c9f4-45b3-8905-7cda73d3fd74":e=>!!y[e]},p=c[e]||l[t];return!!p&&p(a,r,i)},v=2,h=3,y={},b={}},8142:(e,t,r)=>{r.d(t,{z:()=>n});class n{ingestIfEligible(e){return Promise.resolve()}}},438:(e,t,r)=>{r.d(t,{u6:()=>a});var n=r(3480);r(9519),r(3600);const i={prebid:{onReady:()=>({})}},a=e=>n.of(i)},4963:(e,t,r)=>{r.d(t,{CL:()=>s,EW:()=>u,PH:()=>o,eV:()=>i,jH:()=>c,t2:()=>a});var n=r(7802);const i=(0,n.MU)("track_form_submission",!0),a=((0,n.MU)("track_pageview_complete",!0),(0,n.MU)("track_pageview_engagement",!0)),o=((0,n.$S)("sync_segments_cookie",!1),(0,n.$S)("track_slot_clicked",!0)),s=(0,n.$S)("track_slot_rendered",!0),u=(0,n.$S)("track_slot_viewable",!1),c=(0,n.$S)("track_targeting_keys",!1)},5332:(e,t,r)=>{r.d(t,{v:()=>o});class n{logger;permutive;id;segmentCode;triggerType;config;workspaceLevelConfig;prefix="[Activation]";constructor(e,t,r,n,i,a,o){this.logger=e,this.permutive=t,this.id=r,this.segmentCode=n,this.triggerType=i,this.config=a,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const r={reaction_id:this.id,type:e};this.permutive.track("Reaction",r,t),this.logger.log(this.prefix,r.type,r)}}var i=r(7802);const a={dfp:{dfp:[184515,184559,184848,192651,192658,192644,192643,192642,192639,196280,196255,196374,196377,196378,196379,196381,196382,196387,196389,196390,196686,196717,196718,196931,196935,196937,196963,197381,197383,197384,197385,197386,197387,201119,201121,201122,201128,201136,201500,202001,202003,202002,209525,216303,216342,216343,217353,216342,220122,220142,220156,221696,222367,222345,222290,222288,221818,221787,221770,221750,221807,221779,221774,221754,221746,232117,233923,233924,233926,234008,234259,234761,88584,183818,183817,183823,183825,183824,183822,183821,183819,189291,190608,188758,188755,188751,188750,188748,188747,188745,188744,188743,188741,188740,188738,189225,188737,190635,190626,190612,190496,190494,189228,189227,189223,189222,189220,189219,189218,189215,189168,189162,189158,189157,189147,189145,189217,189200,189164,193811,193810,195247,198074,198073,198072,198071,198070,198069,198068],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[88584,183819,183818,183817,183822,183825,183824,183823,183821,188755,190608,188758,188751,188750,188748,188747,188745,188744,188743,188741,188740,188738,188737,189220,189218,189215,189164,189157,190635,190626,190612,190496,190494,189228,189227,189225,189223,189222,189219,189200,189217,189168,189147,189162,189158,189145,193811,193810,193216,195247,198068,198074,198073,198072,198071,198070,198069,213836,184848,184559,192644,192651,192658,192639,192643,192642,196381,196382,196686,196717,196377,196374,197387,197386,197385,197384,197383,197381,196963,196937,196935,196931,196718,196390,196389,196387,196379,196378,201119,201121,201122,201128,201136,201500,202001,202003,202002,196280,217353,221818,220156,220122,222367,222345,222290,221807,221787,221779,221774,221770,221750,221746,222288,221754,221696,220142,232117,234008,234259],curation_platforms:{adv:["adv"]}};class o{logger;permutive;clientContext;constructor(e,t,r){this.logger=e,this.permutive=t,this.clientContext=r}getSpecializedActivations(e){return a[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,r=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(n=t).operator?n.criteria.every(r):n.criteria.some(r));var n}}},7802:(e,t,r)=>{r.d(t,{$S:()=>o,Hn:()=>i,MU:()=>a});const n={web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!1,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},freewheel:{auto_init:!0,activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]}},i=e=>{const t=n[e];return(e,r)=>(null==t?void 0:t[e])??r},a=i("web"),o=i("dfp");i("facebook_pixel_v2")},138:(e,t,r)=>{r.d(t,{J:()=>u});var n=r(2169),i=r(8236),a=r(7474);const o=e=>t=>class extends t{key=e;put(e){return this.db.then((t=>t.put(e,this.key))).then(n.Q1)}getIfPresent(){return this.db.then((e=>e.get(this.key))).then(i.ij)}reset(){return this.db.then((e=>e.delete(this.key)))}},s=e=>(0,n.zG)(class{db;constructor(e){this.db=Promise.resolve((0,a.E)(e.namespace,e.logger,e.consent))}},o(e));class u extends(s("permutive-unprocessed-pba")){constructor(e){super(e)}}},4267:(e,t,r)=>{r.d(t,{LP:()=>a,dG:()=>n,eP:()=>i});const n=4096,i=`Cookie exceeds maximum supported size of ${n} bytes for most browsers.`,a="Cookie is missing required parameters."},7062:(e,t,r)=>{r.d(t,{Eq:()=>p,X:()=>d,b:()=>l});var n=r(9519),i=r(3480),a=r(3689),o=r(229),s=r(3052),u=r(2169),c=r(8236);const l=()=>({continent:void 0,environment:"",events_count:0,os:"",sample_rate:0,sdk_version:"",segments_count:0,session_count:0,session_init_count:0,session_view_count:0,user_agent:""}),p=a.n_({continent:{equals:(e,t)=>e===t},environment:o.Eq,events_count:s.Eq,os:o.Eq,sample_rate:s.Eq,sdk_version:o.Eq,segments_count:s.Eq,session_count:s.Eq,session_init_count:s.Eq,session_view_count:s.Eq,user_agent:o.Eq}),d=e=>{const t=f(e.userId),r=(0,u.zG)(n.vP(e.userId,e.sessionId),n.UI((e=>{let[t,r]=e;return`${t},${r}`})),f),a=String(Math.random()),o=(0,u.zG)(e.sdkVariant,c.UI((e=>`-${e}`)),c.fS((()=>""))),s={environment:"web",events_count:0,os:m(window.navigator.userAgent||""),sample_rate:e.sampleRate,sdk_version:"v20.39.0"+o,segments_count:0,user_agent:window.navigator.userAgent||""};return(0,u.zG)(i.vP({session_count:t(e.sessionId),session_init_count:r(n.a9(a)),session_view_count:r(e.viewId)}),i.UI((0,u.ls)((t=>n.vP({...t,continent:(0,u.zG)(e.continent,n.UI(c.FS))})),n.UI((e=>({...s,...e}))))))},m=e=>{const t=e.toLowerCase();return t.includes("windows")?"windows":t.includes("iphone")||t.includes("ipad")?"ios":t.includes("android")?"android":t.includes("macintosh")?"macos":t.includes("linux")?"linux":"unknown"},f=e=>t=>i.dQ((r=>{let{previousState:i}=r;const c=(0,u.zG)(n.vP(e,t),n.Rp(function(e){if(null!==e&&"object"==typeof e&&"scope"in e&&"lastValue"in e&&"count"in e)return e;return{scope:"",lastValue:"",count:1}}(i),((e,t)=>{let[r,n]=t;return{scope:r,lastValue:n,count:r!==e.scope?1:n!==e.lastValue?e.count+1:e.count}})),n.D8(a.n_({scope:o.Eq,lastValue:o.Eq,count:s.Eq})));return{state:c,value:(0,u.zG)(c,n.UI((e=>e.count)))}}))},44:(e,t,r)=>{r.d(t,{p:()=>d});var n=r(5654),i=r(2169),a=r(3600),o=r(7062),s=r(9519),u=r(7812),c=r(132),l=r(2678),p=r(8586);const d=e=>{let t=e.context.current;(0,i.zG)(e.context,s.D8(o.Eq),s.Rp((0,i.bc)(o.b(),o.b()),((e,t)=>{let[,r]=e;return(0,i.bc)(r,t)})),(e=>e.onChange((e=>{let[r,n]=e;o.Eq.equals({...r,continent:void 0},{...n,continent:void 0})||m({beacon:!1}),t=n}))));const r="[Metrics Reporter]";let d=!0;const m=async a=>{let{beacon:o}=a;const s=t,p=(0,i.zG)(c.of(e.metrics.consume()),c.Y$((()=>d),(()=>{})),c.tS(u.EQ((()=>c.of(void 0)),(t=>c.Y3((()=>(async(t,r)=>{if(!t)return e.api.metrics(r);if(!e.api.metricsBeacon(r))throw new Error("Failed to send beacon.")})(o,{context:s,items:t})),(i=>{d=!1,function(){for(var t=arguments.length,n=new Array(t),i=0;i<t;i++)n[i]=arguments[i];e.logger.error(r,...n)}(`Failed to publish metrics ${(0,n.w)(i).message}`,t)}))))),l.UI(i.Q1));return p()},f=()=>{(0,p.HJ)((()=>m({beacon:!1}).finally((()=>f()))),5e3)};f(),(0,a.Bf)((()=>m({beacon:!0})),{capture:!1})}},7646:(e,t,r)=>{r.d(t,{u:()=>n});class n{trace;metrics;messages;_isRealtime=!1;_isReady=!1;constructor(e,t,r){this.trace=e,this.metrics=t,this.messages=r}isRealtime(){return this._isRealtime}isReady(){return this._isReady}setAsRealtime(e){const t=performance.now();this._isRealtime=!0,this.trace.measureSinceInit("sdk_realtime").finish(),this.messages.emit("permutive:realtime"),this.metrics.trackTimeSinceInit("sdk_realtime_targeting_set_task_duration_seconds",{},t),this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"sdk_realtime",time_origin:"sdk_init"},t),this.metrics.track({name:"sdk_user_segments_count",value:e,labels:{}})}setAsReady(){const e=performance.now();this._isReady=!0,this.trace.measureSinceInit("sdk_ready").finish(),this.messages.emit("permutive:ready"),this.metrics.trackTimeSinceInit("sdk_initialisation_task_duration_seconds",{},e),this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"sdk_ready",time_origin:"sdk_init"},e),window.performance&&window.performance.memory&&(this.metrics.track({name:"sdk_heap_memory_bytes_used",value:window.performance.memory.usedJSHeapSize,labels:{}}),this.metrics.track({name:"sdk_heap_memory_limit_fraction_used",value:window.performance.memory.usedJSHeapSize/window.performance.memory.jsHeapSizeLimit,labels:{}}))}}},6557:(e,t,r)=>{r.d(t,{a:()=>y});var n=r(2169),i=r(6450),a=r(229),o=(r(3226),i.dp,i.xb,function(e){return function(t){return Object.keys(t).sort(e.compare)}}),s=o(a.Df);i.dx,i.e$;i.Bu,i.P5,i.Su,i.UI;i.ri;function u(e){return i.vP(e)}i._r;i.jt;i.yW,i.G,i.t9;var c=i.HA,l=(i.nn,i.kp),p=i.CC,d=i.RF,m=(i.I8,i.mS,i.RJ,i._Y,i.V_),f=i.EW,_=i.nu,g=(i.SW,i.zV,i.Ub,i.vA,i.qS),v=(i.mK,function(e){return function(t){var r=o(e);return function(e,n){var i=r(e);if(0===i.length)return t.of({});for(var a=t.of({}),o=function(r){a=t.ap(t.map(a,(function(e){return function(t){return e[r]=t,e}})),n(r,e[r]))},s=0,u=i;s<u.length;s++){o(u[s])}return a}}});i.hX,i.DZ,i.uK,i.tV;i.oA,i.oh;var h="Record";i.Eh,i.uZ,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,i.nr,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df,a.Df;class y{config;localStorage;logger;permutiveData;cookies;externalData;constructor(e,t,r,n,i,a){this.config=e,this.localStorage=t,this.logger=r,this.permutiveData=n,this.cookies=i,this.externalData=a}async reset(){return this.logger.log("Resetting State"),(0,n.zG)(this.cookies.deleteCookie(this.config.cookieName),(e=>this.externalData.removeExternalData(this.config.cookieName)),(e=>s({_paols:!0,_papns:!0,_pcrdbs:!0,_pcrprs:!0,_pdfps:!0,_pfws:!0,_pnativo:!0,_prps:!0,_prubicons:!0,_psegs:!0,_psmart:!0,"permutive-id":!0,"permutive-loaded":!0,"permutive-prebid-rtd":!0,"permutive-prebid-id":!0,"permutive-events-cache":!0,_pssps:!0,_ppsts:!0}).forEach((e=>this.externalData.removeExternalData(e)))),(e=>this.permutiveData.reset()),(e=>Promise.all([this.localStorage.delete(this.config.permutiveDataMiscKey),this.localStorage.delete(this.config.permutiveDataQueriesKey)])),n.Q1)}}},6962:(e,t,r)=>{r.d(t,{u:()=>n});class n{permutiveData;permutiveReset;userId;viewId;logger;constructor(e,t,r,n,i){this.permutiveData=e,this.permutiveReset=t,this.userId=r,this.viewId=n,this.logger=i}getPermutiveData(e){return this.permutiveData.getData(e)}setPermutiveData(e,t){return this.permutiveData.setData(e,t)}getStateSizeInBytes(){return this.logger.warn("getStateSizeInBytes needs to be updated to reflect new event persistence"),this.permutiveData.getDataSize()}reset(){return this.permutiveReset.reset()}}},2352:(e,t,r)=>{r.d(t,{W:()=>n});class n{ref;constructor(e){this.ref=e}get(){return this.ref.current}}},7474:(e,t,r)=>{r.d(t,{E:()=>i});var n=r(4364);const i=(e,t,r)=>{const i=window.localStorage;return(0,n.rK)(i,"[Local Storage]",e,t,r)}},7719:(e,t,r)=>{r.d(t,{u:()=>i});r(8880);var n=r(4364);const i=(e,t,r)=>{const i=window.sessionStorage;return(0,n.rK)(i,"[Session Storage]",e,t,r)}},4364:(e,t,r)=>{r.d(t,{oP:()=>u,rK:()=>p});var n=r(5654),i=r(842),a=r(7144),o=r(2169),s=r(3258);class u{storage;namespace;constructor(e,t){this.storage=e,this.namespace=t}async put(e,t){const r=this.namespace.getNamespacedStorageKey(t.toString());return this.storage.setItem(r,JSON.stringify(e)),t}async get(e){const t=this.namespace.getNamespacedStorageKey(e.toString()),r=this.storage.getItem(t);return null===r?null:(0,i.A)(r)}async delete(e){const t=this.namespace.getNamespacedStorageKey(e.toString());this.storage.removeItem(t)}async deleteStore(){}}const c=e=>{const{logger:t,consent:r,prefix:n}=e,i=(e,r)=>(t.debug(`${n} Failed to write ${String(r)} as consent is revoked`),Promise.resolve(r));return e=>class extends e{put=(0,s.v)(super.put.bind(this),i,(()=>!r.current))}},l=e=>{const{logger:t,prefix:r,storage:i}=e;return e=>class extends e{isSupported=null;isStorageSupported(){return null!==this.isSupported||(this.isSupported=a.Y3((()=>{const e="_permutive_ls_test";return i.setItem(e,e),i.getItem(e),i.removeItem(e),!0}),n.w),(0,o.zG)(this.isSupported,a.EQ((e=>{t.warn(`${r} Is NOT supported`,e)}),(()=>{t.debug(`${r} Is supported`)})))),this.isSupported}async put(e,t){return(0,o.zG)(this.isStorageSupported(),a.EQ((e=>{throw e}),(()=>super.put(e,t))))}async get(e){return(0,o.zG)(this.isStorageSupported(),a.EQ((()=>null),(()=>super.get(e))))}async delete(e){return(0,o.zG)(this.isStorageSupported(),a.EQ(o.Q1,(()=>super.delete(e))))}async deleteStore(){return(0,o.zG)(this.isStorageSupported(),a.EQ(o.Q1,(()=>super.deleteStore())))}}},p=(e,t,r,n,i)=>new((0,o.zG)(u,l({logger:n,prefix:t,storage:e}),c({logger:n,consent:i,prefix:t})))(e,r)},9103:(e,t,r)=>{r.d(t,{SD:()=>d});var n=r(8236),i=r(7144),a=r(7812),o=r(6450),s=r(2169),u=r(9519),c=r(3600);const l={tradedesk:21,ddp:755,appnexus:32,pubmatic:76,neustar_fabrick:468},p="[TCF]",d=(e,t)=>{const[r,d,f]=(0,s.zG)(u.Ue(n.YP),(e=>{let[r,...i]=e;return[(0,s.zG)(r,u.bw(n.UI((e=>{t.debug(p,`Status "${e.type}"`,e)})))),...i]})),_=e.__tcfapi;if(_){const e=new Set(["tcloaded","useractioncomplete"]);_("addEventListener",2,((r,i)=>{i?"loaded"===r.cmpStatus&&e.has(r.eventStatus)&&(t.debug(p,"TCF API loaded",r),d(n.G({type:"loaded",data:r}))):(t.warn(p,"TCF API failed to register event listener"),d(n.G({type:"aborted"})),f())}))}else t.debug(p,"TCF API missing from the page"),d(n.G({type:"missing"})),f();const[g,v]=(0,s.zG)(u.gS(a.uZ()),(e=>{let[t,r]=e;return[t,(0,s.ls)(a.of,r)]}));return(0,s.zG)(u.vP(r,g),u.bw((e=>{let[r,a]=e;return(0,s.zG)(r,n.UI((e=>{const r=a();switch(t.debug(p,`Processing ${r.length} listeners`,r),e.type){case"missing":r.forEach((r=>{let[n,i]=r;t.debug(p,`Invoking ${n} as TCF API missing`),i(e)}));break;case"aborted":r.forEach((e=>{let[r]=e;t.debug(p,`Invoking ${r} skipped as TCF API aborted`)}));break;case"loaded":r.forEach((r=>{let[a,u]=r;(0,s.zG)(m(e.data),n.EQ((()=>{t.debug(p,`Invoking ${a} as GDPR does not apply`),u(e)}),(r=>(0,s.zG)((0,s.zG)(a,i.EQ((e=>n.G(e)),(e=>(0,s.zG)(l,o.P5(e))))),n.tS((e=>(0,s.zG)(r,o.P5(e.toString())))),n.UI((r=>{r?(t.debug(p,`${a} has consent`,{vendor:a}),u(e)):t.debug(p,`${a} does not have consent`,{vendor:a})}))))))}))}})))}))),{registerVendorOnValidConsent:(e,t)=>v([(0,s.zG)(e,i.DT((e=>"string"==typeof e),(()=>e))),t]),getStatusOrAbortOnTimeout:e=>new Promise((t=>{const i=setTimeout((()=>t({type:"aborted"})),e);(0,s.zG)(r,u.UI(n.UI((e=>{clearTimeout(i),t(e)}))))})).then((0,c.bw)((e=>t.debug(p,"TCF status resolved as",{status:e})))),tcfApiStatusRef:r}},m=e=>e.gdprApplies?n.G(e.vendor.consents):n.YP},6369:(e,t,r)=>{r.d(t,{C:()=>s});var n=r(9912),i=r(2169);r(4466),r(438);const a=(o=[[{name:"dfp",import:Promise.resolve().then(r.bind(r,7454))}],[],[],[],[],[],[],[],[],[],[],[],[],[{name:"freewheel",import:Promise.resolve().then(r.bind(r,9713))}],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[],[{name:"web",import:Promise.resolve().then(r.bind(r,1382))}],[],[],[],[]],(0,i.zG)((0,n.xH)(o),(0,n.u4)({},((e,t)=>({...e,[t.name]:t.import})))));var o;const s=e=>{const t=Object.entries(a).map((async t=>{let[r,n]=t;return e.logger.log(`Loading addon ${r}`),(await n).load(e)}));return Promise.all(t)}},8417:(e,t,r)=>{r.r(t),r.d(t,{createAddon:()=>I,getCachedDFPSegments:()=>S});var n=r(5654),i=r(7144),a=r(2169),o=r(8236),s=r(7812),u=r(9519),c=r(7802),l=r(3600);const p="_pdfps";r(4267);var d=r(9912),m=r(229);let f=!1;let _=null;const g=(e,t)=>{const{logger:r}=t;(0,a.zG)(e,o.UI((e=>{!0!==f&&e.pubadsReady&&(_??=n=>{let{slot:i}=n;const{getContentUrl:o}=i;if(!o||"function"!=typeof o)return;(0,a.zG)(o(),(0,m.pn)("&trunc=1"))&&(r.debug("DFP content URL has been truncated!"),(e=>{let{metrics:t,logger:r}=e;f||(t.track({name:"sdk_targeting_size_limit_exceeded_count",value:1,labels:{target:"dfp"}}),f=!0,r.debug("DFP has exceeded targeting limit"))})(t),_&&e.pubads().removeEventListener("slotRenderEnded",_),_=null)},e.pubads().addEventListener("slotRenderEnded",_))})))},v=(e,t,r,n)=>{const{logger:i}=t;g(e,t);(0,a.zG)(e,o.UI((e=>(e=>{e.cmd.push((()=>{const{getTargeting:t,setTargeting:a}=e.pubads(),o=t("permutive")||[],s=Object.values(r.eligibleSegments).map(String).concat(r.allSeenCloudCohorts).concat("rts"),u=(0,d.uK)((e=>s.includes(e))),{left:c}=u(o),l=n.concat(c).concat("rts");i.debug("DFP setting GPT targeting to",l),a("permutive",l)}))})(e))))};var h=r(7454);const y={liveSegments:[],cloudCohorts:[],allSeenCloudCohorts:[],eligibleSegments:{}},b={segments:y,getGAMKeyValues:()=>({permutive:""})},S=e=>e.getExternalJsonData(p)||[],w=(e,t,r)=>{const{logger:i,externalData:a,api:o}=t;let s=r.map(String).concat(y.cloudCohorts);i.debug("DFP is updating with targeting values",s),v(e,t,y,s);try{a.setExternalJsonData(p,s)}catch(e){const t=(0,n.w)(e),r="DFP failed to set data. Got:";i.error(r,t),o.reportError(`${r} ${t.message}`)}return((e,t)=>{let{api:r,logger:n}=e;(0,c.$S)("sync_segments_cookie",!1)?(n.debug("DFP syncing segment cookie _pdfps"),r.segmentSync({key:p,value:t})):n.debug("DFP sync segments cookie not enabled, skipping sync")})(t,JSON.stringify(s)),i.debug("DFP live segments updated to",r),r},I=async e=>{const{api:t,logger:r,activationManager:n,messages:c,externalData:d,nextGenOutput:m,userId:f,cookies:_}=e,g=await(0,l.a4)((()=>window.googletag),(()=>!!window.googletag),{waitTimeInMs:10,maxAttempts:200,exponentialBackOff:!1});o.Wi(g)&&r.error("[DFP]: unable to find google tag script on the page"),(0,a.zG)(g,o.UI((e=>(e=>e.cmd.push((()=>e.pubads().setTargeting("prmtvsdk","web"))))(e))));b.getGAMKeyValues=()=>({...(0,a.zG)((0,h.generateProjectSpecificKVs)(e),i.Vn((e=>{var r;return r=e,t.reportError(`[DFP] ${r}`,f.get()),e})),i.fS((()=>({})))),permutive:b.segments.liveSegments.join(",")}),y.eligibleSegments=(e=>{const t=e.getSpecializedActivations("dfp"),r={};for(const e of t.dfp)r[e]=e;for(const e of Object.keys(t.dfp_legacy)){const n=Number(e);r[n]=t.dfp_legacy[n]}return r})(n);const v=(0,a.zG)(m.queryLanguageCohorts.all,u.UI((e=>(r.debug("DFP received QL segments",{qlSegments:e}),((e,t)=>e.filter((e=>e in t)).map((e=>t[e])))(e,y.eligibleSegments)))),u.D8(l.cO)),S=m.activations.dfp??u.a9(s.bM()),I=(0,a.zG)(S,u.Rp(s.bM(),((e,t)=>[...new Set([...e,...t])])));return(0,a.zG)(u.vP(v,S,I),u.YP((0,l.Z_)(t,f,(t=>{let[n,i,a]=t;r.debug("DFP received updated cohorts",{filteredQlSegments:n,cloudCohorts:i}),y.cloudCohorts=i,y.allSeenCloudCohorts=a,y.liveSegments=w(g,e,n)})))),r.debug("DFP initialised with segments",y),(0,a.zG)(g,o.UI((e=>{e.secureSignalProviders=e.secureSignalProviders||[],e.secureSignalProviders.push({id:"permutive-secure-signal",collectorFunction:u.yY(m.addons.secureSignal)})}))),c.on("permutive:reset",(0,l.Z_)(t,f,(()=>{r.debug("DFP received 'permutive:reset' event"),d.removeExternalData(p),_.deleteCookie(p)}))),c.emit("permutive:dfp:ready"),b}},7454:(e,t,r)=>{r.r(t),r.d(t,{generateProjectSpecificKVs:()=>P,load:()=>d});var n=r(5654),i=r(7144),a=r(8236),o=r(2169),s=r(4963),u=r(7802),c=r(3600),l=r(8417);const p={},d=e=>{(0,u.Hn)("dfp")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["dfp",{}]}),window.googletag=window.googletag||{},window.googletag.cmd.push((()=>m(e)))},m=e=>{e.permutive.ready((0,c.Z_)(e.api,e.userId,(()=>I(e.metrics))),"realtime");E(e.externalData);(0,o.zG)(P(e),i.tS((e=>i.Y3((()=>(0,c.qh)(e).forEach((e=>{let[t,r]=e;googletag.pubads().setTargeting(t,r)}))),n.w))),i.Vn((t=>e.api.reportError(`[DFP:load], ${t}`,e.userId.get())))),y(e.permutive),googletag.cmd.push((()=>{b(e.permutive),S(e.permutive)})),window.addEventListener("message",_(e.permutive),!1)},f=e=>{let{advertiserId:t,campaignId:r,lineItemId:n,creativeId:i}=e;return{advertiser_id:(0,c.rH)(t),campaign_id:(0,c.rH)(r),line_item_id:(0,c.rH)(n),creative_id:(0,c.rH)(i)}},_=e=>t=>{try{const r=JSON.parse(t.data);if(!r.permutive_type||"google_ad_click"!==r.permutive_type)return;const{ad_unit_path:n,creative_id:i,advertiser_id:a,order_id:o,line_item_id:s}=(null==r?void 0:r.data)??{},u=f({lineItemId:s,advertiserId:a,campaignId:o,creativeId:i});let c;Object.keys(p).some((e=>{const{slot:t,creative_id:r}=p[e];if((null==t?void 0:t.ad_unit_path)===n&&r===u.creative_id)return c=p[e],!0})),c=c??{...u,is_empty:!1},g(e,c)}catch{}},g=(e,t)=>{s.PH&&t&&e.track("SlotClicked",t)},v={},h=(e,t,r)=>{p[t]=r,w(e,r),v[t]&&v[t](),v[t]=G(e,t)},y=e=>{const t=googletag.pubadsReady&&googletag.pubads().getSlots();t&&t.forEach((t=>{const r=t.getResponseInformation();if(!r)return;const n={...f(r),is_empty:!1,service_name:"publisher_ads",slot:k(t)},i=t.getSlotElementId();h(e,i,n)}))},b=e=>{googletag.pubads().addEventListener("slotRenderEnded",(t=>{const r={...f(t),is_empty:t.isEmpty,service_name:t.serviceName,slot:k(t.slot)};if(t.size){const[e,n]=t.size;"number"==typeof e&&"number"==typeof n&&(r.width=e,r.height=n)}const n=t.slot.getSlotElementId();h(e,n,r)}))},S=e=>{s.EW&&googletag.pubads().addEventListener("impressionViewable",(t=>{let{slot:r,serviceName:n}=t;const i=r.getResponseInformation();if(!i)return;const a={...f(i),service_name:n,slot:k(r)};e.track("SlotViewable",a)}))},w=(e,t)=>{if(!s.CL)return;var r;r={...t,rendered_timestamp:Date.now()},e.track("SlotRendered",r)},I=e=>{let t=0;const r=googletag.pubadsReady&&googletag.pubads().getSlots();r&&r.forEach((e=>e.getResponseInformation()&&t++));const n=0===t?"sdk_targeting_realtime_success_count":"sdk_targeting_realtime_fail_count";e.track({name:n,value:1,labels:{target:"dfp"}})},E=e=>{const t=(0,l.getCachedDFPSegments)(e);googletag.cmd.push((()=>{const{getTargeting:e,setTargeting:r}=googletag.pubads(),n=e("permutive")||[];r("permutive",[...new Set([...t.map(String),...n])])}))},k=e=>{const t={ad_unit_path:e.getAdUnitPath(),slot_element_id:e.getSlotElementId()};return s.jH?{...t,...(()=>{const t={},r=[];let n=[];const i=(e,i)=>{const a="slot"===e?e=>t[e]=1:()=>{},o=i.getTargetingKeys();n=o;for(let o=0;o<n.length;o++){const s=n[o];if(void 0!==t[s]&&"service"===e)continue;const u=[],c=i.getTargeting(s);for(let e=0;e<c.length;e++)u.push(c[e].toString());u.length>0&&(a(s),r.push({key:s,value:u}))}};return i("slot",e),i("service",googletag.pubads()),{targeting_keys:r}})()}:t},G=(e,t)=>{let r=[];const n=()=>(0,o.zG)((0,o.bc)((0,o.zG)(a.Y3((()=>document.getElementById(t))),a.tS(a.ij),a.tS(a.KQ((e=>e.querySelector("iframe"))))),a.ij(document.activeElement)),a.RD,a.UI((r=>{let[n,i]=r;"hidden"===document.visibilityState&&n===i&&g(e,p[t])})));return document.addEventListener("visibilitychange",n),r.push((()=>document.removeEventListener("visibilitychange",n))),()=>{r.forEach((e=>e())),r=[]}},P=e=>{let{userId:t,viewId:r}=e;return i.Y3((()=>({})),n.w)}},1382:(e,t,r)=>{r.r(t),r.d(t,{WebAddon:()=>w,load:()=>S});var n=r(5654),i=r(7144),a=r(2169),o=r(3052),s=r(8236),u=r(856),c=r(4963),l=r(7802),p=r(3600);const d=(0,l.MU)("add_alchemy_entities",!1),m=(0,l.MU)("add_alchemy_taxonomy",!1);function f(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return{...e&&m?{taxonomy_labels:"$alchemy_taxonomy_labels"}:{},...e&&d?{entity_names:"$alchemy_entity_names"}:{}}}function _(e,t,r,n){const i={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",...g(),...e,...t};r.track("Pageview",i).then((e=>{e&&n.emit("permutive:event:pageview",e)}))}function g(){return{}}var v=r(8586);const h=["mousemove","click","scroll"],y=["email","tel","submit","reset","button","file","password","radio","checkbox"],b=["email","e-mail","password","tel","telephone","phone","name_first","name_last","sa_zip"],S=e=>{(0,l.Hn)("web")("auto_init",!1)&&e.q.push({functionName:"addon",arguments:["web",{auto_init:!0}]})};class w{permutive;options;api;clientContext;logger;dirtyState=!1;cancelEngagementTimer=()=>{};totalCompletion=0;totalEngagedTime=0;pageEngagementDetected;cleanupPageEngagementDetection=a.Q1;constructor(e){this.permutive=e.permutive,this.options=e,this.api=e.api,this.clientContext=e.clientContext,this.logger=e.logger,this.options.customProperties.setCustomProps(e.page||{});this.pageEngagementDetected=(()=>{this.dirtyState=!0}).bind(this),_(f(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),this.enablePageEngagementDetection(),"loading"!==document.readyState?this.attachListeners():window.addEventListener("DOMContentLoaded",this.attachListeners.bind(this),!1),c.t2&&(this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}sendFormSubmissionEvent(e){{const t=e.currentTarget,r={form:{method:t.method||"GET",properties:this.serializeForm(t),..."string"==typeof t.id?{id:t.id}:{},...t.name&&"string"==typeof t.name?{name:t.name}:{},...t.action&&"string"==typeof t.action?{action:t.action}:{}}};this.permutive.track("FormSubmission",r)}}async trackEngagementInterval(e){const t=this.updateState(e);!function(e,t,r,n,i,a){const o={isp_info:"$ip_isp_info",geo_info:"$ip_geo_info",engaged_time:e,total_engaged_time:t,...i,completion:r,total_completion:n};a.track("PageviewEngagement",o)}(t.engaged_time,t.total_engaged_time,t.completion,t.total_completion,this.options.customProperties.getCustomProps(),this.permutive)}async reset(e){this.disablePageEngagementDetection(),this.dirtyState=!1;const t=this.updateWebOptions(e);this.options.pageviewState.setState(((e,r)=>{var n,i;return{viewId:(null===(n=t.context)||void 0===n?void 0:n.view_id)??(0,p.k$)(),watsonEnabled:(null===(i=t.watson)||void 0===i?void 0:i.enabled)??r.watsonEnabled}})),this.totalCompletion=0,this.totalEngagedTime=0,this.options.customProperties.setCustomProps(this.options.page||{}),this.enablePageEngagementDetection(),_(f(this.clientContext.getContext().isArticle),this.options.customProperties.getCustomProps(),this.permutive,this.options.messages),c.t2&&(this.cancelEngagementTimer(),this.cancelEngagementTimer=this.registerEngagementInterval(this.getEventInterval()))}serializeForm(e){return[...e.getElementsByTagName("input")].filter((e=>!(!e.type||!e.id||e.disabled||e.checked||"fieldset"===e.nodeName.toLowerCase()||-1!==y.indexOf(e.type.toLowerCase())||-1!==b.indexOf(e.name.toLowerCase())))).map((e=>({name:e.name||e.id,value:e.value}))).filter((e=>e.value.length<120))}registerEngagementInterval(e){return(0,v.UM)((()=>{this.dirtyState&&this.trackEngagementInterval(e)}),1e3*e)}attachListeners(){const e=e=>"a"===e.tagName.toLowerCase(),t=e=>e instanceof Element,r=t=>e(t)?(0,s.G)(t):t.parentElement?e(t.parentElement)?(0,s.G)(t.parentElement):r(t.parentElement):s.YP;c.eV&&[].slice.call(document.getElementsByTagName("form"),0).forEach((e=>e.addEventListener("submit",(0,a.ls)(s.DT(this.canTrackPermutiveEvent("FormSubmission")),s.UI((0,p.Z_)(this.options.api,this.options.userId,this.sendFormSubmissionEvent.bind(this)))))));(0,l.MU)("track_link_click",!0)&&document.body.addEventListener("click",(0,a.ls)(s.DT(this.canTrackPermutiveEvent("LinkClick")),s.UI((e=>({event:e,anchor:(0,a.zG)(e.target,s.ij,s.tS(s.DT(t)),s.tS(r))}))),s.DZ((e=>{let{event:t,anchor:r}=e;return s.pC(r)?s.G({event:t,anchor:r.value}):s.YP})),s.UI((e=>{let{event:t,anchor:r}=e;return I(this.permutive,r,(n=t,!("_blank"===r.target||n.metaKey||n.ctrlKey||n.shiftKey||2===n.which||3===n.which)));var n}))),{capture:!0})}updateState(e){const t=Math.max(this.totalCompletion,this.getCurrentCompletion()),r=t-this.totalCompletion;return this.totalEngagedTime+=e,this.totalCompletion=t,this.dirtyState=!1,{engaged_time:e,total_engaged_time:this.totalEngagedTime,completion:r,total_completion:this.totalCompletion}}getCurrentCompletion(){if("function"==typeof this.options.getPageCompletion)return(0,a.zG)((0,i.Y3)((0,a.ls)(this.options.getPageCompletion,Number,(e=>isNaN(e)?0:e),(0,u.uZ)(o.Df)(0,1)),n.w),(0,i.EQ)((e=>(this.logger.warn("Web: invoking getPageCompletion threw an error. Got",e),0)),(e=>(this.logger.debug("Web: invoking getPageCompletion returned",e),e))));return(()=>{const e=document.documentElement.scrollHeight,t=window.pageYOffset+window.innerHeight;return t<=0?0:t>=e?1:t/e})()}registerPageEngagementCleanup(e){"function"==typeof e?this.cleanupPageEngagementDetection=()=>(0,i.Y3)((()=>{e(),this.cleanupPageEngagementDetection=a.Q1}),(e=>this.logger.warn("Page detection cleanup threw an error",(0,n.w)(e)))):this.logger.warn("No page detection cleanup was registered")}enablePageEngagementDetection(){this.options.addPageEngagementDetection&&(0,a.zG)(this.options.addPageEngagementDetection(this.pageEngagementDetected),(e=>this.registerPageEngagementCleanup(e))),this.setDirtyEventListenersTo(!0,this.getDirtyEvents())}disablePageEngagementDetection(){this.cleanupPageEngagementDetection(),this.setDirtyEventListenersTo(!1,this.getDirtyEvents())}setDirtyEventListenersTo(e,t){const r=e?window.addEventListener:window.removeEventListener;return t.forEach((e=>r(e,this.pageEngagementDetected))),null}getDirtyEvents(){return this.options.dirtyEvents||h}getEventInterval(){return this.options.eventInterval||5}canTrackPermutiveEvent(e){return t=>{var r,o;return(0,a.zG)(null===(r=this.options)||void 0===r||null===(o=r.filterPermutiveEvent)||void 0===o?void 0:o[e],s.DT((e=>"function"==typeof e)),s.tS((0,a.ls)((e=>i.Y3((()=>e(t)),(e=>new Error(`Threw an unexpected error: ${(0,n.w)(e)}`)))),i.tS(i.DT((e=>"boolean"==typeof e),(()=>new Error("Did not return a boolean")))),(0,p.bw)(i.Vn((t=>this.logger.error(`Filter predicate for "${e}" event failed`,t)))),s.Uo)),s.fS((()=>!0)))}}updateWebOptions(e){(0,p.Kn)(e)||(e={}),e.watson&&"object"==typeof e.watson&&"enabled"in e.watson&&"boolean"==typeof e.watson.enabled||delete e.watson,"object"==typeof e.filterPermutiveEvent&&null!==e.filterPermutiveEvent||delete e.filterPermutiveEvent,"context"in e&&!(0,p.Kn)(e.context)&&delete e.context;const t={addPageEngagementDetection:void 0,context:void 0,dirtyEvents:void 0,eventInterval:void 0,filterPermutiveEvent:void 0,getPageCompletion:void 0,page:void 0,watson:void 0};return this.options={...this.options,...t,...e}}}const I=(e,t,r)=>{if(window.location.href&&t.href){const n=0===t.href.indexOf("data:")?"NOT_URL":t.href;e.track("LinkClick",{dest_url:n},{useBeacon:r})}}},1324:(e,t,r)=>{r.d(t,{a:()=>n});class n{messages;handlers={};messageQueue={};constructor(e){var t,r;this.messages=e;null===(t=(r=window).addEventListener)||void 0===t||t.call(r,"message",(e=>{var t;"permutive"===(null==e||null===(t=e.data)||void 0===t?void 0:t.origin)&&this.handle(e)}),!1),this.messages.once("permutive:api:ready",(function(){var e,t;null===(e=(t=window).postMessage)||void 0===e||e.call(t,{origin:"permutive",type:"sdk-init"},"*")}))}listen(e,t){if(e in this.handlers||(this.handlers[e]=[]),this.handlers[e].push(t),e in this.messageQueue){const t=this.messageQueue[e];if(void 0===t)return;for(let e=0;e<t.length;e++){const r=t[e];this.handle(r)}}}handle(e){if(e.data.type in this.handlers)this.handlers[e.data.type].forEach((t=>{t(e)}));else{(this.messageQueue[e.data.type]??=[]).push(e)}}}},6408:(e,t,r)=>{r.d(t,{o:()=>n,s:()=>i});class n extends Error{static errorName="NetworkRequestFailedError";name=n.errorName;constructor(){super(n.defaultMessage)}static get defaultMessage(){return"Network request failed"}}class i extends Error{static errorName="NetworkRequestTimeoutError";name=i.errorName;constructor(){super(i.defaultMessage)}static get defaultMessage(){return"Network request timed out"}}},705:(e,t,r)=>{r.d(t,{F:()=>p});var n=r(5654),i=r(2169),a=r(8236),o=r(7812),s=r(4793),u=r(6408),c=r(4694);class l{urls;config;network;metricsCollector;logger;webClient;prefix="[API]";constructor(e,t,r,n,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>a.YP;this.urls=e,this.config=t,this.network=r,this.metricsCollector=n,this.logger=i,this.webClient=o}async reportError(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const l=(0,n.w)(e);if(this.logError("Reporting error:\n",l),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const p=(0,i.zG)(this.webClient,c.UI(a.fS((()=>{var e,t,r,n;return{domain:(null===(e=self.location)||void 0===e?void 0:e.hostname)??"",referrer:"document"in self?null===(t=self.document)||void 0===t?void 0:t.referrer:"",url:(null===(r=self.location)||void 0===r?void 0:r.href)??"",user_agent:(null===(n=navigator)||void 0===n?void 0:n.userAgent)??""}}))),c.UI((e=>{var n,i;const a={error_message:(null==l||null===(n=l.message)||void 0===n?void 0:n.toString())??"",stack_trace:null==l||null===(i=l.stack)||void 0===i?void 0:i.split("\n")},o=t?{user_id:t}:{};return{platform:"web",sdk_version:"v20.39.0",ql_runtime_version:"v14.1.0",timestamp:r,domain:e.domain,url:(0,s.bk)(e.url),referrer:(0,s.bk)(e.referrer),user_agent:e.user_agent,error_message:a.error_message??String(l),stack_trace:a.stack_trace,...o}}))),d=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",a.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),m=e=>{this.metricsCollector.trackCounter({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};await(0,i.zG)([u.o,u.s],o.Ew((e=>l.name===e.errorName||l.message.indexOf(e.errorName)>=0||l.message.indexOf(e.defaultMessage)>=0)),a.g_((()=>{const e=p();return d(e).catch((0,i.ls)(n.w,(e=>this.logError(e))))}),(async e=>m(e.errorName))))}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}class p extends l{identifyPromise;identify(e,t,r){const n=()=>this.reqWithMetrics(e,"sdk_http_identify_seconds",{url:this.urls.getEndpointUrl("/identify",a.G(this.config.apiVersion)),method:"POST",payload:{user_id:t.get(),aliases:r},contentType:"text/plain",dataType:"json",withCredentials:!0});return this.identifyPromise?this.identifyPromise=this.identifyPromise.then(n):this.identifyPromise=n()}metrics(e){return this.network.req({url:this.urls.getEndpointUrl("/internal/metrics",a.G(this.config.apiVersion)),method:"POST",payload:e,contentType:"text/plain",dataType:"text",withCredentials:!1})}metricsBeacon(e){return this.network.reqWithBeacon({url:this.urls.getEndpointUrl("/internal/metrics",a.G(this.config.apiVersion)),payload:e})}reset(e){return this.reqWithMetrics(e,"sdk_http_reset_seconds",{url:this.urls.getEndpointUrl("/reset",a.G(this.config.apiVersion)),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}segmentSync(e){return this.network.req({url:`https://${this.config.segmentSyncApiHost}/sync/${e.key}`,method:"POST",payload:`value=${encodeURIComponent(e.value)}`,contentType:"application/x-www-form-urlencoded",dataType:"json",withCredentials:!0})}appnexus(e){return this.network.req({url:e,method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}pxid(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!0,timeout:2e3})}queries(){const e={addons:{dfp:{activations:{dfp:[],dfp_legacy:{}},auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!1,track_slot_clicked:!1,track_targeting_keys:!1,sync_segments_cookie:!1},web:{auto_init:!1,track_pageview_engagement:!0,track_pageview_complete:!0,track_form_submission:!1,track_link_click:!1,engagement_edge_only:!0,segment_transition_edge_only:!1}},queries:{queries:{},eventSegments:{},eventsLookup:[],literalsLookup:[],subexpressionsLookup:[],stateSyncReplays:[],propertiesLookup:[],ahoCorasickLookup:[]},queries_metadata:{}},t=`${this.config.cdnBaseUrl.startsWith("dev.local:")?"http":"https"}://${this.config.cdnBaseUrl}/queries/6adbc4e9-beda-4b9e-9117-43ec3a80e1d0-amp.json`;return this.network.req({url:t,withCredentials:!1,dataType:"json",method:"GET"}).catch((()=>e))}pxidReset(e){return this.network.req({url:this.urls.makeAuthenticatedUrl(e),method:"POST",payload:null,contentType:"text/plain",dataType:"json",withCredentials:!0})}uploadCohortMemberships(e,t){return this.reqWithMetrics(e,"sdk_http_upload_cohort_memberships_seconds",{url:this.urls.getCCSCohortMembershipEndpointUrl("/amp/cohorts",a.G("alpha"),[["i",t.user_id]]),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1})}reqWithMetrics(e,t,r){const n=e.startTimer(t,{});return this.network.req(r).then((r=>(0,i.zG)(e.stopTimer(t,n),(e=>r))))}}},508:(e,t,r)=>{r.d(t,{E:()=>y});var n=r(7144),i=r(2169),a=r(6408),o=r(8586),s=r(8236),u=r(8614),c=function(e){return"Left"===e._tag},l=function(e){return"Right"===e._tag};function p(e){return{_tag:"Left",left:e}}function d(e){return{_tag:"Right",right:e}}function m(e,t){return{_tag:"Both",left:e,right:t}}var f=function(e,t,r){return function(n){switch(n._tag){case"Left":return e(n.left);case"Right":return t(n.right);case"Both":return r(n.left,n.right)}}},_=f;_(d,p,(function(e,t){return m(t,e)}));var g=d,v="These",h=(i.yR,i.yR,u.Xl,r(3600));class y{metrics;constructor(e){this.metrics=e}req(e){return this.reqImpl(e).then((e=>(0,i.MZ)(e)))}reqWithBeacon(e){var t,r;let{url:n,payload:i}=e;const a=JSON.stringify(i),o=(null===(t=navigator)||void 0===t||null===(r=t.sendBeacon)||void 0===r?void 0:r.call(t,n,JSON.stringify(i)))??!1;return this.trackRequestMetrics({is_beacon:!0,is_error:!o,request:{method:"POST",url:n,content_length:a.length}}),o}reqImpl(e){const t="arraybuffer",{url:r,dataType:c,contentType:l,method:p,withCredentials:f,timeout:_}=e;return new Promise(((g,v)=>{const y=new XMLHttpRequest,b="POST"===e.method?"string"==typeof(S=e.payload)?S:JSON.stringify(S):null;var S;const w=e=>this.trackRequestMetrics({is_beacon:!1,request:{method:p,url:r,content_length:(null==b?void 0:b.length)??0},response:e});y.onload=(0,o.GL)((()=>{var e,r;return(0,i.zG)(y.status,n.DT((e=>e<400),(()=>{const e="text"===y.responseType||""===y.responseType?y.responseText:"Couldn't access response text";return`Failed ajax request. Status code was ${y.status}. ${e}`})),n.tS((()=>"json"===c?y.responseText?n.Y3((()=>JSON.parse(y.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(y.responseText)}. Got ${e}`)):n.F2(null):"text"===c?n.F2(y.responseText):n.F2(y.response))),(0,h.bw)((0,i.ls)(s.IS,(r={content_length:"text"===y.responseType||""===y.responseType?(null===(e=y.responseText)||void 0===e?void 0:e.length)??0:y.responseType===t?y.response.byteLength:0,response_time_ms:self.performance.now()-I,status_code:y.status},function(e){return u.Wi(e)?d(r):m(e.value,r)}),w)),n.EQ(v,g))})),y.onerror=(0,o.GL)((()=>{w(n.t$("network error")),v(new a.o)})),y.ontimeout=(0,o.GL)((()=>{w(n.t$("timeout")),v(new a.s)})),y.open(p,r,!0),l&&y.setRequestHeader("content-type",l),y.timeout=_||y.timeout,y.withCredentials=f||y.withCredentials,y.responseType="binary"===c?t:y.responseType;const I=self.performance.now();y.send(b)}))}trackRequestMetrics(e){var t;if(null===(t=this.metrics)||void 0===t||!t.isEnabled())return;const r=new URL(e.request.url).pathname;if(r.includes("metrics"))return;const n=t=>this.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:e.request.method,request_path:r,request_content_length:e.request.content_length,...t}});var a;!0===e.is_beacon?n({is_beacon:!0,is_error:e.is_error}):(0,i.zG)((a=e.response,c(a)?u.YP:(l(a),u.G(a.right))),s.aD((()=>({})),(e=>({response_content_length:e.content_length,response_status:e.status_code,response_time_ms:e.response_time_ms}))),(t=>({is_beacon:!1,is_error:!l(e.response),...t})),n)}}},9491:(e,t,r)=>{r.r(t),r.d(t,{startMaster:()=>ce});var n=r(9519),i=r(2169),a=r(3480),o=r(8236),s=r(7812),u=r(3600),c=r(4694),l=r(6450),p=r(2945),d=r(4327),m=r(6377);var f=r(2678),_=r(6335),g=r(6289),v=r(7049);function h(e,t){return function(r){return e.map(r,t.compact)}}function y(e,t,r){var n=h(e,t),a=(0,g.UI)(e,r);return function(e){return v.s4(n((0,i.zG)(e,a(o.IS))),n((0,i.zG)(e,a(o.EK))))}}function b(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filter(e,r)}))}}}function S(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filterMap(e,r)}))}}}function w(e,t){var r=b(e,t);return function(e){var t=r((0,d.ff)(e)),n=r(e);return function(e){return(0,v.s4)(t(e),n(e))}}}function I(e,t){var r=S(e,t);return function(e){return function(t){return(0,v.s4)((0,i.zG)(t,r((function(t){return(0,o.IS)(e(t))}))),(0,i.zG)(t,r((function(t){return(0,o.EK)(e(t))}))))}}}var E=r(8614);function k(e){return(0,i.ls)(o.G,e.of)}function G(e){return(0,i.a9)(e.of(o.YP))}function P(e){return function(t){return e.map(t,o.G)}}function U(e){return(0,i.ls)(o.ij,e.of)}function x(e){var t=U(e);return function(e){return(0,i.ls)(e,t)}}function D(e){var t=L(e),r=x(e);return function(e){return t(r(e))}}function z(e){return function(t){return(0,i.ls)(t,e.of)}}function T(e){var t=L(e),r=z(e);return function(e){return t(r(e))}}function C(e){return function(t){return function(r){return e.of(o.DT(t)(r))}}}function A(e){return(0,i.ls)(o.Uo,e.of)}function M(e){return function(t,r){return function(n){return e.map(n,o.EQ(t,r))}}}function O(e){return function(t,r){return function(n){return e.chain(n,o.EQ(t,r))}}}function q(e){return function(t){return function(r){return e.chain(r,o.EQ(t,e.of))}}}function R(e){return(0,g.UI)(e,o.dO)}function F(e){return(0,p.ap)(e,o.G5)}function L(e){var t=G(e);return function(r){return function(n){return e.chain(n,o.EQ((function(){return t()}),r))}}}function B(e){var t=k(e);return function(r){return function(n){return e.chain(n,o.EQ(r,t))}}}var $=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))},j=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},N=k(f.PM),Q=(f.PM,f.of,f.PM,f.dO,f.UI(o.Uo)),Y=(f.dO,f.qo,f.UA,f.PM,function(e){return function(){return $(void 0,void 0,void 0,(function(){return j(this,(function(t){switch(t.label){case 0:return t.trys.push([0,2,,3]),[4,e().then(E.G)];case 1:return[2,t.sent()];case 2:return t.sent(),[2,E.YP];case 3:return[2]}}))}))}}),K=(f.PM,f.UA,f.PM,f.UA,R(f.dO)),W=F(f.Hi),H=N,V=L(f.UA),Z=(f.UA,f.PM,f.dO,o.Ri,f.dO,o.Ri,o.dO,f.dO,o.xu,f.dO,o.xu,f.dO,o.xu,f.dO,o.xu,function(e,t){return(0,i.zG)(e,K(t))}),J=function(e,t){return(0,i.zG)(e,W(t))},X=function(e,t){return(0,i.zG)(e,V(t))},ee="TaskOption",te={URI:ee,map:Z},re={URI:ee,map:Z,ap:J,chain:X},ne=(E.F4,(0,g.YO)(te)),ie=(0,_.a)(re),ae=(E.Xl,r(8586)),oe=r(3643);const se=(e,t)=>{const[r,a]=n.gS(s.uZ());return(0,i.zG)(t,n.UI(c.UI((t=>{s.Od(t)&&e.all().then((e=>(0,i.zG)(t,s.UI((0,oe.H5)((()=>e))),a)))}))),n.UI((e=>e()))),r},ue=(e,t)=>{let r=!1;return n.UI(c.UI((0,u.bw)((n=>{r||(r=(0,i.zG)(n,s.G((e=>{let[,t]=e;return"Pageview"===t.name}))),r&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:t,time_origin:"sdk_init"}))}))))};function ce(e){let{eventsCacheFactory:t,metrics:_,trace:g,migratedStateMaps:v,worker:h,...y}=e;return e=>a.dQ((0,i.ls)((0,u.rO)({previousState:le}),(a=>{let{stopped:u,previousState:b}=a;(0,i.zG)(u,n.YP((e=>e&&h.stop()))),h.send({...y,migratedStateMaps:b.stateMigrated?{external:o.YP,internal:o.YP}:v(),previousState:b.workerState}),g.measureSinceInit("post_worker_config_duration").finish(),_.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_sent_worker_config",time_origin:"sdk_init"},performance.now());const S=g.startSpan("worker_config_response_duration"),w=h.next();w.then((()=>{S.finish(),_.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_received_worker_config_response",time_origin:"sdk_init"},performance.now())}));const I=((e,t)=>{const a=(0,i.zG)((()=>t),f.UI((e=>o.lo(!e))),V((()=>Q(e()))),ne("eventsCache"),ie("eventsCacheService",(()=>(0,i.zG)((0,ae.N1)(Y((()=>Promise.resolve().then(r.bind(r,757))))),K((e=>e.eventCacheService)))))),u=a();return e=>{let{priorCachedEventsRequests:t,...r}=e;return e=>{let{previousState:a,stopped:l}=e;const p=n.a9(c.of(s.bM())),[d,m]=n.Ue({eventsToPublish:n.a9(c.of(s.bM())),priorCachedEventsResponses:p,state:n.a9(a)});return u.then(o.EQ((()=>m({eventsToPublish:r.eventsToPublish,priorCachedEventsResponses:p,state:n.a9(void 0)})),(e=>{let{eventsCache:n,eventsCacheService:i}=e;const{state:o,value:{newEvents:s}}=i({eventsCache:n,newEvents:r.eventsToPublish})({previousState:a,stopped:l});m({eventsToPublish:s,priorCachedEventsResponses:se(n,t),state:o})}))),{state:(0,i.zG)(d,n.VS((e=>e.state))),value:(0,i.bc)((0,i.zG)(d,n.VS((e=>e.priorCachedEventsResponses))),{...r,eventsToPublish:(0,i.zG)(d,n.VS((e=>e.eventsToPublish)))})}}}})(t,w.then((e=>e.eventsCachedInWorker)));return(0,i.zG)((()=>h.read()),function(e,t){const r=e=>(0,i.zG)(e,l.Hd((e=>e in t)),(e=>{let{left:t,right:r}=e;return{buffers:r,nonBuffers:t}}));return a=>{const{buffers:o,nonBuffers:s}=r(e),[u,c]=n.Ue({...s,...(0,i.zG)(o,l.Su((e=>()=>{const r=o[e];return o[e]=t[e].empty,r})))});return(async()=>{for(;;){const e=(0,i.zG)(await a(),m.UI(r),m.ur({concat:(e,r)=>({nonBuffers:{...e.nonBuffers,...r.nonBuffers},buffers:(()=>{const n={...e.buffers};for(const e in r.buffers)n[e]=e in n?t[e].concat(n[e],r.buffers[e]):r.buffers[e];return n})()})})),n=(0,i.zG)(e.buffers,l.Su(((e,r)=>(o[e]=t[e].concat(o[e],r),()=>{const r=o[e];return o[e]=t[e].empty,r}))));c({...u.current,...e.nonBuffers,...n})}})(),(0,i.zG)(e,l.Su((e=>(0,i.zG)(u,n.UI((t=>t[e]))))))}}({activations:b.activations,cohorts:b.cohorts,context:{},eventsToPublish:s.cS,eventsToPublishOnPageUnload:s.cS,externalData:{},geoIP:o.YP,metrics:s.cS,priorCachedEventsRequests:s.cS,realtime:!1,state:b.workerState,transitionsSinceInit:{segmentsEntered:s.cS,segmentsExited:s.cS},workerStateFlushed:!1,stateMigratedThisInitialisation:!1,secureSignal:o.YP},{eventsToPublish:s.uZ(),metrics:s.uZ(),priorCachedEventsRequests:s.uZ()}),(e=>{let{metrics:t,...r}=e;return t.onChange((e=>e().forEach((e=>_.track(e))))),r}),(t=>{let{workerStateFlushed:r,stateMigratedThisInitialisation:a,activations:m,cohorts:f,state:g,secureSignal:v,...y}=t;const{value:[S,w],state:E}=I(y)({stopped:u,previousState:b.masterEventsCache});return function(e,t,r){const a=(0,i.zG)(n.vP(t),n.UI((0,i.ls)(l.UI((e=>"function"==typeof e?e:c.of(e))),(0,p.Yt)(c.G5))));let s=a.current();e(s),(0,i.zG)(a,n.YP((t=>{const n=t(),a=(0,i.zG)(n,l.z7(((e,t)=>{var n;return t!==s[e]&&(null===(n=r[e])||void 0===n||!n.isEmpty(t))})),o.DT((0,d.ff)(l.xb)));o.pC(a)&&(s={...s,...a.value},e(a.value))})))}(h.send,{consent:e.consent,contextualCohorts:e.contextualCohorts,enrichmentReplacementMap:e.enrichmentReplacementMap,eventSourceId:e.eventSourceId,identities:e.identities,userId:e.userId,userIdIsNewlyGenerated:e.userIdIsNewlyGenerated,newEvents:(0,i.zG)(e.newEvents,ue(_,"pageview_sent_to_worker")),sessionId:e.sessionId,viewId:e.viewId,webClient:e.webClient,pageviewState:e.pageviewState,priorCachedEventsResponses:S},{newEvents:{isEmpty:s.xb},priorCachedEventsResponses:{isEmpty:s.xb}}),_.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"master_sent_worker_input",time_origin:"sdk_init"},performance.now()),{state:n.vP({activations:m,cohorts:f,masterEventsCache:E,workerState:g,stateMigrated:(0,i.zG)(n.vP(r,a),n.Rp(b.stateMigrated,((e,t)=>{let[r,n]=t;return e||r&&n})))}),value:{...w,stateMigratedThisInitialisation:a,activations:{dfp:n.UI((e=>e.dfp),m),xandr_ssp:n.UI((e=>e.xandr_ssp),m)},cohorts:{all:n.UI((e=>e.all),f),ql:n.UI((e=>e.ql),f),qlCustom:n.UI((e=>e.qlCustom),f),qlStandard:n.UI((e=>e.qlStandard),f)},secureSignal:v}}}))})))}const le=e=>_e(e)?{activations:pe(e.activations),cohorts:me(e.cohorts),masterEventsCache:e.masterEventsCache,workerState:e.workerState,stateMigrated:!!e.stateMigrated}:{activations:pe(null),cohorts:me(null),masterEventsCache:null,workerState:null,stateMigrated:!1},pe=e=>_e(e)?{dfp:fe(e.dfp),xandr_ssp:fe(e.xandr_ssp)}:de(),de=()=>({dfp:s.cS,xandr_ssp:s.cS}),me=e=>_e(e)?{all:fe(e.all),ql:fe(e.ql),qlCustom:fe(e.qlCustom),qlStandard:fe(e.qlStandard)}:ge(),fe=e=>Array.isArray(e)?e:s.cS,_e=e=>null!==e&&"object"==typeof e&&!Array.isArray(e),ge=()=>({all:s.cS,ql:s.cS,qlCustom:s.cS,qlStandard:s.cS})},9938:(e,t,r)=>{r.r(t),r.d(t,{runNextGenFeatures:()=>ft});var n=r(2169),i=r(9519),a=r(3480),o=r(8586),s=r(8236),u=r(3600);function c(e){let{messages:t}=e;const[r,n]=i.Ue(new Set);return t.on("permutive:addon:preinit",(e=>n(new Set([...r.current,e])))),r}function l(){const e=()=>Math.floor(Date.now()/1e3),[t,r]=i.Ue(e());return(0,o.UM)((()=>r(e())),1e3),t}function p(){const[e,t]=i.Ue(!1);return(0,u.aT)((()=>t(!0)),navigator.userAgent),e}var d=r(7812),m=r(5654),f=r(7144),_=r(6377),g=r(5086),v=r(6450),h=r(7049),y=r(7802);const b="[PrebidJS]";function S(e){const t=(()=>{const e=["pbjs",...window._pbjsGlobals||[]];return[...new Set(e)]})();e.logger.debug(b,"Found keys",t);return a.K4((()=>(0,n.zG)(t,d.UI((0,n.ls)((e=>(e=>{const t={maxAttempts:100,waitTimeInMs:50};let r;return{windowPropertyKey:e,pbjs:(0,u.a4)((()=>r),(()=>{const t=(0,n.zG)(window,(0,u.vg)(e));return!(null==t||!t.que||"function"!=typeof(null==t?void 0:t.getEvents)||(r=t,0))}),t)}})(e)),(t=>(0,n.zG)(i.p4(t.pbjs),i.UI((r=>{const i=f.pF((r=>(r.message=`Failed to resolve key "${t.windowPropertyKey}". ${r.message}`,e.reportError(`${b} ${r.toString()}`),s.YP)));return(0,n.zG)(r,(0,u.bw)(s.UI((r=>e.logger.debug(b,`Completed check for key "${t.windowPropertyKey}"`,{result:r})))),s.UI(i),s.UI(s.UI((e=>({windowPropertyKey:t.windowPropertyKey,pbjs:e})))))})))))),(e=>i.vP(...e)),i.UI((e=>({completedChecks:e.every(s.pC),pbjsKeyPairs:e.map(s.xH)}))),i.UI((e=>{let{pbjsKeyPairs:t,completedChecks:r}=e;const i=t.filter(s.pC),[a,...o]=i;return{completedChecks:r,mainPair:a??s.YP,otherPairs:(0,n.zG)(o,d.DZ(n.yR))}})))))}const w="[Prebid Monitoring]",I=(e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_flag_count_total",labels:t,value:1})},E=(e,t)=>{e.metrics.trackCounter({name:"sdk_prebid_monitoring_key_bidder_flag_count_total",labels:t,value:1})},k=function(e,t){const r=G(e);return a.K4((()=>(0,n.zG)(t,i.UI((0,n.ls)(s.DT((e=>e.consent)),s.UI((e=>e.prebidJS)))),i.D8(s.Eh((0,u.Or)())),i.bw((0,n.ls)(s.tS((e=>e.completedChecks?e.mainPair:s.YP)),s.UI((t=>I(e,{flag:"prebid_main_key",prebid_key:t.windowPropertyKey}))))),i.UI(s.UI((e=>(0,n.zG)(e.mainPair,s.UI((t=>[t,...e.otherPairs])),s.fS((()=>e.otherPairs)))))),i.Rp(new Set,((t,i)=>(0,n.zG)(i,s.UI(d.hX((e=>!t.has(e.windowPropertyKey)))),s.hX(d.Od),(0,u.bw)(s.EQ((()=>e.logger.debug(w,"Nothing to report")),(t=>e.logger.debug(w,"Reporting",t)))),s.fS((()=>[])),d.UI((t=>(0,n.zG)((t=>(0,n.zG)(f.Y3((function(){var r;const{pbjs:i,windowPropertyKey:a}=t;e.logger.log(w,`Reporting on "${a}"`,t);const o=P(i);e.logger.debug(w,`Version ${i.version} parsed as`,o);const s=(e=>"function"==typeof e.readConfig?e.readConfig():e.getConfig())(i);e.logger.debug(w,"Read config",s);const u=(0,n.zG)((null===(r=s.realTimeData)||void 0===r?void 0:r.dataProviders)??[],d.Ew((e=>"permutive"===e.name)));return e.logger.debug(w,"Read data provider config",u),{pbjs:i,config:s,dataProviderConfig:u,installedModules:i.installedModules||[],version:o,windowPropertyKey:a}}),m.w),f.ak("bidders",(e=>r.acBidders(e))),f.ak("permutiveRTDProvider",(e=>r.permutiveRTDProvider(e))),f.ak("consent",(e=>r.consent(e))),f.ak("targeting",(e=>r.targeting(e)))))(t),f.Pd((r=>e.reportError(`[Prebid Monitoring] Failed to report pair "${t.windowPropertyKey}", ${r.message}`)),(()=>t.windowPropertyKey))))),d.hp,(e=>new Set([...t,...e]))))),(e=>({reportedKeys:e})))))};const G=e=>({acBidders:t=>f.Y3((()=>{(0,y.Hn)("prebid")("data_provider_config",{ac_bidders:[]});const r=[],i=(0,n.zG)(t.dataProviderConfig,s.UI((e=>{var t;return(null==e||null===(t=e.params)||void 0===t?void 0:t.acBidders)??[]})),s.fS((()=>[]))),a=[...new Set([...r,...i])];return e.logger.debug(w,"Determined acBidders as",{acBidders:a,dynamicBidders:r,staticBidders:i}),a.forEach((r=>{E(e,{flag:"prebid_ac_bidder",prebid_key:t.windowPropertyKey,prebid_bidder:r})})),{acBidders:a,dynamicBidders:r,readBidders:i}}),m.w),consent:t=>f.Y3((()=>{var r,n,i,a,o,s;const u=t.windowPropertyKey;t.config.consentManagement&&"object"==typeof t.config.consentManagement&&I(e,{prebid_key:u,flag:"prebid_has_consent_management"});const c=t.installedModules.includes("gdprEnforcement");c&&I(e,{prebid_key:u,flag:"prebid_gdpr_enforcement_module"});const l=(null===(r=t.config)||void 0===r||null===(n=r.consentManagement)||void 0===n||null===(i=n.gdpr)||void 0===i||null===(a=i.rules)||void 0===a||null===(o=a.find((e=>"storage"===(null==e?void 0:e.purpose))))||void 0===o||null===(s=o.vendorExceptions)||void 0===s?void 0:s.includes("permutive"))||!1;return l&&I(e,{prebid_key:u,flag:"prebid_storage_exception"}),{hasGDPREnforcementModule:c,addedAsStorageException:l}}),m.w),permutiveRTDProvider:t=>f.Y3((()=>{const r=t.installedModules.includes("permutiveRtdProvider");return r&&I(e,{prebid_key:t.windowPropertyKey,flag:"prebid_permutive_rtd"}),r}),m.w),targeting:t=>{const r=(0,n.ls)(d.UI((e=>[e,null])),v.sq),i=(t,r)=>(0,n.zG)(t,(0,u.bw)((t=>e.logger.debug(w,`Processing ${t.length} bidder request(s)`,t))),d.hX((e=>r.hasOwnProperty(e.bidderCode)&&null===r[e.bidderCode])),_.vM((e=>e.bidderCode)),v.DZ(d.f2((0,u.lo)([[e=>(e=>{var t,r,n;const i=null==e||null===(t=e.user)||void 0===t||null===(r=t.data)||void 0===r?void 0:r.find((e=>"permutive.com"===e.name));return!(null==i||null===(n=i.segment)||void 0===n||!n.length)})(e.ortb2),()=>s.G("ortb2")],[e=>{return t=e.params,["permutive","p_standard"].some((e=>{var r,n,i,a;return(null==t||null===(r=t.visitor)||void 0===r||null===(n=r[e])||void 0===n?void 0:n.length)||(null==t||null===(i=t.keywords)||void 0===i||null===(a=i[e])||void 0===a?void 0:a.length)}));var t},()=>s.G("params")],()=>s.YP]))),(0,u.bw)((t=>e.logger.debug(w,"Bidders targeting method's updated",t)))),a=a=>{e.logger.debug(w,"Bidders found with no targeting method",a);let o=r(a);const s=r=>(0,n.zG)(i([r],o),(0,u.bw)((e=>{o={...o,...e}})),(0,u.bw)(v.Su(((r,n)=>E(e,{flag:`prebid_${n}_targeting_success`,prebid_key:t.windowPropertyKey,prebid_bidder:r})))),(0,u.bw)((()=>{Object.values(o).includes(null)||(e.logger.debug(w,`Cleaning up "bidRequested" listener for ${t.windowPropertyKey}`),t.pbjs.offEvent("bidRequested",s))})));t.pbjs.onEvent("bidRequested",s)};return f.Y3((()=>{const o=(0,n.zG)(t.pbjs.getEvents(),d.DZ((0,n.ls)(s.DT((e=>"bidRequested"===e.eventType)),s.UI((0,u.vg)("args")))));return(0,n.zG)(t.bidders.acBidders,s.DT(d.Od),s.EQ((()=>e.logger.debug(w,"No bidders for targeting")),(0,n.ls)(r,(e=>({...e,...i(o,e)})),v.uK(g.ff((e=>null===e))),h.Pd((0,n.ls)(v.XP,s.DT(d.Od),s.UI(a)),v.Su(((r,n)=>E(e,{prebid_bidder:r,prebid_key:t.windowPropertyKey,flag:`prebid_${n}_targeting_success`})))))))}),m.w)}}),P=e=>{const[t,r,n]=e.version.split("-")[0].replace("v","").split(".").map((e=>parseInt(e)));return{major:t,minor:r,patch:n}},U=function(e,t){const r=(0,n.zG)(t.pbjs,i.VS((0,n.ls)(s.tS(s.KQ((e=>{var t;return null===(t=e.getUserIdsAsync)||void 0===t?void 0:t.call(e).then((()=>{var t;return(null===(t=e.getUserIdsAsEids)||void 0===t?void 0:t.call(e))??[]}))}))),s.UI(i.p4),s.fS((()=>i.a9(s.YP))))),i.UI(s.tS(s.Uo)),i.bw(s.mU((t=>(t.length>0?t.forEach((t=>{e.metrics.trackCounter({name:"sdk_prebid_alternative_identifiers_count_total",labels:{alternative_user_id_name:t.source},value:1})})):e.metrics.trackCounter({name:"sdk_prebid_alternative_identifiers_count_total",labels:{identifier:"NONE"},value:1}),s.YP))))),o=(0,n.zG)(t.pbjs,i.UI(s.tS(s.KQ((e=>{var t;return null===(t=e.getUserIdsAsEids)||void 0===t?void 0:t.call(e)})))));return a.K4((()=>(0,n.zG)(i.vP(r,o),i.UI((e=>{let[t,r]=e;return(0,n.zG)(t,s.wp((()=>r)))})),i.UI((0,n.ls)(s.UI(d.DZ((e=>{var t,r;return"string"==typeof(null===(t=e.uids)||void 0===t||null===(r=t[0])||void 0===r?void 0:r.id)?s.G((0,n.bc)(e.source,{id:e.uids[0].id})):s.YP}))),s.tS(_.c2),s.UI(v.sq))),i.bw((t=>{s.pC(t)&&e.logger.debug("[Prebid Identifiers]","Found identifiers",t.value)})))))};var x=r(9713);const D=new Set(["AdRequest","Reaction","PageviewEngagement","SegmentEntry","SegmentExit"]);class z{events;listeners;static highVolumeEvents=(()=>{const e=new Set([...D]);return e.delete("Reaction"),e})();constructor(){this.events=[],this.listeners=[]}newEvent(e,t){z.highVolumeEvents.has(e.name)||this.events.push([e,t]),[...this.listeners].forEach((r=>{this.handle(e,t,r)}))}addListener(e){this.listeners.push(e);const t={replay:()=>(this.replay(e),t),remove:()=>(this.remove(e),t)};return t}handle(e,t,r){const n="string"==typeof r.name&&e.name===r.name,i=r.name.test&&r.name.test(e.name),a=n||i;if(a)try{r.callback(e,t)}catch(e){window.console&&window.console.error&&window.console.error("callback error: ",e)}a&&r.once&&this.remove(r)}replay(e){let t=-1!==this.listeners.indexOf(e);for(let r=0;r<this.events.length&&t;r++)this.handle(this.events[r][0],this.events[r][1],e),t=-1!==this.listeners.indexOf(e)}remove(e){const t=this.listeners.indexOf(e);-1!==t&&this.listeners.splice(t,1)}}var T=r(4694),C=r(2945);var A=r(3643),M=r(132),O=r(2678);const q="[Event Upload]",R=(e,t,r,s)=>a.dQ((a=>{let{stopped:c,previousState:l}=a;Array.isArray(l)&&(0,n.zG)(l,j(e))();const p=new Set([...D]),[m,{appendUntrackedEvents:_,appendUploadResults:g}]=(0,n.zG)((()=>{const[e,t]=i.gS(d.uZ()),[r,a]=i.gS(d.uZ());return(0,n.bc)({uploadResults:e,untrackedEvents:r},{appendUploadResults:t,appendUntrackedEvents:a})})(),(0,A.pL)((0,n.ls)((function(e){const[t,r]=(0,n.zG)(e.uploadResults,N(d.bj));return{...e,uploadResults:t,erroredEventsAsJSON:r}}),(function(e){const[t,r]=(0,n.zG)(e.erroredEventsAsJSON,N(d.UI((0,A.H5)((0,u.rO)({event:(0,u.rO)({time:e=>new Date(e)})})))));return{...e,erroredEventsAsJSON:t,erroredEvents:r}}),(function(e){let{uploadResults:t,untrackedEvents:r,...a}=e;const o=(0,n.zG)(t,i.UI(T.UI((0,n.ls)(d.hp,d.UI((0,A.H5)((0,u.rO)({time:e=>new Date(e)}))))))),s=(0,n.zG)(i.vP(o,r),i.UI(T.RD),i.UI(T.UI((e=>{let[t,r]=e;return r.concat(t)}))));return{...a,successEvents:s}}),(function(e){const[t,r]=(0,n.zG)(e.successEvents,N(d.UI((0,A.H5)((0,u.rO)({time:e=>e.toISOString()})))));return{...e,successEvents:t,successEventsAsJSON:r}})))),[v,h]=i.Ue(0),[y,b]=i.Ue(0),S=(0,n.zG)(t,i.UI(T.UI((e=>(0,n.zG)(e,d.uK((e=>{let[,t]=e;return!p.has(t.event.name)})),(e=>{let{left:t,right:r}=e;return(0,n.zG)(t,d.UI((0,A.H5)((e=>e.event))),_),r}))))),i.UI(T.UI((e=>(e.length>0&&((0,o.HJ)((()=>h(v.current+e.length)),500),(0,o.HJ)((()=>b(y.current+e.length)),5e3)),e))))),w=e=>t=>(0,n.zG)(e,d.hX((e=>{let[r]=e;return!t.closeEventsProcessed.includes(r)})),d.zo(t.queue)),I=(0,n.zG)(i.vP(v,y,S,r,c,s),i.Rp({closeEventsProcessed:d.cS,noQueueItemsProcessed:0,queue:d.cS},((t,r)=>{let[i,a,o,s,c,l]=r;return c?t:(0,n.zG)(t,(0,u.rO)({queue:d.zo(o())}),(t=>l?(0,n.zG)(t,(t=>r=>(0,n.zG)(r,w(t),$(e),(0,u.rO)({right:(0,u.bw)((0,n.ls)(d.UI((0,n.ls)((0,A.H5)((0,u.rO)({time:e=>e.toISOString()})),f.F2)),g))}),(e=>{let{left:t,right:i}=e;return(0,n.zG)(r,(0,u.rO)({closeEventsProcessed:(0,n.zG)(i,d.UI(A.li),d.zo),queue:(0,n.zG)(t.map(A.li),(e=>new Set(e)),(e=>d.hX((t=>{let[r]=t;return e.has(r)})))),noQueueItemsProcessed:e=>e+r.queue.length}))})))(s)):a>t.noQueueItemsProcessed||i===t.noQueueItemsProcessed+t.queue.length?(t=>((0,n.zG)(t.queue,j(e),O.UI(g))(),{closeEventsProcessed:t.closeEventsProcessed,noQueueItemsProcessed:t.noQueueItemsProcessed+t.queue.length,queue:d.cS}))(t):t))}))),E=(0,n.zG)(r,i.UI(w),i.ap(I),i.D8(d.Eh({equals:(e,t)=>e[0]===t[0]})));return{state:E,value:m}})),F=(e,t)=>e.permutiveUrls.getEndpointUrl("/batch/events",s.G(e.config.apiVersion),[["enrich",JSON.stringify(t.requiresEnrichment)],["sdkp",JSON.stringify(t.sdkProcessed)]]),L=e=>(0,n.zG)(e.events,d.UI((0,n.ls)(A.Yg,(e=>e.event)))),B=(0,n.ls)(_.vM((e=>{let[t,r]=e;return`${r.requiresEnrichment}${r.sdkProcessed}`})),(e=>Object.values(e)),d.UI((e=>({requiresEnrichment:e[0][1].requiresEnrichment,events:e,sdkProcessed:e[0][1].sdkProcessed})))),$=e=>(0,n.ls)(B,d.YO("request"),d.Hr("success",(t=>{let{request:r}=t;return e.logger.debug(q,"Uploading via beacon",r),e.permutiveApi.reqWithBeacon({url:F(e,r),payload:L(r)})})),d.tS((e=>(0,n.zG)(e.request.events,d.UI((t=>{let[r,{event:i}]=t;return e.success?f.F2((0,n.bc)(r,i)):f.t$((0,n.bc)(r,i))}))))),d.UI((0,u.bw)(f.EQ((t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_beacon_fail_count_total",labels:{event_name:r.name},value:1})}),(t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_beacon_success_count_total",labels:{event_name:r.name},value:1})})))),d.oh),j=e=>t=>(0,n.zG)(B(t),O.uU((t=>(0,n.zG)(t,(e=>t=>(e.logger.debug(q,"Uploading",t),M.Y3((()=>e.permutiveApi.req({payload:L(t),url:F(e,t),method:"POST",contentType:"text/plain",dataType:"json",withCredentials:!1})),(t=>(e.reportError(`Error sending events batch. Got ${f.KC(t)}`),t)))))(e),M.UI(d.UI((e=>e.body))),M.EQ((e=>(0,n.zG)(t.events,d.UI((()=>f.t$(e))))),d.UI(f.F2)),O.UI(d.$R(t.events))))),O.UI(d.tS(d.UI((t=>{let[r,[i,{event:a}]]=t;return(0,n.zG)(r,f.EQ((e=>f.t$((0,n.bc)(i,{event:{...a,time:a.time.toISOString()},error:e}))),(e=>"request_id"in e?f.t$((0,n.bc)(i,{event:{...a,time:a.time.toISOString()},error:e})):f.F2((0,n.bc)(i,{...a,id:e.id,time:e.time})))),(0,u.bw)(f.EQ((t=>{let[,{event:r}]=t;return e.metrics.trackCounter({name:"sdk_event_upload_fail_count_total",labels:{event_name:r.name},value:1})}),(t=>{let[,r]=t;return e.metrics.trackCounter({name:"sdk_event_upload_success_count_total",labels:{event_name:r.name},value:1})}))))}))))),N=e=>t=>(0,n.zG)(t,i.En(2,d.uZ()),(0,A.H5)(i.UI(T.UI(e)))),Q=(e,t,r,o)=>(0,n.zG)(a.K4((()=>{const[e,t]=i.Ue(i.a9(T.of([])));return{eventsToPublishBufferRef:i.xH(e),publishEvents:r=>{(0,n.zG)(i.vP(e.current,r),i.UI(T.RD),i.UI(T.UI(d.xH)),t)}}})),a.ak("eventUpload",(t=>{let{eventsToPublishBufferRef:n}=t;return R(e,n,r,o)})),a.ak("eventHandler",(e=>{let{eventUpload:t}=e;return r=t.successEventsAsJSON,o=t.erroredEventsAsJSON,a.K4((()=>{const e=new z;return(0,n.zG)(r,i.UI((e=>e())),i.bw((t=>t.forEach((t=>{let[,r]=t;return e.newEvent(r,null)}))))),(0,n.zG)(o,i.UI((e=>e())),i.bw((t=>t.forEach((t=>{let[,{event:r,error:n}]=t;return e.newEvent(r,n)}))))),{eventHandlerAfterUpload:e}}));var r,o})),a.ak("eventResolver",(e=>{let{eventUpload:r}=e;return((e,t,r,o)=>a.K4((()=>{(0,n.zG)(i.vP({unresolvedEvents:t,erroredEvents:o,successEvents:r}),i.UI((0,C.Yt)(T.G5)),i.Rp({},((e,t)=>{const r=t();return(0,n.zG)(r.unresolvedEvents,s.DT(d.Od),s.UI((0,n.ls)(v.sq,(t=>({...e,...t})))),s.fS((()=>e)),(e=>(0,n.zG)(r.successEvents,d.u4(e,((e,t)=>{let[r,i]=t;return(0,n.zG)(v.P5(r,e),s.UI((t=>(t.succeed(i),v.EG(r)(e)))),s.fS((()=>e)))})))),(e=>(0,n.zG)(r.erroredEvents,d.u4(e,((e,t)=>{let[r,{event:i,error:a}]=t;return(0,n.zG)(v.P5(r,e),s.UI((t=>(t.fail(`Failed to track ${i.name}. ${"error"in a?a.error.message:a.message}`),v.EG(r)(e)))),s.fS((()=>e)))})))))})))})))(0,t,r.successEvents,r.erroredEvents)})),a.UI((e=>{let{publishEvents:t,eventHandler:r}=e;return{eventHandlerAfterUpload:r.eventHandlerAfterUpload,publishEvents:t}}))),Y="_pnativo",K=function(e){let{externalData:t}=e;return a.K4((()=>{t.removeExternalData(Y)}))};var W,H,V,Z,J,X=-1,ee=function(e){addEventListener("pageshow",(function(t){t.persisted&&(X=t.timeStamp,e(t))}),!0)},te=function(){var e=self.performance&&performance.getEntriesByType&&performance.getEntriesByType("navigation")[0];if(e&&e.responseStart>0&&e.responseStart<performance.now())return e},re=function(){var e=te();return e&&e.activationStart||0},ne=function(e,t){var r=te(),n="navigate";return X>=0?n="back-forward-cache":r&&(document.prerendering||re()>0?n="prerender":document.wasDiscarded?n="restore":r.type&&(n=r.type.replace(/_/g,"-"))),{name:e,value:void 0===t?-1:t,rating:"good",delta:0,entries:[],id:"v4-".concat(Date.now(),"-").concat(Math.floor(8999999999999*Math.random())+1e12),navigationType:n}},ie=function(e,t,r){try{if(PerformanceObserver.supportedEntryTypes.includes(e)){var n=new PerformanceObserver((function(e){Promise.resolve().then((function(){t(e.getEntries())}))}));return n.observe(Object.assign({type:e,buffered:!0},r||{})),n}}catch(e){}},ae=function(e,t,r,n){var i,a;return function(o){t.value>=0&&(o||n)&&((a=t.value-(i||0))||void 0===i)&&(i=t.value,t.delta=a,t.rating=function(e,t){return e>t[1]?"poor":e>t[0]?"needs-improvement":"good"}(t.value,r),e(t))}},oe=function(e){requestAnimationFrame((function(){return requestAnimationFrame((function(){return e()}))}))},se=function(e){document.addEventListener("visibilitychange",(function(){"hidden"===document.visibilityState&&e()}))},ue=function(e){var t=!1;return function(){t||(e(),t=!0)}},ce=-1,le=function(){return"hidden"!==document.visibilityState||document.prerendering?1/0:0},pe=function(e){"hidden"===document.visibilityState&&ce>-1&&(ce="visibilitychange"===e.type?e.timeStamp:0,me())},de=function(){addEventListener("visibilitychange",pe,!0),addEventListener("prerenderingchange",pe,!0)},me=function(){removeEventListener("visibilitychange",pe,!0),removeEventListener("prerenderingchange",pe,!0)},fe=function(){return ce<0&&(ce=le(),de(),ee((function(){setTimeout((function(){ce=le(),de()}),0)}))),{get firstHiddenTime(){return ce}}},_e=function(e){document.prerendering?addEventListener("prerenderingchange",(function(){return e()}),!0):e()},ge=[1800,3e3],ve=[.1,.25],he=function(e,t){t=t||{},function(e,t){t=t||{},_e((function(){var r,n=fe(),i=ne("FCP"),a=ie("paint",(function(e){e.forEach((function(e){"first-contentful-paint"===e.name&&(a.disconnect(),e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-re(),0),i.entries.push(e),r(!0)))}))}));a&&(r=ae(e,i,ge,t.reportAllChanges),ee((function(n){i=ne("FCP"),r=ae(e,i,ge,t.reportAllChanges),oe((function(){i.value=performance.now()-n.timeStamp,r(!0)}))})))}))}(ue((function(){var r,n=ne("CLS",0),i=0,a=[],o=function(e){e.forEach((function(e){if(!e.hadRecentInput){var t=a[0],r=a[a.length-1];i&&e.startTime-r.startTime<1e3&&e.startTime-t.startTime<5e3?(i+=e.value,a.push(e)):(i=e.value,a=[e])}})),i>n.value&&(n.value=i,n.entries=a,r())},s=ie("layout-shift",o);s&&(r=ae(e,n,ve,t.reportAllChanges),se((function(){o(s.takeRecords()),r(!0)})),ee((function(){i=0,n=ne("CLS",0),r=ae(e,n,ve,t.reportAllChanges),oe((function(){return r()}))})),setTimeout(r,0))})))},ye=0,be=1/0,Se=0,we=function(e){e.forEach((function(e){e.interactionId&&(be=Math.min(be,e.interactionId),Se=Math.max(Se,e.interactionId),ye=Se?(Se-be)/7+1:0)}))},Ie=function(){return W?ye:performance.interactionCount||0},Ee=function(){"interactionCount"in performance||W||(W=ie("event",we,{type:"event",buffered:!0,durationThreshold:0}))},ke=[],Ge=new Map,Pe=0,Ue=[],xe=function(e){if(Ue.forEach((function(t){return t(e)})),e.interactionId||"first-input"===e.entryType){var t=ke[ke.length-1],r=Ge.get(e.interactionId);if(r||ke.length<10||e.duration>t.latency){if(r)e.duration>r.latency?(r.entries=[e],r.latency=e.duration):e.duration===r.latency&&e.startTime===r.entries[0].startTime&&r.entries.push(e);else{var n={id:e.interactionId,latency:e.duration,entries:[e]};Ge.set(n.id,n),ke.push(n)}ke.sort((function(e,t){return t.latency-e.latency})),ke.length>10&&ke.splice(10).forEach((function(e){return Ge.delete(e.id)}))}}},De=function(e){var t=self.requestIdleCallback||self.setTimeout,r=-1;return e=ue(e),"hidden"===document.visibilityState?e():(r=t(e),se(e)),r},ze=[200,500],Te=function(e,t){"PerformanceEventTiming"in self&&"interactionId"in PerformanceEventTiming.prototype&&(t=t||{},_e((function(){var r;Ee();var n,i=ne("INP"),a=function(e){De((function(){e.forEach(xe);var t=function(){var e=Math.min(ke.length-1,Math.floor((Ie()-Pe)/50));return ke[e]}();t&&t.latency!==i.value&&(i.value=t.latency,i.entries=t.entries,n())}))},o=ie("event",a,{durationThreshold:null!==(r=t.durationThreshold)&&void 0!==r?r:40});n=ae(e,i,ze,t.reportAllChanges),o&&(o.observe({type:"first-input",buffered:!0}),se((function(){a(o.takeRecords()),n(!0)})),ee((function(){Pe=Ie(),ke.length=0,Ge.clear(),i=ne("INP"),n=ae(e,i,ze,t.reportAllChanges)})))})))},Ce=[2500,4e3],Ae={},Me={passive:!0,capture:!0},Oe=new Date,qe=function(e,t){H||(H=t,V=e,Z=new Date,Le(removeEventListener),Re())},Re=function(){if(V>=0&&V<Z-Oe){var e={entryType:"first-input",name:H.type,target:H.target,cancelable:H.cancelable,startTime:H.timeStamp,processingStart:H.timeStamp+V};J.forEach((function(t){t(e)})),J=[]}},Fe=function(e){if(e.cancelable){var t=(e.timeStamp>1e12?new Date:performance.now())-e.timeStamp;"pointerdown"==e.type?function(e,t){var r=function(){qe(e,t),i()},n=function(){i()},i=function(){removeEventListener("pointerup",r,Me),removeEventListener("pointercancel",n,Me)};addEventListener("pointerup",r,Me),addEventListener("pointercancel",n,Me)}(t,e):qe(t,e)}},Le=function(e){["mousedown","keydown","touchstart","pointerdown"].forEach((function(t){return e(t,Fe,Me)}))},Be=[100,300];const $e=function(e){let t=0;const r=r=>{if(0===t)return;const n=je(r);n&&e.metrics.track({name:`sdk_web_vitals_${n.suffix}`,labels:{},value:n.value})},o=(0,u.HP)((()=>{he(r),function(e,t){t=t||{},_e((function(){var r,n=fe(),i=ne("LCP"),a=function(e){t.reportAllChanges||(e=e.slice(-1)),e.forEach((function(e){e.startTime<n.firstHiddenTime&&(i.value=Math.max(e.startTime-re(),0),i.entries=[e],r())}))},o=ie("largest-contentful-paint",a);if(o){r=ae(e,i,Ce,t.reportAllChanges);var s=ue((function(){Ae[i.id]||(a(o.takeRecords()),o.disconnect(),Ae[i.id]=!0,r(!0))}));["keydown","click"].forEach((function(e){addEventListener(e,(function(){return De(s)}),!0)})),se(s),ee((function(n){i=ne("LCP"),r=ae(e,i,Ce,t.reportAllChanges),oe((function(){i.value=performance.now()-n.timeStamp,Ae[i.id]=!0,r(!0)}))}))}}))}(r),function(e,t){t=t||{},_e((function(){var r,n=fe(),i=ne("FID"),a=function(e){e.startTime<n.firstHiddenTime&&(i.value=e.processingStart-e.startTime,i.entries.push(e),r(!0))},o=function(e){e.forEach(a)},s=ie("first-input",o);r=ae(e,i,Be,t.reportAllChanges),s&&(se(ue((function(){o(s.takeRecords()),s.disconnect()}))),ee((function(){var n;i=ne("FID"),r=ae(e,i,Be,t.reportAllChanges),J=[],V=-1,H=null,Le(addEventListener),n=a,J.push(n),Re()})))}))}(r),Te(r)}));return a.K4((r=>{let{stopped:a}=r;t++,(0,n.zG)(a,i.YP((e=>{e&&t--}))),e.metrics.isEnabled()&&o()}))};const je=e=>(e=>"CLS"===e.name)(e)?{value:e.value,suffix:`${e.name.toLowerCase()}_score`}:(e=>["INP","FID","LCP"].includes(e.name))(e)?{value:e.value/1e3,suffix:`${e.name.toLowerCase()}_seconds`}:void 0;var Ne=r(144);const Qe=(e,t)=>{const{activationManager:r,externalData:o,metrics:s,permutiveData:u}=e;return(0,n.zG)(a.of({}),a.ak("psegs",(()=>((e,t)=>a.K4((r=>{let{stopped:a}=r;const o="_psegs";(0,n.zG)(i.vP(t,a),i.YP((t=>{let[r,i]=t;i||(0,n.zG)(r,d.EQ((()=>e.removeExternalData(o)),(t=>e.setExternalJsonData(o,t))))})))})))(e.externalData,t.qlSegments))),a.ak("webVitals",(()=>$e(e))),a.ak("nativo",(()=>K({activationManager:r,externalData:o,metrics:s,queryLanguageCohorts:t.qlSegments,...t}))),a.ak("twitterPixel",(()=>(0,Ne.eJ)({activationManager:r,metrics:s,permutiveData:u,queryLanguageCohorts:t.qlSegments,...t}))),a.ak("prebidJS",(()=>S(e))))};var Ye=r(7062);const Ke=()=>{const[e,t]=i.gS(d.uZ());return{trackEvent:e=>{let r,n,{event:i,useBeacon:a}=e;const o=new Promise(((e,t)=>{r=e,n=t}));return t([{localId:(0,u.k$)(),event:i,fail:n,succeed:r,useBeacon:a}]),o},trackedEvents:e}},We=function(e,t,r){return a.of({replacementMap:i.a9(s.of({$privacy_sandbox_topics_v2:[]}))})};var He=r(438),Ve=r(9103),Ze=r(6289);r(7125);const Je=e=>[e,O.of(e)],Xe=A.li,et=A.Yg,tt=e=>Je(f.F2(e)),rt="RefEventual",nt=e=>t=>i.vP((0,n.zG)(t,i.UI(Xe),i.UI(e)),(0,n.zG)(t,i.UI(et),i.UI(O.UI(e)))),it=e=>t=>i.vP((0,n.zG)(i.vP((0,n.zG)(e,i.UI(Xe)),(0,n.zG)(t,i.UI(Xe))),i.UI((e=>{let[t,r]=e;return r(t)}))),(0,n.zG)(i.vP((0,n.zG)(e,i.UI(et)),(0,n.zG)(t,i.UI(et))),i.UI((e=>{let[t,r]=e;return O.ap(t)(r)})))),at={URI:rt,map:(e,t)=>nt(t)(e)},ot={URI:rt,map:at.map,ap:(e,t)=>it(t)(e)},st=e=>i.a9(tt(e)),ut=(f.dO,f.G5,st(d.bM()),(0,u.mQ)((e=>s.YP)),e=>{const t=i.a9(s.G(d.bM()));return{activations:{gam:t,xandr:t},cohorts:t,contextualAddon:s.YP,data:i.a9(s.G(void 0)),enrichedEvents:e.events,replacementMap:i.a9(s.G({}))}}),ct=e=>{const t=e=>{if("number"==typeof e&&!Number.isNaN(e))return e;throw new Error("Received unexpected "+(Number.isNaN(e)?"NaN":"type "+typeof e))},r=e=>Math.max(0,t(e)/1e3);return{compressed:!!e.decodedBodySize&&e.decodedBodySize!==e.encodedBodySize,decoded_body_size:t(e.decodedBodySize),dns_lookup_duration:r(e.domainLookupEnd-e.domainLookupStart),encoded_body_size:t(e.encodedBodySize),fetch_duration:r(e.responseEnd-e.fetchStart),fetch_end:r(e.responseEnd),fetch_start:r(e.fetchStart),redirect_duration:r(e.redirectEnd-e.redirectStart),request_duration:r(e.responseStart-e.requestStart),retrieved:lt(e),service_worker_duration:r(0===e.workerStart?0:e.fetchStart-e.workerStart),start_time:r(e.startTime),tcp_handshake_duration:r(e.connectEnd-e.connectStart),total_duration:r(e.duration),tls_negotiation:r(e.requestStart-e.secureConnectionStart),transfer_duration:r(e.responseEnd-e.requestStart),transfer_size:t(e.transferSize)}},lt=e=>0===e.transferSize?"cache":e.transferSize>e.encodedBodySize?"network":"revalidate";s.YP,i.a9(s.YP),i.a9([]),i.a9([]),i.a9([]),i.a9(Ye.b()),i.a9(s.YP),i.a9({segmentsEntered:[],segmentsExited:[]}),i.a9(!1),i.a9((e=>{let{event:t}=e;return Promise.resolve(t)})),new z,i.a9(s.YP),i.a9(!1);function pt(e,t,r){const{addonsLoaded:c,consent:l,currentTimestampSecs:p,enabledAddons:m,identities:g,sdkVariant:v,sessionId:h,userId:y,userIdIsNewlyGenerated:b,viewId:S,pageviewState:w}=t,[I,E]=(0,n.zG)(i.Ue(i.a9(d.cS)),(e=>{let[t,r]=e;return[i.xH(t),r]})),G=s.ij(e.permutiveData.getData("event-source-id")),P=(0,n.zG)(y,i.Rp(-1,(e=>e+1)),i.UI((t=>(0,n.zG)(G,s.hX((()=>0===t)),s.fS((()=>{const t=(0,u.k$)();return e.permutiveData.setData("event-source-id",t),t}))))));return(0,n.zG)(a.vP({computeTimeMetrics:(D=e.metrics,a.K4((e=>{let{stopped:t}=e;const r=(0,o.HJ)((()=>{(0,n.zG)((0,o.iE)(),(0,u.bw)((()=>(0,o.ho)(!1))),d.UI((e=>{let[t,r]=e;return(r-t)/1e3})),(e=>{D.track({name:"sdk_ui_thread_compute_first10s_total_seconds",value:e.reduce(((e,t)=>e+t),0),labels:{}}),D.track({name:"sdk_ui_thread_compute_first10s_total_task_overrun_seconds",value:(0,n.zG)(e,d.hX((e=>e>.05)),d.UI((e=>e-.05)),d.u4(0,((e,t)=>e+t))),labels:{}}),D.track({name:"sdk_ui_thread_compute_first10s_longest_task_seconds",value:Math.max(0,...e),labels:{}})}))}),1e4);(0,n.zG)(t,i.YP((e=>e&&r())))}))),privacySandboxTopics:We(e,h,l)}),a.UI((t=>{const{reset:r,trackEvent:a,trackedEvents:o}=((e,t)=>{const[r,a]=i.Ue(0),o=(0,n.zG)(i.vP(r,t),i.UI((()=>[]))),s=(0,n.zG)(i.vP(o,e),i.D8(((e,t)=>{let[,r]=e,[,n]=t;return r===n})),i.UI((e=>{let[t]=e;const r=Ke();return t.forEach(r.trackEvent),r})));return{reset:()=>a(r.current+1),trackEvent:(0,n.zG)(i.vP(s,o),i.UI((e=>{let[t,r]=e;return e=>(r.push(e),t.trackEvent(e))}))),trackedEvents:(0,n.zG)(s,i.VS((e=>e.trackedEvents)))}})(y,S),{enrichedEvents:s,...u}=(e=>ut(e))({consent:l,events:o,logger:e.logger,pageUrl:(0,n.zG)((()=>e.clientContext.getClientAsync()),O.UI((e=>e.url))),permutiveApi:e.permutiveApi,permutiveUrls:e.permutiveUrls,viewId:S}),[c,p,m]=(0,n.zG)(s,i.En(3,d.uZ()));return{...t,contextual:u,reset:r,trackEvent:a,unresolvedEvents:(0,n.zG)(c,i.UI(T.UI(d.UI((e=>(0,n.bc)(e.localId,{fail:e.fail,succeed:e.succeed})))))),eventsToProcessLocally:(0,n.zG)(p,i.UI(T.UI(d.hX((e=>!e.useBeacon))))),eventsToUploadViaBeacon:(0,n.zG)(m,i.UI(T.UI(d.hX((e=>e.useBeacon)))))}})),a.ak("eventPublication",(r=>{let{unresolvedEvents:n}=r;return Q(e,n,I,t.sdkClosing)})),a.Hr("enrichmentReplacementMap",(e=>{let{contextual:t,privacySandboxTopics:r}=e;return(0,n.zG)(i.vP(t.replacementMap,r.replacementMap),i.UI((e=>{let[t,r]=e;return(0,C.gz)(s.g1)(t,r)})),i.UI(s.UI((e=>{let[t,r]=e;return{...t,...r}}))))})),a.ak("core",(o=>{let{contextual:u,enrichmentReplacementMap:c,eventPublication:m,eventsToProcessLocally:f}=o;return(0,n.zG)(r({contextualCohorts:u.cohorts,consent:l,currentTimestampSecs:p,enrichmentReplacementMap:c,eventSourceId:P,identities:g,newEvents:(0,n.zG)(f,i.UI(T.UI(d.UI((e=>(0,n.bc)(e.localId,e.event)))))),sessionId:h,userId:y,userIdIsNewlyGenerated:b,viewId:S,webClient:t.webClient,pageviewState:w}),a.bw((e=>{let{eventsToPublish:t}=e;return(0,n.zG)(t,i.UI(T.UI(dt)),m.publishEvents)})),a.bw((e=>{let{eventsToPublishOnPageUnload:t}=e;return(0,n.zG)(t,i.UI(dt),E)})),a.bw((t=>{let{externalData:r}=t;return(0,n.zG)(r,i.UI((t=>(0,n.zG)(Object.entries(t),d.UI((t=>{let[r,i]=t;return(0,n.zG)(i,s.EQ((()=>e.externalData.removeExternalData(r)),(t=>e.externalData.setExternalJsonData(r,t))))}))))))})),a.bw((t=>{let{context:r}=t;return(0,n.zG)(r,i.UI((t=>{const r=Object.entries(t);e.clientContext.updateContext(...r)})))})))})),a.bw((e=>{let{core:r,eventPublication:a,eventsToUploadViaBeacon:o}=e;return(0,n.zG)(i.vP({cohorts:r.cohorts.all,eventsIO:o,segments:r.cohorts.ql,sessionId:h,userId:y,viewId:S,webClient:t.webClient}),i.UI((e=>{let{webClient:t,...r}=e;return(0,n.zG)(t,s.UI((e=>({...r,webClient:e}))))})),i.UI(s.EQ((()=>T.of(d.bM())),(e=>{let{cohorts:t,eventsIO:r,segments:i,sessionId:a,userId:o,viewId:s,webClient:u}=e;return(0,n.zG)(r,T.UI(d.UI((e=>{let{event:r,localId:c}=e;return(0,n.bc)(c,{requiresEnrichment:!0,sdkProcessed:!1,event:{user_id:o,name:r.name,segments:i,cohorts:t,properties:{...r.properties,client:{...u,...r.properties.client??{}}},session_id:a,time:new Date,view_id:s}})}))))}))),a.publishEvents)})),a.ak("metricContext",(e=>{let{core:r}=e;return(0,n.zG)(r.geoIP,i.UI(s.tS((e=>{var t;return s.ij(null===(t=e.geo_info)||void 0===t?void 0:t.continent)}))),(e=>Ye.X({continent:e,sampleRate:t.metricSampleRate,sdkVariant:v,sessionId:h,userId:y,viewId:S})))})),a.ak("sdkql",(t=>{let{core:r}=t;return Qe(e,{addonsLoaded:c,consent:l,initdAddons:m,qlSegments:r.cohorts.ql})})),a.ak("strategicPartnerships",(t=>{let{sdkql:r}=t;return((e,t)=>a.vP({prebid_identifiers:U(e,t)}))(e,{pbjs:(0,n.zG)(r.prebidJS,i.UI((e=>(0,n.zG)(e.mainPair,s.UI((e=>e.pbjs))))))})})),a.ak("mediaAndEntertainment",(t=>{let{core:r}=t;return((e,t)=>(0,n.zG)(a.vP({freewheel:(0,x.freewheelService)({activationManager:e.activationManager,externalData:e.externalData,...t})}),a.UI((0,n.a9)({}))))(e,{addonsLoaded:c,consent:l,initdAddons:m,queryLanguageCohorts:r.cohorts.ql})})),a.ak("advertisers",(t=>{let{sdkql:r}=t;return((e,t)=>(0,n.zG)(a.of(t),a.ak("prebidMonitoring",(t=>{let{consent:r,prebidJS:n}=t;return k(e,i.vP({consent:r,prebidJS:n}))})),a.UI(n.Q1)))(e,{consent:l,prebidJS:r.prebidJS})})),a.ak("identityManager",(t=>{let{core:r}=t;return(0,He.u6)({...e,consent:l,tcfApiStatus:(0,Ve.SD)(window,e.logger).tcfApiStatusRef,currentTimestampSecs:p,geoIP:r.geoIP},g)})),a.bw((function(){(0,n.zG)((0,C.gz)(s.G5)(e.performance,(0,n.zG)(t.currentScript,s.UI((e=>e.src)),s.hX((e=>"string"==typeof e)))),s.UI((r=>{let[i,a]=r;var o;(o={consent:t.consent,logger:e.logger,metrics:e.metrics,name:a,performance:i}).consent.current&&o.metrics.isEnabled()&&(0,n.zG)(_.nI(o.performance.getEntriesByName(o.name,"resource")),s.UI(_.YM),s.hX((e=>self.PerformanceResourceTiming&&e instanceof self.PerformanceResourceTiming)),s.fX((e=>f.Y3((()=>ct(e)),(0,u.bw)((t=>o.logger.warn("[resource timing] Failed to compute labels",{error:t,entry:e})))))),s.UI((e=>{const{total_duration:t,...r}=e;o.metrics.track({name:"sdk_resource_timing_seconds",value:t,labels:{...r,name:o.name}})})))})))})),a.UI((e=>{let{core:t,contextual:r,metricContext:n,sdkql:a,trackEvent:o,eventPublication:s,strategicPartnerships:u,identityManager:c,reset:l}=e;return{activations:t.activations,addons:{contextual:r.contextualAddon,identityManager:c,secureSignal:t.secureSignal},metricContext:n,pbjsPair:i.UI((e=>e.mainPair),a.prebidJS),queryLanguageCohorts:{all:t.cohorts.ql,custom:t.cohorts.qlCustom,standard:t.cohorts.qlStandard},segmentTransitionsSinceInit:t.transitionsSinceInit,trackEvent:o,realtime:t.realtime,eventHandlerAfterUpload:s.eventHandlerAfterUpload,prebidIdentifiers:u.prebid_identifiers,reset:l,stateMigratedThisInitialisation:t.stateMigratedThisInitialisation}})));var D}const dt=d.UI((0,A.H5)((e=>({event:e,requiresEnrichment:!1,sdkProcessed:!0}))));function mt(e){return(0,n.ls)((0,u.rO)({previousState:e=>{if("string"!=typeof e)return{};try{return JSON.parse(e)}catch{return{}}}}),e,(0,u.rO)({state:i.UI(JSON.stringify)}))}function ft(e){const t=function(e){const{activationManager:t,api:r,clientContext:n,config:i,externalData:a,logger:o,metrics:u,permutiveData:c,network:l,urls:p,namespace:d,trace:m}=e;return{activationManager:t,api:r,clientContext:n,config:i,externalData:a,logger:o,metrics:u,performance:s.ij(self.performance),permutiveData:c,permutiveApi:l,permutiveUrls:p,reportError:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};r.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)},namespace:d,trace:m}}(e),r=function(e){const t={addonsLoaded:e.addonsLoaded,currentScript:e.currentScript,consent:(r=e.consentTracking,(0,n.zG)(r,s.EQ((()=>i.a9(!0)),(e=>e.consentRef)))),currentTimestampSecs:l(),enabledAddons:c(e),identities:e.identities,sdkClosing:p(),metricSampleRate:e.config.metricsSamplingPercentage/100,sdkVariant:s.ij(e.sdkVariant),sessionId:i.a9(e.sessionManager.getSessionId()),userId:e.userId.ref,userIdIsNewlyGenerated:e.userId.isNewlyGenerated,viewId:e.viewId.ref,pageviewState:e.pageviewState,webClient:e.webClient};var r;return t}(e);return function(e,t,r,s){const c=5e3,l=(0,n.zG)(e,function(e,t){return r=>a=>{const{value:s,state:u}=r(a),[c,l]=i.Ue(u.current),p=(0,o.UM)((()=>l(u.current)),e),d=(0,n.zG)(i.vP(u,c),i.UI((e=>{let[t,r]=e;return t===r})));return(0,n.zG)(t,i.bw((e=>e&&p()))),{value:(0,n.bc)(d,s),state:(0,n.zG)(i.vP(t,u,c),i.UI((e=>{let[t,r,n]=e;return t?r:n})))}}}(c,s),mt,function(e){return t=>(0,n.ls)((0,u.rO)({previousState:t=>e.current?t:void 0}),t,(0,u.rO)({state:(0,n.ls)((t=>i.vP(e,t)),i.UI((e=>{let[t,r]=e;return t?r:void 0})))}))}(r),function(e){return t=>(0,n.ls)((0,u.rO)({previousState:()=>localStorage.getItem(e)}),t,(0,u.rO)({state:(0,u.bw)(i.YP((t=>{switch(typeof t){case"string":localStorage.setItem(e,t);break;case"undefined":localStorage.removeItem(e);break;case"object":if(null===t){localStorage.removeItem(e);break}throw new Error("Permutive app raised an invalid state.");default:throw new Error("Permutive app raised an invalid state.")}})))}))}(t),a.UI((e=>{let[t,r]=e;return r})));return l({stopped:i.a9(!1)}).value}(pt(t,r,e.core),e.namespace.getNamespacedStorageKey("permutive-app"),r.consent,r.sdkClosing)}},8880:(e,t,r)=>{r.d(t,{B9:()=>f,iq:()=>p,ti:()=>g});var n=r(5654),i=r(842),a=r(7144),o=r(8236),s=r(2169),u=r(3600),c=r(4793);const l="__permutive.",p="__permutiveConfigQueryParams";const d={default:{windowKey:"permutive",environment:"default",apiHost:"api.permutive.com",apiKey:"",apiProtocol:"https",cdnBaseUrl:"cdn.permutive.com",cdnProtocol:"https",pxidHost:"prmutv.co",apiVersion:"v2.0",sdkErrorsApiVersion:"v2",advertiserApiVersion:"v2",classificationModelsApiVersion:"v1",loggingEnabled:!1,tracingEnabled:!1,requestTimeout:5e3,cookieDomain:"."+(0,c._Y)(window.location.hostname),cookieName:"permutive-id",cookieExpiry:function(){const e=new Date;return e.setMonth(e.getMonth()+6),e.toUTCString()}(),eventsTTLInDays:null,permutiveDataMiscKey:"permutive-data-misc",permutiveDataQueriesKey:"permutive-data-queries",stateNamespace:"",sendClientErrors:!0,metricsSamplingPercentage:20,eventsCacheLimitBytes:25e5,segmentSyncApiHost:"8512b548-2306-4976-a576-a880f2c35e4e.partner.permutive.app",consentRequired:!1,sdkType:"stable",viewId:null,localStorageDebouncedKeys:[],localStorageWriteDelay:1e3,localStorageWriteMaxDelay:1500,watson:{enabled:!0},secureSignalsApiHost:"secure-signals.permutive.app",prebidAuctionsRandomDownsamplingThreshold:0},production:{},development:{apiProtocol:"http",loggingEnabled:!0,tracingEnabled:!0,sendClientErrors:!1}},m=e=>{const t={consentRequired:!0,loggingEnabled:!0,sendClientErrors:!0,tracingEnabled:!0},r={eventsTTLInDays:!0,eventsCacheLimitBytes:!0,metricsSamplingPercentage:!0,requestTimeout:!0,localStorageWriteDelay:!0,localStorageWriteMaxDelay:!0,prebidAuctionsRandomDownsamplingThreshold:!0};return Object.keys(e).reduce(((n,i)=>{if(t.hasOwnProperty(i)){const t="true"===e[i];return{...n,[i]:t}}if(r.hasOwnProperty(i)){const t=Number(e[i]);return isNaN(t)?n:{...n,[i]:t}}return{...n,[i]:e[i]}}),{})},f=function(){let{getQueryParams:e=c.zM}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const t=e=>Object.entries(e).reduce(((e,t)=>{let[r,n]=t;if(!(0===r.indexOf(l)))return e;const i=r.replace(l,"");return[...e,[i,n]]}),[]);return(0,s.zG)(a.Y3((()=>(0,s.zG)(e(),t,(e=>(0,u.m8)(...e)),m,(e=>_({queryConfig:e})))),(e=>`Failed to parse query params. Got ${(0,n.w)(e).message}`)))},_=e=>{let{queryConfig:t}=e;const r=(0,s.zG)(o.Y3((()=>window.sessionStorage.getItem(p))),o.tS(o.ij),o.tS((0,s.ls)(i.A,o.ij)),o.fS((()=>({}))));return(0,u.PM)(r,t)},g=(e,t)=>{const r=(e.environment&&d[e.environment])??{};return(0,u.PM)(d.default,r,e,t)}},3258:(e,t,r)=>{r.d(t,{v:()=>n});const n=(e,t,r)=>function(){const n=r()?t:e;return n(...arguments)}},8254:(e,t,r)=>{r.d(t,{S:()=>_});var n=r(2169),i=r(8236),a=r(9912),o=r(9519),s=r(9806),u=r(8586);var c=r(3600);class l{wait_prev;block_next;task;started;complete;constructor(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.wait_prev=t.wait_prev||!1,this.block_next=t.block_next||!1,this.started=!1,this.complete=!1,this.task=e}waits(){return this.wait_prev}blocks(){return this.block_next}execute(e){this.started=!0,this.task((()=>{this.complete=!0,e()}))}}var p=r(5576);r(4466);class d{logger;api;activationManager;sessionManager;metrics;viewId;userId;network;clientContext;unprocessedEvents;taskQueue;identities;permutiveReset;messages;addons;trace;permutiveRealtime;state;customProperties;config;permutiveData;externalData;cookies;identitiesIngestor;global;nextGen;pageviewState;tcf;initialisedAddons=[];constructor(e,t,r,n,i,a,o,s,u,c,l,p,d,m,f,_,g,v,h,y,b,S,w,I,E,k,G,P){this.logger=e,this.api=t,this.activationManager=r,this.sessionManager=n,this.metrics=i,this.viewId=a,this.userId=o,this.network=s,this.clientContext=u,this.unprocessedEvents=c,this.taskQueue=l,this.identities=p,this.permutiveReset=d,this.messages=m,this.addons=f,this.trace=_,this.permutiveRealtime=g,this.state=v,this.customProperties=h,this.config=y,this.permutiveData=b,this.externalData=S,this.cookies=w,this.identitiesIngestor=I,this.global=E,this.nextGen=k,this.pageviewState=G,this.tcf=P}identify(e){const t="[Identify]";this.logger.debug("<call> identify",e);const r=(0,c.b2)(),{left:o,right:u}=this.identities.parseCustomerDefinedIdentities(e);if(o.length>0)throw new Error(o.join(" "));const d={...this.identities.getIdentitiesMap(),...u.reduce(((e,t)=>{let{tag:r,id:n,priority:i,expiry:a}=t;return{...e,[r]:{id:n,...void 0!==i?{priority:i}:{},...void 0!==a?{expiry:a}:{}}}}),{})},m=(0,n.zG)(Object.values(d),a.DZ((e=>i.ij(e.id)))),f=this.identities.getPrioritizedIdentities(d);if("string"==typeof e&&(0,s.Bt)("6adbc4e9-beda-4b9e-9117-43ec3a80e1d0","8512b548-2306-4976-a576-a880f2c35e4e",m,window.location.hostname,this.userId.get()))return r.resolve(),r.promise;const _=async e=>{await(0,p.Yj)({clientContext:this.clientContext,global:this.global,identities:this.identities,logger:this.logger,reset:this.permutiveReset,userId:this.userId},e.user_id)};return this.taskQueue.add(new l((async e=>{this.logger.debug("<task> identify",u);const n=async()=>{this.logger.log(t,"request identity");const e=await this.api.identify(this.metrics,this.userId,f);this.userId.isEqual(e.user_id)?this.metrics.track({name:"sdk_identity_remained_total",value:1,labels:{identify_reason:"identify_call"}}):(this.metrics.track({name:"sdk_identity_changed_total",value:1,labels:{identify_reason:"identify_call"}}),await _(e))};this.identities.setIdentities(u).identifyRequestRequired()?await n():this.logger.log(t,"skip request"),this.logger.debug("<done> identify",u),e(),r.resolve(),await this.identitiesIngestor.ingestIfEligible(u).catch((e=>this.api.reportError(`Couldn't ingest identities, got ${e}`,this.userId.get())))}),{wait_prev:!0,block_next:!0})),r.promise}on(e,t){return this.nextGen.eventHandlerAfterUpload.addListener({name:e,callback:t,once:!1})}once(e,t){return this.nextGen.eventHandlerAfterUpload.addListener({name:e,callback:t,once:!0})}pageviewTracked=!1;track(){const[e,t,r]=[arguments.length<=0?void 0:arguments[0],(arguments.length<=1?void 0:arguments[1])||{},(arguments.length<=2?void 0:arguments[2])||{}],n=this.trace.startSpan(`track("${e}")`);this.logger.log("<call> track",e);const i=(0,c.b2)();this.pageviewTracked||"Pageview"!==e||(this.pageviewTracked=!0,this.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"pageview_tracked",time_origin:"sdk_init"})),this.metrics.trackCounter({name:"sdk_event_track_count_total",labels:{event_name:e},value:1}),i.promise.then((()=>{this.metrics.trackCounter({name:"sdk_event_track_success_count_total",labels:{event_name:e},value:1}),n.finish()}),(()=>{this.metrics.trackCounter({name:"sdk_event_track_fail_count_total",labels:{event_name:e},value:1}),n.finish()}));const a=r.unprocessedData??{},o=a.sessionId??this.sessionManager.getSessionId(),s=a.viewId??this.viewId.get(),u={success:r.success||(e=>{}),error:r.error||((e,t)=>{})};return this.taskQueue.add(new l((n=>{this.logger.log("<task> track",e);return(a.client?Promise.resolve(a.client):this.clientContext.getClientAsync()).then((a=>{const l={name:e,properties:{...t,client:t.client?(0,c.PM)(a,t.client):a},session_id:o,view_id:s,time:new Date};return this.nextGen.trackEvent.current({event:l,useBeacon:r.useBeacon??!1}).then((e=>{this.logger.log("<done> track",l.name),u.success(e),i.resolve(l),n()})).catch((e=>{u.error(e),this.api.reportError(e,this.userId.get()),i.reject(e)}))}))}))),i.promise}trigger(e,t,r){const n=(0,c.b2)();this.logger.log("<call> trigger",e);const i=t=>(i,a)=>{if(i.properties.segment_number===e){const o={result:t};this.logger.debug("<fire> trigger",{event:i,error:a,segmentCode:e,payload:o}),r(o),n.resolve(o)}};return this.nextGen.eventHandlerAfterUpload.addListener({name:"SegmentEntry",callback:i(!0),once:!1}),this.nextGen.eventHandlerAfterUpload.addListener({name:"SegmentExit",callback:i(!1),once:!1}),this.logger.log("<done> trigger",e),n.promise}query(){return Promise.resolve({result:!1})}segment(e,t){const r=(0,c.b2)();this.logger.log("<call> segment",e);return this.taskQueue.add(new l((n=>{this.logger.log("<task> segment",e);const i=this.nextGen.queryLanguageCohorts.all.current.includes(e)||!1;t(i),r.resolve(),this.logger.log("<done> segment",e),n()}))),r.promise}segments(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"all";const r=(0,c.b2)();this.logger.log("<call> segments");return this.taskQueue.add(new l((n=>{this.logger.log("<task> segments ("+t+")");const i=i=>{e(i),r.resolve(i),this.logger.log("<done> segments ("+t+")"),n()};"dfp"===t?this.messages.once("permutive:dfp:ready",(()=>{this.addons.dfp&&i([...this.addons.dfp.segments.liveSegments])})):i([...this.nextGen.queryLanguageCohorts.all.current])}))),r.promise}reset(){return Promise.all([this.api.reset(this.metrics),this.identities.reset(),this.permutiveReset.reset(),this.nextGen.reset(),this.userId.reset()]).then((()=>{this.messages.emit("permutive:reset")})).catch((e=>{this.api.reportError(`Error resetting internals. Got ${e}`)}))}addon(e,t){this.logger.debug("[Addon]",`Called for ${e}`,t);const a={...t,permutive:this,api:this.api,activationManager:this.activationManager,network:this.network,clientContext:this.clientContext,logger:this.logger,unprocessedEvents:this.unprocessedEvents,metrics:this.metrics,state:this.state,messages:this.messages,userId:this.userId,viewId:this.viewId,customProperties:this.customProperties,config:this.config,permutiveData:this.permutiveData,sessionManager:this.sessionManager,addons:this.addons,externalData:this.externalData,cookies:this.cookies,nextGenOutput:this.nextGen,identities:this.identities,pageviewState:this.pageviewState,tcf:this.tcf},s=((0,n.zG)(this.nextGen.pbjsPair,o.UI(i.UI((0,c.vg)("pbjs")))),e=>{this.initialisedAddons.push(e),this.messages.emit("permutive:addon:preinit",e)});if("contextual"===e&&i.pC(this.nextGen.addons.contextual))return"contextual"in this.addons||(s(e),this.addons.contextual=this.nextGen.addons.contextual.value),this.addons.contextual(t),this.addons.contextual;if(-1===this.initialisedAddons.indexOf(e))switch(s(e),e){case"web":Promise.resolve().then(r.bind(r,1382)).then((e=>this.addons.web=new e.WebAddon(a))).then((()=>this.messages.emit("permutive:web:ready")));break;case"publishers":case"overlays":case"scriptrunner":case"nativo":case"facebook_pixel_v2":case"tiktok_pixel":case"eyeota_pixel":case"rubicon":case"rubicon_ssp":case"tracking_pixel":case"twitter_pixel":case"pinterest_pixel":case"local_storage":case"appnexus_adserver":case"prebid":case"classification_models":case"clean_room":case"prebid_analytics":case"gam_log":case"smart":case"tradedesk":case"ddp":case"dbm":case"appnexus":case"pubmatic":case"ssp":0;break;case"dfp":Promise.resolve().then(r.bind(r,8417)).then((async e=>this.addons.dfp=await e.createAddon(a)));break;case"freewheel":Promise.resolve().then(r.bind(r,9713)).then((e=>this.addons.freewheel=new e.FreeWheelAddon(a)))}else"web"===e&&!0!==t.auto_init&&((e,t,r,n)=>new Promise(((a,o)=>{const s=(0,i.Y3)(e);if((0,i.pC)(s))return a(s.value);r.once(t,(()=>(0,i.g_)((()=>o(new Error(`Error after waiting for event ${t}`))),a)((0,i.Y3)(e))));const c=(null==n?void 0:n.timeout)??1e4;(0,u.HJ)((()=>o(new Error(`Event ${t} was not received within the timeout period ${c}ms`))),c)})))((()=>{if(!this.addons.web)throw new Error('"web" addon not ready');return this.addons.web.reset(t)}),"permutive:web:ready",this.messages).catch((e=>{this.api.reportError(`Got error while trying to reset web. Got ${e.message}`,this.state.userId.get())}))}ready(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"initialised";const r=(0,c.b2)(),n=()=>{e(),r.resolve()};switch(t){case"initialised":this.permutiveRealtime.isReady()?n():this.messages.on("permutive:ready",n);break;case"realtime":this.permutiveRealtime.isRealtime()?n():this.messages.once("permutive:realtime",n)}return r.promise}}var m=r(3258);const f=e=>{const{logger:t,consentTracking:r}=e,i=function(){return t.debug("Methods[track]: Cannot track as consent is revoked"),Promise.resolve(null)};return e=>class extends e{constructor(){super(...arguments),r.isRevoked()&&this.consentRevoked(),r.listenForConsent((()=>this.consentRevoked()),n.Q1)}async consentRevoked(){return await this.sessionManager.reset(),this.reset()}track=(0,m.v)(super.track.bind(this),i,r.isRevoked)}},_=(e,t,r,i,a,o,s,u,c,l,p,m,_,g,v,h,y,b,S,w,I,E,k,G,P,U,x,D,z)=>new((0,n.zG)(d,f({consentTracking:U,logger:e})))(e,t,r,i,a,o,s,u,c,l,p,m,_,g,v,h,y,b,S,w,I,E,k,G,P,x,D,z)},5576:(e,t,r)=>{r.d(t,{Yj:()=>u,TZ:()=>s});var n=r(5654),i=r(3600);var a=r(9806);const o=async e=>{await e.identities.thirdParty,await function(e,t){return(0,a.Bt)("6adbc4e9-beda-4b9e-9117-43ec3a80e1d0","8512b548-2306-4976-a576-a880f2c35e4e",e.identities.getPrioritizedIdentities(e.identities.getIdentitiesMap()).map((e=>e.id)),window.location.hostname,e.userId.get())?t.reset():Promise.resolve()}(e,e.permutiveMethods);const t=await function(e){const t=e.trace.startSpan("identify");0;return(async e=>{const t="[Identify Init]",{logger:r,api:n,userId:a,identities:o,metrics:s,identitiesIngestor:u,messages:c,sessionManager:l}=e,p=await o.thirdParty,d=o.extractIdentifyFromQueue(e),m={...o.getIdentitiesMap(),...d.reduce(((e,t)=>{let{tag:r,id:n,priority:i,expiry:a}=t;return{...e,[r]:{id:n,...a?{expiry:a}:{},...void 0!==i?{priority:i}:{}}}}),{})},f=o.setIdentities(Object.entries(m).map((e=>{let[t,{id:r,priority:n,expiry:i}]=e;return{tag:t,id:r,...i?{expiry:i}:{},...void 0!==n?{priority:n}:{}}})));o.setReady();const _=o.getPrioritizedIdentities(m);r.log("Begin identification");const g=e.sessionCount>1&&l.sessionHasChanged()||p.identifyRequestRequired()||f.identifyRequestRequired()?await(r.debug(t,"request identity"),n.identify(s,a,_).then((e=>{const n=e.user_id;return a.isEqual(n)?{identityChanged:!1}:(r.debug(t,"fetch received new user id",n),{identityChanged:!0,userId:n})})).catch((e=>(n.reportError(`${t} Fetch failed. Got ${e}`,a.get()),{identityChanged:!1}))).then((0,i.bw)((t=>e.metrics.track({name:`sdk_identity_${t.identityChanged?"changed":"remained"}_total`,value:1,labels:{identify_reason:"sdk_init"}}))))):(r.debug(t,"skip request"),{identityChanged:!1});return u.ingestIfEligible(_).catch((e=>n.reportError(`Couldn't ingest identities, got ${e}`,g.identityChanged?g.userId:a.get()))),c.emit("permutive:user:ready"),r.debug(t,"result",g),g})(e).catch((t=>(e.api.reportError(`Failed to identify. Got ${(0,n.w)(t)}`),{identityChanged:!1}))).then((e=>(t.finish(),e)))}(e);return t.identityChanged?await u(e,t.userId):e.logger.log("Identity has not changed"),t},s=async function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e=>{};o(e).then(t),c(e.global,e.clientContext)};async function u(e,t){e.logger.log("Identity has changed"),await e.reset.reset(),e.userId.set(t),c(e.global,e.clientContext),e.identities.setIdentities([])}function c(e,t){return e.context=t.getContext()}},3237:(e,t,r)=>{function n(e,t,r,n){n.debug("set SDK as ready"),e.emit("permutive:api:ready"),e.emit("permutive:queries:initialised"),t.track({name:"sdk_local_storage_byte_total",value:r.getStateSizeInBytes(),labels:{}}),n.warn("sdk_query_states_byte_total metric needs re-implementing")}r.d(t,{R:()=>n})},8145:(e,t,r)=>{r.d(t,{LA:()=>s});var n=r(9912),i=r(856),a=r(3600);const o=(e,t,r)=>{let{api:n,state:i}=r;n.reportError(`Function "permutive.${t.functionName}" caused an error: ${e.message}`,i.userId.get())};function s(e,t,r,n,i,a){let s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:p;const c=u(e),l=a.startSpan("queued_methods"),d={api:i,state:t},m=e=>{if(e.functionName in r){r[e.functionName].apply(n,e.arguments)}else o(new Error("Does not exist."),e,d)},f=e=>!s.includes(e);c.forEach((e=>{try{f(e.functionName)&&m(e)}catch(t){const r=t instanceof Error?t:new Error("Unknown error.");o(r,e,d)}})),l.finish()}function u(e){const t=(0,n.uK)((e=>-1!==l.indexOf(e.functionName)))(e),r=t.right,o=t.left.filter((e=>"consent"!==e.functionName)),s=(0,i.Zt)(((e,t)=>c(e)&&c(t)?(0,a.lW)(d).compare(e.arguments[0],t.arguments[0]):(0,a.lW)(l).compare(e.functionName,t.functionName)));return(0,n.DY)(s)(r).concat(o)}const c=e=>"addon"===e.functionName,l=["identify","trigger","addon","track"],p=["identify"],d=["dfp","appnexus_adserver","web"]},5885:(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{initialiseWebSDK:()=>initialiseWebSDK});var _permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(5654),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(8236),fp_ts_Either__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(7144),fp_ts_function__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(2169),fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(132),_framework_ref__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(9519),_identity_legacy_NeustarFabrickIdentitiesIngestor__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(4436),_identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(9806),_identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(8142),_sdkql_blockers__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(6112),_core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(5332),_core_activations_PermutiveAddons__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(7802),_sdkql_event_collection_events_cache_store_crypto_HashcodeDigest__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(2144),_sdkql_event_collection_events_cache_store_crypto_SHA256Digest__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(5579),_sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(6214),_core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(138),_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(44),_core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(7646),_core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(6557),_core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(6962),_core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(2352),_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(7474),_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(9103),_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(6369),_dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(1324),_http_PermutiveApi__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(705),_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(3600),_utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(1161),_Config__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(8880),_initialisation_identity__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(5576),_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(3237),_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(8145),_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(8254),_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(8586),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(2678),main_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(7719),main_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(508);const prefix="[Initialisation Web]",initialiseWebSDK=_ref=>{let{cookieStore,clientContext,currentScript,consentModule,core,externalData,localStorage,logger,messages,metrics,namespace,pageviewState,partialTagWithKey,permutiveData,sessionManager,tag,trace,configFromQueryParams,urls,userId}=_ref;return(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((async()=>{const windowKey=partialTagWithKey.key,permutiveGlobal=window[windowKey],config=tag.config,viewId=(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(pageviewState.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI((e=>e.viewId)),(e=>new _core_state_PermutiveViewId__WEBPACK_IMPORTED_MODULE_23__.W(e))),network=new main_http_PermutiveNetwork__WEBPACK_IMPORTED_MODULE_20__.E(metrics),sessionStorage=(0,main_core_store_SessionStorage__WEBPACK_IMPORTED_MODULE_19__.u)(namespace,logger,consentModule.consentTracking.consentRef),{consentTracking,consentValidation}=consentModule;(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(consentTracking.consentRef,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>{e?sessionStorage.put(configFromQueryParams,_Config__WEBPACK_IMPORTED_MODULE_14__.iq).then(fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.Q1,(e=>{logger.warn(prefix,`Failed to cache "${_Config__WEBPACK_IMPORTED_MODULE_14__.iq}".`,(0,_permutive_permutive_utils_ts_error__WEBPACK_IMPORTED_MODULE_24__.w)(e))})):sessionStorage.delete(_Config__WEBPACK_IMPORTED_MODULE_14__.iq)}))),window[windowKey].consent=consentValidation;const createInternalsSpan=trace.startSpan("internals");(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(viewId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["view_id",e])))),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(userId.ref,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.YP((e=>clientContext.updateContext(["user_id",e]))));const api=new _http_PermutiveApi__WEBPACK_IMPORTED_MODULE_11__.F(urls,config,network,metrics,logger),tcf=(0,_core_tcf_TCF__WEBPACK_IMPORTED_MODULE_9__.SD)(window,logger),identityProviderEnv={permutive:permutiveGlobal,network,api,userId,metrics,permutiveData,messages,config,cookies:cookieStore,logger,tcf},identities=new _identity_legacy_PermutiveIdentities__WEBPACK_IMPORTED_MODULE_2__.lg(metrics,trace,permutiveData,identityProviderEnv,logger),identitiesIngestor=new _identity_legacy_PermutiveIdentitiesIngestorNoOp__WEBPACK_IMPORTED_MODULE_25__.z,permutiveRealtime=new _core_state_PermutiveRealtime__WEBPACK_IMPORTED_MODULE_26__.u(trace,metrics,messages),unprocessedArgs={consent:consentTracking.consentRef,logger,namespace},unprocessedEvents={PrebidAuctions:new _core_events_unprocessed_UnprocessedPrebidAuctions__WEBPACK_IMPORTED_MODULE_27__.J(unprocessedArgs)},customProperties=new _sdkql_event_collection_PermutiveEventCustomProps__WEBPACK_IMPORTED_MODULE_7__.X,permutiveReset=new _core_state_PermutiveReset__WEBPACK_IMPORTED_MODULE_28__.a(config,localStorage,logger,permutiveData,cookieStore,externalData),taskQueue=new _utils_task_queue_PermutiveTaskQueue__WEBPACK_IMPORTED_MODULE_13__.i(messages),activationManager=new _core_activations_PermutiveActivationManagerWeb__WEBPACK_IMPORTED_MODULE_3__.v(logger,permutiveGlobal,clientContext),[addonsLoadedRef,setAddonsLoaded]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(!1),webClient=(()=>{const[e,t]=_framework_ref__WEBPACK_IMPORTED_MODULE_0__.Ue(Date.now());return(0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.UM)((()=>t(Date.now())),1e3),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(_framework_ref__WEBPACK_IMPORTED_MODULE_0__.vP(viewId.ref,e),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI((()=>clientContext.getClient())),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.D8(((e,t)=>e===t||JSON.stringify(e)===JSON.stringify(t))))})(),eventCacheStoreFactory=()=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.N1)((0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,9392))),String),trace.traceTask("import-DBStore-main-thread"))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.UI)((e=>{let{DBStore:t}=e;return new t((0,_core_store_LocalStorage__WEBPACK_IMPORTED_MODULE_29__.E)(namespace,logger,consentTracking.consentRef))}))),eventsCacheFactory=()=>(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.SF)((0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.Y3)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,7359))),String),trace.traceTask("import-events-cache"))),(0,fp_ts_TaskEither__WEBPACK_IMPORTED_MODULE_21__.tS)((e=>{let{EventsCache:t}=e;return(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(t.initialise(config,logger,(function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};api.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)}),trace,metrics,userId.ref,eventCacheStoreFactory),trace.traceTask("initialise-events-cache-main-thread"))}))),nextGen=await(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.SF)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,9938)))),trace.traceTask("import-next-gen"),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__.Qt("configureCore",core),fp_ts_Task__WEBPACK_IMPORTED_MODULE_30__.tS((e=>{let{runNextGenFeatures:t,configureCore:r}=e;return(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)((0,_framework_compute_time_measurement__WEBPACK_IMPORTED_MODULE_18__.N1)((async()=>t({activationManager,addonsLoaded:addonsLoadedRef,api,currentScript,clientContext,config,consentTracking:fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.G(consentTracking),core:r({eventsCacheFactory,migratedStateMaps:()=>({internal:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(permutiveData.getData("internal_query_states"),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.DT(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.Kn)),external:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(permutiveData.getData("external_query_states"),fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.DT(_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.Kn))})}),externalData,identities:identities.ref,logger,messages,metrics,namespace,network,permutiveData,sessionManager,urls,userId,viewId,pageviewState:pageviewState.ref,trace,webClient:(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(webClient,_framework_ref__WEBPACK_IMPORTED_MODULE_0__.UI(fp_ts_Option__WEBPACK_IMPORTED_MODULE_31__.G))}))),trace.traceTask("run-next-gen-features"))})))();(0,_core_metrics_MetricReporter__WEBPACK_IMPORTED_MODULE_8__.p)({api,context:nextGen.metricContext,logger,messages,metrics});const state=new _core_state_PermutiveStateWeb__WEBPACK_IMPORTED_MODULE_32__.u(permutiveData,permutiveReset,userId,viewId,logger),addons={},permutiveMethods=(0,_PermutiveMethodsWeb__WEBPACK_IMPORTED_MODULE_17__.S)(logger,api,activationManager,sessionManager,metrics,viewId,userId,network,clientContext,unprocessedEvents,taskQueue,identities,permutiveReset,messages,addons,trace,permutiveRealtime,state,customProperties,config,permutiveData,externalData,cookieStore,identitiesIngestor,permutiveGlobal,consentTracking,nextGen,pageviewState,tcf);createInternalsSpan.finish();const context=clientContext.getMutableContextUNSAFE();[].forEach((s=>{fp_ts_Either__WEBPACK_IMPORTED_MODULE_33__.Y3((()=>eval(s)),(e=>{api.reportError({...e,message:`Error running custom script ${s}`},userId.get())}))}));const blockers=(0,_sdkql_blockers__WEBPACK_IMPORTED_MODULE_34__.X)({logger,messages});blockers.addBlocker("permutive:queries:initialised");const initialIdentifyResult=(0,_utils_PermutiveUtils__WEBPACK_IMPORTED_MODULE_12__.b2)();let globalIdentifyBound=!1;messages.on("permutive:user:ready",(()=>{permutiveGlobal.identify=permutiveMethods.identify.bind(permutiveMethods),globalIdentifyBound=!0;const e=identities.extractIdentifyFromQueue({global:permutiveGlobal});e.length>0?initialIdentifyResult.resolve(permutiveGlobal.identify(e)):initialIdentifyResult.resolve()})),messages.on("permutive:blockers:empty",(()=>{if(!globalIdentifyBound){const e=permutiveGlobal.identify;permutiveGlobal.identify=t=>(e(t),initialIdentifyResult.promise)}permutiveGlobal.on=permutiveMethods.on.bind(permutiveMethods),permutiveGlobal.once=permutiveMethods.once.bind(permutiveMethods),permutiveGlobal.track=permutiveMethods.track.bind(permutiveMethods),permutiveGlobal.trigger=permutiveMethods.trigger.bind(permutiveMethods),permutiveGlobal.query=permutiveMethods.query.bind(permutiveMethods),permutiveGlobal.segment=permutiveMethods.segment.bind(permutiveMethods),permutiveGlobal.segments=permutiveMethods.segments.bind(permutiveMethods),permutiveGlobal.reset=permutiveMethods.reset.bind(permutiveMethods),permutiveGlobal.ready=permutiveMethods.ready.bind(permutiveMethods),permutiveGlobal.addon=permutiveMethods.addon.bind(permutiveMethods),permutiveGlobal.context=clientContext.getMutableContextUNSAFE(),permutiveGlobal.addons=addons,permutiveGlobal.config=config,permutiveRealtime.setAsReady(),(0,_initialisation_queuedMethods__WEBPACK_IMPORTED_MODULE_16__.LA)(permutiveGlobal.q,state,permutiveGlobal,permutiveMethods,api,trace),setAddonsLoaded(!0)}));const loadAddonsSpan=trace.startSpan("load_addons");(0,_dynamic_addons_LoadAddons__WEBPACK_IMPORTED_MODULE_10__.C)({extMessages:new _dynamic_messages_PermutiveMessages__WEBPACK_IMPORTED_MODULE_35__.a(messages),nextGen,messages,viewId,state,sessionManager,api,clientContext,externalData,logger,metrics,namespace,network,permutive:permutiveGlobal,q:permutiveGlobal.q,userId}),loadAddonsSpan.finish(),await(0,_initialisation_identity__WEBPACK_IMPORTED_MODULE_15__.TZ)({api,clientContext,externalData,global:permutiveGlobal,identities,identitiesIngestor,logger,messages,metrics,network,permutiveMethods,reset:permutiveReset,trace,userId,sessionManager,sessionCount:nextGen.metricContext.current.session_count}),(0,_initialisation_initialisationLifecycle__WEBPACK_IMPORTED_MODULE_36__.R)(messages,metrics,state,logger),(0,fp_ts_function__WEBPACK_IMPORTED_MODULE_22__.zG)(_framework_ref__WEBPACK_IMPORTED_MODULE_0__.vP(nextGen.realtime,nextGen.queryLanguageCohorts.all),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.D8(((e,t)=>e[0]===t[0])),_framework_ref__WEBPACK_IMPORTED_MODULE_0__.bw((e=>{let[t,r]=e;t&&permutiveRealtime.setAsRealtime(r.length)})))}),(e=>`Exception during initialisation. Got ${e}`))}},1498:(e,t,r)=>{r.r(t),r.d(t,{runSdk:()=>ce});var n=r(7144),i=r(2169);var a=r(132),o=r(2678),s=r(8236);var u=r(4267);class c{namespace;config;logger;constructor(e,t,r){this.namespace=e,this.config=t,this.logger=r}makeCookie(e,t,r){return[encodeURIComponent(this.namespace.getNamespacedStorageKey(e)),"=",t?encodeURIComponent(t):"","; expires=",r,"; domain=",this.config.cookieDomain,"; path=/; samesite=none; secure"].join("")}setCookie(e,t){if(!(t&&e&&this.config.cookieExpiry&&this.config.cookieDomain)){const{cookieExpiry:r,cookieDomain:n}=this.config??{};throw this.logger.warn(`Unable to set cookie. ${u.LP}`,{value:t,cookieName:e,cookieExpiry:r,cookieDomain:n}),new Error(u.LP)}const r=this.makeCookie(e,t,this.config.cookieExpiry);if(r.length>u.dG)throw this.logger.warn(`Unable to set cookie ${this.namespace.getNamespacedStorageKey(e)}. ${u.eP}`),new Error(u.eP);return this.logger.debug(`Setting cookie ${r}`),document.cookie=r,!0}getCookie(e){const t=arguments.length>1&&void 0!==arguments[1]&&arguments[1]?e:this.namespace.getNamespacedStorageKey(e),r=new RegExp("\\b"+encodeURIComponent(t)+"=([^;]+)").exec(document.cookie);return null!==r?decodeURIComponent(r[1]):null}deleteCookie(e){if(!e||!this.config.cookieDomain)return!1;const t=this.makeCookie(e,void 0,"Thu, 01 Jan 1970 00:00:00 UTC");return this.logger.debug(`Deleting cookie ${t}`),document.cookie=t,!0}}var l=r(3258);const p=e=>{const{logger:t,consentTracking:r}=e,n=e=>(t.debug(`Cookie: Failed to set cookie ${e} as consent is revoked`),!1);return e=>class extends e{setCookie=(0,l.v)(super.setCookie.bind(this),n,r.isRevoked)}};var d=r(5654),m=r(842);class f{namespace;constructor(e){this.namespace=e}getExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);return window.localStorage.getItem(t)}getExternalJsonData(e){const t=this.getExternalData(e);return null===t?null:(0,m.A)(t)}setExternalData(e,t){const r=this.namespace.getNamespacedStorageKey(e);try{window.localStorage.setItem(r,t)}catch(e){}}setExternalJsonData(e,t){return(0,i.zG)((r=t,(0,n.Y3)((function(){var e=JSON.stringify(r);if("string"!=typeof e)throw new Error("Converting unsupported structure to JSON");return e}),i.yR)),(0,n.UI)((t=>this.setExternalData(e,t))),(0,n.g_)((e=>{throw(0,d.w)(e)}),i.Q1));var r}removeExternalData(e){const t=this.namespace.getNamespacedStorageKey(e);window.localStorage.removeItem(t)}}const _=e=>{const{logger:t,consentTracking:r}=e,n=e=>{t.debug(`External Data: Failed to set key ${e} as consent is revoked`)},i=n,a=n;return e=>class extends e{setExternalData=(0,l.v)(super.setExternalData.bind(this),i,r.isRevoked);setExternalJsonData=(0,l.v)(super.setExternalJsonData.bind(this),a,r.isRevoked)}};var g=r(8586);class v{sdkInitTimestamp;prefix="[Permutive]"+(self.document?"[Main]":"[Worker]");debugStyle=["color: blue"].join(";");constructor(e){this.sdkInitTimestamp=e}get timeDeltaFromInit(){return`[${(new Date).getTime()-this.sdkInitTimestamp}ms]`}log(){return console.log.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}debug(){return console.debug.bind(self.console,"%s%c%s",this.timeDeltaFromInit,this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}error(){return console.error.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}}class h{log(){}debug(){}warn(){}error(){}}const y="[MESSAGES]";class b{logger;messageListenerMap={};replayQueue={};onceTracker={};defaultMessageOptions={withReplay:!1,once:!1};constructor(e){this.logger=e}on(e,t,r){const n=this.mergeMessageOptions(r);n.withReplay&&this.processReplayQueue(e,t);const i=S(e,this.messageListenerMap).push(t)-1;return n.once&&this.addToOnceTracker(e,i),i}once(e,t){return this.on(e,t,{once:!0})}off(e,t){if(null==t)return this.messageListenerMap[e]=[],void(this.replayQueue[e]=[]);t<0?this.logError('Index for "off" fell out of range',{index:t}):S(e,this.messageListenerMap)[t]=i.Q1}emit(e,t,r){const n=this.mergeMessageOptions(r);S(e,this.messageListenerMap).length>0?(this.logDebug(`Emitting Event: ${e}`),this.emitMessageWithPayload(e,t)):n.withReplay&&this.addToReplayQueue(e,t)}addToReplayQueue(e,t){S(e,this.replayQueue).push(t)}processReplayQueue(e,t){var r;null===(r=this.replayQueue[e])||void 0===r||r.forEach((e=>t(e)))}emitMessageWithPayload(e,t){var r;null===(r=this.messageListenerMap[e])||void 0===r||r.forEach(((r,n)=>{r(t),this.removeListenerIfSetToFireOnlyOnce(e,n)}))}addToOnceTracker(e,t){S(e,this.onceTracker).push(t)}removeListenerIfSetToFireOnlyOnce(e,t){var r;null!==(r=this.onceTracker[e])&&void 0!==r&&r.includes(t)&&this.off(e,t)}mergeMessageOptions(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return{...this.defaultMessageOptions,...e}}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(y,...t)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(y,...t)}}const S=(e,t)=>t[e]??=[];var w=r(2945);class I{sdkInitTimestamp;timeOriginSdkInit;logger;prefix="[Metrics]";timeOriginForContext=G();pendingMetrics=[];pendingCounters={};pendingTimers={};noMetricsTracked=0;constructor(e,t,r){this.sdkInitTimestamp=e,this.timeOriginSdkInit=t,this.logger=r}isEnabled(){return!0}getNoMetricsTracked(){return this.noMetricsTracked}consume(){const e=this.pendingMetrics.concat(Object.values(this.pendingCounters).flat());return this.pendingMetrics=[],this.pendingCounters={},e}track(e){this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackCounter(e){if(this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),e.name in this.pendingCounters){const t=Object.keys(e.labels),r=this.pendingCounters[e.name].findIndex((r=>Object.keys(r.labels).length===t.length&&t.every((t=>r.labels[t]===e.labels[t]))));-1===r?this.pendingCounters[e.name].push(e):this.pendingCounters[e.name][r]=k(this.pendingCounters[e.name][r],e.value)}else this.pendingCounters[e.name]=[e]}synchroniseTimeBetweenContexts(e){return(0,i.zG)(w.gz(s.G5)(this.timeOriginForContext,this.timeOriginSdkInit),s.UI((t=>{let[r,n]=t;return e+r-n})))}trackTimeSinceInit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now();(0,i.zG)(this.synchroniseTimeBetweenContexts(r),s.UI((e=>(e-this.sdkInitTimestamp)/1e3)),s.UI((r=>this.track({name:e,value:r,labels:t}))))}startTimer(e,t){const r=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:r,labels:t},n}stopTimer(e,t){const r=this.pendingTimers[t];if(r){const n=(performance.now()-r.startTime)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:r.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}}class E{isEnabled(){return!1}getNoMetricsTracked(){return 0}consume(){return[]}track(e){}trackCounter(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}const k=(e,t)=>({...e,value:e.value+t}),G=()=>(0,i.zG)(s.Y3((()=>performance.timeOrigin)),s.hX((e=>"number"==typeof e&&!Number.isNaN(e))));var P=r(3600),U=r(7250),x=r(144);class D{config;namespace;logger;prefix="[Data Store]";permutiveData={};permutiveDataSize=0;localStorageScheduler;localStorageQueue=new Set;debouncedStorageKeys;debouncedFlush;constructor(e,t,r){this.config=e,this.namespace=t,this.logger=r,this.localStorageScheduler=new U.b(e.localStorageWriteDelay,e.localStorageWriteMaxDelay),this.debouncedFlush=this.localStorageScheduler.schedule(this.flushLocalStorageQueue.bind(this)),this.debouncedStorageKeys=new Set(e.localStorageDebouncedKeys),this.localStorageScheduler.scheduleForPageUnload(this.flushLocalStorageQueue.bind(this)),this.permutiveData=this.buildData()}reset(){this.permutiveData={}}getDataSize(){return this.permutiveDataSize}getData(e){return this.permutiveData[e]}setData(e,t){this.permutiveData[e]=t,this.requestWrite(e)}deleteKey(e){delete this.permutiveData[e],this.requestWrite(e)}requestWrite(e){this.debouncedStorageKeys.has(e)?(this.localStorageQueue.add(e),this.debouncedFlush()):this.writeData(e)}flushLocalStorageQueue(){for(let e of this.localStorageQueue)this.writeData(e);this.localStorageQueue.clear()}buildData(){return{...this.getDataChunk("misc"),...this.getDataChunk("queries")}}getDataChunk(e){const t=this.namespace.getNamespacedStorageKey(this.chunkKeyToStorageKey(e)),r=window.localStorage.getItem(t),n=null===r?null:(0,m.A)(r);return r&&n?(this.permutiveDataSize+=2*r.length,n):{}}chunkKeyToStorageKey(e){switch(e){case"queries":return this.config.permutiveDataQueriesKey;case"misc":return this.config.permutiveDataMiscKey;default:throw new Error(`Unhandled chunk key "${e}"`)}}writeData(e){this.logger.debug(`Data Store: Writing ${e} to localStorage`);const[t,r]=this.dataKeyToChunkInfo(e);return n.Y3((()=>window.localStorage.setItem(this.namespace.getNamespacedStorageKey(t),JSON.stringify(r))),(t=>{const r=(0,d.w)(t);return this.logError(`Failed to set ${e}. Got ${r}`),r}))}dataKeyToChunkInfo(e){const t=e=>(0,P.eu)(this.permutiveData,e);switch(e){case"internal_query_states":case"external_query_states":case"event-source-id":return[this.chunkKeyToStorageKey("queries"),t(z)];case x.Kd:case"identities":case"amp_ready":case"metricsEnabled":case"addon:tradedesk":case"addon:tracking_pixel":case"addon:eyeota_pixel":case"addon:pinterest_pixel":case"addon:facebook_pixel_v2":case"addon:tiktok_pixel":case"addon:appnexus":case"addon:ddp":case"addon:gigya":case"addon:neustar_fabrick":case"pubmatic":case"lotame":return[this.chunkKeyToStorageKey("misc"),t(T)];default:throw new Error(`Unhandled data key "${e}"`)}}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}const z=["internal_query_states","external_query_states","event-source-id"],T=[x.Kd,"identities","amp_ready","metricsEnabled","addon:tradedesk","addon:tracking_pixel","addon:eyeota_pixel","addon:pinterest_pixel","addon:facebook_pixel_v2","addon:tiktok_pixel","addon:appnexus","addon:ddp","addon:gigya","addon:neustar_fabrick","pubmatic","lotame"],C=e=>{const{logger:t,consentTracking:r}=e,i=e=>(t.debug(`Data Store: Failed to write ${e} as consent is revoked`),n.F2(void 0));return e=>class extends e{writeData=(0,l.v)(super.writeData.bind(this),i,r.isRevoked)}};class A{config;constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}var M=r(9519);class O{config;cookies;externalData;ref;isNewlyGenerated;setState;constructor(e,t,r,n){this.config=e,this.cookies=t,this.externalData=r;const[a,o]=M.Ue(this.getOrGenerateUserId());this.ref=(0,i.zG)(a,M.UI((e=>e.userId))),this.isNewlyGenerated=(0,i.zG)(a,M.UI((e=>e.isNewlyGenerated))),this.setState=o,(0,i.zG)(M.vP(this.ref,n),M.YP((e=>{let[t,r]=e;r?(this.cookies.setCookie(this.config.cookieName,t),this.externalData.setExternalData(this.config.cookieName,t)):(this.cookies.deleteCookie(this.config.cookieName),this.externalData.removeExternalData(this.config.cookieName))})))}isEqual(e){return this.ref.current===e}get(){return this.ref.current}set(e){this.setState({userId:e,isNewlyGenerated:!1})}reset(){this.setState({userId:(0,P.k$)(),isNewlyGenerated:!0})}getOrGenerateUserId(){return(0,i.zG)(this.getUserIdFromCookie(),s.wp((()=>this.getUserIdFromLocalStorage())),s.UI((e=>({userId:e,isNewlyGenerated:!1}))),s.fS((()=>({userId:(0,P.k$)(),isNewlyGenerated:!0}))))}getUserIdFromCookie(){return this.getUserIdFromStorageIfValid("cookie")}getUserIdFromLocalStorage(){return this.getUserIdFromStorageIfValid("localStorage")}getUserIdFromStorageIfValid(e){const t=s.DT(P.Gz);return(0,i.zG)("cookie"===e?this.cookies.getCookie(this.config.cookieName):this.externalData.getExternalData(this.config.cookieName),s.ij,s.tS(t))}}class q{config;PATH_JOINER_Q="?";PATH_JOINER_A="&";constructor(e){this.config=e}getBaseUrl(){return`${this.config.apiProtocol}://${this.config.apiHost}`}getEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,r)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,r)}getClassificationModelsEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,r)}getAudienceMatchingEndpointUrl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${e}/${r}/audiences`;return this.getUrl("audience-matching",i,t,n)}getCCSCohortMembershipEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,r)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,r,n){const i=this.getUrlPrefix(e),a=(0,s.g_)((()=>""),(e=>`/${e}`))(r),o=`${this.getBaseUrl()}${i}${a}${t}`;return this.makeUrlWithQueryParams(o,n.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const r=t.map((e=>{let[t,r]=e;return`${t}=${r}`})).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${r}`}}const R=`permutive.${self.document?"main":"worker"}.`;class F{config;shouldUsePerformanceMark=!1;constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=((null===(t=self.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled)??!1}startSpan(e){const t=this.generateSpan(e);return t.start(),{spanId:t.spanId,finish:t.finish}}measureSinceInit(e){const t=this.generateSpan(`${e}_since_init`);return t.start({startTime:g.NC}),{spanId:t.spanId,finish:t.finish}}traceTask(e){return t=>async()=>{const r=this.startSpan(e),n=await t();return r.finish(),n}}measureBetween(e,t,r){const n=this.generateSpan(e);n.start({startTime:t}),n.finish({startTime:r})}generateSpan(e){if(!this.shouldUsePerformanceMark)return{spanId:null,start:()=>{},finish:()=>{}};const{spanName:t,startMarkerName:r,endMarkerName:n}=F.generateUniqueMarkerNames(e);return{spanId:r,start:e=>{var t;return null===(t=self.performance)||void 0===t?void 0:t.mark(r,e)},finish:e=>{var i,a,o;null===(i=self.performance)||void 0===i||i.mark(n,{startTime:(null==e?void 0:e.startTime)??performance.now()}),null===(a=self.performance)||void 0===a||null===(o=a.measure)||void 0===o||o.call(a,t,r,n)}}}static generateUniqueMarkerNames(e){const t=`${R}${e}`,r=`${t}${F.generateId()}`;return{spanName:t,startMarkerName:`${r}_start`,endMarkerName:`${r}_end`}}static generateId(){return"_"+Math.random().toString(36).substr(2,9)}}var L=r(8880),B=r(4364);const $="permutive-consent",j=(e,t)=>(0,i.zG)((0,s.ij)(t),(t=>!1===e&&(0,s.Wi)(t)?{isValid:!0,consentData:N()}:(e=>(0,s.pC)(e)&&(e=>null!==e&&"object"==typeof e)(e.value)&&(e=>{var t;return!0===e.opt_in&&"string"==typeof e.token&&(null===(t=e.token)||void 0===t?void 0:t.length)>0})(e.value))(t)?{isValid:!0,consentData:t.value}:{isValid:!1,consentData:Q()})),N=()=>({opt_in:!0,token:$}),Q=()=>({opt_in:!1,token:""}),Y=e=>{return(0,i.ls)((t=e,e=>(0,i.zG)(j(t.consentRequired,e),(e=>{let{consentData:r,isValid:n}=e;return t.consentDatabase.put(r,$),n}))),(e=>{let{logger:t,messages:r}=e;return e=>{const n=e?"given":"revoked";return t.log("Consent has been",n),r.emit(`permutive:consent:${n}`),e}})(e));var t},K=e=>(t,r)=>{e.on("permutive:consent:revoked",t),e.on("permutive:consent:given",r)},W=async e=>{const{logger:t,namespace:r,consentRequired:o,messages:s}=e,u=new B.oP(window.localStorage,r),c=j(o,await u.get($)),l=await(0,i.zG)(a.Y3((()=>u.put(c.consentData,$)),(e=>new Error(`LocalStorage access is required. ${(0,d.w)(e).message}`))),(e=>e()));if(n.nM(l))return l;const{consentRef:p,giveConsent:m,revokeConsent:f,isRevoked:_,isGiven:g}=function(){let e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];const[t,r]=M.Ue(e),n=()=>!0===t.current;return{consentRef:t,revokeConsent:()=>(r(!1),t.current),giveConsent:()=>(r(!0),t.current),isRevoked:()=>!n(),isGiven:n}}(c.isValid),v={consentRef:p,isGiven:g,isRevoked:_,listenForConsent:K(s)};v.listenForConsent(f,m);const h=Y({consentDatabase:u,consentRequired:o,logger:t,messages:s});return n.F2({consentTracking:v,consentValidation:h,consentDatabase:u})};var H=r(9912),V=r(5885);const Z=e=>{const{partialTagWithKey:t}=e,r=t.key;var a;window[r].consent=(a=e,(0,i.ls)(a.consentModule.consentValidation,s.DT(Boolean),s.UI((0,V.initialiseWebSDK)(a)),i.Q1));const u=(0,s.EQ)((()=>{return t={consentDatabase:e.consentModule.consentDatabase,consentRequired:e.tag.config.consentRequired},(0,i.zG)((0,i.a9)(t.consentDatabase.get($)),(0,o.UI)((e=>j(t.consentRequired,e).isValid)));var t}),o.of);return(0,i.zG)((0,i.zG)((e=>{let{consentModule:t,tag:r}=e;const n=(0,H.Ew)((function(e){return"consent"===e.functionName}))(r.q);return(0,s.UI)((e=>t.consentValidation(e.arguments[0])))(n)})(e),u),(0,o.UI)((e=>e?(0,n.F2)(!0):(0,n.t$)("No consent to run on the page"))))},J=e=>(0,i.zG)((e=>"function"==typeof e.Map?(0,n.F2)(new e.Map([["a",1]])):(0,n.t$)("Maps not supported"))(e),n.tS((e=>1===e.size?(0,n.F2)(null):(0,n.t$)("Iterable Maps not supported")))),X=e=>(0,i.zG)((e=>"function"==typeof e.Set?(0,n.F2)(new e.Set([1,2])):(0,n.t$)("Sets not supported"))(e),n.tS((e=>2===e.size?(0,n.F2)(null):(0,n.t$)("Iterable Sets not supported")))),ee=e=>(0,i.zG)((0,w.gz)(n.G5)(J(e),X(e),(e=>e.Worker&&e.Blob?(0,n.F2)(null):(0,n.t$)("WebWorkers not supported"))(e)),(e=>(0,n.UI)(i.Q1)(e)));const te=()=>{const e=(0,r(197).Z)(),t=(e=>{const t=[],r=[],n=()=>{for(;t.length>0&&r.length>0;)r.shift()()},i=e=>new Promise((t=>{r.push((()=>t(e()))),(0,g.HJ)(n)}));return e.addEventListener("message",(0,g.GL)((e=>{null!==e.data&&(t.push(e.data),(0,g.HJ)(n))}))),{next:()=>i((()=>t.shift())),read:()=>i((()=>t.splice(0)))}})(e);return e.postMessage(null),n=>function(e){let{worker:t,trace:n,metrics:a,...u}=e;return t.send({...u,globals:self._____workerGlobals,initialTimestampSecs:(0,i.zG)(s.lo(!1),s.UI((()=>Math.floor(Date.now()/1e3)))),metricsEnabled:a.isEnabled(),timeOriginMainContext:G()}),(0,i.zG)((0,g.SF)((()=>Promise.resolve().then(r.bind(r,9491)))),n.traceTask("import-master-low-priority"),o.UI((e=>r=>e.startMaster({...r,metrics:a,trace:n,worker:t}))))}({...n,worker:{...t,send:t=>e.postMessage(t),stop:()=>e.terminate()}})};var re=r(7474);class ne{db;options;constructor(e,t){this.db=e,this.options=t}getSessionId(){return this.options.session_id}sessionHasChanged(){return this.options.hasChanged}static decodeSessionData(e){return e&&"object"==typeof e&&e.hasOwnProperty("session_id")&&e.hasOwnProperty("last_updated")?{...e,last_updated:new Date(e.last_updated)}:null}reset(){return this.db.delete(this.options.session_data_key)}async persistSessionData(e){const t=e.last_updated.toISOString();await this.db.put({...e,last_updated:t},this.options.session_data_key)}static generateNewSession(e){return{session_id:(0,P.k$)(),last_updated:e}}static hasExpired(e,t,r){if(isNaN(t.getTime()))return!0;return e>new Date(t.getTime()+1e3*r)}static async initialise(e,t,r){const n={timeout_seconds:1800,session_data_key:"permutive-session",hasChanged:!1,logger:r};e.deleteCookie(n.session_data_key);const a=new Date,o=await t.get(n.session_data_key).catch(i.gn),s=ne.decodeSessionData(o),u=null===s||ne.hasExpired(a,s.last_updated,n.timeout_seconds)?{...ne.generateNewSession(a),hasChanged:!0}:{...s,last_updated:a,hasChanged:!1},c=new ne(t,(0,P.PM)(n,u));return await c.persistSessionData(u),c}}var ie=r(4793),ae=r(7812);class oe{getContextFromEnvironment;context;lastContextFromEnvironment;constructor(e,t){this.getContextFromEnvironment=t,this.lastContextFromEnvironment=t(),this.context=e,this.updateContext(...Object.entries(this.lastContextFromEnvironment),...Object.entries(e))}getMutableContextUNSAFE(){return this.refresh(),this.context}getContext(){return this.refresh(),{...this.context}}getClient(){return this.refresh(),{domain:this.context.domain,referrer:this.context.referrer,title:this.context.title,type:this.context.type,url:this.context.url,user_agent:oe.applyUserAgentExtension(this.context.user_agent)}}static applyUserAgentExtension(e){const t="PermutiveWebSDK/v20.39.0";return e?`${e} ${t}`:t}refresh(){const e=this.getContextFromEnvironment(),t=t=>this.lastContextFromEnvironment[t]===this.context[t]?e[t]:this.context[t]||e[t];this.updateContext(...(0,i.zG)(Object.keys(e),ae.UI((e=>(0,i.bc)(e,t(e)))))),this.lastContextFromEnvironment=e}updateContext(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];t.forEach((e=>{let[t,r]=e;this.context[t]=r}))}}class se extends oe{constructor(e,t){super(e,(()=>({type:"web",user_agent:navigator.userAgent,url:(0,ie.bk)(window.location.href),domain:window.location.hostname||"",title:document.title,referrer:(0,ie.bk)(document.referrer),path:window.location.pathname,view_id:t()})))}async getClientAsync(){return this.getClient()}}const ue=e=>(0,i.zG)(a.Do,(0,i.ls)(a.Qt("support",a.Uo(ee(self))),a.Qt("partialTagWithKey",a.Uo((e=>{var t,r;const a="8512b548-2306-4976-a576-a880f2c35e4e",o=void 0!==(null===(t=e[a])||void 0===t?void 0:t.q)&&void 0!==(null===(r=e[a])||void 0===r?void 0:r.config)?a:"permutive";return(0,i.zG)(e[o],(0,n.ij)("Can't find permutive tag on the page"),(0,n.UI)((e=>({tag:e,key:o}))))})(window))),a.UI((e=>{const t=e.partialTagWithKey.key;return window[t].sdkVersion="v20.39.0",e})),a.Qt("configFromQueryParams",a.Uo((0,L.B9)())),a.Hr("tag",(e=>((e,t)=>{let{tag:r,key:n}=e;return{...r,config:(0,L.ti)({...r.config,windowKey:n},t)}})(e.partialTagWithKey,e.configFromQueryParams))),a.UI((e=>{{const r=e.partialTagWithKey.key,n=window[r];t=n,window.googletag=window.googletag||{cmd:[]},window.googletag.cmd.push((()=>{const e=googletag.pubads(),r=()=>{t.track("AdRequest",{ad_server_id:"dfp",cohorts:e.getTargeting("permutive")})},n=e.getSlots().filter((e=>e.getResponseInformation())).length;for(let e=0;e<n;e++)r();e.addEventListener("slotRequested",r)}))}var t;return e})),a.Hr("trace",(e=>{let{tag:t}=e;return new F(t.config)})),a.Hr("namespace",(e=>{let{tag:t}=e;return new A(t.config)})),a.Hr("logger",(e=>{let{tag:t}=e;return function(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.RP;return e.loggingEnabled&&void 0!==(null===(t=self.console)||void 0===t?void 0:t.log)?new v(r):new h}(t.config)}))),a.Hr("urls",(e=>{let{tag:t}=e;return new q(t.config)})),a.Hr("messages",(e=>{let{logger:t}=e;return new b(t)})),a.Hr("worker",(()=>te())),a.ak("consentModule",(e=>(0,i.zG)((()=>W({...e,consentRequired:e.tag.config.consentRequired})),a.Vn((e=>e.message))))),a.Hr("cookieStore",(e=>{let{consentModule:t,logger:r,namespace:n,tag:a}=e;return((e,t,r,n)=>new((0,i.zG)(c,p({consentTracking:n,logger:r})))(e,t,r))(n,a.config,r,t.consentTracking)})),a.Hr("externalData",(e=>{let{consentModule:t,logger:r,namespace:n}=e;return((e,t,r)=>new((0,i.zG)(f,_({consentTracking:r,logger:t})))(e))(n,r,t.consentTracking)})),a.Hr("userId",(e=>{let{cookieStore:t,consentModule:r,externalData:n,tag:i}=e;return new O(i.config,t,n,r.consentTracking.consentRef)})),a.Hr("permutiveData",(e=>{let{tag:t,namespace:r,logger:n,consentModule:a}=e;return((e,t,r,n)=>new((0,i.zG)(D,C({consentTracking:n,logger:r})))(e,t,r))(t.config,r,n,a.consentTracking)})),a.Hr("metrics",(t=>{let{tag:r,logger:n,permutiveData:i}=t;return function(e,t,r,n,i){const a=n.getData("metricsEnabled")??(()=>{const e=Math.random()<=r.metricsSamplingPercentage/100;return n.setData("metricsEnabled",e),e})()?new I(e,t,i):new E;return a.track({name:"sdk_initialisation_start_time_seconds",value:e/1e3,labels:{}}),a}(e.contextsInitTimestampPerformance,G(),r.config,i,n)})),a.Hr("pageviewState",(e=>{let{tag:t}=e;return(e=>{const t={viewId:(0,i.zG)(e.viewId,s.DT((e=>"string"==typeof e&&(0,P.Gz)(e))),s.fS(P.k$)),watsonEnabled:e.watson.enabled};return(0,i.zG)(M.Ue(t),(e=>{let[r,n]=e;return{ref:r,setState:(0,i.ls)((e=>e(r.current,t)),n)}}))})(t.config)})),(0,i.ls)(a.Hr("localStorage",(e=>{let{logger:t,namespace:r,consentModule:n}=e;return(0,re.E)(r,t,n.consentTracking.consentRef)})),a.ak("sessionManager",(e=>{let{cookieStore:t,localStorage:r,logger:n}=e;return a.Y3((()=>ne.initialise(t,r,n)),(e=>`Failed to initialise session manager: ${e.message}`))})),a.Hr("clientContext",(e=>{let{tag:t,pageviewState:r}=e;return new se(t.context||{},(()=>r.ref.current.viewId))})),a.Hr("core",(t=>{let{clientContext:r,consentModule:n,metrics:a,pageviewState:o,permutiveData:u,sessionManager:c,trace:l,tag:p,userId:d,worker:m}=t;const{eventSourceId:f,isFirstPageview:_}=(0,i.zG)(s.ij(u.getData("event-source-id")),s.hX(P.Gz),s.UI((e=>({eventSourceId:e,isFirstPageview:!1}))),s.fS((()=>({eventSourceId:(0,P.k$)(),isFirstPageview:!0})))),g=n.consentTracking.consentRef;if(_)if(g.current)u.setData("event-source-id",f);else{let e=!1;g.onChange((()=>{e||(e=!0,u.setData("event-source-id",f))}))}return m({consent:g.current,eventSourceId:f,isFirstPageview:_,isSecureContext:(v=p.config,"development"===v.environment?self.isSecureContext:"https:"===self.location.protocol),metrics:a,permutiveConfig:p.config,organizationId:"8512b548-2306-4976-a576-a880f2c35e4e",pageviewState:o.ref.current,sdkInitTimestampPerformance:e.contextsInitTimestampPerformance,sdkInitTimestampDate:e.contextsInitTimestamp,sessionId:c.getSessionId(),trace:l,trackPageviewComplete:!0,userId:d.get(),userIdIsNewlyGenerated:d.isNewlyGenerated.current,webClient:r.getClient()});var v})),a.Hr("currentScript",(()=>s.ij(e.currentScript))),a.ak("consent",(e=>Z(e))),a.tS((e=>(0,i.zG)((0,g.SF)((()=>Promise.resolve().then(r.bind(r,5885)))),e.trace.traceTask("permutive.main.import_permutiveWebLowPriority"),o.tS((t=>t.initialiseWebSDK(e)))))))),ce=e=>(e=>{e().then((0,n.g_)((e=>console.warn(`Permutive was not initialized. ${e}`)),i.Q1))})(ue(e))},3600:(e,t,r)=>{r.d(t,{Bf:()=>h,G6:()=>I,Gz:()=>b,HP:()=>D,Kn:()=>l,Or:()=>G,PM:()=>d,PQ:()=>E,Z_:()=>U,a4:()=>f,aT:()=>v,b2:()=>m,bw:()=>C,cO:()=>k,eu:()=>_,k$:()=>y,lW:()=>P,lo:()=>A,m8:()=>S,mQ:()=>z,qh:()=>p,rH:()=>O,rO:()=>T,vg:()=>x});var n=r(9912),i=r(2169),a=r(8236),o=r(856),s=r(4327),u=r(229),c=r(8586);const l=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,p=e=>Object.entries(e);function d(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.reduce(((e,t)=>({...e,...t})),{})}s.ff(u.xb);function m(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}function f(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const n={waitTimeInMs:50,exponentialBackOff:!1,maxAttempts:20},{waitTimeInMs:o,exponentialBackOff:s,maxAttempts:u}=d(n,r);let l=0;const p=r=>new Promise((n=>Promise.resolve(t()).then((t=>t?Promise.resolve(e()).then((e=>n((0,a.G)(e)))):(0,i.zG)(l++,(e=>e<u?(0,c.HJ)((()=>n(p(r*(s?2:1)))),r):n(a.YP)))))));return p(o)}function _(e,t){const r=Object.create(null);for(const n of t)r[n]=e[n];return r}let g=[];function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(g.unshift(e),g.length>1)return;const r=["beforeunload","pagehide"],n=r.concat(["visibilitychange"]),i=e=>{if(!a&&e){a=!0;const e=g;g=[],e.forEach((e=>{try{e()}catch{}}))}};let a=!1;n.forEach((e=>{window.addEventListener(e,(()=>{const r=("visibilitychange"!==e||document.hidden)&&w(t);i(r)}))})),r.forEach((e=>{window.addEventListener(e,(()=>i(!0)))}))}function h(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t={capture:!0,...t};const r=["visibilitychange","pagehide"];r.forEach((r=>window.addEventListener(r,(()=>a.Y3((()=>{"pagehide"!==r&&"hidden"!==document.visibilityState||e()}))),{capture:t.capture})))}function y(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(self.crypto||self.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function b(e){return 36===e.length&&/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function S(){const e={},t=arguments.length;for(let r=0;r<t;r++){const[t,n]=r<0||arguments.length<=r?void 0:arguments[r];e[t]=n}return e}function w(e){return/Mobi|Android/i.test(e)}function I(e){return/^((?!chrome|android).)*safari/i.test(e)}function E(e,t){return new Promise((r=>{(0,c.HJ)((()=>{Promise.resolve(e()).then(r)}),(null==t?void 0:t.timeout)??0)}))}function k(e,t){if(e===t)return!0;if(null==e||null==t)return!1;if(e.length!==t.length)return!1;for(let r=0;r<e.length;++r)if(e[r]!==t[r])return!1;return!0}const G=()=>({equals:(e,t)=>Object.is(e,t)});function P(e){return(0,o.Zt)(((t,r)=>{const n=e.indexOf(t),i=e.indexOf(r);switch(!0){case-1===n&&-1===i:return 0;case-1!==n&&-1===i:return-1;case-1===n&&-1!==i:return 1;default:return n<=i?-1:1}}))}function U(e,t,r){return function(){try{return r(...arguments)}catch(r){e.reportError(r,t.get())}}}function x(e){return t=>null!=t&&e in t?t[e]:void 0}function D(e){let t=a.YP;const r=(0,a.fS)((()=>{const r=e();return t=(0,a.G)(r),r}));return()=>r(t)}const z=e=>{const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))},T=e=>t=>{const r={...t};for(const i in e){var n;r[i]=null===(n=e[i])||void 0===n?void 0:n.call(e,t[i])}return r};function C(e){return t=>(e(t),t)}const A=e=>t=>{const r=e.slice(0,-1),o=e.slice(-1)[0];return(0,i.zG)(r,n.f2((e=>{let[r,n]=e;return(0,i.zG)(t,a.DT(r),a.UI(n))})),a.fS((()=>o(t))))},M=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const r=e(t);return Number.isNaN(r)?void 0:r}},O=M(parseInt);M(parseFloat)},7250:(e,t,r)=>{r.d(t,{b:()=>a});var n=r(3600),i=r(8586);class a{timeoutDurationInMilliseconds;maxTimeOutDurationInMilliseconds;constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,r)}scheduleAccumulated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,r,n,t)}scheduleForPageUnload(e){return(0,n.aT)(e)}debounce(e,t,r,a){let o,s,u,c=[];return l=>{a&&(u=a.concat(u??a.empty,l));const p=(0,n.b2)();c.push(p);var d;return null===(d=o)||void 0===d||d(),o=(0,i.HJ)((()=>{var t;null===(t=s)||void 0===t||t(),s=void 0;const r=e(u||l);c.forEach((e=>e.resolve(r))),u=null==a?void 0:a.empty,c=[]}),t),s||(s=(0,i.HJ)((()=>{var t;null===(t=o)||void 0===t||t(),s=void 0;const r=e(u||l);c.forEach((e=>e.resolve(r))),u=null==a?void 0:a.empty,c=[]}),r)),p.promise}}}},1161:(e,t,r)=>{r.d(t,{i:()=>i});var n=r(8586);class i{messages;queue=[];nextNotify=null;constructor(e){this.messages=e,e.on("permutive:taskQueue:update",(()=>{this.execute()}))}add(e){this.queue.push(e),this.notify()}notify(){const e=()=>{this.messages.emit("permutive:taskQueue:update")},t=(new Date).getTime();null===this.nextNotify||this.nextNotify<t-50?(this.nextNotify=t,e()):this.nextNotify<=t&&(this.nextNotify=t+50,(0,n.HJ)(e,50))}execute(){if(0===this.queue.length)return;let e=!1,t=!1,r=0;for(let n=0;n<this.queue.length;n++){const i=this.queue[n];if(i.complete)r+=1;else if(i.started)t=!0,e=e||i.blocks();else{if(i.waits()&&t)break;e||(t=!0,e=e||i.blocks(),i.execute((()=>{this.notify()})))}}this.queue.splice(0,r)}size(){return this.queue.length}}},4793:(e,t,r)=>{r.d(t,{_Y:()=>o,bk:()=>a,zM:()=>i});var n=r(2169);const i=()=>{var e,t;const r=null===(e=window.location.href.split("?")[1])||void 0===e||null===(t=e.split("#")[0])||void 0===t?void 0:t.split("&");return void 0===r?{}:r.reduce(((e,t)=>{const[r,n]=t.split("=");return{...e,[r]:n}}),{})},a=e=>{if(!e)return"";return(0,n.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};function o(e){const t=e.match(/\b(?:(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\.){3}(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)\b/),r=e.match(/[a-z0-9][a-z0-9-]+\.[a-z.]{2,24}$/i),n=e.match(/localhost/);if(r&&r.length>0){const t=e.split(".").reverse();return t.length>=3&&t[1].match(/^(com|edu|gov|net|mil|org|nom|co|ac|name|info|biz)$/i)?t[2]+"."+t[1]+"."+t[0]:t[1]+"."+t[0]}return t&&(null==t?void 0:t.length)>0?t[0]:n&&(null==n?void 0:n.length)>0?"localhost":""}},4466:(e,t,r)=>{r(7802),r(3600),r(8586)},9713:(e,t,r)=>{r.r(t),r.d(t,{FreeWheelAddon:()=>f,freewheelService:()=>c,load:()=>m,realService:()=>p,stubService:()=>l});var n=r(7802),i=r(9519),a=r(2169),o=r(7812),s=r(3480),u=r(3052);const c=p;function l(e){let{externalData:t}=e;return s.K4((()=>{t.removeExternalData(_)}))}function p(e){const{activationManager:t,consent:r,externalData:n,initdAddons:c,queryLanguageCohorts:l,addonsLoaded:p}=e;return(0,a.zG)(i.vP({consent:r,addonsLoaded:p,addonInitd:i.UI((e=>e.has(d)),c)}),s.KD([[e=>{let{consent:t,addonsLoaded:r,addonInitd:n}=e;return!t||r&&!n},s.K4((()=>n.removeExternalData(_)))],[e=>{let{addonsLoaded:t,addonInitd:r}=e;return!t&&!r},s.K4(a.Q1)],s.K4((e=>{let{stopped:r}=e;const s=t.getSpecializedActivations(d),c=new Set([...s]);(0,a.zG)(l,i.UI(o.hX((e=>c.has(e)))),i.D8(o.Eh(u.Eq)),i.UI(o.UI((e=>e.toString()))),(e=>i.vP(e,r)),i.YP((e=>{let[t,r]=e;r||n.setExternalJsonData(_,t)})))}))]),s.UI(a.Q1))}const d="freewheel",m=e=>{(0,n.Hn)(d)("auto_init",!1)&&e.q.push({functionName:"addon",arguments:[d,{}]})};class f{constructor(e){}}const _="_pfws"},6112:(e,t,r)=>{r.d(t,{X:()=>n});const n=e=>{let t=!0;const r=[];return{addBlocker:n=>{r.push(n),e.logger.log("<blockers> added blocker "+n),e.messages.on(n,(()=>{if(t){const i=r.indexOf(n);i>=0&&(r.splice(i,1),e.logger.log("<blockers> removed blocker "+n)),0===r.length&&(t=!1,e.messages.emit("permutive:blockers:empty"),e.logger.log("<blockers> complete"))}}))}}}},6214:(e,t,r)=>{r.d(t,{X:()=>i});var n=r(9519);class i{ref;setCustomProps;constructor(){const[e,t]=n.Ue({});this.ref=e,this.setCustomProps=t}getCustomProps(){return this.ref.current}}},7359:(e,t,r)=>{r.r(t),r.d(t,{EventsCache:()=>w,RESET_HISTORICAL:()=>y});var n=r(5654),i=r(2945),a=r(7812),o=r(7144),s=r(2169),u=r(8236),c=r(2678),l=r(132);const p=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),d=e=>({id:e.id,name:e.name,time:(m(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),m=e=>isFinite(e)&&e instanceof Date;var f=r(3600),_=r(7250);class g extends Error{constructor(e){super(e),this.name="StoreClosingError"}}const v="permutive-events-cache",h="permutive-events-for-page",y="historical",b="[EVENTSCACHE]",S=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class w{config;logger;reportError;trace;metrics;userId;makeEventsStore;eventStore;eventsCache=this.makeEventsRepository(v);eventsForPage=this.makeEventsRepository(h);eventsTTLInMilliseconds;readiness;debouncedReportError=(()=>new _.b(5e3,5e3).schedule((e=>this.reportError(e.errorMessage,{userId:e.userId}))))();static initialise(e,t,r,n,i,a,o){return(0,s.zG)(o(),l.UI((s=>new w(e,t,r,n,i,a,o,s))))}constructor(e,t,r,n,i,a,o,l){this.config=e,this.logger=t,this.reportError=r,this.trace=n,this.metrics=i,this.userId=a,this.makeEventsStore=o,this.eventStore=l,this.eventsTTLInMilliseconds=(0,s.zG)((0,u.ij)(this.config.eventsTTLInDays),(0,u.tS)((e=>"number"==typeof e&&e>0?(0,u.G)(24*e*3600):u.YP))),this.eventsCache.events=(0,f.HP)((()=>(0,f.PQ)((0,s.zG)(c.tD((()=>this.trace.startSpan("load_event_cache"))),c.tS((e=>(0,s.zG)(this.loadFromDisk(),c.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents())),a.onChange((()=>this.reset()))}async migratePreviousPagesEvents(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,c.pE)((e=>(0,l.Y3)((()=>e.flush()),n.w)));return(0,s.zG)([this.eventsForPage,this.eventsCache],t,(0,c.UI)((t=>{const r=a.bj(t);return r.length>0&&this.reportError(`Migrate previous events failed. Got:\n${r.join("\n ")}`,{userId:this.userId.current}),e.finish()})),(e=>e()))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(a.xH)}async add(e,t){let{persistOnDisk:r}=t;return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,s.zG)(this.eventsForPage.events,c.UI((t=>[...t,e])),f.HP),r&&this.readiness.then((()=>this.eventsForPage.flush())),e}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(r<=0||t<=r)return this.logDebug(`Event size of ${t} less than limit of ${r}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:r});let n=1,i=[...e];for(;t>r;)i.splice(0,n),n*=2,t=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:t}),{events:i,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,s.zG)(this.eventsTTLInMilliseconds,u.EQ((()=>s.yR),(e=>a.hX((t=>e>Date.now()-t.time.getTime())))));return(0,s.zG)(c.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),c.YO("loadEventsCacheTask"),c.ak("eventsFromDisk",(()=>(0,s.zG)(a.nI([this.eventStore.get(v),this.eventStore.get(h)]),a.UI(l.LV((0,f.lo)([[e=>e instanceof g,(0,s.ls)(e,c.of)],t=>(0,s.zG)(c.tD((()=>this.reportError(`Error fetching data from store. Got ${t}`,{userId:this.userId.current}))),c.tS((()=>()=>this.reset("historical"))),c.UI(e))]),(0,s.ls)(u.fS(e),c.of))),a.vP(c.qA)))),c.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:r}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",r)}})),c.UI((0,s.ls)((0,f.vg)("eventsFromDisk"),a.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),a.UI(p),t)))}async reset(e){return(0,s.zG)(c.tD((()=>this.logDebug("Resetting Events Cache"))),c.tS((()=>this.eventStore.deleteStore())),l.tS((()=>this.makeEventsStore())),l.Zl((t=>(this.eventStore=t,e===y?i.gz(l.Ij)(this.eventsCache.reset,this.eventsForPage.flush):i.gz(l.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),l.wE((()=>()=>this.all())),l.fS((()=>c.of(I()))),(e=>e()))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(o.F2((0,s.Q1)()));return t=>e=e.then(t)})(),r=e=>(0,s.zG)(c.tD((()=>this.logDebug(`Writing ${e.length} events to ${v.key}`))),c.tS((()=>this.eventStore.put(e.map(d),v.key))),l.UI(s.Q1)),i=(0,s.zG)(c.tD((()=>this.logDebug(`Deleting events for ${v.key}`))),c.tS((()=>this.eventStore.delete(v.key))),l.Vn(n.w)),a=(0,s.ls)(c.of,c.At((e=>()=>this.logError(`Events cache failed to put ${v.key}. Got ${e}`))),c.tS((0,f.lo)([[e=>S(e)&&v.retryAttempts<9,()=>(0,s.zG)(c.tD((()=>{v.retryAttempts+=1,this.logDebug(`Attempt #${v.retryAttempts} to write ${v.key} to EventsStore`)})),c.tS((()=>g)),c.tS((()=>p)))],[e=>S(e),e=>(0,s.zG)(c.tD((()=>this.logDebug(`Attempted ${v.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),c.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${v.key}. Got ${e}`,userId:this.userId.current}))),c.tS((()=>l.t$(e))))],l.t$]))),u=e=>l.tD((()=>{this.logDebug(`Successfully wrote events for ${v.key} after ${v.retryAttempts} attempts`),v.retryAttempts=0,v.sizeInBytes=2*JSON.stringify(e).length,v.sizeInBytesLastSuccessfulWrite=v.sizeInBytes})),p=(0,s.zG)((()=>v.events()),c.tS((e=>(0,s.zG)(r(e),c.mU(o.EQ(a,(()=>u(e)))))))),m=(e,t)=>(0,s.zG)(e.events,c.UI((r=>{const n=2*JSON.stringify(r).length,i=this.pruneEventsToSizeLimit(r,n,t);return e.events=c.of(i.events),e.sizeInBytes=i.sizeInBytes,t-e.sizeInBytes}))),_=(e,t)=>{let[r,...n]=e;return r&&0!==t?(0,s.zG)(m(r,t),c.tS((e=>(this.logDebug(`${e} left after pruning ${r.key}`),_(n,e))))):c.of((0,s.Q1)())},g=(0,s.zG)(l.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),l.fX(o.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),l.tS((e=>{const t=1.2*e,r=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,r),(0,s.zG)(_(r,t),l.fF)}))),v={key:e,events:c.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,s.zG)(c.tD((()=>this.trace.startSpan(`write_${v.key}`))),c.tS((e=>(0,s.zG)(p,c.At((()=>()=>e.finish()))))),t),reset:()=>(0,s.zG)(c.tD((()=>{v.events=c.of([]),v.sizeInBytes=0,v.sizeInBytesLastSuccessfulWrite=0})),c.tS((()=>i)),t)};return v}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(b,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warn(b,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(b,...t)}logLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(b,...t)}}const I=()=>[]},9392:(e,t,r)=>{r.r(t),r.d(t,{DBStore:()=>o});var n=r(5654),i=r(8236),a=r(132);class o{db;constructor(e){this.db=Promise.resolve(e)}put(e,t){return(0,a.Y3)((()=>this.db.then((r=>r.put(e,t)))),n.w)}get(e){return(0,a.Y3)((()=>this.db.then((t=>t.get(e))).then(i.ij)),n.w)}delete(e){return(0,a.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,a.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}},2144:(e,t,r)=>{r(3600)},5579:(e,t,r)=>{r(8586)},757:(e,t,r)=>{r.r(t),r.d(t,{eventCacheService:()=>c,eventNameBlacklist:()=>l});var n=r(9519),i=r(3480),a=r(4694),o=r(2169),s=r(7812),u=r(3600);const c=e=>i.K4((()=>({newEvents:(0,o.zG)(e.newEvents,n.UI(a.UI((0,u.bw)(s.UI((t=>{let[,r]=t;l.has(r.name)||e.eventsCache.add(r,{persistOnDisk:!0})})))))),priorEvents:()=>e.eventsCache.all()}))),l=new Set(["AdRequest","PageviewEngagement","PrebidAuctions","Reaction","SegmentEntry","SegmentExit","SlotRendered","ThirdPartySegments","VideoEngagement"])},144:(e,t,r)=>{r.d(t,{Kd:()=>i,eJ:()=>a});r(7802);var n=r(3480);r(9519),r(3600);const i="addon:twitter_pixel",a=function(e){return n.K4((()=>{}))}},197:(e,t,r)=>{r.d(t,{Z:()=>a});var n=r(1005),i=r.n(n);function a(){return i()('/*! @permutive/javascript-sdk v20.39.0 (web) (built 2025-06-16T09:16:49.976Z) */(()=>{"use strict";var e={654:(e,t,r)=>{function n(e){return e instanceof Error?e:new Error("string"==typeof e?e:JSON.stringify(e))}r.d(t,{w:()=>n})},945:(e,t,r)=>{r.d(t,{N:()=>o,Qt:()=>u,Yt:()=>d,a1:()=>s,ap:()=>a,gM:()=>c,gz:()=>f});var n=r(169),i=r(614);function a(e,t){return function(r){return function(n){return e.ap(e.map(n,(function(e){return function(r){return t.ap(e,r)}})),r)}}}function o(e){return function(t){return function(r){return e.ap(e.map(r,(function(e){return function(){return e}})),t)}}}function s(e){return function(t){return function(r){return e.ap(e.map(r,(function(){return function(e){return e}})),t)}}}function u(e){return function(t,r){return function(n){return e.ap(e.map(n,(function(e){return function(r){var n;return Object.assign({},e,((n={})[t]=r,n))}})),r)}}}function c(e){return function(t){return{concat:function(r,n){return e.ap(e.map(r,(function(e){return function(r){return t.concat(e,r)}})),n)}}}}function l(e,t,r){return function(n){for(var i=Array(r.length+1),a=0;a<r.length;a++)i[a]=r[a];return i[r.length]=n,0===t?e.apply(null,i):l(e,t-1,i)}}var p={1:function(e){return[e]},2:function(e){return function(t){return[e,t]}},3:function(e){return function(t){return function(r){return[e,t,r]}}},4:function(e){return function(t){return function(r){return function(n){return[e,t,r,n]}}}},5:function(e){return function(t){return function(r){return function(n){return function(i){return[e,t,r,n,i]}}}}}};function m(e){return i.e$.call(p,e)||(p[e]=l(n.bc,e-1,[])),p[e]}function f(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];for(var n=t.length,i=m(n),a=e.map(t[0],i),o=1;o<n;o++)a=e.ap(a,t[o]);return a}}function d(e){return function(t){for(var r=Object.keys(t),n=r.length,i=function(e){var t=e.length;switch(t){case 1:return function(t){var r;return(r={})[e[0]]=t,r};case 2:return function(t){return function(r){var n;return(n={})[e[0]]=t,n[e[1]]=r,n}};case 3:return function(t){return function(r){return function(n){var i;return(i={})[e[0]]=t,i[e[1]]=r,i[e[2]]=n,i}}};case 4:return function(t){return function(r){return function(n){return function(i){var a;return(a={})[e[0]]=t,a[e[1]]=r,a[e[2]]=n,a[e[3]]=i,a}}}};case 5:return function(t){return function(r){return function(n){return function(i){return function(a){var o;return(o={})[e[0]]=t,o[e[1]]=r,o[e[2]]=n,o[e[3]]=i,o[e[4]]=a,o}}}}};default:return l((function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];for(var i={},a=0;a<t;a++)i[e[a]]=r[a];return i}),t-1,[])}}(r),a=e.map(t[r[0]],i),o=1;o<n;o++)a=e.ap(a,t[r[o]]);return a}}},340:(e,t,r)=>{r.d(t,{Ce:()=>c,DY:()=>w,Eh:()=>B,GY:()=>I,Gb:()=>d,KB:()=>p,Lx:()=>C,Od:()=>u,Qp:()=>y,Su:()=>U,UI:()=>x,YM:()=>f,f2:()=>b,fw:()=>q,hX:()=>O,ke:()=>_,md:()=>h,oA:()=>D,pR:()=>R,tS:()=>E,yL:()=>G,yW:()=>L,zT:()=>g});var n=r(169),i=(r(289),r(614)),a=r(606),o=r(812),s=(r(49),r(226),function(e){return 0===e.length}),u=a.Od,c=a.Ce,l=(a.ws,a.R3),p=(a.Im,function(e,t){return e<=0?[]:a.KB(t)(e)});var m=a.dC,f=(o.P5,o.YM),d=(o.Z$,function(e){return u(e)?i.G(a.Gb(e)):i.YP}),_=function(e){return function(t){return m(e,t)?S(t):t.slice(0,e)}};var v=function(e,t){for(var r=e.length,n=0;n<r&&t(e[n]);n++);return n};function g(e){return function(t){var r=k(v(t,e))(t);return{init:r[0],rest:r[1]}}}var h=function(e){return function(t){return e<=0||s(t)?S(t):e>=t.length?[]:t.slice(e,t.length)}};function y(e){return function(t){return t.slice(v(t,e))}}o.cx;var b=o.f2;o.JO,o.qr;var S=function(e){return e.slice()},I=function(e){return s(e)?[]:e.slice().reverse()},w=function(e){return function(t){return t.length<=1?S(t):t.slice().sort(e.compare)}},G=function(e,t,r){for(var n=[],i=Math.min(e.length,t.length),a=0;a<i;a++)n[a]=r(e[a],t[a]);return n};o.t9;var k=function(e){return function(t){return e>=1&&u(t)?a.lx(e)(t):s(t)?[S(t),[]]:[[],S(t)]}};o.kp,o.Eq;var z=a.of,x=function(e){return function(t){return t.map((function(t){return e(t)}))}},E=function(e){return function(t){return(0,n.zG)(t,function(e){return function(t){for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},U=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},A=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var a=e(n,t[n]);i.pC(a)&&r.push(a.value)}return r}},P=function(e){return A((function(t,r){return e(r)}))},D=P(n.yR),O=function(e){return function(t){return t.filter(e)}},C=o.Lx,T=(o.xP,o.u4,o.OE),q=(o.nq,o.iw,function(e){var t=M(e);return function(e){return t((function(t,r){return e(r)}))}}),M=function(e){return function(t){return T(e.of([]),(function(r,i,a){return e.ap(e.map(i,(function(e){return function(t){return(0,n.zG)(e,l(t))}})),t(r,a))}))}},B=(o.ZN,o.Eh),R=o.pR,L=(o.pJ,o.oR,a.oo,o.yW);o.j0,i.F4,a.w6,a.QI,a.Ss},335:(e,t,r)=>{function n(e){return function(t){return function(r){return e.chain(r,(function(r){return e.map(t(r),(function(){return r}))}))}}}function i(e){return function(t,r){return function(n){return e.chain(n,(function(n){return e.map(r(n),(function(e){var r;return Object.assign({},n,((r={})[t]=e,r))}))}))}}}r.d(t,{a:()=>i,m:()=>n})},144:(e,t,r)=>{r.d(t,{g1:()=>b,G5:()=>y,dO:()=>v,Pd:()=>G,ak:()=>Q,YO:()=>F,tS:()=>I,g_:()=>O,ij:()=>M,Yo:()=>E,DT:()=>x,Eh:()=>d,fS:()=>C,nM:()=>U,t$:()=>u,UI:()=>_,Vn:()=>k,EQ:()=>D,aD:()=>P,of:()=>g,vx:()=>q,F2:()=>c,LF:()=>T,KC:()=>j,i$:()=>L,Y3:()=>B,it:()=>R});var n=r(335),i=r(906),a=r(169),o=r(289),s=r(614),u=s.t$,c=s.F2,l=function(e,t){return(0,a.zG)(e,_(t))},p=function(e,t){return(0,a.zG)(e,h(t))},m=function(e,t){return(0,a.zG)(e,I(t))},f="Either",d=function(e,t){return{equals:function(r,n){return r===n||(U(r)?U(n)&&e.equals(r.left,n.left):A(n)&&t.equals(r.right,n.right))}}},_=function(e){return function(t){return U(t)?t:c(e(t.right))}},v={URI:f,map:l},g=c,h=function(e){return function(t){return U(t)?t:U(e)?e:c(t.right(e.right))}},y={URI:f,map:l,ap:p},b={URI:f,map:l,ap:p,of:g},S=function(e){return function(t){return U(t)?t:e(t.right)}},I=S,w={URI:f,map:l,ap:p,chain:m},G=function(e,t){return function(r){return U(r)?u(e(r.left)):c(t(r.right))}},k=function(e){return function(t){return U(t)?u(e(t.left)):t}},z={URI:f,fromEither:a.yR},x=(0,i.DT)(z),E=(0,i.Yo)(z),U=s.nM,A=s.tO,P=function(e,t){return function(r){return U(r)?e(r.left):t(r.right)}},D=P,O=D,C=function(e){return function(t){return U(t)?e(t.left):t.right}},T=function(e){return U(e)?c(e.left):u(e.right)},q=function(e){return function(t){return U(t)?e(t.left):t}},M=function(e){return function(t){return null==t?u(e):c(t)}},B=function(e,t){try{return c(e())}catch(e){return u(t(e))}},R=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return B((function(){return e.apply(void 0,r)}),t)}},L=P(a.yR,a.yR);function j(e){return e instanceof Error?e:new Error(String(e))}s.F4;var F=(0,o.YO)(v),Q=(0,n.a)(w);s.Xl},125:(e,t,r)=>{r.d(t,{EQ:()=>b,F2:()=>s,KQ:()=>m,LF:()=>z,LU:()=>k,LV:()=>S,NG:()=>f,Pd:()=>h,UI:()=>d,Vn:()=>y,ap:()=>_,dQ:()=>G,fS:()=>I,i$:()=>x,ij:()=>p,m8:()=>c,pk:()=>l,t$:()=>u,tS:()=>v,vx:()=>w,wp:()=>g});var n=r(945),i=r(144),a=r(169),o=r(289);function s(e){return(0,a.ls)(i.F2,e.of)}function u(e){return(0,a.ls)(i.t$,e.of)}function c(e){return function(t){return e.map(t,i.F2)}}function l(e){return function(t){return e.map(t,i.t$)}}function p(e){return function(t){return(0,a.ls)(i.ij(t),e.of)}}function m(e){var t=p(e);return function(e){var r=t(e);return function(e){return(0,a.ls)(e,r)}}}function f(e){var t=v(e),r=m(e);return function(e){var n=r(e);return function(e){return t(n(e))}}}function d(e){return(0,o.UI)(e,i.dO)}function _(e){return(0,n.ap)(e,i.G5)}function v(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?e.of(r):t(r.right)}))}}}function g(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t():e.of(r)}))}}}function h(e){return function(t,r){return function(n){return e.map(n,i.Pd(t,r))}}}function y(e){return function(t){return function(r){return e.map(r,i.Vn(t))}}}function b(e){return function(t,r){return function(n){return e.map(n,i.EQ(t,r))}}}function S(e){return function(t,r){return function(n){return e.chain(n,i.EQ(t,r))}}}function I(e){return function(t){return function(r){return e.chain(r,i.EQ(t,e.of))}}}function w(e){return function(t){return function(r){return e.chain(r,(function(r){return i.nM(r)?t(r.left):e.of(r)}))}}}function G(e){var t=w(e);return function(r){return t((function(t){return e.map(r(t),(function(e){return i.nM(e)?e:i.t$(t)}))}))}}function k(e){return function(t){return function(r){return e.chain(r,i.EQ((function(r){return e.map(t(r),i.t$)}),(function(t){return e.of(i.F2(t))})))}}}function z(e){return function(t){return e.map(t,i.LF)}}function x(e){return function(t){return e.map(t,i.i$)}}},689:(e,t,r)=>{r.d(t,{MW:()=>u,Uz:()=>o,bc:()=>a,f7:()=>n,n_:()=>i,w4:()=>s});r(169);var n=function(e){return{equals:function(t,r){return t===r||e(t,r)}}},i=function(e){return n((function(t,r){for(var n in e)if(!e[n].equals(t[n],r[n]))return!1;return!0}))},a=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return n((function(t,r){return e.every((function(e,n){return e.equals(t[n],r[n])}))}))},o=function(e){return function(t){return n((function(r,n){return t.equals(e(r),e(n))}))}},s={equals:function(e,t){return e===t}},u=i;s.equals},906:(e,t,r)=>{r.d(t,{DT:()=>o,Dj:()=>s,Yo:()=>a,fX:()=>u});var n=r(169),i=r(614);function a(e){return function(t){return function(r){return e.fromEither(i.Wi(r)?i.t$(t()):i.F2(r.value))}}}function o(e){return function(t,r){return function(n){return e.fromEither(t(n)?i.F2(n):i.t$(r(n)))}}}function s(e){return function(t){return(0,n.ls)(t,e.fromEither)}}function u(e,t){var r=s(e);return function(e){return function(n){return t.chain(n,r(e))}}}},755:(e,t,r)=>{r.d(t,{At:()=>o,oU:()=>a});var n=r(335),i=r(169);function a(e,t){return function(r){var n=(0,i.ls)(r,e.fromIO);return function(e){return t.chain(e,n)}}}function o(e,t){var r=(0,n.m)(t);return function(t){return r((0,i.ls)(t,e.fromIO))}}},241:(e,t,r)=>{r.d(t,{oU:()=>a,wt:()=>i});var n=r(169);function i(e){return function(t){return(0,n.ls)(t,e.fromTask)}}function a(e,t){return function(r){var i=(0,n.ls)(r,e.fromTask);return function(e){return t.chain(e,i)}}}},289:(e,t,r)=>{function n(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.map(e,r)}))}}}function i(e){return function(t){return function(r){return e.map(r,(function(e){return e(t)}))}}}function a(e){return function(t){return function(r){return e.map(r,(function(e){var r;return(r={})[t]=e,r}))}}}function o(e){return function(t,r){return function(n){return e.map(n,(function(e){var n;return Object.assign({},e,((n={})[t]=r(e),n))}))}}}r.d(t,{Hr:()=>o,OV:()=>i,UI:()=>n,YO:()=>a})},694:(e,t,r)=>{r.d(t,{G5:()=>f,PM:()=>m,RD:()=>y,UA:()=>_,UI:()=>u,dO:()=>p,of:()=>c,qo:()=>d});var n=r(169),i=(r(289),r(614)),a=function(e,t){return function(){return t(e())}},o=function(e,t){return function(){return e()(t())}},s=function(e,t){return function(){return t(e())()}},u=function(e){return function(t){return a(t,e)}},c=n.a9,l="IO",p={URI:l,map:a},m={URI:l,of:c},f={URI:l,map:a,ap:o},d={URI:l,map:a,ap:o,chain:s},_={URI:l,map:a,ap:o,of:c,chain:s},v=(n.yR,n.yR,i.F4,c(i.Xl)),g=function(e){var t=function(e){return function(t){return function(){for(var r=[e(0,i.YM(t))()],n=1;n<t.length;n++)r.push(e(n,t[n])());return r}}}(e);return function(e){return i.Od(e)?t(e):v}},h=function(e){return g((function(t,r){return e(r)}))},y=h(n.yR)},606:(e,t,r)=>{r.d(t,{Ce:()=>l,Eh:()=>I,Gb:()=>G,Im:()=>p,KB:()=>v,Od:()=>s,QI:()=>z,R3:()=>m,Ss:()=>x,dC:()=>u,lx:()=>S,nI:()=>_,of:()=>y,oo:()=>f,ur:()=>k,w6:()=>g,ws:()=>c,yL:()=>b});var n=r(169),i=(r(289),r(614)),a=r(214),o=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},s=function(e){return e.length>0},u=function(e,t){return e<0||e>=t.length},c=function(e){return function(t){return o([e],t,!0)}},l=c,p=function(e){return function(t){return o(o([],t,!0),[e],!1)}},m=p,f=function(e,t,r){if(s(r)){var n=d(r);return n.splice(e,0,t),n}return[t]},d=i.r1,_=function(e){return s(e)?i.G(e):i.YP},v=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},g=function(e,t){return e<=t?v((function(t){return e+t}))(t-e+1):[e]};var h=d,y=function(e){return[e]},b=function(e,t,r){for(var n=[r(e[0],t[0])],i=Math.min(e.length,t.length),a=1;a<i;a++)n[a]=r(e[a],t[a]);return n};a.xP,a.Lx;var S=function(e){return function(t){var r=Math.max(1,e);return r>=t.length?[h(t),[]]:[(0,n.zG)(t.slice(1,r),l(w(t))),t.slice(r)]}},I=(a.u4,a.OE,a.nq,a.iw,a.YM,a.ZN,a.Eh),w=(i.F4,a.YM),G=function(e){return e.slice(1)},k=(a.Z$,a.VV,a.Fp,function(e){return function(t){return t.reduce(e.concat)}});a.j0;function z(e,t){return void 0===t?l(e):(0,n.zG)(t,l(e))}var x=function(e,t){return(0,n.zG)(e,m(t))};a.ur},507:(e,t,r)=>{r.d(t,{DT:()=>d,Dj:()=>ce,Do:()=>he,EK:()=>v,EQ:()=>ne,Eh:()=>k,FS:()=>ge,G:()=>f,G5:()=>O,Gk:()=>M,Hr:()=>be,IS:()=>_,KQ:()=>de,NG:()=>_e,OV:()=>se,Qt:()=>Ie,Ri:()=>N,UI:()=>E,Uo:()=>W,WG:()=>ve,Wi:()=>te,Y3:()=>me,YO:()=>ye,YP:()=>m,aD:()=>re,ak:()=>Se,bM:()=>R,dO:()=>U,fS:()=>oe,fX:()=>le,fw:()=>X,g1:()=>C,g_:()=>ie,hX:()=>$,ij:()=>pe,it:()=>fe,lo:()=>j,pC:()=>ee,pF:()=>ae,pR:()=>z,tS:()=>T,uZ:()=>x,wp:()=>B,xH:()=>ue,xu:()=>K});var n=r(945),i=r(335),a=r(906),o=r(169),s=r(289),u=r(614),c=r(327),l=r(49),p=(r(226),r(302)),m=u.YP,f=u.G;function d(e){return function(t){return e(t)?f(t):m}}var _=function(e){return"Right"===e._tag?m:f(e.left)},v=function(e){return"Left"===e._tag?m:f(e.right)},g=function(e,t){return(0,o.zG)(e,E(t))},h=function(e,t){return(0,o.zG)(e,D(t))},y=function(e,t){return(0,o.zG)(e,T(t))},b=function(e,t){return(0,o.zG)(e,$(t))},S=function(e,t){return(0,o.zG)(e,H(t))},I=function(e,t){return(0,o.zG)(e,Z(t))},w=function(e,t){return(0,o.zG)(e,V(t))},G="Option",k=function(e){return{equals:function(t,r){return t===r||(te(t)?te(r):!te(r)&&e.equals(t.value,r.value))}}},z=function(e){return{equals:k(e).equals,compare:function(t,r){return t===r?0:ee(t)?ee(r)?e.compare(t.value,r.value):1:-1}}},x=function(e){return{concat:function(t,r){return te(t)?r:te(r)?t:f(e.concat(t.value,r.value))},empty:m}},E=function(e){return function(t){return te(t)?m:f(e(t.value))}},U={URI:G,map:g},A=f,P={URI:G,of:A},D=function(e){return function(t){return te(t)||te(e)?m:f(t.value(e.value))}},O={URI:G,map:g,ap:h},C={URI:G,map:g,ap:h,of:A},T=function(e){return function(t){return te(t)?m:e(t.value)}},q={URI:G,map:g,ap:h,chain:y},M=function(e){return function(t){return te(t)?e():t}},B=M,R=function(){return m},L={URI:G,zero:R},j=(0,p.l)(L,P),F=T(o.yR),Q=(0,l.s4)(m,m),Y=function(e){return te(e)?Q:(0,l.s4)(_(e.value),v(e.value))},N={URI:G,compact:F,separate:Y},$=function(e){return function(t){return te(t)?m:e(t.value)?t:m}},H=function(e){return function(t){return te(t)?m:e(t.value)}},Z=function(e){return function(t){return(0,l.s4)(b(t,(0,c.ff)(e)),b(t,e))}},V=function(e){return(0,o.ls)(E(e),Y)},K={URI:G,map:g,compact:F,separate:Y,filter:b,filterMap:S,partition:I,partitionMap:w},X=function(e){return function(t){return function(r){return te(r)?e.of(m):e.map(t(r.value),f)}}},W=v,J={URI:G,fromEither:W},ee=u.pC,te=function(e){return"None"===e._tag},re=function(e,t){return function(r){return te(r)?e():t(r.value)}},ne=re,ie=ne,ae=function(e){return function(t){return te(t)?e():t.value}},oe=ae,se=(0,s.OV)(U),ue=F,ce=(0,a.Dj)(J),le=(0,a.fX)(J,q),pe=function(e){return null==e?m:f(e)},me=function(e){try{return f(e())}catch(e){return m}},fe=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return me((function(){return e.apply(void 0,t)}))}},de=function(e){return(0,o.ls)(e,pe)},_e=function(e){return function(t){return te(t)?m:pe(e(t.value))}},ve=ne(o.gn,o.yR),ge=ne(o.r5,o.yR);var he=A(u.F4),ye=(0,s.YO)(U),be=(0,s.Hr)(U),Se=(0,i.a)(q),Ie=(0,n.Qt)(O);u.Xl},856:(e,t,r)=>{r.d(t,{Fp:()=>m,Uz:()=>s,VV:()=>p,Zt:()=>o,gf:()=>l,gt:()=>c,lt:()=>u});var n=r(689),i=r(169),a=function(e){return function(t,r){return t===r||0===e(t,r)}},o=function(e){return{equals:a(e),compare:function(t,r){return t===r?0:e(t,r)}}},s=function(e){return function(t){return o((function(r,n){return t.compare(e(r),e(n))}))}},u=(i.W8,function(e){return function(t,r){return-1===e.compare(t,r)}}),c=function(e){return function(t,r){return 1===e.compare(t,r)}},l=function(e){return function(t,r){return-1!==e.compare(t,r)}},p=function(e){return function(t,r){return t===r||e.compare(t,r)<1?t:r}},m=function(e){return function(t,r){return t===r||e.compare(t,r)>-1?t:r}};n.w4.equals},327:(e,t,r)=>{r.d(t,{ff:()=>n,xD:()=>i});r(169);var n=function(e){return function(t){return!e(t)}},i=function(e){return function(t){return function(r){return t(r)&&e(r)}}}},812:(e,t,r)=>{r.d(t,{Ce:()=>_,DZ:()=>X,EQ:()=>y,Eh:()=>me,Eq:()=>F,Ew:()=>E,G:()=>Ge,Hr:()=>ze,JO:()=>A,Lx:()=>ne,N7:()=>O,OE:()=>ie,OV:()=>_e,Od:()=>d,P5:()=>S,R3:()=>v,Su:()=>Z,UI:()=>H,YM:()=>I,Yo:()=>g,Z$:()=>w,ZN:()=>ce,aD:()=>h,bM:()=>Y,bj:()=>D,cS:()=>Ie,cx:()=>x,f2:()=>U,hX:()=>V,iw:()=>oe,j0:()=>ke,jG:()=>le,jj:()=>T,kp:()=>j,lo:()=>he,md:()=>z,nI:()=>Se,nq:()=>ae,oA:()=>W,oR:()=>be,of:()=>Q,pJ:()=>ye,pO:()=>q,pR:()=>fe,pc:()=>B,qr:()=>P,t9:()=>C,tS:()=>N,u4:()=>re,uK:()=>J,uZ:()=>pe,vP:()=>se,xH:()=>$,xP:()=>te,xb:()=>f,yW:()=>we,zT:()=>k});var n=r(689),i=r(169),a=r(289),o=r(614),s=r(52),u=r(856),c=r(214),l=r(49),p=(r(226),r(302)),m=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},f=function(e){return 0===e.length},d=c.Od,_=c.Ce,v=(c.ws,c.R3);c.Im;var g=function(e){return o.Wi(e)?Ie:[e.value]},h=function(e,t){return function(r){return d(r)?t(r):e()}},y=h,b=c.dC;function S(e,t){return void 0===t?function(t){return S(e,t)}:b(e,t)?o.YP:o.G(t[e])}var I=function(e){return d(e)?o.G(c.YM(e)):o.YP},w=function(e){return d(e)?o.G(c.Z$(e)):o.YP};var G=function(e,t){for(var r=e.length,n=0;n<r&&t(e[n]);n++);return n};function k(e){return function(t){var r=M(G(t,e))(t);return{init:r[0],rest:r[1]}}}var z=function(e){return function(t){return e<=0||f(t)?t:e>=t.length?Ie:t.slice(e,t.length)}};var x=function(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(r);return o.YP}};function E(e){return function(t){for(var r=0;r<t.length;r++)if(e(t[r]))return o.G(t[r]);return o.YP}}var U=function(e){return function(t){for(var r=0;r<t.length;r++){var n=e(t[r]);if(o.pC(n))return n}return o.YP}};var A=function(e){return function(t){for(var r=t.length-1;r>=0;r--){var n=e(t[r]);if(o.pC(n))return n}return o.YP}},P=function(e){return function(t){for(var r=t.length-1;r>=0;r--)if(e(t[r]))return o.G(r);return o.YP}},D=function(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"Left"===n._tag&&t.push(n.left)}return t};var O=function(e){for(var t=[],r=[],n=0;n<e.length;n++)t[n]=e[n][0],r[n]=e[n][1];return[t,r]};function C(e){return function(t,r){if(void 0===r){var n=C(e);return function(e){return n(t,e)}}for(var i,a=0;a<r.length;a++)if(i=r[a],e.equals(i,t))return!0;return!1}}var T=function(e){var t=c.jj(e);return function(e){return d(e)?t(e):e}},q=function(e){var t=c.pO(e);return function(e){return d(e)?t(e):Ie}},M=function(e){return function(t){return e>=1&&d(t)?c.lx(e)(t):f(t)?[t,Ie]:[Ie,t]}},B=function(e){return function(){for(var t=[],r=0;r<arguments.length;r++)t[r]=arguments[r];return g(e.apply(void 0,t))}};var R=function(e,t){return(0,i.zG)(e,H(t))},L=function(e,t,r){return(0,i.zG)(e,re(t,r))},j=function(e,t){return(0,i.zG)(e,ye(t))},F=function(e,t){return(0,i.zG)(e,be(t))},Q=c.of,Y=function(){return Ie},N=function(e){return function(t){return(0,i.zG)(t,function(e){return function(t){if(f(t))return Ie;for(var r=[],n=0;n<t.length;n++)r.push.apply(r,e(n,t[n]));return r}}((function(t,r){return e(r)})))}},$=N(i.yR),H=function(e){return function(t){return t.map((function(t){return e(t)}))}},Z=function(e){return function(t){return t.map((function(t,r){return e(r,t)}))}},V=function(e){return function(t){return t.filter(e)}},K=function(e){return function(t){for(var r=[],n=0;n<t.length;n++){var i=e(n,t[n]);o.pC(i)&&r.push(i.value)}return r}},X=function(e){return K((function(t,r){return e(r)}))},W=X(i.yR),J=function(e){return ee((function(t,r){return e(r)}))},ee=function(e){return function(t){for(var r=[],n=[],i=0;i<t.length;i++){var a=t[i];e(i,a)?n.push(a):r.push(a)}return(0,l.s4)(r,n)}},te=function(e){return function(t){return function(r){return r.reduce((function(r,n,i){return e.concat(r,t(i,n))}),e.empty)}}},re=function(e,t){return ie(e,(function(e,r,n){return t(r,n)}))},ne=function(e){var t=te(e);return function(e){return t((function(t,r){return e(r)}))}},ie=function(e,t){return function(r){for(var n=r.length,i=e,a=0;a<n;a++)i=t(a,i,r[a]);return i}},ae=function(e,t){return oe(e,(function(e,r,n){return t(r,n)}))},oe=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},se=function(e){return function(t){return L(t,e.of(Y()),(function(t,r){return e.ap(e.map(t,(function(e){return function(t){return(0,i.zG)(e,v(t))}})),r)}))}},ue="ReadonlyArray",ce=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},le=function(){return{concat:function(e,t){return f(e)?t:f(t)?e:e.concat(t)}}},pe=function(){return{concat:le().concat,empty:Ie}},me=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},fe=function(e){return(0,u.Zt)((function(t,r){for(var n=t.length,i=r.length,a=Math.min(n,i),o=0;o<a;o++){var u=e.compare(t[o],r[o]);if(0!==u)return u}return s.Df.compare(n,i)}))},de={URI:ue,map:R},_e=(0,a.OV)(de),ve={URI:ue,of:Q},ge={URI:ue,zero:Y},he=(0,p.l)(ge,ve),ye=function(e){return function(t){for(var r=m([],e(t),!0),n=[];r.length>0;){var i=r.shift();o.nM(i)?r.unshift.apply(r,e(i.left)):n.push(i.right)}return n}},be=function(e){return function(t){var r=e(t),n=[],i=[];function a(t){o.nM(t)?e(t.left).forEach((function(e){return n.push(e)})):i.push(t.right)}for(var s=0,u=r;s<u.length;s++){a(u[s])}for(;n.length>0;)a(n.shift());return i}},Se=(c.oo,function(e){return f(e)?Ie:e.slice()}),Ie=c.cS;function we(e){return function(t){return t.every(e)}}var Ge=function(e){return function(t){return t.some(e)}},ke=function(e){var t=c.j0(e);return function(r){return y((function(){return e.empty}),t(r))}},ze=(o.F4,(0,a.Hr)(de));c.w6,c.QI,c.Ss},214:(e,t,r)=>{r.d(t,{Ce:()=>m,Eh:()=>T,Fp:()=>j,Im:()=>f,Lx:()=>E,OE:()=>A,Od:()=>c,QI:()=>$,R3:()=>d,Ss:()=>H,UI:()=>k,VV:()=>L,YM:()=>q,Z$:()=>B,ZN:()=>C,aL:()=>Q,c2:()=>g,cS:()=>u,dC:()=>l,iw:()=>D,j0:()=>N,jj:()=>v,lx:()=>w,nq:()=>U,of:()=>G,oo:()=>_,pO:()=>I,u4:()=>x,ur:()=>F,ut:()=>Y,w6:()=>y,ws:()=>p,xP:()=>P});var n=r(689),i=r(169),a=(r(289),r(614)),o=r(794),s=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},u=a.Xl,c=a.Od,l=function(e,t){return e<0||e>=t.length},p=function(e){return function(t){return s([e],t,!0)}},m=p,f=function(e){return function(t){return s(s([],t,!0),[e],!1)}},d=f,_=function(e,t,r){if(c(r)){var n=a.r1(r);return n.splice(e,0,t),n}return[t]},v=function(e){return function(t){if(1===t.length)return t;for(var r=[q(t)],n=function(t){r.every((function(r){return!e.equals(r,t)}))&&r.push(t)},i=0,a=M(t);i<a.length;i++){n(a[i])}return r}},g=function(e){return c(e)?a.G(e):a.YP},h=function(e){return function(t){for(var r=Math.max(0,Math.floor(t)),n=[e(0)],i=1;i<r;i++)n.push(e(i));return n}},y=function(e,t){return e<=t?h((function(t){return e+t}))(t-e+1):[e]};function b(e,t){return t?e.concat(t):function(t){return t.concat(e)}}var S=function(e){return function(t){for(var r=[e,t[0]],n=1;n<t.length;n++)r.push(e,t[n]);return r}},I=function(e){return function(t){for(var r=e(t),n=[r[0]],i=r[1];c(i);){var a=e(i),o=a[0],s=a[1];n.push(o),i=s}return n}},w=function(e){return function(t){var r=Math.max(1,e);return r>=t.length?[t,u]:[(0,i.zG)(t.slice(1,r),m(q(t))),t.slice(r)]}},G=a.ri,k=function(e){return z((function(t,r){return e(r)}))},z=function(e){return function(t){for(var r=[e(0,q(t))],n=1;n<t.length;n++)r.push(e(n,t[n]));return r}},x=function(e,t){return A(e,(function(e,r,n){return t(r,n)}))},E=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n){return e.concat(r,t(n))}),t(r[0]))}}},U=function(e,t){return D(e,(function(e,r,n){return t(r,n)}))},A=function(e,t){return function(r){return r.reduce((function(e,r,n){return t(n,e,r)}),e)}},P=function(e){return function(t){return function(r){return r.slice(1).reduce((function(r,n,i){return e.concat(r,t(i+1,n))}),t(0,r[0]))}}},D=function(e,t){return function(r){return r.reduceRight((function(e,r,n){return t(n,r,e)}),e)}},O=a.YM,C=function(e){return{show:function(t){return"[".concat(t.map(e.show).join(", "),"]")}}},T=function(e){return(0,n.f7)((function(t,r){return t.length===r.length&&t.every((function(t,n){return e.equals(t,r[n])}))}))},q=(a.F4,O),M=a.Gb,B=function(e){return e[e.length-1]},R=function(e){return e.slice(0,-1)},L=function(e){var t=o.VV(e);return function(e){return e.reduce(t.concat)}},j=function(e){var t=o.Fp(e);return function(e){return e.reduce(t.concat)}},F=function(e){return function(t){return t.reduce(e.concat)}},Q=function(e){return function(t){return e(q(t),M(t))}},Y=function(e){return function(t){return e(R(t),B(t))}},N=function(e){var t=F(e);return function(e){return(0,i.ls)(function(e){return function(t){var r=M(t);return c(r)?(0,i.zG)(r,S(e),m(q(t))):t}}(e),t)}};function $(e,t){return void 0===t?m(e):(0,i.zG)(t,m(e))}var H=function(e,t){return(0,i.zG)(e,b([t]))}},450:(e,t,r)=>{r.d(t,{Bu:()=>g,CC:()=>R,DZ:()=>re,EG:()=>v,EW:()=>$,Eh:()=>pe,G:()=>C,HA:()=>q,Hd:()=>E,I8:()=>j,P5:()=>h,RF:()=>L,RJ:()=>Q,SW:()=>Z,Su:()=>b,UI:()=>S,Ub:()=>K,V_:()=>N,XP:()=>p,Yz:()=>P,_Y:()=>Y,_r:()=>x,cS:()=>y,dp:()=>u,dx:()=>d,e$:()=>_,hX:()=>te,jt:()=>U,kp:()=>B,mK:()=>J,mS:()=>F,nn:()=>M,nr:()=>fe,nu:()=>H,oA:()=>ue,oh:()=>ce,qS:()=>W,ri:()=>k,sq:()=>D,t9:()=>T,tV:()=>ie,uK:()=>ne,uZ:()=>me,vA:()=>X,vP:()=>z,xb:()=>c,yW:()=>O,z7:()=>A,zV:()=>V});var n=r(689),i=r(169),a=r(614),o=r(49),s=r(229),u=(r(226),function(e){return Object.keys(e).length}),c=function(e){for(var t in e)if(a.e$.call(e,t))return!1;return!0},l=function(e){return function(t){return Object.keys(t).sort(e.compare)}},p=l(s.Df);function m(e){if("function"==typeof e)return m(s.Df)(e);var t=l(e);return function(e){return function(r){for(var n=[],i=0,a=t(r);i<a.length;i++){var o=a[i];n.push(e(o,r[o]))}return n}}}var f=m(s.Df)((function(e,t){return[e,t]}));var d=function(e,t){return function(r){if(a.e$.call(r,e)&&r[e]===t)return r;var n=Object.assign({},r);return n[e]=t,n}},_=function(e,t){return a.e$.call(t,e)};function v(e){return function(t){if(!a.e$.call(t,e))return t;var r=Object.assign({},t);return delete r[e],r}}function g(e){return function(t,r){if(void 0===r){var n=g(e);return function(e){return n(e,t)}}for(var i in t)if(!a.e$.call(r,i)||!e.equals(t[i],r[i]))return!1;return!0}}function h(e,t){return void 0===t?function(t){return h(e,t)}:a.e$.call(t,e)?a.G(t[e]):a.YP}var y={};function b(e){return function(t){var r={};for(var n in t)a.e$.call(t,n)&&(r[n]=e(n,t[n]));return r}}function S(e){return b((function(t,r){return e(r)}))}function I(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return I(s.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,a=r(n),o=a.length,s=0;s<o;s++){var u=a[s];i=t(u,i,n[u])}return i}}}function w(e){if("compare"in e){var t=l(e);return function(e){return function(r){return function(n){for(var i=e.empty,a=t(n),o=a.length,s=0;s<o;s++){var u=a[s];i=e.concat(i,r(u,n[u]))}return i}}}}return w(s.Df)(e)}function G(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(2===e.length)return G(s.Df).apply(void 0,e);var r=l(e[0]);return function(e,t){return function(n){for(var i=e,a=r(n),o=a.length-1;o>=0;o--){var s=a[o];i=t(s,n[s],i)}return i}}}var k=function(e,t){var r;return(r={})[e]=t,r};function z(e){return J(s.Df)(e)}function x(e){return function(t){var r={},n={};for(var i in t)if(a.e$.call(t,i)){var s=e(i,t[i]);switch(s._tag){case"Left":r[i]=s.left;break;case"Right":n[i]=s.right}}return(0,o.s4)(r,n)}}function E(e){return function(t){var r={},n={};for(var i in t)if(a.e$.call(t,i)){var s=t[i];e(i,s)?n[i]=s:r[i]=s}return(0,o.s4)(r,n)}}function U(e){return function(t){var r={};for(var n in t)if(a.e$.call(t,n)){var i=e(n,t[n]);a.pC(i)&&(r[n]=i.value)}return r}}function A(e){return function(t){var r={},n=!1;for(var i in t)if(a.e$.call(t,i)){var o=t[i];e(i,o)?r[i]=o:n=!0}return n?r:t}}var P=f,D=function(e){for(var t={},r=0,n=e;r<n.length;r++){var i=n[r];t[i[0]]=i[1]}return t};function O(e){return function(t){for(var r in t)if(!e(t[r]))return!1;return!0}}function C(e){return function(t){for(var r in t)if(e(t[r]))return!0;return!1}}function T(e){return function(t,r){if(void 0===r){var n=T(e);return function(e){return n(t,e)}}for(var i in r)if(e.equals(r[i],t))return!0;return!1}}var q=function(e,t){return(0,i.zG)(e,S(t))},M=function(e,t){return(0,i.zG)(e,b(t))},B=function(e){var t=ae(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},R=function(e){return function(t){var r=oe(e)(t);return function(e,t){return(0,i.zG)(e,r(t))}}},L=function(e){var t=se(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},j=function(e,t){return(0,i.zG)(e,te(t))},F=function(e,t){return(0,i.zG)(e,re(t))},Q=function(e,t){return(0,i.zG)(e,ne(t))},Y=function(e,t){return(0,i.zG)(e,ie(t))},N=function(e){var t=I(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},$=function(e){var t=w(e);return function(e){var r=t(e);return function(e,t){return(0,i.zG)(e,r(t))}}},H=function(e){var t=G(e);return function(e,r,n){return(0,i.zG)(e,t(r,n))}},Z=function(e,t){return(0,i.zG)(e,x(t))},V=function(e,t){return(0,i.zG)(e,E(t))},K=function(e,t){return(0,i.zG)(e,U(t))},X=function(e,t){return(0,i.zG)(e,A(t))},W=function(e){var t=ee(e);return function(e){var r=t(e);return function(e,t){return r(e,(0,i.ls)(i.SK,t))}}},J=function(e){var t=W(e);return function(e){var r=t(e);return function(e){return r(e,i.yR)}}},ee=function(e){return function(t){var r=l(e);return function(e,n){var i=r(e);if(0===i.length)return t.of(y);for(var a=t.of({}),o=function(r){a=t.ap(t.map(a,(function(e){return function(t){var n;return Object.assign({},e,((n={})[r]=t,n))}})),n(r,e[r]))},s=0,u=i;s<u.length;s++){o(u[s])}return a}}},te=function(e){return A((function(t,r){return e(r)}))},re=function(e){return U((function(t,r){return e(r)}))},ne=function(e){return E((function(t,r){return e(r)}))},ie=function(e){return x((function(t,r){return e(r)}))};function ae(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=I(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return ae(s.Df).apply(void 0,e)}function oe(e){if("compare"in e){var t=w(e);return function(e){var r=t(e);return function(e){return r((function(t,r){return e(r)}))}}}return oe(s.Df)(e)}function se(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(1===e.length){var r=G(e[0]);return function(e,t){return r(e,(function(e,r,n){return t(r,n)}))}}return se(s.Df).apply(void 0,e)}var ue=function(e){var t={};for(var r in e)if(a.e$.call(e,r)){var n=e[r];a.pC(n)&&(t[r]=n.value)}return t},ce=function(e){var t={},r={};for(var n in e)if(a.e$.call(e,n)){var i=e[n];a.nM(i)?t[n]=i.left:r[n]=i.right}return(0,o.s4)(t,r)},le="ReadonlyRecord";function pe(e){var t=g(e);return(0,n.f7)((function(e,r){return t(e)(r)&&t(r)(e)}))}function me(e){return{concat:function(t,r){if(c(t))return r;if(c(r))return t;var n=Object.assign({},t);for(var i in r)a.e$.call(r,i)&&(n[i]=a.e$.call(t,i)?e.concat(t[i],r[i]):r[i]);return n},empty:y}}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df;function fe(e,t){return a.e$.call(void 0===t?this:t,e)}s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df,s.Df},794:(e,t,r)=>{r.d(t,{Z$:()=>c,Fp:()=>s,VV:()=>o,n_:()=>u});var n,i=r(614),a=r(856),o=function(e){return{concat:a.VV(e)}},s=function(e){return{concat:a.Fp(e)}},u=function(e){return{concat:function(t,r){var n={};for(var a in e)i.e$.call(e,a)&&(n[a]=e[a].concat(t[a],r[a]));return n}}},c=function(){return{concat:function(e,t){return t}}};n=void 0},49:(e,t,r)=>{r.d(t,{F2:()=>o,Vn:()=>i,s4:()=>n});r(169);var n=function(e,t){return{left:e,right:t}},i=function(e){return function(t){return n(e(a(t)),o(t))}},a=function(e){return e.left},o=function(e){return e.right}},46:(e,t,r)=>{r.d(t,{At:()=>z,Do:()=>x,Hi:()=>b,Hr:()=>U,PM:()=>y,UA:()=>w,UI:()=>f,YO:()=>E,ak:()=>A,ap:()=>d,dO:()=>h,gw:()=>c,mU:()=>G,of:()=>_,pE:()=>T,qA:()=>S,qo:()=>I,tD:()=>u,tS:()=>v,uU:()=>C});var n=r(335),i=r(755),a=r(169),o=r(289),s=r(614),u=function(e){return function(){return Promise.resolve().then(e)}};function c(e){return function(t){return function(){return new Promise((function(r){setTimeout((function(){Promise.resolve().then(t).then(r)}),e)}))}}}var l=function(e,t){return(0,a.zG)(e,f(t))},p=function(e,t){return(0,a.zG)(e,d(t))},m=function(e,t){return(0,a.zG)(e,v(t))},f=function(e){return function(t){return function(){return Promise.resolve().then(t).then(e)}}},d=function(e){return function(t){return function(){return Promise.all([Promise.resolve().then(t),Promise.resolve().then(e)]).then((function(e){return(0,e[0])(e[1])}))}}},_=function(e){return function(){return Promise.resolve(e)}},v=function(e){return function(t){return function(){return Promise.resolve().then(t).then((function(t){return e(t)()}))}}},g="Task";var h={URI:g,map:l},y={URI:g,of:_},b={URI:g,map:l,ap:p},S={URI:g,map:l,ap:p,of:_},I={URI:g,map:l,ap:p,chain:m},w={URI:g,map:l,of:_,ap:p,chain:m},G=(a.yR,(0,n.m)(I)),k={URI:g,fromIO:u},z=(0,i.At)(k,I),x=_(s.F4),E=(0,o.YO)(h),U=(0,o.Hr)(h),A=(0,n.a)(I),P=_(s.Xl),D=function(e){var t=function(e){return function(t){return function(){return Promise.all(t.map((function(t,r){return Promise.resolve().then((function(){return e(r,t)()}))})))}}}(e);return function(e){return s.Od(e)?t(e):P}},O=function(e){var t=function(e){return function(t){return function(){return s.Gb(t).reduce((function(t,r,n){return t.then((function(t){return Promise.resolve().then(e(n+1,r)).then((function(e){return t.push(e),t}))}))}),Promise.resolve().then(e(0,s.YM(t))).then(s.ri))}}}(e);return function(e){return s.Od(e)?t(e):P}},C=function(e){return D((function(t,r){return e(r)}))},T=function(e){return O((function(t,r){return e(r)}))}},6:(e,t,r)=>{r.d(t,{At:()=>te,DT:()=>W,EQ:()=>k,F2:()=>v,Hi:()=>Z,Hr:()=>ae,Ij:()=>ue,LV:()=>z,OV:()=>H,Op:()=>b,QM:()=>g,Qt:()=>se,UI:()=>q,Vn:()=>B,Y3:()=>E,YO:()=>ie,Zl:()=>j,ak:()=>oe,dk:()=>y,fF:()=>I,fS:()=>x,fX:()=>X,fj:()=>G,it:()=>U,lk:()=>h,oU:()=>ee,of:()=>Q,t$:()=>_,tD:()=>S,tS:()=>L,wE:()=>ne,wp:()=>F});var n=r(945),i=r(335),a=r(125),o=r(906),s=r(755),u=r(241),c=r(169),l=r(289),p=r(614),m=r(46),f=function(e,t,r,n){return new(r||(r=Promise))((function(i,a){function o(e){try{u(n.next(e))}catch(e){a(e)}}function s(e){try{u(n.throw(e))}catch(e){a(e)}}function u(e){var t;e.done?i(e.value):(t=e.value,t instanceof r?t:new r((function(e){e(t)}))).then(o,s)}u((n=n.apply(e,t||[])).next())}))},d=function(e,t){var r,n,i,a,o={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return a={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(a){return function(s){return function(a){if(r)throw new TypeError("Generator is already executing.");for(;o;)try{if(r=1,n&&(i=2&a[0]?n.return:a[0]?n.throw||((i=n.return)&&i.call(n),0):n.next)&&!(i=i.call(n,a[1])).done)return i;switch(n=0,i&&(a=[2&a[0],i.value]),a[0]){case 0:case 1:i=a;break;case 4:return o.label++,{value:a[1],done:!1};case 5:o.label++,n=a[1],a=[0];continue;case 7:a=o.ops.pop(),o.trys.pop();continue;default:if(!(i=o.trys,(i=i.length>0&&i[i.length-1])||6!==a[0]&&2!==a[0])){o=0;continue}if(3===a[0]&&(!i||a[1]>i[0]&&a[1]<i[3])){o.label=a[1];break}if(6===a[0]&&o.label<i[1]){o.label=i[1],i=a;break}if(i&&o.label<i[2]){o.label=i[2],o.ops.push(a);break}i[2]&&o.ops.pop(),o.trys.pop();continue}a=t.call(e,o)}catch(e){a=[6,e],n=0}finally{r=i=0}if(5&a[0])throw a[1];return{value:a[0]?a[1]:void 0,done:!0}}([a,s])}}},_=a.t$(m.PM),v=a.F2(m.PM),g=a.m8(m.dO),h=a.pk(m.dO),y=(0,c.ls)(m.tD,g),b=(0,c.ls)(m.tD,h),S=y,I=g,w=m.of,G=m.tD,k=a.EQ(m.dO),z=a.LV(m.UA),x=a.fS(m.UA),E=function(e,t){return function(){return f(void 0,void 0,void 0,(function(){var r;return d(this,(function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e().then(p.F2)];case 1:return[2,n.sent()];case 2:return r=n.sent(),[2,p.t$(t(r))];case 3:return[2]}}))}))}},U=function(e,t){return function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];return E((function(){return e.apply(void 0,r)}),t)}},A=(m.dO,m.PM,m.PM,m.UA,m.UA,m.UA,m.UA,m.dO,function(e,t){return(0,c.zG)(e,q(t))}),P=function(e,t){return(0,c.zG)(e,R(t))},D=function(e,t){return(0,c.zG)(e,L(t))},O=function(e,t,r){return(0,c.zG)(e,M(t,r))},C=function(e,t){return(0,c.zG)(e,B(t))},T=function(e,t){return(0,c.zG)(e,F(t))},q=a.UI(m.dO),M=a.Pd(m.dO),B=a.Vn(m.dO),R=a.ap(m.Hi),L=a.tS(m.UA),j=L,F=a.wp(m.UA),Q=v,Y=_,N="TaskEither";var $={URI:N,map:A},H=(0,l.OV)($),Z={URI:N,map:A,ap:P},V={URI:N,map:A,ap:P,chain:D},K={URI:N,fromEither:w},X=(0,o.fX)(K,V),W=(0,o.DT)(K),J={URI:N,fromIO:S},ee=(0,s.oU)(J,V),te=(0,s.At)(J,V),re={URI:N,fromIO:S,fromTask:I},ne=(0,u.oU)(re,V);p.F4;var ie=(0,l.YO)($),ae=(0,l.Hr)($),oe=(0,i.a)(V),se=(0,n.Qt)(Z),ue=(p.Xl,{URI:N,bimap:O,mapLeft:C,map:A,of:Q,ap:P,chain:D,alt:T,fromIO:S,fromTask:I,throwError:Y})},226:(e,t,r)=>{function n(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.separate)}}}function i(e,t){return function(r){var n=e.traverse(r);return function(e,i){return r.map(n(e,i),t.compact)}}}r.d(t,{BL:()=>i,Fj:()=>n})},302:(e,t,r)=>{function n(e,t){return function(r){return r?t.of(void 0):e.zero()}}r.d(t,{l:()=>n})},169:(e,t,r)=>{r.d(t,{MZ:()=>a,Q1:()=>l,SK:()=>d,W8:()=>s,a9:()=>o,bc:()=>m,gn:()=>u,ls:()=>p,nn:()=>n,r5:()=>c,yR:()=>i,zG:()=>f});var n=function(e){return function(t){return t(e)}};function i(e){return e}var a=i;function o(e){return function(){return e}}var s=o(!0),u=o(null),c=o(void 0),l=c;function p(e,t,r,n,i,a,o,s,u){switch(arguments.length){case 1:return e;case 2:return function(){return t(e.apply(this,arguments))};case 3:return function(){return r(t(e.apply(this,arguments)))};case 4:return function(){return n(r(t(e.apply(this,arguments))))};case 5:return function(){return i(n(r(t(e.apply(this,arguments)))))};case 6:return function(){return a(i(n(r(t(e.apply(this,arguments))))))};case 7:return function(){return o(a(i(n(r(t(e.apply(this,arguments)))))))};case 8:return function(){return s(o(a(i(n(r(t(e.apply(this,arguments))))))))};case 9:return function(){return u(s(o(a(i(n(r(t(e.apply(this,arguments)))))))))}}}function m(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return e}function f(e,t,r,n,i,a,o,s,u){switch(arguments.length){case 1:return e;case 2:return t(e);case 3:return r(t(e));case 4:return n(r(t(e)));case 5:return i(n(r(t(e))));case 6:return a(i(n(r(t(e)))));case 7:return o(a(i(n(r(t(e))))));case 8:return s(o(a(i(n(r(t(e)))))));case 9:return u(s(o(a(i(n(r(t(e))))))));default:for(var c=arguments[0],l=1;l<arguments.length;l++)c=arguments[l](c);return c}}var d=function(e,t){return t}},614:(e,t,r)=>{r.d(t,{F2:()=>p,F4:()=>g,G:()=>s,Gb:()=>_,Od:()=>f,Wi:()=>i,Xl:()=>v,YM:()=>d,YP:()=>o,e$:()=>h,nM:()=>u,pC:()=>a,r1:()=>y,ri:()=>m,t$:()=>l,tO:()=>c});var n=function(e,t,r){if(r||2===arguments.length)for(var n,i=0,a=t.length;i<a;i++)!n&&i in t||(n||(n=Array.prototype.slice.call(t,0,i)),n[i]=t[i]);return e.concat(n||Array.prototype.slice.call(t))},i=function(e){return"None"===e._tag},a=function(e){return"Some"===e._tag},o={_tag:"None"},s=function(e){return{_tag:"Some",value:e}},u=function(e){return"Left"===e._tag},c=function(e){return"Right"===e._tag},l=function(e){return{_tag:"Left",left:e}},p=function(e){return{_tag:"Right",right:e}},m=function(e){return[e]},f=function(e){return e.length>0},d=function(e){return e[0]},_=function(e){return e.slice(1)},v=[],g={},h=Object.prototype.hasOwnProperty,y=function(e){return n([e[0]],e.slice(1),!0)}},52:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n,Pc:()=>o});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},a=(n.equals,i.compare,{concat:function(e,t){return e+t}}),o={concat:a.concat,empty:0}},229:(e,t,r)=>{r.d(t,{Df:()=>i,Eq:()=>n,HD:()=>a,xb:()=>o});var n={equals:function(e,t){return e===t}},i={equals:n.equals,compare:function(e,t){return e<t?-1:e>t?1:0}},a=function(e){return"string"==typeof e},o=function(e){return 0===e.length}},586:(e,t,r)=>{r.d(t,{GL:()=>s,HJ:()=>u,N1:()=>p,NC:()=>n,RP:()=>i,UM:()=>c,t_:()=>l});const n=performance.now(),i=(new Date).getTime();let a=[],o=!1;const s=e=>function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return u((()=>e(...r)))},u=(e,t)=>{if(!o){const r=self.setTimeout(e,t);return()=>self.clearTimeout(r)}let r;const n=()=>{void 0!==r&&o&&a.length<1e4&&a.push([r,performance.now()]),r=void 0},i=[self.setTimeout((()=>{r=performance.now(),self.requestAnimationFrame(n),e()}),t),self.setTimeout(n,t)];return()=>{void 0===r&&i.forEach((e=>self.clearTimeout(e)))}},c=(e,t)=>{if(!o){const r=self.setInterval(e,t);return()=>self.clearInterval(r)}let r=!1,n=()=>{};const i=self.setInterval((()=>{n=u((()=>{r||e()}))}),t);return()=>{r=!0,n(),self.clearInterval(i)}},l=e=>new Promise(((t,r)=>e.then(s(t),s(r)))),p=e=>()=>l(e())},519:(e,t,r)=>{r.d(t,{g1:()=>G,YO:()=>S,oQ:()=>O,a9:()=>g,Ue:()=>d,gS:()=>_,D8:()=>D,VS:()=>k,xH:()=>z,En:()=>v,fF:()=>P,Hr:()=>I,UI:()=>y,u4:()=>x,Rp:()=>E,vP:()=>U,bw:()=>C,YP:()=>h});var n=r(169),i=r(507),a=r(812),o=r(600);function s(e){let t=e,r=[],n=!1;return{addListener(e){if(n)return()=>{};let i=t;const a=()=>{Object.is(t,i)||(i=t,e(t))};r=[...r,a];return()=>{r=r.filter((e=>e!==a))}},notify(e){if(n)throw new Error("Ref bug: Attempted to notify a terminated notifier");Object.is(e,t)||(t=e,r.forEach((e=>e())))},terminate(){n=!0,r=[]}}}function u(e,t){let r=0;return function(){try{if(r++>0)throw new Error(e);return t(...arguments)}finally{r--}}}function c(e,t){let r=[...new Set(e)].filter((e=>"final"!==e.state));if(0===r.length)return{state:"final",onStateChange:()=>()=>{}};const n=()=>0===r.length?"final":r.some((e=>"might_change"===e.state))?"might_change":"nominal",[i,a]=l(n(),(e=>"might_change"!==e&&t())),o=()=>a(n());return r.forEach((t=>{t.onStateChange((t=>{switch(t){case"final":r=e.filter((e=>"final"!==e.state)),o();break;case"might_change":a("might_change");break;case"nominal":o();break;default:throw new Error(`Ref bug: Invalid state ${t}`)}}))})),i}function l(e,t){if("final"===e)return[{state:"final",onStateChange:()=>()=>{}},()=>{}];const{terminate:r,notify:n,addListener:i}=s(e),a={state:e,onStateChange:i},o=u("Disallowed recursion in Branch.",(e=>{if("final"===a.state){if("final"===e)return;throw new Error(`Attempted to change state of final branch to ${e}.`)}try{null==t||t(e),a.state=e,n(e)}finally{"final"===e&&r()}}));return[a,o]}var p=r(289),m=r(694);const f="Ref";function d(e){const[t,r,n]=function(){const[e,t]=l("nominal"),r=u("Disallowed recursion in Branch.",(r=>{if("final"===e.state)throw new Error("Attempted to mutate a finalized Ref.");const n=e.state;try{t("might_change"),r()}finally{t(n)}}));return[e,r,()=>t("final")]}(),[i,a]=T(t,e);return[i,e=>r((()=>a(e))),n]}function _(e){let t=e.empty;const r=()=>()=>{const r=t;return t=e.empty,r},[n,i,a]=d(r());return[n,n=>{t=e.concat(t,n),i(r())},a]}function v(e,t){return r=>{let i=new Array(e).fill(t.empty);return new Array(e).fill(null).map(((e,a)=>(0,n.zG)(r,y(m.UI((e=>{const r=t.concat(i[a],e);return i=i.map(((r,n)=>n===a?t.empty:t.concat(r,e))),r}))))))}}function g(e){return{get current(){return e},onChange:()=>()=>{},branch:{state:"final",onStateChange:()=>()=>{}}}}function h(e){return t=>{const r=t.onChange(e);return e(t.current),r}}function y(e,t){if(t){const[r,n]=T(t.branch,e(t.current));return t.onChange((t=>n(e(t)))),r}return t=>y(e,t)}const b={URI:f,map:(e,t)=>y(t)(e)},S=p.YO(b),I=p.Hr(b),w=e=>k((t=>y(t)(e))),G={URI:f,of:g,map:b.map,ap:(e,t)=>w(t)(e)};function k(e,t){return t?z(y(e,t)):t=>z(y(e,t))}function z(e){if("final"===e.branch.state)return e.current;const[t,r]=function(e,t){let r=t;const n=[e.state,r.state].includes("might_change")?"might_change":"nominal",[i,a]=l(n),o=e=>t=>{switch(t){case"final":a(e().state);break;case"might_change":a("might_change");break;case"nominal":"might_change"===e().state?a("might_change"):a("nominal");break;default:throw new Error(`Ref bug: Unexpected upstream state ${t}`)}};e.onStateChange(o((()=>r)));const s=o((()=>e));let u=r.onStateChange(s);return[i,e=>{r=e,u(),u=e.onStateChange(s),s(r.state)}]}(e.branch,e.current.branch),[n,i]=T(t,e.current.current);let a=e.current.onChange(i);return e.onChange((e=>{a(),a=e.onChange(i),r(e.branch),i(e.current)})),n}function x(e){return t=>{if("final"===t.branch.state)return t;let r=i.YP;return y((t=>{if(i.Wi(r))return r=i.G(t),t;const n=e(r.value,t);return r=i.G(n),n}),t)}}function E(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return e=>{if(2===t.length){let r=t[0];return y((e=>(r=t[1](r,e),r)),e)}let r=i.bM();return y((e=>{const n=t[0](r,e);return r=i.G(n),n}),e)}}function U(){if(0===arguments.length||q(arguments.length<=0?void 0:arguments[0]))return A(...arguments);const e=arguments.length<=0?void 0:arguments[0],t=Object.keys(e);return(0,n.zG)(Object.values(e),(e=>A(...e)),y((0,n.ls)(a.Su(((e,r)=>[t[e],r])),Object.fromEntries)))}function A(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];if(0===t.length)return g([]);if(1===t.length)return y((e=>[e]))(t[0]);let n=!1;t.forEach((e=>e.onChange((()=>{if("might_change"!==e.branch.state)throw new Error("Ref bug: Received a change notification without a `might_change` state.");n=!0}))));const i=t.map((0,o.vg)("branch")),a=()=>{n&&(n=!1,l(t.map((e=>e.current))))},s=c(i,a),[u,l]=T(s,t.map((e=>e.current)));return u}function P(e){const[t,r,a]=d(i.YP);return e().then((0,n.ls)(i.G,r,a)),t}function D(e){const t=e.hasOwnProperty("equals")?e.equals:e;return x(((e,r)=>t(e,r)?e:r))}function O(e){return q(e)?e:g(e)}function C(e){return t=>(h(e)(t),t)}function T(e,t){if("final"===e.state)return[g(t),()=>{}];const r=s(t);e.onStateChange((e=>{"final"===e&&r.terminate()}));let n=t;return[{get current(){return n},onChange:r.addListener,branch:e},u("Disallowed recursion in Ref.",(e=>{n=e,r.notify(n)}))]}function q(e){return"object"==typeof e&&null!==e&&!Array.isArray(e)&&"function"==typeof e.onChange}},480:(e,t,r)=>{r.d(t,{Hr:()=>v,K4:()=>u,KD:()=>y,UI:()=>p,VS:()=>f,YO:()=>g,ak:()=>_,bw:()=>m,dQ:()=>c,kR:()=>b,of:()=>l,vP:()=>d,yi:()=>h});var n=r(519),i=r(169),a=r(600),o=r(450),s=r(507);const u=e=>(0,i.ls)((t=>{let{previousState:r,...n}=t;return e(n)}),(e=>({value:e,state:n.a9(void 0)}))),c=i.yR,l=(0,i.ls)(i.a9,u),p=e=>t=>(0,i.ls)(t,(0,a.rO)({value:e})),m=e=>t=>(0,i.ls)(t,(0,a.rO)({value:(0,a.bw)(e)}));function f(e){return t=>r=>{let{previousState:i,...a}=r;const o=t({previousState:Array.isArray(i)?i[0]:void 0,...a}),s=e(o.value)({previousState:Array.isArray(i)?i[1]:void 0,...a});return{value:s.value,state:n.vP(o.state,s.state)}}}function d(e){return t=>{let{previousState:r,...a}=t;const s=w(r)?r:{},u=(0,i.zG)(e,o.Su(((e,t)=>t({previousState:s[e],...a}))));return{value:(0,i.zG)(u,o.UI((e=>e.value))),state:(0,i.zG)(u,o.UI((e=>e.state)),(e=>n.vP(e)))}}}function _(e,t){return r=>(0,i.ls)((0,a.rO)({previousState:I}),(a=>{const o=r(a),s=t(o.value)({...a,previousState:a.previousState[e]});return{value:(0,i.zG)([o.value,s.value],(t=>{let[r,n]=t;if(!w(r))throw new Error("Service.bind() was passed an upstream Service with a non-record value.");return{...r,[e]:n}})),state:(0,i.zG)(n.vP(o.state,s.state),n.UI((t=>{let[r,n]=t;if(void 0===r)return{[e]:n};if(!w(r))throw new Error("Service.bind() was passed an upstream Service with a non-record state.");return{...r,[e]:n}})))}}))}const v=(e,t)=>p((r=>({...r,[e]:t(r)})));function g(e){return t=>(0,i.ls)((0,a.rO)({previousState:(0,i.ls)(I,(t=>t[e]))}),t,(0,a.rO)({value:t=>({[e]:t}),state:n.UI((t=>({[e]:t})))}))}const h=(e,t)=>{const r=t||(t=>t===e);return t=>c((o=>{let{previousState:s,...u}=o;const c=Array.isArray(s)&&2===s.length&&r(s[0])?s[1]:void 0;return(0,i.zG)({previousState:c,...u},t,(0,a.rO)({state:n.UI((t=>[e,t]))}))}))},y=e=>{const t=e.slice(0,-1),r=e.slice(-1)[0],n=[...t.map((e=>{let[t,r]=e;return[t,(0,i.a9)(r)]})),(0,i.a9)(r)];return b((0,a.lo)(n))};function b(e){return(0,i.ls)(n.UI(e),S)}function S(e){const t=(0,i.zG)(e,n.Rp(0,(e=>e+1)));return r=>{let{previousState:a,stopped:o,...u}=r;return(0,i.zG)(n.vP(e,t),n.Rp(((e,r)=>{let[c,l]=r;return(0,i.zG)(e,s.UI((e=>e.state.current)),s.fS((()=>a)),(e=>c({previousState:e,stopped:(0,i.zG)(n.vP(o,t),n.UI((e=>{let[t,r]=e;return t||r!==l}))),...u})))})),(e=>({value:n.UI((e=>e.value),e),state:n.VS((e=>e.state),e)})))}}function I(e){return w(e)?e:{}}function w(e){return"object"==typeof e&&null!==e}},118:(e,t,r)=>{r.d(t,{d:()=>p,m:()=>l});var n=r(169),i=r(144),a=r(507),o=r(519),s=r(600),u=r(480),c=r(689);const l=e=>u.dQ((t=>{let{stopped:r,previousState:u}=t;const c=function(e){return v(e)?e:{validityKey:"",lastSuccess:a.YP}}(u),l=(0,n.zG)(c,(e=>({...e,inFlight:a.YP,lastSuccess:(0,n.zG)(e.lastSuccess,a.UI(i.F2))}))),p=(0,n.zG)(e,o.UI((e=>"currentTimestampSecs"in e&&"freshness"in e&&"validity"in e?e:{currentTimestampSecs:0,validity:{key:e.validityKey,maxAge:Number.MAX_SAFE_INTEGER},freshness:{key:e.freshnessKey,maxAge:Number.MAX_SAFE_INTEGER},refresh:e.refresh})),(e=>o.vP(e,r)),o.Rp(o.a9(l),((e,t)=>{let[r,u]=t;if(u)return e;const c=r.validity.key(),l=a.hX((e=>r.currentTimestampSecs-e.timestamp<=r.validity.maxAge)),p=(0,s.HP)(r.freshness.key),m=a.hX((e=>r.currentTimestampSecs-e.timestamp<=r.freshness.maxAge&&e.freshnessKey===p())),f=(0,n.zG)(e,o.UI((0,n.ls)(a.DT((e=>e.validityKey===c)),a.EQ((()=>({validityKey:c,inFlight:a.YP,lastSuccess:a.YP})),(0,s.rO)({inFlight:l,lastSuccess:a.tS(i.EQ((e=>a.G(i.t$(e))),(0,n.ls)(a.G,l,a.UI((e=>i.F2(e))))))})))),o.D8(d()));if((0,n.zG)(f.current,(e=>(0,n.zG)(e.inFlight,a.wp((()=>(0,n.zG)(e.lastSuccess,a.tS(a.Uo)))),m,a.pC))))return f;const _=()=>({timestamp:r.currentTimestampSecs,freshnessKey:p(),output:a.YP});return(0,n.zG)(r.refresh,a.EQ((()=>f),(0,n.ls)((0,n.nn)({previous:(0,n.zG)(f.current.lastSuccess,a.tS(a.Uo),a.tS((e=>e.output)))}),o.fF,o.UI(a.EQ((()=>(0,n.zG)(f,o.UI((0,s.rO)({inFlight:()=>a.G(_())})))),i.EQ((e=>(0,n.zG)(f,o.UI((0,s.rO)({inFlight:()=>a.YP,lastSuccess:(0,n.ls)(a.tS((0,n.ls)(a.Uo,a.hX((e=>a.pC(e.output))))),i.Yo((()=>e)),a.G)})))),(e=>o.a9({validityKey:c,inFlight:a.YP,lastSuccess:a.G(i.F2({..._(),output:a.G(e)}))}))))),o.xH)))})),o.xH,o.D8(d())),m=(0,n.zG)(p,o.UI((e=>({validityKey:e.validityKey,lastSuccess:(0,n.zG)(e.lastSuccess,a.tS(a.Uo))}))),o.D8(_())),f=(0,n.zG)(m,o.Rp(-1,(e=>e+1)));return{value:(0,n.zG)(p,o.UI((0,n.ls)((0,s.vg)("lastSuccess"),a.UI(i.UI((e=>e.output))),a.fS((()=>i.F2(a.YP)))))),state:(0,n.zG)(o.vP(m,f),o.UI((e=>{let[t,r]=e;return r>0?t:_().equals(t,c)?u:t})))}})),p=e=>t=>(0,n.ls)((0,s.rO)({previousState:(0,n.ls)(a.DT(v),a.YO("s1"),a.Hr("s2",(t=>{let{s1:r}=t;return(0,n.zG)(r,(0,s.rO)({lastSuccess:a.UI((0,s.rO)({output:a.tS(e)}))}))})),a.UI((e=>{let{s1:t,s2:r}=e;return _().equals(t,r)?t:r})),a.FS)}),t),m=()=>c.n_({freshnessKey:(0,s.Or)(),timestamp:(0,s.Or)(),output:a.Eh((0,s.Or)())});function f(e){return"object"==typeof e&&null!==e&&(!(!("freshnessKey"in e)||!g(e.freshnessKey))&&("timestamp"in e&&"number"==typeof e.timestamp&&!(!("output"in e)||!(0,s.El)(e.output))))}const d=()=>c.n_({validityKey:(0,s.Or)(),inFlight:a.Eh(m()),lastSuccess:a.Eh(i.Eh((0,s.Or)(),m()))}),_=()=>c.n_({validityKey:(0,s.Or)(),lastSuccess:a.Eh(m())});function v(e){return"object"==typeof e&&null!==e&&(!(!("validityKey"in e)||!g(e.validityKey))&&!!("lastSuccess"in e&&(0,s.El)(e.lastSuccess)&&(0,n.zG)(e.lastSuccess,a.EQ((()=>!0),f))))}function g(e){return null===e||"string"==typeof e||"number"==typeof e}},332:(e,t,r)=>{r.r(t),r.d(t,{PermutiveActivationManagerWeb:()=>o,optimisedActivationsConfig:()=>a});class n{logger;permutive;id;segmentCode;triggerType;config;workspaceLevelConfig;prefix="[Activation]";constructor(e,t,r,n,i,a,o){this.logger=e,this.permutive=t,this.id=r,this.segmentCode=n,this.triggerType=i,this.config=a,this.workspaceLevelConfig=o}getSegmentCode(){return this.segmentCode}getTriggerType(){return this.triggerType}getConfig(){return this.config}getWorkspaceLevelConfig(){return this.workspaceLevelConfig}trackImpression(e){return this.trackActivation("impression",e)}trackConversion(e){return this.trackActivation("conversion",e)}trackActivation(e,t){const r={reaction_id:this.id,type:e};this.permutive.track("Reaction",r,t),this.logger.log(this.prefix,r.type,r)}}var i=r(802);const a={dfp:{dfp:[184515,184559,184848,192651,192658,192644,192643,192642,192639,196280,196255,196374,196377,196378,196379,196381,196382,196387,196389,196390,196686,196717,196718,196931,196935,196937,196963,197381,197383,197384,197385,197386,197387,201119,201121,201122,201128,201136,201500,202001,202003,202002,209525,216303,216342,216343,217353,216342,220122,220142,220156,221696,222367,222345,222290,222288,221818,221787,221770,221750,221807,221779,221774,221754,221746,232117,233923,233924,233926,234008,234259,234761,88584,183818,183817,183823,183825,183824,183822,183821,183819,189291,190608,188758,188755,188751,188750,188748,188747,188745,188744,188743,188741,188740,188738,189225,188737,190635,190626,190612,190496,190494,189228,189227,189223,189222,189220,189219,189218,189215,189168,189162,189158,189157,189147,189145,189217,189200,189164,193811,193810,195247,198074,198073,198072,198071,198070,198069,198068],dfp_legacy:{}},eyeota_pixel:[],dbm:{omitted:0},appnexus:{},appnexus_adserver:[],nativo:[],rubicon_ssp:[],smart:[],freewheel:[88584,183819,183818,183817,183822,183825,183824,183823,183821,188755,190608,188758,188751,188750,188748,188747,188745,188744,188743,188741,188740,188738,188737,189220,189218,189215,189164,189157,190635,190626,190612,190496,190494,189228,189227,189225,189223,189222,189219,189200,189217,189168,189147,189162,189158,189145,193811,193810,193216,195247,198068,198074,198073,198072,198071,198070,198069,213836,184848,184559,192644,192651,192658,192639,192643,192642,196381,196382,196686,196717,196377,196374,197387,197386,197385,197384,197383,197381,196963,196937,196935,196931,196718,196390,196389,196387,196379,196378,201119,201121,201122,201128,201136,201500,202001,202003,202002,196280,217353,221818,220156,220122,222367,222345,222290,221807,221787,221779,221774,221770,221750,221746,222288,221754,221696,220142,232117,234008,234259],curation_platforms:{adv:["adv"]}};class o{logger;permutive;clientContext;constructor(e,t,r){this.logger=e,this.permutive=t,this.clientContext=r}getSpecializedActivations(e){return a[e]}getActivations(e){return(0,i.Hn)(e)("activationConfigs",[]).filter((e=>this.areContextCriteriaSatisfied(e))).map((e=>new n(this.logger,this.permutive,e.id,e.sc,e.tt,e.c,e.wc)))}areContextCriteriaSatisfied(e){const t=e.cc,r=e=>{const t=this.clientContext.getContext()[e.key];switch(e.comparison){case"EQUALS":return t===e.value;case"NOT_EQUALS":return t!==e.value;case"CONTAINS":return"string"==typeof t&&t.indexOf(e.value)>=0;case"NOT_CONTAINS":return"string"==typeof t&&t.indexOf(e.value)<0}};return!t||("AND"===(n=t).operator?n.criteria.every(r):n.criteria.some(r));var n}}},802:(e,t,r)=>{r.d(t,{Hn:()=>i});const n={web:{auto_init:!1,track_pageview_engagement:!0,track_form_submission:!1,track_link_click:!0,track_pageview_complete:!0,add_alchemy_taxonomy:!1,add_alchemy_entities:!1,engagement_edge_only:!0,segment_transition_edge_only:!0,activationConfigs:[]},freewheel:{auto_init:!0,activationConfigs:[]},dfp:{auto_init:!0,track_slot_rendered:!1,track_slot_viewable:!0,track_slot_clicked:!0,activationConfigs:[]}},i=e=>{const t=n[e];return(e,r)=>(null==t?void 0:t[e])??r};i("web"),i("dfp"),i("facebook_pixel_v2")},469:(e,t,r)=>{r.d(t,{X:()=>i,k:()=>n});const n=e=>({id:e.id,name:e.name,time:new Date(e.time),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),i=e=>({id:e.id,name:e.name,time:(a(e.time)?e.time:new Date).toISOString(),properties:e.properties||{},session_id:e.session_id,view_id:e.view_id}),a=e=>isFinite(e)&&e instanceof Date},978:(e,t,r)=>{r.d(t,{F:()=>c,I:()=>u});var n=r(519),i=r(694),a=r(812),o=r(169),s=r(600);const u=(e,t)=>{let r=!1;return n.UI(i.UI((0,s.bw)((n=>{r||(r=(0,o.zG)(n,a.G((e=>{let[,t]=e;return"Pageview"===t.name}))),r&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:t,time_origin:"sdk_init"}))}))))},c=(e,t)=>{const r=u(e,t);return(0,o.ls)(n.En(2,a.uZ()),(e=>{let[t,i]=e;return(0,o.zG)(i,r,n.UI((e=>e()))),t}))}},142:(e,t,r)=>{r.r(t),r.d(t,{service:()=>Ia});var n=r(169),i=r(480),a=r(519),o=r(507);function s(e){return e[0]}function u(e){return e[1]}var c=function(e){return function(t){return[e(s(t)),u(t)]}},l=function(e){return function(t){return[s(t),e(u(t))]}};const p=e=>{const t=e.current;return(0,n.zG)(e,a.UI((e=>e===t?{segmentsEntered:[],segmentsExited:[]}:{segmentsEntered:(0,n.zG)(e,f(t)),segmentsExited:(0,n.zG)(t,f(e))})))},m=e=>new Set(e),f=e=>t=>(0,n.zG)(t,d((t=>!e.has(t)))),d=e=>t=>{const r=[];return t.forEach((t=>e(t)&&r.push(t))),r};var _=r(694),v=r(586),g=r(600);const h=()=>({kind:"null",value:null}),y=e=>({kind:"string",value:e}),b=e=>({kind:"number",value:e}),S=e=>({kind:"array",value:e}),I=e=>({kind:"object",value:e}),w=e=>e,G=()=>({kind:"bottom"}),k=e=>({kind:"inner",a:e}),z=e=>({kind:"top",error:e}),x=e=>({kind:"unbounded",group:e}),E=(e,t)=>({kind:"windowed",key:t,group:e}),U=(e,t,r)=>({kind:"countLimit",n:r,limit:t,group:e}),A=(e,t,r)=>({kind:"uniqueLimit",n:r,limit:t,group:e}),P=e=>({kind:"numberGroup",group:e}),D=e=>({kind:"stringGroup",group:e}),O=e=>({kind:"tuple",tuple:e}),C=e=>({state:e}),T=(e,t)=>({commands:e,payload:t});var q=r(856),M=r(229);const B=(e,t)=>{switch(e.kind){case"bottom":return{kind:"bottom"};case"inner":return k(t(e.a));case"top":return z(e.error)}},R=e=>(0,q.Zt)(((t,r)=>{if("bottom"===t.kind&&"bottom"===r.kind)return 0;if("bottom"===t.kind)return-1;if("bottom"===r.kind)return 1;if("top"===t.kind&&"top"===r.kind)return M.Df.compare(t.error,r.error);if("top"===t.kind)return 1;if("top"===r.kind)return-1;if("inner"===t.kind&&"inner"===r.kind)return e.compare(t.a,r.a);throw new Error("Non exhaustive match in extendedAlgebraOrd")}));var L=r(606),j=r(340),F=r(144),Q=function(e){return-1===e?1:1===e?-1:0};function Y(e,t){return(0,j.oA)(e.map(t))}function N(e,t,r,n){const i=(e,t)=>{if(0===e.length)return(0,j.oA)(t.map((e=>(0,o.G)({1:e[1],2:r(o.YP,(0,o.G)(e[2]))}))));if(0===t.length)return(0,j.oA)(e.map((e=>(0,o.G)({1:e[1],2:r((0,o.G)(e[2]),o.YP)}))));if(e.length>0&&t.length>0&&(0,q.lt)(n)(e[0][1],t[0][1])){const[n,...a]=e,s=n[1],u=n[2];return(0,j.Ce)({1:s,2:r((0,o.G)(u),o.YP)})(i(a,t))}if(e.length>0&&t.length>0&&(0,q.gt)(n)(e[0][1],t[0][1])){const[n,...a]=t,s=n[1],u=n[2];return(0,j.Ce)({1:s,2:r(o.YP,(0,o.G)(u))})(i(e,a))}if(e.length>0&&t.length>0){const[n,...a]=e,[s,...u]=t,c=n[1],l=n[2],p=s[2];return(0,j.Ce)({1:c,2:r((0,o.G)(l),(0,o.G)(p))})(i(a,u))}throw new Error("Non exhaustive match in mapOption2")},a=(0,q.Uz)((e=>e[1]))(n),s=(e=>{const t=Y(e,(e=>(0,o.pC)(e[2])?(0,o.G)({1:e[1],2:e[2].value}):o.YP));return 0===t.length?o.YP:(0,o.G)(t)})(i((0,j.DY)(a)([...e].map((e=>({1:e[0],2:e[1]})))),(0,j.DY)(a)([...t].map((e=>({1:e[0],2:e[1]}))))));return(0,o.UI)((e=>new Map(e.map((e=>[e[1],e[2]])))))(s)}function $(e,t,r,n){const i=(0,q.Uz)((e=>e[0]))(n),a=(0,j.DY)(i)([...t]).reduceRight(((e,t)=>{if((0,F.nM)(e)){const n=r(t[1],e.left);return(0,o.pC)(n)?(0,F.t$)(n.value):(0,F.F2)(t[0])}return e}),(0,F.t$)(e));return(0,o.Uo)(a)}function H(e,t){return new Map([...e].map(t))}function Z(e,t){return new Map([...e].filter(t))}var V=r(689),K=r(52);function X(e){return JSON.stringify(W(e))}function W(e){switch(e.kind){case"null":return te.encode(e);case"string":return re.encode(e);case"number":return ne.encode(e);case"array":return ie.encode(e);case"object":return ae.encode(e)}}function J(e){return null===e?te.decode(e):"number"==typeof e?ne.decode(e):"string"==typeof e?re.decode(e):Array.isArray(e)?ie.decode(e):ae.decode(e)}const ee=(e,t)=>(0,F.t$)(`Failed to decode. Input was ${JSON.stringify(e)}. Codec type was ${t}`),te={encode:e=>null,decode:e=>null===e?(0,F.F2)({kind:"null",value:null}):ee(e,"SimpleNull")},re={encode:e=>e.value,decode:e=>"string"==typeof e?(0,F.F2)(y(e)):ee(e,"SimpleString")},ne={encode:e=>e.value,decode:e=>"number"==typeof e?(0,F.F2)(b(e)):ee(e,"SimpleNumber")},ie={encode:e=>e.value.map(W),decode:e=>{if(Array.isArray(e)){const t=(0,j.fw)(F.g1)(J)(e);return(0,F.UI)(S)(t)}return ee(e,"SimpleArray")}},ae={encode:e=>{const t=[...e.value.entries()];return Object.assign({},...Array.from(t,(e=>{let[t,r]=e;return{[t]:W(r)}})))},decode:e=>{if(e&&e.constructor===Object){const t=(0,j.fw)(F.g1)((e=>{let[t,r]=e;return(0,n.zG)(J(r),(0,F.UI)((e=>(0,n.bc)(t,e))))}))(Object.entries(e));return(0,F.UI)((e=>I(new Map([...e]))))(t)}return ee(e,"SimpleObject")}};function oe(e){return(0,n.zG)(e,ue,(0,o.UI)(X),(0,o.fS)((()=>"<encode error>")))}function se(e){return(0,o.UI)(de)(function(e){switch(e.state.kind){case"top":return(0,o.G)(y(e.state.error));case"bottom":return o.YP;case"inner":return ue(e.state.a)}}(e))}function ue(e){return function(e){switch(e.kind){case"numberGroup":case"stringGroup":return ce(e.group);case"tuple":return e.tuple.length>0}}(e.payload)?(0,o.G)(S(function(e,t){const r=(0,o.UI)((e=>(0,j.Ce)(e)(t)))(e);return(0,o.fS)((()=>t))(r)}((0,o.UI)((e=>y(function(e){const t=e=>(0,o.EQ)((()=>""),(e=>"b"+JSON.stringify(e)))(e.bound),r=e=>{switch(e.operation){case"add":return"p";case"mul":return"m";case"max":return"v";case"min":return"n"}},n=e=>{const n=t(e[1])+r(e[1]);return 1===e[2]?n:n+JSON.stringify(e[2])};return e.map(n).join("")}(e))))(e.commands),function(e){const t=e=>{switch(e.kind){case"bottom":return{kind:"null",value:null};case"top":return y(e.error);case"inner":return b(e.a)}},r=e=>Y([le,pe,e=>(0,n.zG)(e,fe,I,o.G)],(t=>t(e))),i=e=>Y([le,me,e=>(0,n.zG)(e,fe,(e=>H(e,(e=>{let[t,r]=e;return[JSON.stringify(t),r]}))),I,o.G)],(t=>t(e)));switch(e.kind){case"tuple":return e.tuple.map(t);case"stringGroup":return r(e.group);case"numberGroup":return i(e.group)}}(e.payload)))):o.YP}function ce(e){switch(e.kind){case"unbounded":return e.group.size>0;case"windowed":return e.group.size>0||(0,o.pC)(e.key);case"countLimit":case"uniqueLimit":return e.group.size>0||(0,o.pC)(e.limit)}}function le(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.G)(y("w"));case"countLimit":return(0,o.G)(y(1===e.n?"x":`x${e.n}`));case"uniqueLimit":return(0,o.G)(y(1===e.n?"u":`u${e.n}`))}}function pe(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.G)(y((0,o.pC)(e.key)?e.key.value:""));case"countLimit":case"uniqueLimit":return(0,o.G)(y((0,o.pC)(e.limit)?e.limit.value:""))}}function me(e){switch(e.kind){case"unbounded":return o.YP;case"windowed":return(0,o.pC)(e.key)?(0,o.G)(b(e.key.value)):(0,o.G)({kind:"null",value:null});case"countLimit":case"uniqueLimit":return(0,o.pC)(e.limit)?(0,o.G)(b(e.limit.value)):(0,o.G)({kind:"null",value:null})}}function fe(e){switch(e.kind){case"unbounded":case"windowed":case"countLimit":case"uniqueLimit":return e.group}}function de(e){switch(e.kind){case"array":return 0===e.value.length?{kind:"null",value:null}:1===e.value.length?de(e.value[0]):S(e.value.map(de));case"object":return(0,n.zG)(Z(e.value,(e=>{let[t,r]=e;return"null"!==r.kind})),(e=>H(e,(e=>[e[0],de(e[1])]))),I);default:return e}}function _e(e){const t=e=>{if(0===e.length)return{kind:"bottom"};const t=(e=>{if(4!==e.length)return o.YP;const[t,r,n,i]=e;if("string"===t.kind&&"string"===r.kind&&"object"===i.kind){const e=(0,o.DT)((e=>ve(e[1].value)&&ge(e[2].value)))({1:t,2:r});return(0,o.UI)((e=>({prim:e[1].value,grp:e[2].value,cutoff:n,m:i.value})))(e)}return o.YP})(e);if((0,o.pC)(t)){const{prim:e,grp:r,cutoff:n,m:i}=t.value,a=he(n,i,ye(r));return"string"==typeof a?z(a):k(T(be(e),a))}const r=(e=>{if(3!==e.length)return o.YP;const[t,r,n]=e;if("string"===t.kind&&"object"===n.kind){const e=(0,o.DT)((e=>ge(e.value)))(t);return(0,o.UI)((e=>({grp:e.value,cutoff:r,m:n.value})))(e)}return o.YP})(e);if((0,o.pC)(r)){const{grp:e,cutoff:t,m:n}=r.value,i=he(t,n,ye(e));return"string"==typeof i?z(i):k(T(o.YP,i))}const n=(e=>{if(2!==e.length)return o.YP;const[t,r]=e;if("string"===t.kind&&"object"===r.kind){const e=(0,o.DT)((e=>ve(e.value)))(t);return(0,o.UI)((e=>({prim:e.value,m:r.value})))(e)}return o.YP})(e);if((0,o.pC)(n)){const{prim:e,m:t}=n.value;return k(T(be(e),D(x(t))))}const i=(e=>{if(1!==e.length)return o.YP;const[t]=e;return"object"===t.kind?(0,o.G)({m:t.value}):o.YP})(e);if((0,o.pC)(i)){const{m:e}=i.value;return k(T(o.YP,D(x(e))))}const a=(e=>{if(e.length<1)return o.YP;const[t,...r]=e;if("string"===t.kind){const e=(0,o.DT)((e=>ve(e.value)))(t);return(0,o.UI)((e=>({prim:e.value,rest:r})))(e)}return o.YP})(e);if((0,o.pC)(a)){const{prim:e,rest:t}=a.value;return k(T(be(e),Ie(t)))}return k(T(o.YP,Ie(e)))},r=e=>"array"===e.kind?(0,j.tS)(r)(e.value):[e];return"null"===e.kind?C({kind:"bottom"}):C(t(r(e)))}function ve(e){const t=e.split("");if(!0==(0===t.length))return!1;{const[e,...r]=t;return-1!=="bpmvn".indexOf(e)&&r.every((e=>-1!=="bpmvn0123456789.".indexOf(e)))}}function ge(e){const t=e.split("");switch(!0){case 0===t.length:return!1;case"w"===t[0]&&void 0===t[1]:return!0;default:{const[e,...r]=t;return-1!=="ux".indexOf(e)&&-1===r.map((e=>!isNaN(parseInt(e)))).indexOf(!1)}}}function he(e,t,r){switch(e.kind){case"string":return D(r({1:(0,o.G)(e.value),2:t}));case"number":case"null":return P(r({1:"null"===e.kind?o.YP:(0,o.G)(e.value),2:Z(H(t,(e=>{let[t,r]=e;return[Number(t),r]})),(e=>!isNaN(e[0])))}));default:return"{bad cutoff}"}}function ye(e){const t=e=>t=>A(t[2],t[1],e),r=e=>t=>U(t[2],t[1],e),n=e.split("");switch(!0){case"w"===n[0]&&void 0===n[1]:return e=>E(e[2],e[1]);case"u"===n[0]&&void 0===n[1]:return t(1);case"u"===n[0]&&void 0!==n[1]:return t(parseInt(n.slice(1).join("")));case"x"===n[0]&&void 0===n[1]:return r(1);case"x"===n[0]&&void 0!==n[1]:return r(parseInt(n.slice(1).join("")));default:throw new Error("This should never happen if you use isGroupCommand")}}function be(e){const t=e=>(0,o.Wi)(e.bound)||"add"===e.operation||"mul"===e.operation?(0,o.G)(e):o.YP,r=(e,r,i)=>{const a=((e,r)=>(0,n.zG)(e,(e=>{switch(e){case"p":return(0,o.G)("add");case"m":return(0,o.G)("mul");case"v":return(0,o.G)("max");case"n":return(0,o.G)("min");default:return o.YP}}),o.UI((e=>({operation:e,bound:r}))),o.tS(t)))(e,i);return(0,o.UI)((e=>{const{init:t,rest:n}=(0,j.zT)((e=>{return"number"==typeof(t=parseInt(e))&&isFinite(t)&&Math.floor(t)===t;var t}))(r);return{1:{1:e,2:0===t.length?1:parseInt(t.join(""))},2:n.join("")}}))(a)};return(0,o.UI)(w)((0,L.nI)(Se(e,(e=>{const t=e.split("");if(0===t.length)return o.YP;const[i,...a]=t;if("b"===i){const{init:e,rest:t}=(0,n.zG)(a,(0,j.zT)((e=>-1!=="1234567890.".indexOf(e))));if(0===e.length||0===t.length)return o.YP;const i=parseFloat(e.join("")),[s,...u]=t;return r(s,u,(0,o.G)(i))}return r(i,a,o.YP)}))))}function Se(e,t){const r=t(e);return(0,o.fS)((()=>[]))((0,o.UI)((e=>[e[1]].concat(Se(e[2],t))))(r))}function Ie(e){return O(e.map(we))}function we(e){switch(e.kind){case"number":return k(e.value);case"string":return z(e.value);case"null":return{kind:"bottom"};case"object":return z("{object}");case"array":return z("{array}")}}var Ge=r(945);const ke={strategy:(e,t,r)=>n=>{if((0,o.Wi)(r))return t;if("delta"===e&&(0,o.Wi)(t))return o.YP;if((0,o.Wi)(t))return r;if((0,o.pC)(t)&&(0,o.pC)(r))return n(t.value,r.value);throw new Error("Non exhaustive match in combineCommand.strategy")},operation:(e,t,r,i,a,s)=>{const u=(0,j.pR)(R(s)),c=(0,n.zG)(t.bound,o.EQ((()=>n.yR),(e=>t=>(0,q.VV)(s)(a.fromNumber(e),t))));if("append"===e&&"add"===t.operation)return(0,j.yL)(r,i,De("append",(0,n.ls)(a.plus,c)));if("append"===e&&"mul"===t.operation)return(0,j.yL)(r,i,De("append",(0,n.ls)(a.times,c)));if("append"===e&&"max"===t.operation)return(0,q.Fp)(u)(r,i);if("join"===e&&"add"===t.operation)return(0,j.yL)(r,i,De("join",(0,q.Fp)(s)));if("join"===e&&"mul"===t.operation)return(0,j.yL)(r,i,De("join",(0,q.Fp)(s)));if("join"===e&&"max"===t.operation)return(0,q.Fp)(u)(r,i);if("min"===t.operation)return ke.operation(e,{operation:"max",bound:t.bound},r,i,a,function(e){return(0,q.Zt)(((t,r)=>Q(e.compare(t,r))))}(s));if("delta"===e&&"max"===t.operation)return(0,q.gt)(u)(r,i)?r:i.map(G);if("delta"===e)return(0,j.yL)(r,i,((e,t)=>(0,q.gt)(R(s))(e,t)?B(e,c):{kind:"bottom"}));throw new Error("Non exhaustive match in combineCommand.operation")},extend:(e,t,r,n)=>{if("delta"===e&&"top"===r.kind&&"top"===n.kind)return(0,q.gt)(M.Df)(r.error,n.error)?z(r.error):{kind:"bottom"};if("delta"===e&&"bottom"===n.kind)return r;if("delta"===e&&"bottom"===r.kind)return{kind:"bottom"};if("top"===r.kind&&"top"===n.kind)return z((0,q.Fp)(M.Df)(r.error,n.error));if("top"===r.kind)return r;if("top"===n.kind)return n;if("inner"===r.kind&&"inner"===n.kind)return t(r.a,n.a);if("bottom"===r.kind)return n;if("bottom"===n.kind)return r;throw new Error("Non exhaustive match in extend")}},ze={fromNumber:n.yR,plus:(e,t)=>e+t,times:(e,t)=>e*t};function xe(e,t,r,n){if("unbounded"===e.kind&&"unbounded"===t.kind){const i=e.group,a=t.group;return(0,o.fS)(G)((0,o.UI)((e=>k(x(e))))(N(i,a,r,n)))}if("windowed"===e.kind&&"windowed"===t.kind){const i=e.key,a=e.group,s=t.key,u=t.group,c=(0,q.Fp)((0,o.pR)(n))(i,s);return(0,o.fS)(G)((0,o.UI)((e=>k(E(e,c))))(N(a,u,r,n)))}if("countLimit"===e.kind&&"countLimit"===t.kind){const i=e.n,a=t.n;if(i===a){const a=e.limit,s=e.group,u=t.limit,c=t.group,l=(0,q.Fp)((0,o.pR)(n))(a,u);return(0,o.fS)(G)((0,o.UI)((e=>k(U(e,l,i))))(N(s,c,r,n)))}return z("Non matching counts")}if("uniqueLimit"===e.kind&&"uniqueLimit"===t.kind){const i=e.n,a=t.n;if(i===a){const a=e.limit,s=e.group,u=t.limit,c=t.group,l=(0,q.Fp)((0,o.pR)(n))(a,u);return(0,o.fS)(G)((0,o.UI)((e=>k(A(e,l,i))))(N(s,c,r,n)))}return z("Non matching counts")}return z("Non matching group types")}function Ee(e,t,r){return(0,o.fS)(h)(Ue(e,o.YP)(t,r))}function Ue(e,t){const r=t=>(r,n)=>ke.strategy(e,r,n)(Ue(e,t)),i=(t,n,i)=>{if("stringGroup"===n.kind&&"stringGroup"===i.kind){const e=xe(n.group,i.group,r(t),M.Df);return B(e,(e=>D(Pe(e,M.Df))))}if("numberGroup"===n.kind&&"numberGroup"===i.kind){const e=xe(n.group,i.group,r(t),K.Df);return B(e,(e=>P(Pe(e,K.Df))))}if("tuple"===n.kind&&"tuple"===i.kind){const r=(0,o.pC)(t)?t.value:[];return k(O(function(e,t,r,n,i,a){const s=(e,t)=>({1:(0,j.ke)(e)(t).concat((0,j.KB)(Math.max(0,e-t.length),G)),2:(0,j.md)(e)(t)}),u=(t,r,n)=>{if(0===t.length)return ke.operation(e,{operation:"max",bound:o.YP},r,n,i,a);if(t.length>0){const[o,...c]=t,l=s(o[2],r),p=l[1],m=l[2],f=s(o[2],n),d=f[1],_=f[2];return ke.operation(e,o[1],p,d,i,a).concat(u(c,m,_))}throw new Error("Non exhaustive match in recurse")};return(0,j.GY)((0,j.Qp)((e=>"bottom"===e.kind))((0,j.GY)(u(t,r,n))))}(e,r,n.tuple,i.tuple,ze,K.Df)))}throw new Error(`Non matching payload. Got ${n.kind} and ${i.kind}`)},a=(e,r)=>{if((0,o.Eh)((0,L.Eh)((0,V.n_)({1:(0,V.n_)({operation:M.Eq,bound:(0,o.Eh)(K.Eq)}),2:K.Eq}))).equals(e.commands,r.commands)){const n=(0,o.Wi)(e.commands)?t:e.commands,a=i(n,e.payload,r.payload);return B(a,(t=>T(e.commands,t)))}if(a=e.commands,s=r.commands,(0,o.Eh)((0,L.Eh)((0,V.n_)({1:(0,V.n_)({operation:M.Eq}),2:K.Eq}))).equals(a,s)){const a=(0,n.zG)(((e,t)=>(0,n.zG)((0,Ge.gz)(o.G5)(e,t),(0,o.UI)((e=>{let[t,r]=e;return L.yL(t,r,((e,t)=>({1:{operation:e[1].operation,bound:(0,n.zG)((0,Ge.gz)(o.G5)(e[1].bound,t[1].bound),o.UI((e=>{let[t,r]=e;return Math.min(t,r)})),o.wp((()=>e[1].bound)),o.wp((()=>t[1].bound)))},2:e[2]})))}))))(e.commands,r.commands),o.wp((()=>t))),s=i(a,e.payload,r.payload);return B(s,(e=>T(a,e)))}throw new Error(`Non matching primitive strings. Got ${oe(e)} and ${oe(r)}`);var a,s};return(t,r)=>se(C(ke.extend(e,a,_e(t).state,_e(r).state)))}function Ae(e,t,r){const n=(0,o.UI)((t=>Z(e,(e=>{let[n,i]=e;return(0,q.gf)(r)(n,t)}))))(t);return(0,o.fS)((()=>e))(n)}function Pe(e,t){switch(e.kind){case"unbounded":return e;case"windowed":return(0,o.Wi)(e.key)?e:E(Ae(e.group,e.key,t),e.key);case"countLimit":{const r=e.limit,n=e.n,i=e.group,a=$(n,i,((e,t)=>t<=1?o.YP:(0,o.G)(t-1)),t),s=(0,q.Fp)((0,o.pR)(t))(r,a);return U(Ae(i,s,t),s,n)}case"uniqueLimit":{const r=e.limit,n=e.n,i=e.group,a=(e,t)=>{if("object"===e.kind){const r=[...e.value.keys(),...t.keys()],i=new Set(r);return i.size>=n?o.YP:(0,o.G)(i)}return o.YP},s=$(new Set,i,a,t),u=(0,q.Fp)((0,o.pR)(t))(r,s);return A(Ae(i,u,t),u,n)}}}function De(e,t){return(r,n)=>ke.extend(e,((e,r)=>k(t(e,r))),r,n)}function Oe(e,t){return Ee("append",e,t)}function Ce(e,t){return Ee("join",e,t)}var Te=r(450),qe=r(327),Me=r(6),Be=r(335),Re=r(289),Le=r(49);function je(e,t){return function(r){return e.map(r,t.compact)}}function Fe(e,t,r){var i=je(e,t),a=(0,Re.UI)(e,r);return function(e){return Le.s4(i((0,n.zG)(e,a(o.IS))),i((0,n.zG)(e,a(o.EK))))}}function Qe(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filter(e,r)}))}}}function Ye(e,t){return function(r){return function(n){return e.map(n,(function(e){return t.filterMap(e,r)}))}}}function Ne(e,t){var r=Qe(e,t);return function(e){var t=r((0,qe.ff)(e)),n=r(e);return function(e){return(0,Le.s4)(t(e),n(e))}}}function $e(e,t){var r=Ye(e,t);return function(e){return function(t){return(0,Le.s4)((0,n.zG)(t,r((function(t){return(0,o.IS)(e(t))}))),(0,n.zG)(t,r((function(t){return(0,o.EK)(e(t))}))))}}}var He=r(755),Ze=r(241),Ve=r(614);function Ke(e){return(0,n.ls)(o.G,e.of)}function Xe(e){return(0,n.a9)(e.of(o.YP))}function We(e){return function(t){return e.map(t,o.G)}}function Je(e){return(0,n.ls)(o.ij,e.of)}function et(e){var t=Je(e);return function(e){return(0,n.ls)(e,t)}}function tt(e){var t=pt(e),r=et(e);return function(e){return t(r(e))}}function rt(e){return function(t){return(0,n.ls)(t,e.of)}}function nt(e){var t=pt(e),r=rt(e);return function(e){return t(r(e))}}function it(e){return function(t){return function(r){return e.of(o.DT(t)(r))}}}function at(e){return(0,n.ls)(o.Uo,e.of)}function ot(e){return function(t,r){return function(n){return e.map(n,o.EQ(t,r))}}}function st(e){return function(t,r){return function(n){return e.chain(n,o.EQ(t,r))}}}function ut(e){return function(t){return function(r){return e.chain(r,o.EQ(t,e.of))}}}function ct(e){return(0,Re.UI)(e,o.dO)}function lt(e){return(0,Ge.ap)(e,o.G5)}function pt(e){var t=Xe(e);return function(r){return function(n){return e.chain(n,o.EQ((function(){return t()}),r))}}}function mt(e){var t=Ke(e);return function(r){return function(n){return e.chain(n,o.EQ(r,t))}}}var ft=r(46),dt=Ke(ft.PM),_t=(ft.PM,ft.of),vt=(ft.PM,function(e){return gt(ft.tD(e))}),gt=We(ft.dO),ht=ft.UI(o.Uo),yt=(ft.dO,st(ft.qo)),bt=(ft.UA,ft.PM,ft.PM,ft.UA,ft.PM,nt(ft.UA)),St=ct(ft.dO),It=lt(ft.Hi),wt=dt,Gt=pt(ft.UA),kt=(ft.UA,ft.PM,ft.dO,o.Ri,ft.dO,o.Ri,o.dO,Qe(ft.dO,o.xu)),zt=(ft.dO,o.xu,ft.dO,o.xu,ft.dO,o.xu,function(e,t){return(0,n.zG)(e,St(t))}),xt=function(e,t){return(0,n.zG)(e,It(t))},Et=function(e,t){return(0,n.zG)(e,Gt(t))},Ut="TaskOption",At={URI:Ut,map:zt},Pt={URI:Ut,map:zt,ap:xt,chain:Et},Dt={URI:Ut,fromIO:vt},Ot=(0,He.At)(Dt,Pt),Ct={URI:Ut,fromIO:vt,fromTask:gt},Tt=(0,Ze.wt)(Ct),qt=(0,Ze.oU)(Ct,Pt),Mt=(Ve.F4,(0,Re.Hr)(At)),Bt=(0,Be.a)(Pt),Rt=(Ve.Xl,Ke(_.PM)),Lt=(_.PM,_.of,_.PM,_.dO,o.Uo,_.dO,_.qo,_.UA,_.UI(o.FS),_.UI(o.WG),_.PM,_.PM,_.UA,_.PM,_.UA,_.dO,_.G5,Rt),jt=(_.UA,mt(_.UA)),Ft=(_.PM,_.dO,o.Ri,_.dO,o.Ri,o.dO,_.dO,o.xu,_.dO,o.xu,_.dO,o.xu,_.dO,o.xu,Ve.F4,Ve.Xl,r(812));const Qt=new Set(["AdRequest","Reaction","PageviewEngagement","SegmentEntry","SegmentExit"]),Yt=e=>i.dQ((t=>{let{previousState:r}=t;const[i,s]=a.Ue(!1);const[u,c]=a.gS({empty:o.YP,concat:(e,t)=>(0,n.zG)(Ft.oA([e,t]),o.DT(Ft.Od),o.UI((e=>e.reduce(((e,t)=>({...e,...t}))))))}),l=(0,n.zG)((0,g.Kn)(r)?r:{},(0,g.rO)({stateOffset:(0,n.ls)(o.DT(g.BJ),o.fS((()=>0))),fetchUnseenKey:(0,n.ls)(o.DT(g.HD),o.fS((()=>"")))})),p=(0,n.zG)(a.gS(o.uZ({concat:function(e,t){return Object.assign({},e,t)}})),(t=>{let[r,i]=t;return(0,n.zG)(a.vP(e.lastProcessedEvents,e.internalStateDiff,e.queryLanguageProcessing),a.bw((e=>{let[t,r,n]=e;if(n)return;return t().filter((e=>!Qt.has(e.name))).length>0?i(r()):void 0}))),(0,n.zG)(a.vP({internalStateDiff:r,internalStateMap:e.internalStateMap}),a.D8(((e,t)=>e.internalStateDiff===t.internalStateDiff)))})),m=(0,n.zG)(a.vP(e.sessionId,p,i),a.Rp(a.a9({...l,inFlightRequest:!1,previousDecodedState:(0,n.zG)(e.internalStateMap.current,$t,J,F.fS((()=>I(new Map)))),sendFullStateWithUnseen:!1}),((t,r)=>{let[i,{internalStateDiff:s,internalStateMap:u},l]=r;return(0,n.zG)(t,a.VS((t=>{if(t.inFlightRequest)return a.a9(t);const r=!l&&t.sendFullStateWithUnseen,p=r||!e.groupIdIsNewlyGenerated&&i!==t.fetchUnseenKey;return(0,n.zG)(r?Lt(u):s,jt((()=>()=>(0,n.zG)({},o.DT((()=>p))))),ft.tD,Gt((0,n.ls)(Zt(t.previousDecodedState),Me.Vn((0,g.bw)((t=>e.logger.error(t)))),ht)),yt((()=>ft.of({...t,inFlightRequest:!1})),(0,n.ls)(ft.of,ft.ak("processed",(r=>(0,n.zG)(e,Nt({delta:r.delta,stateOffset:t.stateOffset,fetchUnseen:p}),ft.UI((0,g.bw)((0,n.ls)(o.UI((0,g.vg)("stateDelta")),o.hX(qe.ff(Te.xb)),c)))))),ft.UI((e=>({fetchUnseenKey:i,inFlightRequest:!1,sendFullStateWithUnseen:t.sendFullStateWithUnseen&&!r,previousDecodedState:e.decodedState,stateOffset:(0,n.zG)(e.processed,o.UI((e=>e.response.state_offset)),o.fS((()=>t.stateOffset)))}))))),a.fF,a.UI(o.fS((()=>({...t,inFlightRequest:!0})))))})))})),a.xH,a.UI((e=>({stateOffset:e.stateOffset,fetchUnseenKey:e.fetchUnseenKey}))),a.D8((0,V.MW)({stateOffset:K.Eq,fetchUnseenKey:M.Eq})));return{state:m,value:{externalStateDelta:u}}})),Nt=e=>t=>(0,n.zG)(e,o.DT((e=>e.fetchUnseen||qe.ff(Te.xb)(e.delta))),_t,Gt((e=>{return(0,n.zG)(t,(r={event_source_id:t.eventSourceId,fetch_unseen:e.fetchUnseen,group_id:t.groupId,last_seen_offset:e.stateOffset,state:e.delta},e=>Me.Y3((()=>e.permutiveApi.req({url:e.permutiveUrls.getEndpointUrl("/state",o.G("v1.0"),[["fetch_unseen",JSON.stringify(r.fetch_unseen)]]),method:"POST",payload:{group_id:r.group_id,event_source_id:r.event_source_id,state:JSON.stringify(r.state),last_seen_offset:r.last_seen_offset},contentType:"text/plain",dataType:"json",withCredentials:!1})),(e=>`Error sending state delta. Got ${F.KC(e)}`))),Me.Vn((0,g.bw)((e=>t.reportError(e)))),ht,kt((e=>!!e)),bt((0,n.ls)(F.of,F.YO("response"),F.ak("stateDelta",(e=>{return t=e.response.state,(0,F.Y3)((function(){return JSON.parse(t)}),n.yR);var t})),F.Vn((0,g.bw)((e=>t.reportError(`Failed to parse State API response, got ${e}`)))),o.Uo)));var r}))),$t=e=>(0,g.b0)(e,((e,t)=>t.state?o.G({[t.checksum]:t.state}):o.YP)),Ht=e=>t=>{const r=(0,n.zG)(t,$t,J,F.fS((()=>I(new Map))),(t=>Ee("delta",t,e)));return{decodedState:Ce(r,e),delta:(0,n.zG)(r,W,o.ij,o.fS((()=>({}))))}},Zt=e=>t=>()=>new Promise((r=>(0,v.HJ)((()=>(0,n.zG)(t,F.it(Ht(e),(e=>`Failed to compute delta for state sync. Got ${e}`)),r)))));r(226),Te.dp;var Vt=Te.xb,Kt=function(e){return function(t){return Object.keys(t).sort(e.compare)}};M.Df;Te.dx,Te.e$;Te.Bu,Te.P5,Te.Su;var Xt=Te.UI;Te.ri;function Wt(e){return Te.vP(e)}Te._r;Te.jt;Te.yW,Te.G,Te.t9;var Jt=Te.HA,er=(Te.nn,Te.kp),tr=Te.CC,rr=Te.RF,nr=(Te.I8,Te.mS,Te.RJ,Te._Y,Te.V_),ir=Te.EW,ar=Te.nu,or=(Te.SW,Te.zV,Te.Ub,Te.vA,Te.qS),sr=(Te.mK,function(e){return function(t){var r=Kt(e);return function(e,n){var i=r(e);if(0===i.length)return t.of({});for(var a=t.of({}),o=function(r){a=t.ap(t.map(a,(function(e){return function(t){return e[r]=t,e}})),n(r,e[r]))},s=0,u=i;s<u.length;s++){o(u[s])}return a}}}),ur=Te.hX;Te.DZ,Te.uK,Te.tV;Te.oA,Te.oh;var cr="Record";Te.Eh,Te.uZ,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,Te.nr,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df,M.Df;var lr=r(654),pr=r(214),mr=function(e){return function(t){return[void 0,e(t)]}},fr=function(e){return function(t){return[e(t),t]}},dr=function(e,t){return(0,n.zG)(e,gr(t))},_r=function(e,t){return(0,n.zG)(e,hr(t))},vr=function(e,t){return(0,n.zG)(e,br(t))},gr=function(e){return function(t){return function(r){var n=t(r),i=n[0],a=n[1];return[e(i),a]}}},hr=function(e){return function(t){return function(r){var n=t(r),i=n[0],a=n[1],o=e(a),s=o[0],u=o[1];return[i(s),u]}}},yr=function(e){return function(t){return[e,t]}},br=function(e){return function(t){return function(r){var n=t(r),i=n[0],a=n[1];return e(i)(a)}}},Sr="State",Ir={URI:Sr,map:dr},wr={URI:Sr,map:dr,ap:_r},Gr=(0,Ge.N)(wr),kr=(0,Ge.a1)(wr),zr={URI:Sr,map:dr,ap:_r,of:yr},xr={URI:Sr,map:dr,ap:_r,chain:vr},Er=(0,Be.m)(xr),Ur=(n.yR,(0,Re.YO)(Ir)),Ar=(0,Be.a)(xr),Pr=function(e){var t=function(e){return function(t){return function(r){for(var n=e(0,Ve.YM(t))(r),i=[n[0]],a=n[1],o=1;o<t.length;o++){var s=e(o,t[o])(a),u=s[0],c=s[1];i.push(u),a=c}return[i,a]}}}(e);return function(e){return Ve.Od(e)?t(e):yr(Ve.Xl)}},Dr=function(e){return Pr((function(t,r){return e(r)}))},Or=Dr(n.yR);const Cr=e=>({aggregations:{PageviewEngagement:{engaged_time:0},SegmentEntry:new Set,SegmentExit:new Set,CohortEntry:new Set,CohortExit:new Set},customProperties:{},sessionId:e.sessionId,viewId:e.viewId}),Tr=e=>t=>{const r=new Set(t);return r.add(e),r},qr=e=>t=>{const r=new Set(t);return r.delete(e),r},Mr=e=>[...e];var Br,Rr,Lr=r(469);!function(e){e.init=function(e){return e&&"object"==typeof e&&"externalStateMap"in e&&"internalStateMap"in e?e:{externalStateMap:o.YP,internalStateMap:{},migrationVersion:gn}}}(Br||(Br={})),function(e){e.sequenceNonEmptyArray=e=>{if(1===e.length)return e[0];const t=(0,n.bc)([],{},[]);for(const r of e){t[0].push(...r[0]);for(const e in r[1])t[1][e]=r[1][e];t[2].push(...r[2])}return t},e.sequenceArray=t=>(0,n.zG)(t,o.DT(Ft.Od),o.UI(e.sequenceNonEmptyArray)),e.empty=[Ft.cS,Te.cS,Ft.cS],e.error=e=>[Ft.of(e),Te.cS,Ft.cS],e.ofOutputEvent=e=>[Ft.cS,Te.cS,[e]]}(Rr||(Rr={}));const jr=e=>vn((t=>(0,n.zG)(Fr((e=>({...e,getCurrentSession:()=>t.environment.sessionId,getCurrentView:()=>t.environment.viewId}))),br((()=>{return Or([Qr(e),Hr(t.environment.thirdPartyData),(i=t.environment.lookalikeModels,(0,n.zG)((function(e){return[e,e]}),br((e=>ln.equals(e.lal,i)?yr(Ft.cS):(0,n.zG)(mr((0,g.rO)({lal:(0,n.a9)(i)})),Gr(Fr(function(e){const t=(0,n.zG)(e,o.fS((()=>({}))));return e=>({...e,getLookalikeModels:()=>t})}(i))),br((()=>(0,n.zG)(Ft.Yo(i),Dr((()=>Xr("updateLAL"))),gr(Ft.xH))))))))),(0,n.zG)(t.externalStateDelta,o.UI(Kr),o.fS((()=>yr(Ft.bM())))),(r=t.cloudLiftedState,(0,n.zG)(r,Ft.tS((e=>Object.entries(e))),Dr((e=>{let[t,r]=e;return fr((e=>(0,n.bc)(t,e.queries.runtime.cloudLiftedQueries[t],r)))})),br((e=>en(F.F2(e)))))),Wr(t.newEvents)]);var r,i})),gr((0,n.ls)(Ft.xH,o.DT(Ft.Od),o.tS(Rr.sequenceArray))),(e=>t=>{let[r,i]=e(t);if(o.pC(r)){let e=r.value,t=0;const a=100;let s;for(s=0;s<a&&e[2].length>t;s++){const r=e[2],[a,o]=(0,n.zG)(Wr(r.slice(t)),gr((t=>Rr.sequenceNonEmptyArray([e,...t]))),(0,n.nn)(i));e=a,i=o,t=r.length}s>=a&&(e=Rr.sequenceNonEmptyArray([e,Rr.error(`Exceeded ${a} iterations when producing transition events`)])),r=o.G(e)}return(0,n.bc)(r,i)}),_n(e,"query_language_process_duration")))),Fr=e=>mr((0,g.rO)({effects:e}));function Qr(e){return(0,n.zG)((function(e){return[e,e]}),br((t=>{let{bootstrapped:r,effects:i,eventsForReplay:a}=t;return r?yr(Ft.cS):(0,n.zG)(mr((e=>({...e,bootstrapped:!0,eventsForReplay:[]}))),Er(Yr),br((()=>(0,n.zG)(a,Ft.R3(dn(i)),Dr(Jr("bootstrap")),gr(Ft.xH)))),_n(e,"query_language_bootstrap_duration"))})))}const Yr=()=>mr((e=>(0,n.zG)(e.invalidatedQueries,Ft.EQ((()=>e),Nr(e))))),Nr=e=>t=>{const r=(0,n.zG)(t,Ft.UI((t=>(0,n.bc)(t,{checksum:e.queries.metadata[t]}))),(e=>Object.fromEntries(e)));return(0,n.zG)(e,(0,g.rO)({persistentState:(0,g.rO)({internalStateMap:e=>({...r,...e})})}))},$r=(0,n.zG)(fr((e=>e.tpdQueries)),br(o.EQ((()=>(0,n.zG)(fr((e=>new Set([...e.queries.runtime.queriesByEvent["!UpdateSecondPartyData"]||[],...e.queries.runtime.queriesByEvent["!UpdateThirdPartyData"]||[]]))),Er((e=>mr((0,g.rO)({tpdQueries:()=>o.G(e)})))))),yr)));function Hr(e){const t=(0,n.zG)(e,o.UI(s));return(0,n.zG)((function(e){return[e,e]}),br((r=>{if(o.Eh(K.Eq).equals(t,r.tpdHashInEffectsObject))return yr(Ft.cS);const i=o.FS(t);return(0,n.zG)(mr((0,g.rO)({persistentState:(0,g.rO)({tpdHash:(0,n.a9)(i)}),tpdHashInEffectsObject:(0,n.a9)(t),tpdReady:(0,n.a9)(o.pC(e))})),gr((()=>(0,n.zG)(e,o.UI(u)))),Er((e=>Fr(function(e){const t=pn((()=>(0,n.zG)(e,o.fS((()=>({"3p":{}}))))));return e=>{const r=pn((()=>({...t(),...e.get1PSegments()})));return{...e,getSegments:r,getSegmentsArray:pn((()=>fn(r()))),get3PSegments:t}}}(e)))),br(o.fw(zr)((()=>(0,n.zG)(r.tpdEventsToProcess,Ft.EQ((()=>i!==r.persistentState.tpdHash?Xr("updateTPD"):yr(Ft.cS)),(0,n.ls)(Dr(Jr("updateTPD")),Gr(mr((e=>({...e,tpdEventsToProcess:[]})))),gr(Ft.xH))))))),gr(o.fS((()=>Ft.bM()))))})))}const Zr=e=>Te.jt(((t,r)=>(0,n.zG)(Te.P5(t,e.metadata),o.tS((e=>Te.P5(e,r))),o.tS((r=>(0,n.zG)(Te.P5(t,e.runtime.locallyLiftedQueries),o.wp((()=>Te.P5(t,e.runtime.cloudLiftedQueries))),o.NG((e=>e.compact(r)))))),o.tS((0,n.ls)(J,o.Uo))))),Vr=(e,t)=>{if(Te.xb(e))return t;if(Te.xb(t))return e;const r={...e};for(const e in t)r[e]=(0,n.zG)(o.ij(r[e]),o.EQ((()=>t[e]),(r=>(0,n.zG)(o.Y3((()=>Ce(r,t[e]))),o.fS((()=>t[e]))))));return r};function Kr(e){return(0,n.zG)(fr((t=>(0,n.zG)(e,Zr(t.queries),(e=>(0,n.zG)(t.persistentState.externalStateMap,o.UI(Te.DZ((0,n.ls)(J,o.Uo))),o.EQ((()=>e),(t=>Vr(t,e))))),Te.UI(W)))),br((e=>mr((0,g.rO)({persistentState:(0,g.rO)({externalStateMap:(0,n.a9)(o.G(e))})})))),br((()=>Xr("updateExternalState"))))}function Xr(e){return(0,n.zG)(fr((e=>dn(e.effects))),br(Jr(e)))}function Wr(e){return(0,n.zG)(e,Ft.EQ((()=>yr(Ft.bM())),(0,n.ls)(nn,br(Dr((e=>{let[t,r]=e;return(0,n.zG)(r,Jr(t))}))),gr(Ft.xH))))}function Jr(e){return(0,n.ls)(yr,Er((e=>"Pageview"!==e.name?yr(void 0):mr((0,g.rO)({pageviewProperties:(0,n.a9)(e.properties)})))),"bootstrap"===e?n.yR:Er((e=>{return mr((0,g.rO)({unprocessedPageviewComplete:(t=e,e=>{switch(t.name){case"Pageview":return t.view_id!==e.viewId?e:{...e,customProperties:t.properties};case"SegmentEntry":{const r=t.properties.segment_number;return(0,n.zG)(e,(0,g.rO)({aggregations:e=>e.SegmentExit.has(r)?(0,n.zG)(e,(0,g.rO)({CohortExit:qr(String(r)),SegmentExit:qr(r)})):(0,n.zG)(e,(0,g.rO)({CohortEntry:Tr(String(r)),SegmentEntry:Tr(r)}))}))}case"SegmentExit":{const r=t.properties.segment_number;return(0,n.zG)(e,(0,g.rO)({aggregations:e=>e.SegmentEntry.has(r)?(0,n.zG)(e,(0,g.rO)({CohortEntry:qr(String(r)),SegmentEntry:qr(r)})):(0,n.zG)(e,(0,g.rO)({CohortExit:Tr(String(r)),SegmentExit:Tr(r)}))}))}case"PageviewEngagement":{if(t.view_id!==e.viewId)return e;const r=t.properties;return(0,n.zG)(e,(0,g.rO)({aggregations:(0,g.rO)({PageviewEngagement:()=>({engaged_time:r.total_engaged_time,completion:r.total_completion})})}))}default:return e}})}));var t})),Er((e=>{return sn(e)?Fr((t=e.properties.segment_number,r="SegmentEntry"===e.name,e=>{return(0,n.zG)(e,(i={"1p":{...e.get1PSegments()["1p"],[t]:r}},e=>{const t=pn((()=>({...i,...e.get3PSegments()})));return{...e,getSegments:t,getSegmentsArray:pn((()=>fn(t()))),get1PSegments:()=>i}}));var i})):yr(void 0);var t,r})),Ur("event"),Ar("queriesToProcess",(t=>{let{event:r}=t;return function(e,t){return(0,n.zG)((function(e){return[e,e]}),Ur("state"),Ar("tpdQueriesToReject",(e=>{let{state:{tpdReady:t}}=e;return t?yr(o.bM()):(0,n.zG)($r,gr(o.DT((e=>e.size>0))))})),br((r=>{let{state:i,tpdQueriesToReject:a}=r;const s=(0,n.zG)(a,o.UI((e=>Ft.hX((t=>!e.has(t))))),o.fS((()=>e=>e)));switch(e){case"bootstrap":return yr((0,n.zG)(i.queriesForReplay,s));case"event":const e=i.tpdReady?yr(void 0):mr((0,g.rO)({tpdEventsToProcess:Ft.R3(t)}));return(0,n.zG)(yr(i.locallyLiftedQueriesByEvent[t.name]||[]),gr(s),Gr(e));case"lookalikeTransition":return yr(i.locallyLiftedQueriesByEvent[t.name]||[]);case"transition":const r=i.locallyLiftedQueriesByEvent[t.name]||[];if(o.pC(i.lal)){const e=i.locallyLiftedQueriesByEvent["!UpdateLookalikeModels"]||[];return yr(r.concat(e))}return yr(r);case"updateExternalState":return yr((0,n.zG)(i.persistentState.externalStateMap,o.fS((()=>({}))),Te.XP));case"updateLAL":return yr(i.locallyLiftedQueriesByEvent["!UpdateLookalikeModels"]||[]);case"updateTPD":return yr([...i.locallyLiftedQueriesByEvent["!UpdateSecondPartyData"]||[],...i.locallyLiftedQueriesByEvent["!UpdateThirdPartyData"]||[]]);default:return yr([])}})))}(e,r)})),br((t=>{let{event:r,queriesToProcess:i}=t;return(0,n.zG)(i,Ft.EQ((()=>yr(Ft.bM())),(t=>(0,n.zG)(fr((t=>"bootstrap"!==e?t.effects:{...t.effects,getCurrentTime:()=>r.time,getCurrentView:()=>r.view_id,getCurrentSession:()=>r.session_id})),br((e=>(0,n.zG)(fr((e=>(0,n.zG)(t,Ft.DZ((t=>(0,n.zG)(Te.P5(t,e.queries.runtime.locallyLiftedQueries),o.wp((()=>Te.P5(t,e.cloudLiftQueriesForReplay))),o.UI((e=>(0,n.bc)(t,e))))))))),br((t=>en(F.t$((0,n.bc)(t,r)),e))))))))))})))}const en=(e,t)=>(0,n.zG)(e,F.EQ((e=>{let[r,i]=e;return(0,n.zG)(r,Dr((e=>{let[r,n]=e;return tn(r,F.t$([n,i]),t)})))}),Dr((e=>{let[t,r,n]=e;return tn(t,F.F2([r,n]))}))),gr(Rr.sequenceArray),Er(o.fw(zr)((e=>{let[,t]=e;return mr((0,g.rO)({persistentState:(0,g.rO)({internalStateMap:e=>({...e,...t})})}))}))),gr(Ft.Yo)),tn=(e,t,r)=>(0,n.zG)(fr(F.it((i=>{var a,u,c;const l=r??i.effects,p=(0,n.zG)(t,F.EQ(s,s)),[m,f]=(0,n.zG)(t,F.aD((e=>{let[t,r]=e;return(0,n.bc)(t.lift(r,l),cn({null:null,encode:n.yR,decode:F.of,append:t.append}))}),(e=>{let[,t]=e;return(0,n.bc)(t,cn(un()))}))),d=(0,n.zG)(i.persistentState.externalStateMap,o.tS(Te.P5(e))),_=i.persistentState.internalStateMap[e]||{checksum:i.queries.metadata[e]},v=f(e,l,p,_,d,m),g=Boolean(null===(a=v.result)||void 0===a?void 0:a.result)!==Boolean(null===(u=i.persistentState.internalStateMap[e])||void 0===u||null===(c=u.result)||void 0===c?void 0:c.result),h=(0,n.zG)(Ft.lo(g),Ft.UI((()=>{var t;return{name:null!==(t=v.result)&&void 0!==t&&t.result?"SegmentEntry":"SegmentExit",time:l.getCurrentTime(),view_id:l.getCurrentView(),session_id:l.getCurrentSession(),properties:{...i.pageviewProperties,segment_number:Number(e)}}})));return(0,n.bc)(v,h)}),(t=>`Failed to interpret query ${e}. Got ${t}`))),br(F.EQ((e=>yr([[e],Te.cS,Ft.cS])),(t=>{let[r,i]=t;return(0,n.zG)(r.dropExternalState?rn(e):yr(void 0),gr((()=>[Ft.cS,{[e]:r},i])))})))),rn=e=>mr((0,g.rO)({persistentState:(0,g.rO)({externalStateMap:o.UI(Te.EG(e))})}));function nn(e){const t=e=>t=>(0,n.bc)(e,t);return fr((r=>(0,n.zG)(e,Ft.pO(pr.aL(((e,t)=>{const r=sn(e);return(0,n.zG)(t,Ft.zT((e=>sn(e)===r)),(e=>{let{init:t,rest:r}=e;return(0,n.bc)(t,r)}),c(((e,t)=>r=>(0,n.bc)(e,(0,n.zG)(r,Ft.Ce(t))))(r,e)))}))),Ft.tS((e=>{let[i,a]=e;if(!i)return(0,n.zG)(a,Ft.UI(t("event")));const o=(0,n.zG)(a,Ft.yW((e=>r.lookalikeTransitionSegmentNumbers.has(e.properties.segment_number))),(e=>e?"lookalikeTransition":"transition"));return(0,n.zG)(a,pr.ut(((e,r)=>(0,n.zG)(e,Ft.UI(t("event")),Ft.R3((0,n.zG)(r,t(o)))))))})))))}const an=(0,n.ls)(Te.hX((e=>{var t;return Boolean(null===(t=e.result)||void 0===t?void 0:t.result)})),Te.XP,Ft.UI(parseInt)),on=(0,n.ls)(Xt((e=>e.activations??{})),ur((0,n.zG)(Boolean,(0,qe.xD)((0,qe.ff)(Vt)))));function sn(e){var t;return("SegmentEntry"===e.name||"SegmentExit"===e.name)&&void 0!==(null===(t=e.properties)||void 0===t?void 0:t.segment_number)}const un=()=>({null:{kind:"null",value:null},encode:W,decode:J,append:Oe}),cn=e=>(t,r,i,a,s,u)=>{const c={...a.activations},l={...r,setSegmentActivation:(e,r,n)=>{if(n!=t)throw new Error(`QL called setSegmentActivation for query ${n} while interpreting query ${t}`);e in c?c[e].includes(r)||(c[e]=[...c[e],r]):c[e]=[r]}},p=o.ij(a.state),m=o.ij(u),f=(0,n.zG)((0,Ge.gz)(o.G5)(p,m),o.UI((t=>{let[r,i]=t;const a=(0,n.zG)(e.decode(r),F.fS((()=>e.null))),o=(0,n.zG)(e.decode(i),F.fS((()=>e.null)));try{return F.F2(e.append(a,o))}catch(e){throw(0,lr.w)(`Failed to append lifted event ${JSON.stringify(i)} to internal state ${JSON.stringify(r)}. Got ${e}`)}})),o.Gk((()=>(0,n.zG)(p,o.wp((()=>m)),o.UI(F.t$))))),d=(0,n.zG)(f,o.UI(F.EQ(n.yR,e.encode)),o.tS(o.ij)),{overallState:_,dropExternalState:v}=(0,n.zG)((0,Ge.gz)(o.G5)(f,s),o.UI((t=>{let[r,i]=t;return(0,n.zG)(o.Uo(e.decode(i)),o.tS((t=>(0,n.zG)(r,F.vx(e.decode),F.fS((()=>e.null)),o.it((r=>e.append(r,t)))))),o.EQ((()=>({overallState:d,dropExternalState:!0})),(t=>({overallState:o.ij(e.encode(t)),dropExternalState:!1}))))})),o.fS((()=>(0,n.zG)(d,o.Gk((()=>s)),(e=>({overallState:e,dropExternalState:!1}))))),(0,g.rO)({overallState:o.WG})),h=i.interpret(_,l);return{checksum:a.checksum,...(0,n.zG)(d,o.aD((()=>({})),(e=>({state:e})))),...!1===h.result?{}:{result:h},...Vt(c)?{}:{activations:c},...!1===v?{}:{dropExternalState:v}}},ln=o.Eh({equals:(e,t)=>e===t});function pn(e){let t,r=!1;return()=>(r||(t=e(),r=!0),t)}function mn(e){const t=pn((()=>(0,n.zG)(e,Te.hX((e=>{var t;return Boolean(null===(t=e.result)||void 0===t?void 0:t.result)})),Te.UI((()=>!0)),(e=>({"1p":e}))))),r={"3p":{}},i=pn((()=>({...t(),...r})));return{getSegments:i,getSegmentsArray:pn((()=>fn(i()))),get1PSegments:t,get3PSegments:()=>r}}function fn(e){return Object.keys(e).reduce(((t,r)=>{const n=Object.keys(e[r]),i=[];return n.forEach((t=>{!0===e[r][t]&&i.push(t)})),t[r]=i,t}),{})}const dn=e=>({name:"",properties:{},session_id:e.getCurrentSession(),view_id:e.getCurrentView(),time:e.getCurrentTime()}),_n=(e,t)=>r=>n=>{const i=e.startSpan(t),a=r(n);return i.finish(),a},vn=e=>t=>(0,n.zG)(mr((0,g.rO)({unprocessedPageviewComplete:(0,n.ls)(o.DT((e=>e.viewId===t.environment.viewId)),o.fS((()=>Cr(t.environment))))})),kr(fr((e=>(0,n.zG)(o.ij(e.persistentState.unprocessedPVC),o.hX((e=>e.view_id!==t.environment.viewId)),o.UI(Lr.k))))),Ur("flushedPvc"),Ar("processingResult",(r=>{let{flushedPvc:i}=r;return e({...t,newEvents:(0,n.zG)(i,o.EQ((()=>t.newEvents),(e=>[...t.newEvents,e])))})})),Er((()=>mr((e=>{return{...e,persistentState:{...e.persistentState,unprocessedPVC:(0,Lr.X)((t=new Date,r=e.unprocessedPageviewComplete,{name:"PageviewComplete",time:t,session_id:r.sessionId,view_id:r.viewId,properties:{...r.customProperties,aggregations:(0,n.zG)(r.aggregations,(0,g.rO)({SegmentEntry:Mr,SegmentExit:Mr,CohortEntry:Mr,CohortExit:Mr}))}}))}};var t,r})))),gr((e=>{let{flushedPvc:t,processingResult:r}=e;const i=(0,n.zG)(t,o.UI(Rr.ofOutputEvent));return(0,n.zG)((0,Ge.gz)(o.G5)(i,r),o.UI(Rr.sequenceNonEmptyArray),o.wp((()=>i)),o.wp((()=>r)))}))),gn=2,hn=e=>t=>{const r=t.migrationVersion??(t.stateIsCompact?1:0);return(0,n.zG)([yn,bn],Ft.md(r),Ft.EQ((()=>t),(0,n.ls)(Ft.OV(e),Ft.u4(t,((e,t)=>t(e))),(0,g.rO)({migrationVersion:()=>gn}))))},yn=e=>(0,g.rO)({externalStateMap:o.UI(Te.jt(((t,r)=>(0,n.zG)(Te.P5(t,e.locallyLiftedQueries),o.wp((()=>Te.P5(t,e.cloudLiftedQueries))),o.NG((e=>e.compact(r))))))),internalStateMap:Te.Su(((t,r)=>{if(null==(null==r?void 0:r.state))return r;const n=e.locallyLiftedQueries[t]||e.cloudLiftedQueries[t];return{...r,state:n.compact(r.state)}}))}),bn=e=>{const t=new Set(e.queriesByEvent.PageviewEngagement??[]),r=new Set(e.queriesByEvent.PageviewComplete??[]);return(0,g.rO)({internalStateMap:Te.z7((0,qe.ff)((e=>t.has(e)&&r.has(e))))})},Sn=(e,t)=>Te.xb(t)?e:(0,n.zG)(e,Te.z7((e=>!(e in t))));var In=s,wn=u;var Gn=function(e){return function(t){return[In(t),e(wn(t))]}},kn=r(978);const zn=()=>e=>((0,n.zG)(e,a.UI((e=>e()))),a.a9({newResults:_.of(Ft.cS),pendingEvents:Ft.cS})),xn=()=>()=>Me.of((()=>({}))),En=e=>[e,ft.of(e)],Un=s,An=u,Pn=e=>t=>(0,n.zG)(An(t),(t=>()=>new Promise((r=>{const n=t();n.then(o.G).then(r);const i=(0,v.HJ)((()=>r(o.YP)),e);n.then(i)})))),Dn="RefEventual",On=a.UI(En),Cn=e=>t=>a.vP((0,n.zG)(t,a.UI(Un),a.UI(e)),(0,n.zG)(t,a.UI(An),a.UI(ft.UI(e)))),Tn=e=>t=>a.vP((0,n.zG)(a.vP((0,n.zG)(e,a.UI(Un)),(0,n.zG)(t,a.UI(Un))),a.UI((e=>{let[t,r]=e;return r(t)}))),(0,n.zG)(a.vP((0,n.zG)(e,a.UI(An)),(0,n.zG)(t,a.UI(An))),a.UI((e=>{let[t,r]=e;return ft.ap(t)(r)})))),qn=e=>t=>(0,n.zG)(t.current,Pn(e),ft.UI(o.fS((()=>(e=>Un(e.current))(t))))),Mn=a.UI(Un),Bn=a.UI(An),Rn={URI:Dn,map:(e,t)=>Cn(t)(e)},Ln={URI:Dn,map:Rn.map,ap:(e,t)=>Tn(t)(e)},jn=e=>i.dQ((t=>{let{previousState:r}=t;const[i,c]=(0,n.zG)(e.newEvents,a.En(2,Ft.uZ()),Gn(zn(e.permutiveApi,e.permutiveUrls,(l=e.customQueries.runtime,(0,n.zG)(Object.entries(l.queriesByEvent),Ft.hX((e=>{let[,t]=e;return(0,n.zG)(t,Ft.G((e=>e in l.cloudLiftedQueries)))})),Ft.UI(s))))));var l;const p=a.vP({lookalikeModels:e.lookalikeModels,sessionId:e.sessionId,thirdPartyData:(0,n.zG)(e.thirdPartyData,a.UI(o.UI(Gn(Te.UI((e=>{const t={};return e.forEach((e=>t[e]=!0)),t})))))),viewId:e.viewId}),m=(0,n.zG)(a.vP({cloudLiftedState:(0,n.zG)(c,a.UI((e=>e.newResults))),environment:p,externalStateDelta:e.externalStateDelta,newEvents:(0,n.zG)(i,(0,kn.I)(e.metrics,"query_language_began_processing_pageview"))}),a.UI((0,g.rO)({environment:e=>_.of(e)})),a.UI((0,Ge.Yt)(_.G5))),f=Br.init(r);const d=xn(e.permutiveApi,e.permutiveUrls),v=(0,n.zG)(r?ft.of({processedState:f,stateMigratedThisInitialisation:!1}):(e.metrics.track({name:"sdk_query_state_migrated_workerisation_count_total",labels:{},value:1}),(0,n.zG)(e.migratedStateMaps,ft.UI((e=>{let{internal:t,external:r}=e;return{stateMigratedThisInitialisation:!0,processedState:{externalStateMap:r,internalStateMap:(0,n.zG)(t,o.fS((()=>({}))))}}})))),ft.Hr("environment",(()=>p.current)),ft.ak("process",(t=>{let{environment:r,processedState:i}=t;return(0,n.zG)((a={downloadCloudLiftQueries:d,environment:r,initialState:i,pastEvents:e.priorEvents,queries:e.customQueries},(0,n.zG)(ft.Do,ft.Hr("persistentState",(()=>(0,n.zG)(a.initialState,(0,g.rO)({internalStateMap:Te.z7(((e,t)=>t.checksum===a.queries.metadata[e]))}),hn(a.queries.runtime)))),ft.Hr("invalidatedLocalQueries",(e=>{let{persistentState:{internalStateMap:t}}=e;return Sn(a.queries.runtime.locallyLiftedQueries,t)})),ft.Hr("invalidatedCloudLiftQueries",(e=>{let{persistentState:{internalStateMap:t}}=e;return Sn(a.queries.runtime.cloudLiftedQueries,t)})),ft.Hr("hasInvalidatedQueries",(e=>{let{invalidatedCloudLiftQueries:t,invalidatedLocalQueries:r}=e;return!(Te.xb(t)&&Te.xb(r))})),ft.ak("eventsForReplay",(e=>{let{hasInvalidatedQueries:t}=e;return t?a.pastEvents:ft.of(Ft.bM())})),ft.ak("cloudLiftQueriesForReplay",(0,n.ls)(o.DT((e=>e.eventsForReplay.length>0)),o.UI((e=>Object.keys(e.invalidatedCloudLiftQueries))),o.hX(Ft.Od),o.UI((0,n.ls)(a.downloadCloudLiftQueries,Me.OV(a.queries.runtime),ft.UI(F.fS((()=>({})))))),o.fS((()=>ft.of({}))))),ft.Hr("queriesForReplay",(e=>{let{cloudLiftQueriesForReplay:t,invalidatedLocalQueries:r}=e;return[...Object.keys(r),...Object.keys(t)]})),ft.UI((e=>{let{cloudLiftQueriesForReplay:t,eventsForReplay:r,invalidatedCloudLiftQueries:i,invalidatedLocalQueries:s,queriesForReplay:u,persistentState:c}=e;return{bootstrapped:!1,cloudLiftQueriesForReplay:t,effects:{getCurrentTime:()=>new Date,getCurrentSession:()=>a.environment.sessionId,getCurrentView:()=>a.environment.viewId,getLookalikeModels:()=>({}),setSegmentActivation:(e,t,r)=>{throw new Error(`setSegmentActivation() called for segment ${r} without being overridden first.`)},...mn(c.internalStateMap)},eventsForReplay:r,invalidatedQueries:[...Object.keys(i),...Object.keys(s)],lal:o.YP,locallyLiftedQueriesByEvent:(0,n.zG)(a.queries.runtime.queriesByEvent,Te.DZ(o.KQ(Ft.hX((e=>e in a.queries.runtime.locallyLiftedQueries))))),lookalikeTransitionSegmentNumbers:(0,n.zG)(a.queries.runtime.queriesByEvent["!UpdateLookalikeModels"]||Ft.cS,Ft.UI(parseInt),(e=>new Set(e))),pageviewProperties:{},numEventsForReplay:r.length,queries:a.queries,queriesForReplay:u,persistentState:c,tpdEventsToProcess:Ft.cS,tpdHashInEffectsObject:o.YP,tpdQueries:o.YP,tpdReady:!1,unprocessedPageviewComplete:Cr({sessionId:a.environment.sessionId,viewId:a.environment.viewId})}})))),e.trace.traceTask("query_language_initialisation_duration"),ft.UI((0,g.bw)((t=>{var r;e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"query_language_ready",time_origin:"sdk_init"},performance.now()),e.metrics.trackCounter({name:"sdk_queries_to_replay_count",value:(r=t,0===r.numEventsForReplay?0:r.queriesForReplay.length),labels:{}})}))),ft.UI((t=>{let r=t;const i=(0,n.zG)(e.validationService,o.OV({downloadCloudLiftQueries:d,externalState:t.persistentState.externalStateMap}));return t=>{const[a,s]=(0,n.zG)(t,jr(e.trace))(r);return(0,n.zG)(i,o.OV((0,n.bc)(t,s))),r=s,[a,s.persistentState]}})));var a})),a.fF),h=(0,n.zG)(v,a.UI(o.UI((e=>e.process)))),y=(0,n.zG)(v,a.UI(o.EQ((()=>!1),(e=>e.stateMigratedThisInitialisation))));let b=Ft.bM();const S=(0,n.zG)(a.vP({processInput:h,inputIO:(0,n.zG)(m,a.UI(o.G))}),a.UI((0,Ge.Yt)(o.G5)),a.UI(o.UI((e=>{let{processInput:t,inputIO:r}=e;const i=r(),[a,s]=(0,n.zG)(i,(0,g.rO)({newEvents:Ft.UI(u),cloudLiftedState:Ft.UI((e=>e.state))}),(e=>t({...e}))),c=(0,n.zG)(a,o.EQ((()=>({errors:[],events:i.newEvents,internalStateDiff:o.YP})),(e=>{let[t,r,n]=e;return{errors:t,events:i.newEvents.concat(n.map((e=>[(0,g.k$)(),e]))),internalStateDiff:o.G(r)}})));return b=(0,n.zG)(b,Ft.R3(c)),{consumeDeltas:()=>{const e=b;return b=Ft.cS,e},modelState:s}})))),I=(0,n.zG)(S,a.UI(o.UI((e=>e.modelState)))),w=(0,n.zG)(S,a.UI(o.UI((e=>e.consumeDeltas))),a.UI(o.fS((()=>_.of(Ft.bM()))))),G=(0,n.zG)(a.vP(I,c),a.Rp(((e,t)=>{let[r,i]=t;const a=(0,n.zG)(e,o.UI((e=>{let[,t]=e;return(0,n.zG)(r,o.EQ((()=>t),(e=>(0,n.zG)(t,Ft.hX((t=>!t(e,i.pendingEvents)))))))})),o.fS((()=>Ft.bM())));if(o.pC(r)&&Ft.xb(i.pendingEvents))return[En(r.value),a];const s=(0,g.b2)(),u=(0,n.zG)(r,o.fS((()=>f)));var c;return[(0,n.zG)((()=>s.promise),(c=u,e=>[c,e])),(0,n.zG)(a,Ft.R3(((e,t)=>{const r=Ft.xb(t)||(0,n.zG)(i.pendingEvents,Ft.yW((e=>!t.includes(e))));return r&&s.resolve(e),r})))]})),a.UI(s)),k=(0,n.zG)(w,a.En(3,Ft.uZ()),(t=>{let[r,i,s]=t;return{errors:(0,n.zG)(r,a.UI(_.UI(Ft.tS((e=>e.errors))))),events:(0,n.zG)(i,a.UI(_.UI(Ft.tS((e=>e.events)))),(0,kn.F)(e.metrics,"query_language_processed_pageview")),internalStateDiff:(0,n.zG)(s,a.UI(_.UI((0,n.ls)(Ft.DZ((e=>e.internalStateDiff)),o.DT(Ft.Od),o.UI((e=>e.reduce(((e,t)=>({...e,...t})))))))))}})),z=(0,n.zG)(G,Cn((e=>e.internalStateMap))),x=Mn(z);return{state:Mn(G),value:{...k,stateMigratedThisInitialisation:y,internalStateMap:x,processing:(0,n.zG)(a.vP(S,c),a.UI((e=>{let[t,r]=e;return o.Wi(t)||Ft.Od(r.pendingEvents)}))),segments:(0,n.zG)(z,Cn(Fn)),tpdUsage:(0,n.zG)(a.vP(e.thirdPartyData,x),a.UI((e=>{let[t,r]=e;return(0,n.zG)(t,o.UI((()=>on(r))))}))),unprocessedPageviewComplete:(0,n.zG)(I,a.UI(o.NG((e=>e.unprocessedPVC))),a.UI(o.UI(Lr.k)))}}})),Fn=e=>(0,n.zG)(an(e),(e=>(0,n.zG)(e,Ft.uK((e=>e<1e7)),(t=>{let{left:r,right:n}=t;return{all:e,custom:n,standard:r}}))));var Qn=r(125);const Yn=e=>En(F.F2(e)),Nn="RefEventualEither",$n=e=>a.a9(Yn(e)),Hn=Re.UI(Rn,F.dO),Zn=Ge.ap(Ln,F.G5),Vn=e=>Cn(F.F2)(e),Kn=e=>Cn(F.fS(e)),Xn={URI:Nn,map:(e,t)=>Hn(t)(e)},Wn={URI:Nn,map:Xn.map,ap:(e,t)=>Zn(t)(e)},Jn=Ge.gM(Wn),ei=e=>Mn(e.all),ti=(e,t)=>r=>({all:(0,n.zG)(r,Hn(e)),byAdServer:(0,g.mQ)((0,n.ls)(t,o.UI((e=>(0,n.zG)(r,Hn(e))))))}),ri=e=>(0,n.zG)(e,Cn(F.F2),ti(n.yR,(e=>o.G(e.filterCohorts)))),ni=e=>({all:(0,n.zG)(e.all,Kn((()=>Ft.bM()))),byAdServer:(0,g.mQ)((0,n.ls)(e.byAdServer,o.UI(Kn((()=>Ft.bM())))))}),ii=e=>(0,n.zG)(e,ni,ei),ai={empty:{all:$n(Ft.bM()),byAdServer:(0,g.mQ)((e=>o.YP))},concat:(e,t)=>({all:(0,n.zG)((0,Ge.gz)(Wn)(e.all,t.all),Hn(Ft.xH)),byAdServer:(0,g.mQ)((r=>(0,n.zG)(Ft.oA([e.byAdServer(r),t.byAdServer(r)]),pr.c2,o.UI((e=>e.reduce(((e,t)=>(0,n.zG)((0,Ge.gz)(Wn)(e,t),Hn(Ft.xH)))))))))})},oi=new Set(["AdRequest","PageviewEngagement","PrebidAuctions","Reaction","SegmentEntry","SegmentExit","SlotRendered","ThirdPartySegments","VideoEngagement"]),si=function(){return(0,n.bc)(...arguments)};var ui=r(794);const ci=e=>{let{queries:t,...r}=e;const[i,p]=a.Ue("pending");let m=o.G([]);const f=e=>{const t=Math.ceil(Math.random()*e.length);return(0,n.zG)(e,j.ke(t))};(0,n.zG)((()=>new Promise((e=>setTimeout(e,r.processingDelayMs)))),ft.UI((()=>performance.now())),ft.UI((e=>(0,n.zG)(m,o.UI(f),o.hX(j.Od),o.UI(L.ur(ui.n_({events:Ft.jG(),externalStateDeltas:Ft.jG(),lookalikeModels:ui.Z$(),modelState:ui.Z$(),thirdPartyData:ui.Z$()}))),(0,g.bw)((()=>{m=o.YP})),o.Hr("startTime",(()=>e))))),ft.UI((0,g.bw)(o.EQ((()=>p("skipped")),(()=>p("in_progress"))))),Bt("historicalEvents",(()=>gt(r.historicalEvents))),Bt("cloudLiftQueries",(()=>(0,n.zG)(Object.keys(t.runtime.cloudLiftedQueries),Ft.aD((()=>ft.of(Te.cS)),(e=>(0,n.zG)(r.downloadCloudLiftQueries(e),Me.OV(t.runtime),ft.UI(F.fS((()=>Te.cS)))))),gt))),Bt("expectedSegmentMemberships",Tt((e=>fi({events:{historical:e.historicalEvents,new:e.events},externalState:{historical:r.externalState,deltas:e.externalStateDeltas},lookalikeModels:e.lookalikeModels,queries:{cloudLiftQueries:e.cloudLiftQueries,metadata:t.metadata,runtime:t.runtime},thirdPartyData:e.thirdPartyData})))),Mt("report",(e=>{let{expectedSegmentMemberships:r,modelState:i}=e;return function(e){const t=new Set(e.expectedSegmentMemberships);return(0,n.zG)(function(e){const t=function(e){const t=(0,n.zG)(Object.keys(e.runtime.queriesByEvent),Ft.Su(((e,t)=>[t,2**e]))),r={},i=Object.fromEntries(t);for(const t in e.runtime.queriesByEvent){const n=e.runtime.queriesByEvent[t];for(const e of n)r[e]?r[e]+=i[t]:r[e]=i[t]}const a={};for(const e in r){const t=r[e];a[t]?a[t].push(e):a[t]=[e]}return(0,n.zG)(Object.entries(a),Ft.UI((0,n.ls)(c((e=>Number(e))),c((e=>(0,n.zG)(t,Ft.DZ((0,n.ls)(o.DT((t=>{let[,r]=t;return(e&r)>0})),o.UI(s)))))))))}(e),r=new Set(Object.keys(e.runtime.cloudLiftedQueries));if(0===r.size)return(0,n.zG)(t,Ft.UI(c((e=>({triggers:e,cloudLifted:!1})))));return(0,n.zG)(t,Ft.tS((e=>{let[t,i]=e;const{left:a,right:o}=(0,n.zG)(i,Ft.uK((e=>r.has(e))));return[[{triggers:t,cloudLifted:!1},a],[{triggers:t,cloudLifted:!0},o]]})))}(e.queries),Ft.UI(l((r=>({actualSegments:(0,n.zG)(r,Ft.hX((t=>{var r,n;return Boolean(null===(r=e.modelState.persistentState.internalStateMap[t])||void 0===r||null===(n=r.result)||void 0===n?void 0:n.result)}))),expectedSegments:(0,n.zG)(r,Ft.hX((e=>t.has(e))))})))))}({expectedSegmentMemberships:r,modelState:i,queries:t})})),Ot((e=>{let{startTime:t}=e;return()=>r.metrics.track({name:"sdk_segmentation_validation_duration_seconds",value:(performance.now()-t)/1e3,labels:{}})})),St((e=>e.report)),St(pi(r.metrics)),St((()=>p("finished"))))();return[i,e=>{let[t,r]=e;(0,n.zG)((0,Ge.gz)(o.g1)(m,t.environment.lookalikeModels,(0,n.zG)(t.environment.thirdPartyData,o.UI(u))),o.UI((e=>{let[n,i,a]=e;n.push({externalStateDeltas:Ft.Yo(t.externalStateDelta),lookalikeModels:i,events:t.newEvents,modelState:r,thirdPartyData:a})})))}]};const li=new Set(["SegmentEntry","SegmentExit","PageviewEngagement","PageviewComplete","Pageview","LinkClick","SlotViewable","SlotRendered","UpdateLookalikeModels","UpdateSecondPartyData","UpdateThirdPartyData"]),pi=e=>t=>{for(const[r,{expectedSegments:i,actualSegments:a}]of t){if(0===i.length&&0===a.length)continue;const{correct:t,incorrect:o,missing:s}=mi(i,a),u=(0,n.zG)(r.triggers,Ft.UI((e=>e.startsWith("!")?e.slice(1):e)),Ft.UI((e=>li.has(e)?e:"misc")),(e=>[...new Set(e)]),Ft.UI((e=>(0,n.bc)(`trigger_${e}`,!0))),Ft.R3((0,n.bc)("is_cloud_lifted",r.cloudLifted)),(e=>Object.fromEntries(e))),c=(t,r)=>r.length>0&&e.trackCounter({name:t,value:r.length,labels:u});c("sdk_segmentation_validation_correct_count_total",t),c("sdk_segmentation_validation_incorrect_count_total",o),c("sdk_segmentation_validation_missing_count_total",s)}},mi=(e,t)=>{if(0===t.length)return{correct:[],incorrect:[],missing:e};if(0===e.length)return{correct:[],incorrect:t,missing:[]};const r=new Set(t),i=new Set(e),{right:a,left:o}=(0,n.zG)(t,Ft.uK((e=>i.has(e))));return{correct:a,incorrect:o,missing:(0,n.zG)(e,Ft.hX((e=>!r.has(e))))}};const fi=e=>vi(50,(function*(){const t={...e.queries.runtime.locallyLiftedQueries,...e.queries.cloudLiftQueries},r=(0,n.zG)(e.queries.runtime.queriesByEvent,Te.DZ((0,n.ls)(o.ij,o.UI(Ft.UI((e=>(0,n.bc)(e,t[e]))))))),i=(0,n.zG)(e.externalState.historical,o.fS((()=>({}))),Te.DZ(o.Dj(J)),(t=>(0,n.zG)(e.externalState.deltas,Ft.UI(Zr(e.queries)),Ft.u4(t,Vr))),Te.UI(W)),a={},s=new _i(e.lookalikeModels,e.thirdPartyData),u=e=>(s.processEvent(e),(0,n.zG)(r[e.name]??[],Ft.DZ((t=>{let[r,i]=t;return(0,n.zG)(o.ij(i.lift(e,s.effects)),o.fX((e=>a[r]?(0,n.zG)(e,di(i,a[r])):F.F2(e))),o.UI((e=>(a[r]=e,r))))})))),c=e=>(0,n.zG)((e=>(0,n.zG)(a[e]??null,(r=>e in i?(0,n.zG)(i[e],di(t[e],r),F.fS((()=>r))):r),(r=>t[e].interpret(r,s.effects)),(e=>e.result)))(e),o.DT((t=>t!==s.getSegmentResult(e))),o.UI((t=>({name:t?"SegmentEntry":"SegmentExit",properties:{segment_number:Number(e)},time:s.effects.getCurrentTime(),session_id:s.effects.getCurrentSession(),view_id:s.effects.getCurrentView()})))),l=e=>{if(0==e.length)return;const t=(0,n.zG)(e,Ft.tS((0,n.ls)(c,o.UI(u),o.fS((()=>Ft.bM())))));l(t)};for(const t of e.events.historical)yield,u(t);(0,n.zG)(Object.keys(t),l);for(const t of e.events.new)switch(yield,t.name){case"SegmentEntry":case"SegmentExit":case"PageviewComplete":break;default:u(t)}return(0,n.zG)(Object.keys(t),l),s.effects.getSegmentsArray()["1p"]})),di=(e,t)=>r=>F.Y3((()=>e.append(t,r)),(e=>`Failed to append lifted state: ${e}`));class _i{segments;segmentsArray=void 0;lastEvent=o.YP;effects;constructor(e,t){const r=(0,n.zG)(t,Te.UI(Te.hX((e=>!0===e))));this.segments={...r,"1p":{}};const i=(0,n.zG)(this.segments,Te.UI(Object.keys));this.effects={getLookalikeModels:()=>e,getSegments:()=>this.segments,getSegmentsArray:()=>(this.segmentsArray||(this.segmentsArray={...i,"1p":Object.keys(this.segments["1p"])}),this.segmentsArray),setSegmentActivation:()=>{},getCurrentTime:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>new Date),(e=>e.time))),getCurrentSession:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>""),(e=>e.session_id))),getCurrentView:()=>(0,n.zG)(this.lastEvent,o.EQ((()=>""),(e=>e.view_id)))}}get1pSegments(){return this.effects.getSegmentsArray()["1p"]}getSegmentResult(e){return this.segments["1p"][e]??!1}processEvent(e){if("SegmentEntry"===e.name){const t=e.properties.segment_number;t&&this.processSegmentEntry([t])}else if("SegmentExit"===e.name){const t=e.properties.segment_number;t&&this.processSegmentExit([t])}else if("PageviewComplete"===e.name){const t=e.properties.aggregations;(null==t?void 0:t.SegmentEntry)&&this.processSegmentEntry(t.SegmentEntry),(null==t?void 0:t.SegmentExit)&&this.processSegmentExit(t.SegmentExit)}this.lastEvent=o.G(e)}processSegmentEntry(e){for(const t of e)t in this.segments["1p"]||(this.segments["1p"][t]=!0,this.segmentsArray=void 0)}processSegmentExit(e){for(const t of e)t in this.segments["1p"]&&(delete this.segments["1p"][t],this.segmentsArray=void 0)}}const vi=(e,t)=>async()=>{let r=performance.now();const n=t();for(;;){performance.now()-r>e&&(await new Promise((e=>setTimeout(e))),r=performance.now());const t=n.next();if(t.done)return t.value}},gi=e=>i.dQ((e=>{let{previousState:t}=e;return{value:o.YP,state:a.a9(t)}})),hi=e=>i.dQ((t=>{let{previousState:r}=t;const i=(0,n.zG)(r,o.DT(g.El),o.xH,o.hX(M.HD)),s=(0,n.zG)(i,o.EQ((()=>!1),(t=>t===e.sessionId)));if(!e.metrics.isEnabled()||Math.random()>.1||s)return{value:o.YP,state:a.a9(r)};const[u,c]=a.Ue(a.a9("pending"));return{value:o.G((t=>{let{downloadCloudLiftQueries:r,externalState:n}=t;const[i,a]=ci({downloadCloudLiftQueries:r,externalState:n,historicalEvents:e.priorEvents,metrics:e.metrics,processingDelayMs:6e4,queries:e.customQueries});return c(i),a})),state:(0,n.zG)(a.xH(u),a.UI((0,n.ls)(o.DT((e=>"in_progress"===e||"finished"===e)),o.UI((()=>e.sessionId)),o.wp((()=>i)))))}})),yi=e=>(0,n.zG)(i.K4((t=>{let{stopped:r}=t;const[i,s]=a.Ue(a.a9(_.of(o.YP)));let u;const c=new Promise((e=>{u=e}));return{priorEvents:()=>c.then((e=>e())),externalStateDelta:a.xH(i),newEvents:(0,n.zG)(a.vP(e.newEvents,r),a.UI((e=>{let[t,r]=e;return r?()=>[]:t}))),setCachedPriorEvents:u,setExternalStateDelta:s}})),i.ak("segmentationValidation",(t=>{let{priorEvents:r}=t;return(0,n.zG)(e.eventsCache,F.EQ((()=>gi),(()=>hi)),(t=>t({...e,sessionId:e.sessionId.current,priorEvents:r})))})),i.ak("segmentationService",(t=>{let{newEvents:r,priorEvents:o,externalStateDelta:s,segmentationValidation:u}=t;return(0,n.zG)(jn({...e,externalStateDelta:s,newEvents:r,priorEvents:o,validationService:u}),i.bw((t=>(0,n.zG)(t.errors,a.UI((t=>(0,n.zG)(t(),Ft.UI((t=>e.reportError(`Query Language: ${t}`,{userId:e.groupId}))))))))))})),i.UI((t=>(0,n.zG)(t.segmentationService.events,a.En(4,Ft.uZ()),(r=>{let[i,s,c,l]=r;return{...t,newEvents:i,realtime:(0,n.zG)(s,a.Rp(!1,((e,t)=>{const r=t();return e||r.some((e=>{let[,t]=e;return"Pageview"===t.name}))})),(e=>a.vP(e,t.segmentationService.processing)),a.UI((e=>{let[t,r]=e;return t&&!r})),a.u4(((e,t)=>e||t))),currentPageviewSegments:(p={processedEvents:(0,n.zG)(c,a.UI(_.UI(Ft.UI(u)))),segments:t.segmentationService.segments,viewId:e.viewId},(0,n.zG)(a.vP(p.processedEvents,p.viewId,p.segments),a.Rp({pageviewProcessed:!1,resolvePageviewSegments:e=>{},segments:En({all:[],custom:[],standard:[]}),viewId:""},((e,t)=>{let[r,i,a]=t;const s=r();return(0,n.zG)(e,o.DT((e=>e.viewId===i)),o.EQ((()=>{if((0,n.zG)(s,Ft.G((e=>"Pageview"===e.name&&e.view_id===i))))return{pageviewProcessed:!0,resolvePageviewSegments:()=>{},segments:a,viewId:i};{const e=(0,g.b2)();return{pageviewProcessed:!1,resolvePageviewSegments:t=>e.resolve(An(t)()),segments:si(Un(a),(()=>e.promise)),viewId:i}}}),(e=>e.pageviewProcessed?{...e,segments:a}:(0,n.zG)(s,Ft.G((e=>"Pageview"===e.name&&e.view_id===i)))?(e.resolvePageviewSegments(a),{pageviewProcessed:!0,resolvePageviewSegments:()=>{},segments:a,viewId:i}):{...e,segments:a})))})),a.UI((e=>e.segments)))),lastProcessedEvents:(0,n.zG)(l,a.UI(_.UI(Ft.UI(u))))};var p})))),i.Hr("cohorts",(t=>{let{segmentationService:r}=t;return(0,n.zG)(a.fF(e.nonQlCohorts),a.UI(o.UI((e=>(0,n.zG)(r.segments,Cn((e=>e.all)),Cn(Ft.UI(String)),ri,(t=>({query_language:t,...e})))))))})),i.ak("stateSync",(t=>{let{segmentationService:r,lastProcessedEvents:n}=t;return Yt({eventSourceId:e.eventSourceId,groupId:e.groupId,groupIdIsNewlyGenerated:e.groupIdIsNewlyGenerated,internalStateDiff:r.internalStateDiff,internalStateMap:r.internalStateMap,lastProcessedEvents:n,logger:e.logger,permutiveApi:e.permutiveApi,permutiveUrls:e.permutiveUrls,queryLanguageProcessing:r.processing,reportError:e.reportError,sessionId:e.sessionId,viewId:e.viewId})})),i.bw((e=>{let{stateSync:t,setExternalStateDelta:r}=e;return r(t.externalStateDelta)})),i.ak("segmentTransitions",(t=>{let{segmentationService:r}=t;return(e=>(0,n.zG)(i.vP({currentSegmentsSet:i.K4((()=>(0,n.zG)(e.segments,a.UI(m))))}),i.ak("transitionsSinceInit",(e=>{let{currentSegmentsSet:t}=e;return i.of(p(t))})),i.UI((e=>{let{currentSegmentsSet:t,...r}=e;return r}))))({segments:(0,n.zG)(Mn(r.segments),a.UI((e=>e.all))),viewId:e.viewId})})),i.Hr("cohortsRef",(e=>{let{cohorts:t}=e;return(0,n.zG)(t,a.VS(o.EQ((()=>a.a9(Ft.bM())),(0,n.ls)((e=>Object.values(e)),Ft.UI((0,n.ls)(ni,(e=>e.all),Mn,a.D8(Ft.Eh(M.Eq)))),Ft.vP(a.g1),a.UI(Ft.xH)))))})),i.Hr("createTrackRequest",(t=>{let{cohortsRef:r,segmentationService:i}=t;return(0,n.zG)(a.vP({cohorts:(0,n.zG)(r,a.UI(o.G)),qlSegments:(0,n.zG)(Mn(i.segments),a.UI(o.G)),webClient:e.webClient}),a.UI((0,Ge.Yt)(o.G5)),a.UI(o.UI((t=>{let{cohorts:r,qlSegments:n,webClient:i}=t;return t=>({...t,segments:n.all,user_id:e.groupId,cohorts:r,properties:{...t.properties,client:{...i,...t.properties.client??{}}}})}))))})),i.Hr("eventsToPublishOnPageUnload",(t=>e.trackPageviewComplete?(0,n.zG)(t.segmentationService.unprocessedPageviewComplete,a.UI(Ft.pc(o.UI((e=>(0,n.bc)(`PageviewComplete-${e.view_id}`,e))))),(e=>a.vP(t.createTrackRequest,e)),a.UI((e=>{let[t,r]=e;return(0,n.zG)(t,o.EQ((()=>Ft.cS),(e=>(0,n.zG)(r,Ft.UI(l(e))))))}))):a.a9(Ft.cS))),i.ak("eventCache",(t=>{let{newEvents:r,setCachedPriorEvents:o}=t;return(0,n.zG)(e.eventsCache,F.EQ((e=>(o(e),i.of({newEvents:r}))),(e=>(0,n.zG)((e=>i.K4((()=>({newEvents:(0,n.zG)(e.newEvents,a.UI(_.UI((0,g.bw)(Ft.UI((t=>{let[,r]=t;oi.has(r.name)||e.eventsCache.add(r,{persistOnDisk:!0})})))))),priorEvents:()=>e.eventsCache.all()}))))({eventsCache:e,newEvents:r}),i.UI((e=>{let{newEvents:t,priorEvents:r}=e;return o(r),{newEvents:t}}))))))})),i.UI((e=>({...e,newEvents:e.eventCache.newEvents}))),i.Hr("eventsToPublish",(t=>{let{cohorts:r,newEvents:i,segmentationService:s}=t;return(0,n.zG)(a.vP(i,e.webClient,s.segments,(0,n.zG)(r,a.UI(o.UI((0,n.ls)((e=>Object.values(e)),Ft.UI(ni),Ft.UI((e=>e.all)))))),(0,n.zG)(e.viewId,a.Rp(new Set,((e,t)=>new Set([...e,t]))))),a.UI((t=>{let[r,i,a,s,u]=t;return(0,n.zG)(o.Do,o.Qt("webClient",i),o.Qt("cohorts",s),o.ak("events",(()=>(0,n.zG)(r(),Ft.hX((e=>{let[,t]=e;return"PageviewComplete"!==t.name||u.has(t.view_id)})),o.DT(Ft.Od)))),_t,Bt("segments",(()=>(0,n.zG)(An(a),gt))),qt((e=>(0,n.zG)(e.cohorts,ft.uU(qn(1e3)),ft.UI(Ft.xH),ft.UI((t=>({...e,cohorts:t})))))),St((t=>{let{cohorts:r,events:i,segments:a,webClient:o}=t;return(0,n.zG)(i,Ft.UI(l((t=>({...t,segments:a.all,user_id:e.groupId,cohorts:r,properties:{...t.properties,client:{...o,...t.properties.client??{}}}})))))})),ft.UI(o.fS((()=>Ft.bM()))))})),(e=>{const[t,r]=a.gS(Ft.uZ());return(0,n.zG)(e,a.UI((e=>e().then(r)))),t}))})));var bi=r(905);function Si(e){return t=>(0,n.zG)(a.oQ(e),a.UI((0,g.rO)({backoffAfterErrorMs:e=>e??0,backoffAfterSuccessMs:e=>e??0})),(e=>i.dQ((r=>{let{previousState:i}=r;const[s,u]=a.Ue(function(e){if("object"!=typeof e||null===e)return{lastSuccess:0,lastError:0};return e}(i)),c=(0,n.zG)(a.vP(s,e),a.UI((e=>{let[t,r]=e;return Math.max(t.lastError+r.backoffAfterErrorMs,t.lastSuccess+r.backoffAfterSuccessMs)})));return{state:s,value:(0,n.ls)(o.DT((()=>Date.now()>=c.current)),o.UI(t),o.UI((0,g.bw)((e=>e.then((()=>u({...s.current,lastSuccess:Date.now()})),(()=>u({...s.current,lastError:Date.now()})))))))}}))))}const Ii=function(e,t){return i.of(o.YP)};var wi=r(118);const Gi=function(e,t){return(0,n.zG)(ki(e),Si({backoffAfterErrorMs:6e5}),i.VS((e=>wi.m((0,n.zG)(t,a.UI((0,g.rO)({tpdUsage:o.UI((0,n.ls)(Te.UI(Te.z7((e=>["eyeota","comscore","eyeota_bombora","eyeota_dunbradstreet","eyeota_experian","eyeota_roymorgan","eyeota_stirista","liveramp_IPSOS","liveramp_Acxiom","liveramp_Ibotta","liveramp_Compass","liveramp_180byTWO","liveramp_MeritDirect","liveramp_PlaceIQ","liveramp_NCS","liveramp_Bombora","liveramp_Webbula","liveramp_IRI","liveramp_123Push","liveramp_Fluent","liveramp_AffinityAnswers","liveramp_AmeribaseDigital","liveramp_Clickagy","liveramp_FreckleIoT","liveramp_Lifesight","liveramp_StartApp","liveramp_AudienceElements","liveramp_Illion","liveramp_Comscore","liveramp_Alliant","liveramp_Factual","liveramp_EngageDMi","liveramp_33across","liveramp_Epsilon","liveramp_IXIDigital","liveramp_AnalyticsIQ","liveramp_Zeotap","liveramp_Liveramp_France","liveramp_DLG","liveramp_CoreLogic","liveramp_Kantar","liveramp_OnAudience","liveramp_Mastercard","liveramp_RoyMorgan","liveramp_Yougov","liveramp_CACI","liveramp_DunandBradstreet","liveramp_StatSocial","liveramp_Experian","liveramp_ShareThis","liveramp_Stirista","liveramp_FluentModel","liveramp_killi","liveramp_Bombora_discovery"].includes(e)))),Te.hX((0,qe.ff)(Te.xb))))})),a.UI((t=>{let{tpdUsage:r,userId:i}=t;return{validityKey:()=>i,freshnessKey:(0,n.ls)((()=>r),o.EQ((()=>0),(0,n.ls)(JSON.stringify,g.vp))),refresh:(0,n.zG)(r,o.hX((e=>Object.keys(e).length>0)),o.UI((t=>()=>Me.Y3((()=>(0,n.zG)(e({user_id:i,time:new Date,tpd_segments:t}),o.fS((()=>Promise.reject("Blocked by backoff."))))),(e=>`Failed to report TPD usage. Got ${e}`)))))}})))))),i.UI(n.Q1))};const ki=e=>t=>{const{config:r,metrics:n,permutiveApi:i,permutiveUrls:a}=e,s=n.startTimer("sdk_http_tpd_usage_seconds",{});return i.req({url:a.getEndpointUrl("/tpd/usage",o.G(r.apiVersion)),method:"POST",payload:t,contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_tpd_usage_seconds",s),e)))};var zi=function(e){return function(t){return function(r){return e(t(r))}}},xi=n.a9;Ve.F4,Ve.Xl;function Ei(e){return function(t){return function(){return e.of(t)}}}function Ui(e){return function(t){return function(r){return function(n){return e.map(r(n),t)}}}}function Ai(e){return function(t){return function(r){return function(n){return e.ap(r(n),t(n))}}}}function Pi(e){return function(t){return function(r){return function(n){return e.chain(r(n),(function(e){return t(e)(n)}))}}}}function Di(e){return function(t){return(0,n.ls)(t,e.of)}}ft.PM;var Oi=xi,Ci=(ft.tD,zi(ft.tD),function(e,t){return(0,n.zG)(e,Ti(t))}),Ti=Ui(ft.dO),qi=(ft.Hi,Ei(ft.PM)),Mi=(ft.UA,"ReaderTask"),Bi={URI:Mi,map:Ci},Ri={URI:Mi,of:qi};Ve.F4,Ve.Xl;var Li=xi,ji=Qn.F2(Ri),Fi=(Me.QM,Me.lk,Me.dk,Me.Op,Me.fj,Qn.UI(Bi)),Qi=ji;Ve.F4,Ve.Xl;function Yi(e,t){const r=["amp","gigya","pxid","sailthru"],s=(0,n.zG)(t.identities,a.UI(o.UI(Te.z7((e=>!r.includes(e)))))),u=e=>(0,g.vp)(JSON.stringify(e)),c=e=>[u(e),e];return(0,n.zG)(i.vP({fetchFromNewEndpoint:(0,n.zG)(Ni(e),Si({backoffAfterErrorMs:6e5})),fetchFromLegacyEndpoint:(0,n.zG)($i(e),Si({backoffAfterErrorMs:6e5}))}),i.VS((r=>{let{fetchFromNewEndpoint:u,fetchFromLegacyEndpoint:l}=r;return(0,n.zG)(wi.m((0,n.zG)(a.vP(t.userId,t.sessionId,s),a.UI((t=>{let[r,i,a]=t;return{validityKey:()=>r,freshnessKey:()=>`${Hi(a)},${i}`,refresh:(0,n.zG)(a,o.UI((t=>()=>Te.xb(t)?Me.of({}):Me.Y3((()=>(0,n.zG)((t=>(0,n.zG)(u(t),o.UI((e=>e.catch((()=>(0,n.zG)(l(t.identities),o.fS((()=>e))))))),o.wp((()=>l(t.identities))),o.UI((0,g.bw)((t=>{const r=e.metrics.startTimer("sdk_get_third_party_data_task_duration_seconds",{});t.catch(n.Q1).then((()=>{e.metrics.stopTimer("sdk_get_third_party_data_task_duration_seconds",r)}))})))))({userId:r,identities:t}),o.fS((()=>Promise.reject("Blocked by persistent backoff"))))),(e=>`Error fetching TPD. Got ${e}`)))),o.UI(Fi(c)))}})))),wi.d((e=>o.G((e=>Array.isArray(e)?e:c(e))(e)))),i.UI(a.UI(F.fS((t=>(e.logger.warn("[TPD]",`Failed to retrieve usable value, using zero value. ${t}`),o.G(c({}))))))),i.bw((0,n.ls)(a.UI(o.pC),a.UI((t=>{t&&e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"audience_matching_ready",time_origin:"sdk_init"})})))))})))}const Ni=e=>async t=>{const r=e.metrics.startTimer("sdk_http_audience_matching_seconds",{}),i=await e.permutiveApi.req({url:e.permutiveUrls.getAudienceMatchingEndpointUrl("/id",o.G("v1"),t.userId),payload:{identities:(0,n.zG)(t.identities,Te.Yz,Ft.UI((e=>{let[t,r]=e;return{tag:t,id:r}})))},method:"POST",withCredentials:!1,dataType:"json"});return e.metrics.stopTimer("sdk_http_audience_matching_seconds",r),i.items},$i=e=>async t=>{const r=e.metrics.startTimer("sdk_http_tpd_seconds",{}),n=await e.permutiveApi.req({url:e.permutiveUrls.getEndpointUrl("/tpd",o.G(e.config.apiVersion)),method:"POST",payload:{user_id:t},contentType:"text/plain",dataType:"json",withCredentials:!1});return e.metrics.stopTimer("sdk_http_tpd_seconds",r),n},Hi=(0,n.ls)(JSON.stringify,g.vp);const Zi=(e,t)=>(0,n.zG)(i.vP({data:Yi(e,{identities:t.identities,sessionId:t.sessionId,userId:t.userId}),usageReporting:Gi(e,a.vP({tpdUsage:t.tpdUsage,userId:t.userId}))}),i.ak("analytics",(e=>{let{data:r}=e;return function(e){return i.dQ((t=>{let{previousState:r}=t;const[i,s]=a.gS(Ft.uZ());var u;return{state:(0,n.zG)(a.vP(e.userId,e.providerSegments,e.sessionId,e.viewId),a.D8(((e,t)=>{let[r,n]=e,[i,a]=t;return r===i&&n===a})),a.Rp(null!==(u=r)&&"object"==typeof u?u:{userId:"",providerHashes:{}},((e,t)=>{let[r,i,a,u]=t;const c=(0,n.zG)(i,o.fS((()=>({})))),l=(0,n.zG)(c,Te.UI((0,g.SL)(g.vp))),p=(0,n.zG)(e,o.DT((e=>e.userId===r)),o.UI((e=>e.providerHashes)),o.fS((()=>({}))));return(0,n.zG)(c,Te.z7((e=>l[e]!==(p[e]||0))),(e=>Object.entries(e)),Ft.UI((e=>{let[t,r]=e;return(0,n.bc)((0,g.k$)(),{name:"ThirdPartySegments",properties:{data_provider:t,segments:[...r]},session_id:a,time:new Date,view_id:u})})),s),{userId:r,providerHashes:l}}))),value:i}}))}({providerSegments:(0,n.zG)(r,a.UI(o.UI(wn))),sessionId:t.sessionId,userId:t.userId,viewId:t.viewId})})),i.UI((e=>{let{data:t,analytics:r}=e;return{data:t,analyticsEvents:r}}))),Vi=function(e){const t={include_geo:!0,include_isp:!0,include_ip_hash:!0,include_ip:!1},r=e.trace.startSpan("geoip_data_retrieval");return(0,n.zG)(wi.m((0,n.zG)(e.sessionId,a.UI((r=>({validityKey:()=>(0,g.vp)(JSON.stringify(t)),freshnessKey:()=>r,refresh:o.G((()=>Me.Y3((()=>Ki(e.permutiveApi,e.metrics,e.config,t,e.permutiveUrls)),(e=>`Error fetching geoip. Got ${e}`))))}))))),i.UI(a.UI(F.fS((t=>(e.logger.warn("[geoip]",`Failed to retrieve usable value, using zero value. ${t}`),o.G({})))))),i.bw((0,n.ls)(a.UI(o.pC),a.UI((t=>{t&&(e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"geoip_data_ready",time_origin:"sdk_init"},performance.now()),r.finish())})))))};const Ki=(e,t,r,n,i)=>{const a=[];n.include_geo&&a.push(["include","geo"]),n.include_isp&&a.push(["include","isp"]),n.include_ip&&a.push(["include","ip"]),n.include_ip_hash&&a.push(["include","ip_hash"]);const s=t.startTimer("sdk_http_geoip_seconds",{});return e.req({url:i.getEndpointUrl("/geoip",o.G(r.apiVersion),a),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(t.stopTimer("sdk_http_geoip_seconds",s),e)))},Xi=e=>t=>{const r=n=>{const i={...n};for(let a in n){const o=n[a];t.hasOwnProperty(o)?null!=e&&e.dropUnenriched&&void 0===t[o]?delete i[a]:i[a]=t[o]:null!==o&&"object"==typeof o&&o.constructor===Object&&(i[a]=r(o))}return i};return r};var Wi=r(521);r(802);const Ji=function(e,t,r,n,s){return i.of({cohorts:o.YP,externalData:{[ea]:a.a9(o.YP)}})};const ea="_pssps",ta=(e,t)=>(0,n.zG)(Ji(e.permutiveApi,e.permutiveUrls,e.reportError,e.logger,t),i.UI((e=>{let{cohorts:t,externalData:r}=e;return{ssp:t,externalData:r}}))),ra="_pssps",na=(e,t)=>({ssp:o.uZ(ai).concat(e.ssp,t.ssp),externalData:{[ra]:(0,n.zG)(a.vP(e.externalData._pssps,t.externalData._pssps),a.UI((e=>{let[t,r]=e;return o.uZ(ia).concat(t,r)})))}}),ia={concat:(e,t)=>({cohorts:e.cohorts.concat(t.cohorts),ssps:Array.from(new Set(e.ssps.concat(t.ssps)))})},aa=(e,t)=>i.K4((()=>({ssp:o.YP,externalData:{[ra]:a.a9(o.YP)}}))),oa=e=>{const t=(0,n.zG)((null==e?void 0:e.dfp)??[],Ft.UI(String),(e=>new Set(e)));return{id:"dfp",filterCohorts:Ft.hX((e=>t.has(e)))}};const sa=e=>{if(!e.metrics.isEnabled())return()=>{};const t=(0,n.zG)(e.adServers,Ft.UI((e=>(0,n.bc)(e.id,e))),Te.sq,Te.UI((t=>{const r=(0,n.zG)(e.cohorts,Te.DZ((e=>e.byAdServer(t))),(e=>a.vP(e)),a.UI(Te.UI((i=5e3,s="Timeout",e=>(0,n.zG)(e,Pn(i),ft.UI(o.pF((()=>F.t$(s)))))))),a.UI((0,Ge.Yt)(ft.Hi)),a.UI(ft.UI((0,n.ls)(Te.oh,Le.Vn(Te.Su(((t,r)=>{e.logger.warn("[Targeting Metrics]",`[${t}]`,r)}))),Le.F2))),(e=>()=>e.current));var i,s;return(0,n.ls)(Ft.of,Ft.UI((e=>e.cohorts)),ca,Ft.UI((e=>{let[t,r]=e;return{allCohorts:new Set(t),cohortCountByType:ua(t),requestCount:r}})),(i=>(0,n.zG)(r(),ft.UI(Te.Su(((t,r)=>(i,a)=>{(0,n.zG)(r,Ft.Hr("actualCohortCount",(e=>{let{cohortCountByType:t}=e;return(0,n.zG)(t,Te.P5(i))})),Ft.UI((r=>{const s={cohort_type:i,target:t},u=a.reduce(((e,t)=>r.allCohorts.has(t)?e+1:e),0),c=a.length-u;e.metrics.track({name:"sdk_ad_request_missed_cohorts",labels:s,value:r.requestCount*c}),e.metrics.track({name:"sdk_ad_request_successful_cohorts",labels:s,value:r.requestCount*u}),(0,n.zG)(r.actualCohortCount,o.UI((t=>{const n=t-u;e.metrics.track({name:"sdk_ad_request_superfluous_cohorts",labels:s,value:r.requestCount*n})})))})))})(t.id,i))))),(e=>e()))})));return e=>{if("AdRequest"===e.name)(r=e.properties).ad_server_id in t&&t[r.ad_server_id](r);var r}},ua=e=>({ql:(0,n.zG)(e,Ft.u4(0,((e,t)=>isNaN(parseInt(t))?e:e+1)))}),ca=e=>(0,n.zG)(e,Ft.pO((e=>{const{init:t,rest:r}=(0,n.zG)(e,Ft.zT((t=>t===e[0])));return[t,r]})),Ft.UI((e=>[e[0],e.length]))),la=e=>o.YP;const pa=V.n_({cohorts:Ft.Eh((0,g.Or)()),ctx:(0,g.Or)()}),ma=Ft.cS;Promise.resolve(F.F2(ma)),V.n_({userId:(0,g.Or)(),lastSuccess:{equals:(e,t)=>e&&t&&pa.equals(e,t)||e===t}});const fa=V.n_({cohorts:j.Eh(V.n_({code:M.Eq,groups:j.Eh(K.Eq)})),groups:j.Eh(K.Eq)}),da=(V.n_({userId:(0,g.Or)(),lastSuccess:{equals:(e,t)=>e===t||!!e&&!!t&&V.bc(M.Eq,fa).equals(e,t)}}),(e,t)=>{const r=(0,n.zG)(t,o.UI((e=>e.all)),o.fS((()=>$n(Ft.cS))),Mn,a.UI(o.Uo));return{_pcrdbs:a.a9(o.YP),_pcrprs:r}});const _a=function(e,t){return i.of({cohorts:o.YP,externalData:da(e.logger,o.YP)})};const va=i.K4((()=>{}));const ga=e=>t=>(0,n.zG)(e,Te.UI((e=>t.reduce(((t,r)=>t+Number(e.has(r))),0))));const ha=function(e,t){return i.K4((()=>({signalRef:a.a9(o.YP)})))};const ya=e=>t=>i.dQ((r=>{const i=Sa(e.performance),s=(0,n.zG)(r.previousState,o.DT((e=>"string"==typeof e))),u={key:(0,n.zG)(s,o.fS((()=>e.sessionId.current))),reporting:!1},c=(0,n.zG)(e.sessionId,a.Rp(a.a9(u),((r,s)=>(0,n.zG)(r,a.VS((r=>{if(r.reporting)return a.a9(r);if(r.key===s)return a.a9(r);return(0,n.zG)(t,ft.gw(3e4),ft.tS((e=>i(50,(()=>function*(e,t){const r=Date.now(),i={},a=20;let o=0;for(const n of e){if(n.session_id===t)continue;o++,i[n.name]??={age_ms:0,count:0,eventName:n.name,size_bytes:0};const e=i[n.name].age_ms,s=r-n.time.getTime();s>e&&(i[n.name].age_ms=s),i[n.name].size_bytes+=2*JSON.stringify(n).length,i[n.name].count+=1,o%a==0&&(yield)}const s=Object.values(i);if(0===s.length)return[];const u=(0,n.zG)(s,Ft.u4({size_bytes:0,count:0,age_ms:0},((e,t)=>({size_bytes:e.size_bytes+t.size_bytes,count:e.count+t.count,age_ms:Math.max(e.age_ms,t.age_ms)}))),(e=>({...e,eventName:"*"})));return(0,n.zG)([...s,u],Ft.UI((e=>({...e,used_size_bytes:u.size_bytes}))))}(e,s))))),ft.UI((t=>(t.forEach((t=>{e.metrics.track({name:"sdk_event_cache_age_seconds",labels:{event_count:t.count,event_name:t.eventName,size_bytes:t.size_bytes,used_size_bytes:t.used_size_bytes},value:Math.ceil(t.age_ms/1e3)})})),{key:s,reporting:!1}))),a.fF,a.UI(o.fS((()=>({...r,reporting:!0})))))}))))),a.xH);return{value:void 0,state:a.UI((e=>e.key),c)}})),ba=()=>i.dQ((e=>{let{previousState:t}=e;return{value:void 0,state:a.a9(t)}}));const Sa=e=>(t,r)=>async()=>{let n=e.now();const i=r();for(;;){e.now()-n>t&&(await new Promise((e=>setTimeout(e))),n=e.now());const r=i.next();if(r.done)return r.value}},Ia=e=>t=>{const{consent:r,currentTimestampSecs:s,identities:u,sessionId:c,userId:p,viewId:m,pageviewState:f}=t;return(0,n.zG)(i.K4((()=>{let r;const n=new Promise((e=>{r=e})),[i,s]=a.Ue(a.a9(o.YP));return{...t,adServers:[oa(e.optimisedActivationsConfig.dfp)],nonQlCohortsT:()=>n,setNonQlCohorts:r,setTpdUsage:s,tpdUsage:a.xH(i)}})),i.ak("geoip",(()=>(e=>(0,n.zG)(e,Vi,i.YO("data"),i.Hr("replacementMap",(e=>{let{data:t}=e;return(0,n.zG)(t,a.UI(o.UI((e=>{var t;return{$ip_geo_info:e.geo_info,$ip_geo_info_continent:null===(t=e.geo_info)||void 0===t?void 0:t.continent,$ip_isp_info:e.isp_info,$ip_address:e.ip,$ip_address_hash:e.ip_hash}}))))})),i.Hr("permutiveContext",(e=>{let{data:t}=e;return(0,n.zG)(t,a.UI(o.EQ((()=>({})),(e=>{var t,r,n,i,a,o,s,u,c;return{isp:null===(t=e.isp_info)||void 0===t?void 0:t.isp,organization:null===(r=e.isp_info)||void 0===r?void 0:r.organization,autonomous_system_number:null===(n=e.isp_info)||void 0===n?void 0:n.autonomous_system_number,autonomous_system_organization:null===(i=e.isp_info)||void 0===i?void 0:i.autonomous_system_organization,continent:null===(a=e.geo_info)||void 0===a?void 0:a.continent,country:null===(o=e.geo_info)||void 0===o?void 0:o.country,city:null===(s=e.geo_info)||void 0===s?void 0:s.city,province:null===(u=e.geo_info)||void 0===u?void 0:u.province,postal_code:null===(c=e.geo_info)||void 0===c?void 0:c.postal_code}}))))}))))({...e,sessionId:c}))),i.Hr("watson",(t=>{let{webClient:r}=t;return(0,n.zG)(e.watson,o.fS((()=>(0,n.zG)(r,a.UI(o.UI((e=>e.url))),a.D8(o.Eh(M.Eq)),(t=>(0,Wi.watson)({...e,pageUrl:t,watsonEnabled:(0,n.zG)(f,a.UI((e=>e.watsonEnabled)))}))))))})),i.ak("audienceMatching",(t=>{let{tpdUsage:r}=t;return Zi(e,{identities:u,sessionId:c,tpdUsage:r,userId:p,viewId:m})})),i.UI((e=>{let{audienceMatching:{analyticsEvents:t,...r},newEvents:i,...o}=e;return{...o,audienceMatching:r,newEvents:(0,n.zG)(a.vP(i,t),a.UI(_.RD),a.UI(_.UI(Ft.xH)))}})),i.UI((e=>{const[t,r,i]=a.Ue(o.bM()),[s,u]=(0,n.zG)(e.newEvents,a.En(2,Ft.uZ())),c=(0,n.zG)(a.vP(s,t),a.UI((e=>{let[t,r]=e;return(0,n.zG)(r,o.UI((e=>(0,n.zG)(t,_.UI(Ft.UI((0,g.bw)((t=>{let[,r]=t;return e(r)}))))))),o.fS((()=>_.of(Ft.bM()))))})));return{...e,newEvents:c,newEventsForAdvertiserSegmentation:u,collectTargetingSuccessMetrics:e=>{r(o.G(e)),i()}}})),i.ak("enrichedEvents",(t=>{let{enrichmentReplacementMap:r,geoip:s,newEvents:u,watson:c}=t;return(0,n.zG)(a.vP({misc:r,geoip:s.replacementMap,watson:c.replacementMap}),a.UI((0,Ge.Yt)(o.G5)),a.UI(o.UI((e=>{let{misc:t,geoip:r,watson:n}=e;return{...t,...r,...n}}))),(t=>i.K4((()=>((e,t,r,i)=>((0,n.zG)(t,a.UI(o.pC),a.YP((t=>{t&&e.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"event_enrichment_ready",time_origin:"sdk_init"})}))),(0,n.zG)(r,a.VS((()=>(0,n.zG)(a.vP((0,n.zG)(t,a.UI(o.UI(Xi({dropUnenriched:!0})))),i),a.UI((0,n.ls)((e=>{let[t,r]=e;return()=>(0,n.zG)(t,o.EQ((()=>[]),(e=>(0,n.zG)(r(),Ft.UI(l((0,g.rO)({properties:e})))))))})))))))))(e.metrics,t,p,u)))))})),i.UI((0,g.rO)({enrichedEvents:(0,kn.F)(e.metrics,"pageview_enriched")})),i.ak("lookalikeModels",(()=>(0,n.zG)(e.lookalikeModels,o.EQ((()=>(0,bi.lookalikeModelsService)({...e,consent:r,currentTimestampSecs:s})),i.of)))),i.ak("queryLanguage",(r=>{let{audienceMatching:o,nonQlCohortsT:s,enrichedEvents:u,lookalikeModels:c,setTpdUsage:l,userIdIsNewlyGenerated:m}=r;return(0,n.zG)((f={...e,...t,newEvents:u,thirdPartyData:o.data,groupId:p,groupIdIsNewlyGenerated:m,nonQlCohorts:s,lookalikeModels:c,migratedStateMaps:e.migratedStateMaps},(0,n.zG)(a.vP(f.eventSourceId,f.groupId,f.groupIdIsNewlyGenerated),a.D8((0,n.zG)(M.Eq,V.Uz((e=>{let[t]=e;return t})))),i.kR((e=>{let[t,r,a]=e;return(0,n.zG)(yi({...f,eventSourceId:t,groupId:r,groupIdIsNewlyGenerated:a,migratedStateMaps:f.migratedStateMaps}),i.yi(t))})),i.UI((e=>({stateMigratedThisInitialisation:(0,n.zG)(e,a.VS((e=>e.segmentationService.stateMigratedThisInitialisation))),cohorts:(0,n.zG)(e,a.VS((e=>e.cohortsRef))),currentPageviewSegments:{all:(0,n.zG)(e,a.VS((e=>e.currentPageviewSegments)),Cn((e=>e.all))),custom:(0,n.zG)(e,a.VS((e=>e.currentPageviewSegments)),Cn((e=>e.custom))),standard:(0,n.zG)(e,a.VS((e=>e.currentPageviewSegments)),Cn((e=>e.standard)))},eventsToPublish:(0,n.zG)(e,a.VS((e=>e.eventsToPublish))),eventsToPublishOnPageUnload:(0,n.zG)(e,a.VS((e=>e.eventsToPublishOnPageUnload))),realtime:(0,n.zG)(e,a.VS((e=>e.realtime)),a.Rp(!1,((e,t)=>e||t)),a.bw((e=>{e&&f.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_realtime",time_origin:"sdk_init"},performance.now())}))),segments:{all:(0,n.zG)(e,a.VS((e=>Mn(e.segmentationService.segments))),a.UI((e=>e.all))),custom:(0,n.zG)(e,a.VS((e=>Mn(e.segmentationService.segments))),a.UI((e=>e.custom))),standard:(0,n.zG)(e,a.VS((e=>Mn(e.segmentationService.segments))),a.UI((e=>e.standard)))},thirdPartyDataUsage:(0,n.zG)(e,a.VS((e=>e.segmentationService.tpdUsage))),transitionsSinceInit:(0,n.zG)(e,a.VS((e=>e.segmentTransitions.transitionsSinceInit)))}))))),i.bw((e=>{let{thirdPartyDataUsage:t}=e;return l(t)})));var f})),i.ak("classificationModels",(t=>{let{queryLanguage:n}=t;return Ii(e,a.vP({consent:r,currentTimestampSecs:s,queryLanguageCohorts:Bn(n.currentPageviewSegments.all),realtime:n.realtime,userId:p}))})),i.ak("advertiserSegmentation",(t=>{let{queryLanguage:n,newEventsForAdvertiserSegmentation:i}=t;return _a(e,a.vP({consent:r,customCohorts:Bn(n.currentPageviewSegments.custom),realtime:n.realtime,sessionId:c,standardCohorts:Bn(n.currentPageviewSegments.standard),userId:p,viewId:m,events:i}))})),i.ak("demandPartnersAndCuration",(r=>{let{queryLanguage:s,advertiserSegmentation:u}=r;const c=Jn(Ft.jG()),l=(0,n.zG)(u.cohorts,o.UI((e=>e.all)),o.fS((()=>$n(Ft.cS)))),p=(0,n.zG)(s.currentPageviewSegments.all,Vn);return(0,n.zG)(i.vP({demandPartners:ta(e,{cohorts:p,consent:t.consent,url:(0,n.zG)(t.webClient,a.UI(o.UI((e=>e.url))))}),curation:aa(0,(e.optimisedActivationsConfig.curation_platforms,c.concat(l,p)))}),i.UI((e=>{let{demandPartners:t,curation:r}=e;return na(t,r)})))})),i.ak("ipIdentifier",(e=>{let{userId:t,geoip:r}=e;return(0,n.zG)(r.data,a.UI(o.tS(o.KQ((e=>e.ip))))),va})),i.ak("secureSignal",(t=>{let{advertiserSegmentation:r,demandPartnersAndCuration:o}=t;return(0,n.zG)(ha(e,(0,n.zG)(p,a.UI((e=>({userId:e,advertiserCohorts:r.cohorts,stdAudienceCohorts:o.ssp}))))),i.UI((e=>{let{signalRef:t}=e;return t})))})),i.Hr("nonQlCohorts",(e=>{let{advertiserSegmentation:t,classificationModels:r,contextualCohorts:i,setNonQlCohorts:a,demandPartnersAndCuration:o,viewId:s}=e;return(0,n.zG)(Te.oA({advertiser:t.cohorts,classificationModel:r,contextual:la({contextualCohorts:i,viewId:s}),ssp:o.ssp}),(0,g.bw)(a))})),i.Hr("qlCohorts",(e=>{let{queryLanguage:t}=e;return(0,n.zG)(t.segments.all,a.UI(Ft.UI(String)))})),i.bw((t=>{return t.collectTargetingSuccessMetrics(sa({adServers:t.adServers,cohorts:{...t.nonQlCohorts,query_language:(r=t.qlCohorts,(0,n.zG)(r,On,ri))},logger:e.logger,metrics:e.metrics}));var r})),i.Hr("eventsToPublish",(t=>{let{qlCohorts:r,queryLanguage:i,nonQlCohorts:o}=t;const s=(e=>{if(!e.metrics.isEnabled())return e=>{};const t=(0,n.zG)(e.cohortsByType,Te.UI(a.Rp(new Set,((e,t)=>new Set([...e,...t])))),(e=>a.vP(e)));return r=>{"Pageview"===r.name&&(0,v.HJ)((()=>(0,n.zG)(r.cohorts,ga(t.current),Te.Su(((t,r)=>e.metrics.track({name:"sdk_pageview_cohort_count",labels:{cohort_type:t},value:r}))))))}})({cohortsByType:(0,n.zG)(o,Te.UI(ii),Te.dx("query_language",r)),metrics:e.metrics});return(0,n.zG)(i.eventsToPublish,a.UI(_.UI(Ft.UI((0,g.bw)((e=>{let[,t]=e;return s(t)}))))))})),(0,n.ls)(i.ak("eventsCacheReports",(()=>(0,n.zG)(e.eventsCache,F.EQ((()=>ft.of(Ft.cS)),(e=>()=>e.all())),(e=>{if(e.metrics.isEnabled()&&o.pC(e.performance)){const t=e.performance.value;return ya({...e,performance:t})}return ba})({metrics:e.metrics,sessionId:t.sessionId,performance:e.performance})))),i.UI((e=>{let{adServers:t,advertiserSegmentation:r,demandPartnersAndCuration:i,eventsToPublish:o,geoip:s,queryLanguage:u,nonQlCohorts:c,watson:l,secureSignal:p}=e;return{activations:(0,n.zG)(t,Ft.UI((e=>(0,n.zG)(Object.values(c),Ft.UI(ni),Ft.DZ((t=>t.byAdServer(e))),Ft.UI(Mn),Ft.UI(a.D8(Ft.Eh(M.Eq))),(e=>a.vP(...e)),a.UI(Ft.xH),(t=>(0,n.bc)(e.id,t))))),Te.sq),cohorts:{all:u.cohorts,ql:u.segments.all,qlCustom:u.segments.custom,qlStandard:u.segments.standard},context:(0,n.zG)(a.vP(l.permutiveContext,s.permutiveContext),a.UI((e=>{let[t,r]=e;return{...t,...r}}))),eventsToPublish:o,eventsToPublishOnPageUnload:u.eventsToPublishOnPageUnload,externalData:a.vP({...r.externalData,...i.externalData}),geoIP:s.data,realtime:u.realtime,stateMigratedThisInitialisation:u.stateMigratedThisInitialisation,transitionsSinceInit:u.transitionsSinceInit,secureSignal:p}}))))}},600:(e,t,r)=>{r.d(t,{BJ:()=>p,El:()=>A,G6:()=>b,HD:()=>l,HP:()=>G,Kn:()=>c,Or:()=>I,PQ:()=>S,SL:()=>f,aT:()=>v,b0:()=>h,b2:()=>d,bw:()=>x,k$:()=>g,lo:()=>E,mQ:()=>k,rO:()=>z,vg:()=>w,vp:()=>m});var n=r(340),i=r(169),a=r(507),o=r(327),s=r(229),u=r(586);const c=e=>"object"==typeof e&&!Array.isArray(e)&&null!==e,l=e=>"string"==typeof e,p=e=>"number"==typeof e&&!Number.isNaN(e);function m(e){let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r),t&=t;return t}function f(e){return t=>{let r=0;for(let n of t){r=r+e(n)|0}return r}}o.ff(s.xb);function d(){let e,t;return{promise:new Promise(((r,n)=>{e=r,t=n})),reject:t,resolve:e}}let _=[];function v(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:navigator.userAgent;if(_.unshift(e),_.length>1)return;const r=["beforeunload","pagehide"],n=r.concat(["visibilitychange"]),i=e=>{if(!a&&e){a=!0;const e=_;_=[],e.forEach((e=>{try{e()}catch{}}))}};let a=!1;n.forEach((e=>{window.addEventListener(e,(()=>{const r=("visibilitychange"!==e||document.hidden)&&y(t);i(r)}))})),r.forEach((e=>{window.addEventListener(e,(()=>i(!0)))}))}function g(){return([1e7]+-1e3+-4e3+-8e3+-1e11).replace(/[018]/g,(e=>(e^(self.crypto||self.msCrypto).getRandomValues(new Uint8Array(1))[0]&15>>e/4).toString(16)))}function h(e,t){const r=Object.keys(e),n=r.length,i={};for(let o=0;o<n;o++){const n=r[o],s=t(n,e[n]);(0,a.pC)(s)&&(i[n]=s.value)}return i}function y(e){return/Mobi|Android/i.test(e)}function b(e){return/^((?!chrome|android).)*safari/i.test(e)}function S(e,t){return new Promise((r=>{(0,u.HJ)((()=>{Promise.resolve(e()).then(r)}),(null==t?void 0:t.timeout)??0)}))}const I=()=>({equals:(e,t)=>Object.is(e,t)});function w(e){return t=>null!=t&&e in t?t[e]:void 0}function G(e){let t=a.YP;const r=(0,a.fS)((()=>{const r=e();return t=(0,a.G)(r),r}));return()=>r(t)}const k=e=>{const t=new Map;return r=>(t.has(r)||t.set(r,e(r)),t.get(r))},z=e=>t=>{const r={...t};for(const i in e){var n;r[i]=null===(n=e[i])||void 0===n?void 0:n.call(e,t[i])}return r};function x(e){return t=>(e(t),t)}const E=e=>t=>{const r=e.slice(0,-1),o=e.slice(-1)[0];return(0,i.zG)(r,n.f2((e=>{let[r,n]=e;return(0,i.zG)(t,a.DT(r),a.UI(n))})),a.fS((()=>o(t))))},U=e=>t=>{if("number"==typeof t)return t;if("string"==typeof t){const r=e(t);return Number.isNaN(r)?void 0:r}};U(parseInt),U(parseFloat);function A(e){return"object"==typeof e&&null!==e&&"_tag"in e&&["None","Some"].includes(e._tag)}},905:(e,t,r)=>{r.r(t),r.d(t,{lookalikeModelsService:()=>b,realService:()=>I,stubService:()=>S});var n=r(169),i=r(507);const a=(e,t,r,n)=>t+(r-t)*n/(Math.pow(2,e)-1),o=(e,t)=>{const r=(e,t)=>{const r=e.toString(16);return("0".repeat(t)+r).slice(Math.min(-t,-r.length))};return`${r(e.getUint32(t),8)}-${r(e.getUint16(t+4),4)}-${r(e.getUint16(t+6),4)}-${r(e.getUint16(t+8),4)}-${r(e.getUint32(t+10),8)}${r(e.getUint16(t+14),4)}`},s=e=>{const t=[1,2],r=e.getInt8(0);if(1===r)return u(e);if(2===r)return c(e);{const n=(0,i.Y3)((()=>o(e,1))),a=(0,i.g_)((()=>"Couldn\'t decode model id"),(e=>`Model id was ${e}`))(n);throw new Error(`Decoding only supported for version(s): ${t}; Supplied version was ${r}; ${a}`)}},u=e=>l(e,1),c=e=>l(e,2),l=(e,t)=>{const r=o(e,1),n=((e,t)=>{switch(String.fromCharCode(e.getInt8(t))){case"1":return"1p";case"3":return"3p"}})(e,17),i=e.getInt8(18),a=e.getFloat32(19),s=e.getFloat32(23),[u,c]=((e,t,r,n,i,a)=>{const o={};let s=0;do{let r;1===a?(s=e.getUint16(t),r=e.getUint16(t+2),t+=4):(s=e.getUint32(t),r=e.getUint16(t+4),t+=6),o[0===s?"const":s]=r.toString(36)}while(0!==s);return[o,t]})(e,27,0,0,0,t);return[{version:t,id:r,data_preference:n,weights:u,precision:i,min:a,max:s},c]};var p=r(6),m=r(46),f=r(586),d=r(480),_=r(519),v=r(144),g=r(118),h=r(600);const y=()=>i.G({}),b=I;function S(e){return d.K4((()=>_.a9(y())))}function I(e){e.logger.warn("add cleanup of legacy LAL cache");const t=e.trace.startSpan("lookalike_models_data_retrieval_duration");return(0,n.zG)(g.m((0,n.zG)(_.vP(e.consent,e.currentTimestampSecs),_.UI((t=>{let[r,o]=t;return{currentTimestampSecs:o,validity:{maxAge:604800,key:()=>"_"},freshness:{maxAge:86400,key:()=>"_"},refresh:(0,n.zG)(r,i.DT(Boolean),i.UI((()=>()=>p.fF(function(e){const t="Failed fetching binary models, reverting to JSON.\\nError: ",r="Failed fetching json models.\\nError: ";return(0,n.zG)(p.Y3((()=>G(e)),(e=>e.message)),f.N1,p.oU((e=>()=>function(e){const t=[];let r=0;for(;r<e.byteLength;){const[n,i]=s(new DataView(e,r));t.push(n),r+=i}return t}(e))),f.N1,p.UI(w((e=>{let{precision:t,max:r,min:n}=e;return{"1p":{},precision:t,min:n,max:r}}))),p.Vn((r=>(e.logger.log(t+r),e.metrics.track({name:"sdk_binary_models_missing_count",value:1,labels:{}}),r))),p.wp((()=>(0,n.zG)(p.Y3((()=>k(e)),(e=>e.message)),p.UI((e=>e.models)),p.UI(w((()=>({"1p":{}}))))))),p.UI((e=>(e=>{const t=Object.keys(e);return t.length>0&&e[t[0]].hasOwnProperty("precision")})(e)?(e=>{const t={},r=Object.keys(e),n=e=>{const t={"1p":{}},{precision:r,min:n,max:i}=e,o=e["1p"],s=Object.keys(o);for(let e=0;e<s.length;e++){const u=s[e],c=parseInt(o[u],36);t["1p"][u]=a(r,n,i,c)}return t};for(let i=0;i<r.length;i++){const a=r[i],o=e[a];t[a]=n(o)}return t})(e):e)),p.fS((t=>(e.reportError(r+t),m.of({})))))}(e)))))}})))),d.UI(_.UI((0,n.ls)(v.fS((t=>(e.logger.warn("[LAL]",`Failed to refresh, using zero value. ${t}`),y()))),(0,h.bw)(i.UI((()=>{t.finish(),e.metrics.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"lookalike_models_ready",time_origin:"sdk_init"})})))))))}function w(e){return t=>{const r={};for(let n=0;n<t.length;n++){const i=t[n],{id:a,weights:o}=i;if(void 0===a||void 0===o)continue;const s=e(i);Object.keys(o).forEach((e=>{s["1p"][e]=o[e]})),r[a]=s}return r}}const G=e=>{const{permutiveApi:t,config:r,metrics:n}=e,i=n.startTimer("sdk_http_models_seconds",{});return t.req({url:z(r.cdnProtocol,r.cdnBaseUrl,"binary"),method:"GET",contentType:"text/plain",dataType:"binary",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_models_seconds",i),e)))},k=e=>{const{permutiveApi:t,config:r,metrics:n}=e,i=n.startTimer("sdk_http_models_seconds",{});return t.req({url:z(r.cdnProtocol,r.cdnBaseUrl,"json"),method:"GET",contentType:"text/plain",dataType:"json",withCredentials:!1}).then((e=>(n.stopTimer("sdk_http_models_seconds",i),e)))};function z(e,t,r){const n=`${e}://${t}`;switch(r){case"binary":return`${n}/models/v2/6adbc4e9-beda-4b9e-9117-43ec3a80e1d0-models.bin`;case"json":return`${n}/models/6adbc4e9-beda-4b9e-9117-43ec3a80e1d0-models.json`}}},895:(e,t,r)=>{r.d(t,{K:()=>E,O:()=>z});let n,i;const a=new WeakMap,o=new WeakMap,s=new WeakMap,u=new WeakMap,c=new WeakMap;let l={get(e,t,r){if(e instanceof IDBTransaction){if("done"===t)return o.get(e);if("objectStoreNames"===t)return e.objectStoreNames||s.get(e);if("store"===t)return r.objectStoreNames[1]?void 0:r.objectStore(r.objectStoreNames[0])}return f(e[t])},set:(e,t,r)=>(e[t]=r,!0),has:(e,t)=>e instanceof IDBTransaction&&("done"===t||"store"===t)||t in e};function p(e){return e!==IDBDatabase.prototype.transaction||"objectStoreNames"in IDBTransaction.prototype?(i||(i=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])).includes(e)?function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return e.apply(d(this),r),f(a.get(this))}:function(){for(var t=arguments.length,r=new Array(t),n=0;n<t;n++)r[n]=arguments[n];return f(e.apply(d(this),r))}:function(t){for(var r=arguments.length,n=new Array(r>1?r-1:0),i=1;i<r;i++)n[i-1]=arguments[i];const a=e.call(d(this),t,...n);return s.set(a,t.sort?t.sort():[t]),f(a)}}function m(e){return"function"==typeof e?p(e):(e instanceof IDBTransaction&&function(e){if(o.has(e))return;const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{t(),n()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),n()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)}));o.set(e,t)}(e),t=e,(n||(n=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])).some((e=>t instanceof e))?new Proxy(e,l):e);var t}function f(e){if(e instanceof IDBRequest)return function(e){const t=new Promise(((t,r)=>{const n=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{t(f(e.result)),n()},a=()=>{r(e.error),n()};e.addEventListener("success",i),e.addEventListener("error",a)}));return t.then((t=>{t instanceof IDBCursor&&a.set(t,e)})).catch((()=>{})),c.set(t,e),t}(e);if(u.has(e))return u.get(e);const t=m(e);return t!==e&&(u.set(e,t),c.set(t,e)),t}const d=e=>c.get(e);const _=["get","getKey","getAll","getAllKeys","count"],v=["put","add","delete","clear"],g=new Map;function h(e,t){if(!(e instanceof IDBDatabase)||t in e||"string"!=typeof t)return;if(g.get(t))return g.get(t);const r=t.replace(/FromIndex$/,""),n=t!==r,i=v.includes(r);if(!(r in(n?IDBIndex:IDBObjectStore).prototype)||!i&&!_.includes(r))return;const a=async function(e){const t=this.transaction(e,i?"readwrite":"readonly");let a=t.store;for(var o=arguments.length,s=new Array(o>1?o-1:0),u=1;u<o;u++)s[u-1]=arguments[u];return n&&(a=a.index(s.shift())),(await Promise.all([a[r](...s),i&&t.done]))[0]};return g.set(t,a),a}l=(e=>({...e,get:(t,r,n)=>h(t,r)||e.get(t,r,n),has:(t,r)=>!!h(t,r)||e.has(t,r)}))(l);var y=r(654),b=r(144),S=r(169),I=r(46),w=r(6),G=r(600),k=r(586);const z="[IDB]",x=(e,t,r,n,i,a)=>(0,S.zG)((0,I.of)(e.getNamespacedStorageKey(i)),(0,I.tS)((e=>(0,w.Y3)((async()=>r.put(n,a,e)),y.w))),(0,I.UI)((0,b.g_)((e=>{throw t.error(z,`Failed to store crypto key to ${n} due to unexpected error,\\n`,e),e}),(()=>a))),(e=>e()));class E{namespace;logger;cryptoAlg;idb;mainObjectStore;keyObjectStore;keyObjectKey;cryptoKey;MAX_CONSECUTIVE_PUTS=30;puts=1;hasForcedCompaction=!1;constructor(e,t,r,n,i,a,o,s){this.namespace=e,this.logger=t,this.cryptoAlg=r,this.idb=n,this.mainObjectStore=i,this.keyObjectStore=a,this.keyObjectKey=o,this.cryptoKey=s,this.logDebug("Created",this.idb)}static initialise(e,t,r,n,i,a,o,s,u,c){const l=(0,G.G6)(navigator.userAgent)&&!1,p=[c,n.isAvailable(),!l].every((e=>!0===e)),m=async(t,i,a)=>(0,S.zG)(await t.get(a,e.getNamespacedStorageKey(i)),(async e=>e??n.generateKey(!1)),(async n=>x(e,r,t,o,s,await n))).catch((e=>{const t=(0,y.w)(e);throw r.error(z,"Get crypto key failed. Got\\n",t),t})),f=(e,t,r)=>t.includes(r)?(0,S.Q1)():e.createObjectStore(r),d=()=>U(i,u,{upgrade:e=>{const t=[...e.objectStoreNames];f(e,t,a),f(e,t,o)}}).then((e=>{const t=[...e.objectStoreNames];return t.includes(a)&&t.includes(o)?e:Promise.reject(new Error("Object store(s) missing."))})),_=p?(0,b.Y3)((()=>function(e){if(!(0,G.G6)(navigator.userAgent)||!indexedDB.databases)return Promise.resolve();let t=()=>{},r=0;return new Promise((e=>{const n=()=>(r++,indexedDB.databases().finally((0,k.GL)(e)));t=(0,k.UM)(n,100),n()})).finally((()=>{t(),e.track({name:"sdk_idb_conn_attempt_safari_count",value:r,labels:{}})}))}(t).then((()=>d())).catch((e=>(r.error(`Re-creating IDB database ${i} due to error`,e),A(i).then((()=>d())))))),String):(0,b.t$)("Connection not attempted. Default to localStorage");return(0,b.g_)((e=>(0,w.t$)(e)),(t=>(0,S.zG)((0,w.Y3)((()=>t.then((async e=>({db:e,cryptoKey:await m(e,s,o)})))),String),(0,w.UI)((t=>{let{db:i,cryptoKey:u}=t;return new E(e,r,n,i,a,o,s,u)})))))(_)}async put(e,t){return(0,S.zG)((async()=>(0,S.bc)(JSON.stringify(e),this.cryptoKey)),(0,I.tS)((e=>{let[t,r]=e;return(0,I.of)(this.cryptoAlg.encrypt(r,t))})),(0,I.tS)((e=>async()=>(await this.recreateIfNecessary(this.puts++),e))),(0,I.tS)((e=>(0,w.Y3)((()=>this.idb.put(this.mainObjectStore,e,this.namespace.getNamespacedStorageKey(String(t)))),y.w))),(0,I.UI)((0,b.g_)((r=>{throw this.logError(`Failed to put "${t.toString()}" value`,e,". Got \\n",r),"QuotaExceededError"===r.name&&this.forceCompaction(),r}),(()=>t))),(e=>e()))}get(e){return(0,S.zG)(this.namespace.getNamespacedStorageKey(String(e)),(t=>this.idb.get(this.mainObjectStore,t).then((async e=>e?JSON.parse(await this.cryptoAlg.decrypt(this.cryptoKey,e)):null)).catch((t=>{const r=(0,y.w)(t);throw this.logError(`Get ${e.toString()} failed. Got`,r),r}))))}delete(e){return(0,S.zG)(this.namespace.getNamespacedStorageKey(String(e)),(e=>this.idb.delete(this.mainObjectStore,e)))}deleteStore(){return this.logDebug("Deleting",this.idb),this.idb.close(),A(this.idb.name)}forceCompaction(){if(this.hasForcedCompaction)return null;this.hasForcedCompaction=!0,this.logDebug("Attempting to force compaction");const e=`__${this.mainObjectStore}`;return U(e).then((t=>(t.close(),A(e))))}recreateIfNecessary(e){return(0,G.G6)(navigator.userAgent)&&e%this.MAX_CONSECUTIVE_PUTS==0?this.recreate():Promise.resolve()}async recreate(){const e=this.idb.name,t=this.idb.version,r=await this.idb.getAllKeys(this.mainObjectStore),n=[];for(const e of r)n.push([e,await this.idb.get(this.mainObjectStore,e)]);await this.deleteStore(),this.idb=await U(e,t,{upgrade:e=>{e.createObjectStore(this.mainObjectStore),e.createObjectStore(this.keyObjectStore)}}),await Promise.all(n.map((e=>{let[t,r]=e;return this.idb.put(this.mainObjectStore,r,t)}))),await x(this.namespace,this.logger,this.idb,this.keyObjectStore,this.keyObjectKey,this.cryptoKey),this.logDebug("Reset to",this.idb)}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(z,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(z,...t)}}const U=(0,S.ls)((function(e,t){let{blocked:r,upgrade:n,blocking:i,terminated:a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};const o=indexedDB.open(e,t),s=f(o);return n&&o.addEventListener("upgradeneeded",(e=>{n(f(o.result),e.oldVersion,e.newVersion,f(o.transaction))})),r&&o.addEventListener("blocked",(()=>r())),s.then((e=>{a&&e.addEventListener("close",(()=>a())),i&&e.addEventListener("versionchange",(()=>i()))})).catch((()=>{})),s}),k.t_,(e=>e.then((e=>({close:e.close.bind(e),createObjectStore:(0,S.ls)(e.createObjectStore.bind(e),S.Q1),delete:(0,S.ls)(e.delete.bind(e),k.t_),get:(0,S.ls)(e.get.bind(e),k.t_),getAllKeys:(0,S.ls)(e.getAllKeys.bind(e),k.t_),get name(){return e.name},get objectStoreNames(){return e.objectStoreNames},put:(0,S.ls)(e.put.bind(e),k.t_),get version(){return e.version}}))))),A=(0,S.ls)((function(e){let{blocked:t}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};const r=indexedDB.deleteDatabase(e);return t&&r.addEventListener("blocked",(()=>t())),f(r).then((()=>{}))}),k.t_)},188:(e,t,r)=>{r.r(t),r.d(t,{make:()=>o});var n=r(169),i=r(895);const a=e=>{const{logger:t,consent:r,prefix:n}=e,i=(e,r)=>(t.debug(`${n} Failed to write ${String(r)} as consent is revoked`),Promise.resolve(r));return e=>class extends e{put=((e,t,r)=>function(){return(r()?t:e)(...arguments)})(super.put.bind(this),i,(()=>!r.current))}},o=(e,t,r,o,s,u,c,l,p,m,f)=>(0,n.zG)(i.K,a({logger:p,consent:m,prefix:i.O})).initialise(e,t,p,r,o,s,u,c,l,f)},521:(e,t,r)=>{r.r(t),r.d(t,{watson:()=>u});var n=r(519),i=r(169),a=r(507),o=r(812),s=r(229);const u=e=>(0,i.zG)(l(e),n.YO("data"),n.Hr("replacementMap",(e=>{let{data:t}=e;return(0,i.zG)(t,a.YO("data"),a.Hr("taxonomyLabels",(e=>{let{data:t}=e;return function(e){const t=e=>{const t=e.split("/").filter((e=>e));return t.map(((e,r)=>"/"+t.slice(0,r+1).join("/")))},r=o.xH(e.filter(Boolean).map((e=>t(e.label))));return o.jj(s.Eq)(r)}(t.taxonomy??[])})),a.UI((e=>{var t,r,n;let{data:a,taxonomyLabels:s}=e;return{$alchemy_concepts:a.concepts??[],$alchemy_document_emotion:(null===(t=a.emotion)||void 0===t||null===(r=t.document)||void 0===r?void 0:r.emotion)??null,$alchemy_document_sentiment:(null===(n=a.sentiment)||void 0===n?void 0:n.document)??null,$alchemy_entities:a.entities??[],$alchemy_entity_names:(0,i.zG)(a.entities??[],o.UI((e=>e.text))),$alchemy_keywords:a.keywords??[],$alchemy_taxonomy:a.taxonomy??[],$alchemy_taxonomy_labels:s,$taxonomy_labels:s}})))})),n.Hr("permutiveContext",(e=>{let{data:t}=e;return(0,i.zG)(t,a.EQ((()=>({})),(e=>({watson:e}))))})),(e=>({permutiveContext:(0,i.zG)(e,n.UI((e=>e.permutiveContext))),replacementMap:(0,i.zG)(e,n.UI((e=>e.replacementMap)))}))),c=()=>n.a9(a.G({})),l=c}},t={};function r(n){var i=t[n];if(void 0!==i)return i.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},(()=>{var e=r(586),t=r(519),n=r(169),i=r(480),a=r(507),o=r(812),s=r(600),u=r(6);function c(e,r){return(0,n.zG)(u.Y3((()=>e.get(r)),(e=>`Failed to read previous state from IndexedDB: ${e}.`)),u.UI((e=>e??void 0)),u.UI((i=>a=>(0,n.ls)((0,s.rO)({previousState:()=>i}),a,(a=>{let{value:o,state:u}=a;const[c,l]=t.Ue(!1),p=(0,n.zG)(u,t.Rp(-1,(e=>e+1)));return{value:(0,n.bc)(c,o),state:(0,n.zG)(t.vP(u,p),(0,s.bw)(t.YP((t=>{let[n,a]=t;if(0!==a||n!==i)switch(l(!1),typeof n){case"undefined":e.delete(r).then((()=>l(!0)));break;case"object":null===n?e.delete(r).then((()=>l(!0))):e.put(n,r).then((()=>l(!0)));break;default:e.put(n,r).then((()=>l(!0)))}}))))}})))))}function l(e){return r=>(0,n.ls)((0,s.rO)({previousState:t=>e.current?t:void 0}),r,(0,s.rO)({state:(0,n.ls)((r=>t.vP(e,r)),t.UI((e=>{let[t,r]=e;return t?r:void 0})))}))}var p=r(144);class m extends Error{static errorName="NetworkRequestFailedError";name=m.errorName;constructor(){super(m.defaultMessage)}static get defaultMessage(){return"Network request failed"}}class f extends Error{static errorName="NetworkRequestTimeoutError";name=f.errorName;constructor(){super(f.defaultMessage)}static get defaultMessage(){return"Network request timed out"}}var d=r(614),_=function(e){return"Left"===e._tag},v=function(e){return"Right"===e._tag};function g(e){return{_tag:"Left",left:e}}function h(e){return{_tag:"Right",right:e}}function y(e,t){return{_tag:"Both",left:e,right:t}}var b=function(e,t,r){return function(n){switch(n._tag){case"Left":return e(n.left);case"Right":return t(n.right);case"Both":return r(n.left,n.right)}}},S=b;S(h,g,(function(e,t){return y(t,e)}));var I=h,w="These";n.yR,n.yR,d.Xl;class G{metrics;constructor(e){this.metrics=e}req(e){return this.reqImpl(e).then((e=>(0,n.MZ)(e)))}reqWithBeacon(e){var t,r;let{url:n,payload:i}=e;const a=JSON.stringify(i),o=(null===(t=navigator)||void 0===t||null===(r=t.sendBeacon)||void 0===r?void 0:r.call(t,n,JSON.stringify(i)))??!1;return this.trackRequestMetrics({is_beacon:!0,is_error:!o,request:{method:"POST",url:n,content_length:a.length}}),o}reqImpl(t){const r="arraybuffer",{url:i,dataType:o,contentType:u,method:c,withCredentials:l,timeout:_}=t;return new Promise(((v,g)=>{const b=new XMLHttpRequest,S="POST"===t.method?"string"==typeof(I=t.payload)?I:JSON.stringify(I):null;var I;const w=e=>this.trackRequestMetrics({is_beacon:!1,request:{method:c,url:i,content_length:(null==S?void 0:S.length)??0},response:e});b.onload=(0,e.GL)((()=>{var e,t;return(0,n.zG)(b.status,p.DT((e=>e<400),(()=>{const e="text"===b.responseType||""===b.responseType?b.responseText:"Couldn\'t access response text";return`Failed ajax request. Status code was ${b.status}. ${e}`})),p.tS((()=>"json"===o?b.responseText?p.Y3((()=>JSON.parse(b.responseText)),(e=>`Failed to parse response as JSON. Response was ${JSON.stringify(b.responseText)}. Got ${e}`)):p.F2(null):"text"===o?p.F2(b.responseText):p.F2(b.response))),(0,s.bw)((0,n.ls)(a.IS,(t={content_length:"text"===b.responseType||""===b.responseType?(null===(e=b.responseText)||void 0===e?void 0:e.length)??0:b.responseType===r?b.response.byteLength:0,response_time_ms:self.performance.now()-G,status_code:b.status},function(e){return d.Wi(e)?h(t):y(e.value,t)}),w)),p.EQ(g,v))})),b.onerror=(0,e.GL)((()=>{w(p.t$("network error")),g(new m)})),b.ontimeout=(0,e.GL)((()=>{w(p.t$("timeout")),g(new f)})),b.open(c,i,!0),u&&b.setRequestHeader("content-type",u),b.timeout=_||b.timeout,b.withCredentials=l||b.withCredentials,b.responseType="binary"===o?r:b.responseType;const G=self.performance.now();b.send(S)}))}trackRequestMetrics(e){var t;if(null===(t=this.metrics)||void 0===t||!t.isEnabled())return;const r=new URL(e.request.url).pathname;if(r.includes("metrics"))return;const i=t=>this.metrics.track({name:"sdk_http_request_count_total",value:1,labels:{request_method:e.request.method,request_path:r,request_content_length:e.request.content_length,...t}});var o;!0===e.is_beacon?i({is_beacon:!0,is_error:e.is_error}):(0,n.zG)((o=e.response,_(o)?d.YP:(v(o),d.G(o.right))),a.aD((()=>({})),(e=>({response_content_length:e.content_length,response_status:e.status_code,response_time_ms:e.response_time_ms}))),(t=>({is_beacon:!1,is_error:!v(e.response),...t})),i)}}class k{config;PATH_JOINER_Q="?";PATH_JOINER_A="&";constructor(e){this.config=e}getBaseUrl(){return`${this.config.apiProtocol}://${this.config.apiHost}`}getEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("base",e,t,r)}getSdkErrorsUrl(e,t){return this.getUrl("sdk-errors",e,t,[])}getAdvertiserEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("adv",e,t,r)}getClassificationModelsEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("clm",e,t,r)}getAudienceMatchingEndpointUrl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];const i=`${e}/${r}/audiences`;return this.getUrl("audience-matching",i,t,n)}getCCSCohortMembershipEndpointUrl(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];return this.getUrl("ccs",e,t,r)}makeAuthenticatedUrl(e){return this.makeUrlWithQueryParams(e,[["k",this.config.apiKey]])}getUrlPrefix(e){switch(e){case"base":return"";case"adv":return"/adv";case"sdk-errors":return"/sdk-errors";case"clm":return"/clm";case"audience-matching":return"/audience-matching";case"ccs":return"/ccs"}}getUrl(e,t,r,n){const i=this.getUrlPrefix(e),o=(0,a.g_)((()=>""),(e=>`/${e}`))(r),s=`${this.getBaseUrl()}${i}${o}${t}`;return this.makeUrlWithQueryParams(s,n.concat([["k",this.config.apiKey]]))}makeUrlWithQueryParams(e,t){const r=t.map((e=>{let[t,r]=e;return`${t}=${r}`})).join(this.PATH_JOINER_A),n=e.includes(this.PATH_JOINER_Q)?this.PATH_JOINER_A:this.PATH_JOINER_Q;return`${e}${n}${r}`}}var z=r(895),x=r(945);class E{sdkInitTimestamp;timeOriginSdkInit;logger;prefix="[Metrics]";timeOriginForContext=P();pendingMetrics=[];pendingCounters={};pendingTimers={};noMetricsTracked=0;constructor(e,t,r){this.sdkInitTimestamp=e,this.timeOriginSdkInit=t,this.logger=r}isEnabled(){return!0}getNoMetricsTracked(){return this.noMetricsTracked}consume(){const e=this.pendingMetrics.concat(Object.values(this.pendingCounters).flat());return this.pendingMetrics=[],this.pendingCounters={},e}track(e){this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),this.pendingMetrics.push(e)}trackCounter(e){if(this.noMetricsTracked++,this.logDebug(`Tracking ${e.name}`,{metric:e}),e.name in this.pendingCounters){const t=Object.keys(e.labels),r=this.pendingCounters[e.name].findIndex((r=>Object.keys(r.labels).length===t.length&&t.every((t=>r.labels[t]===e.labels[t]))));-1===r?this.pendingCounters[e.name].push(e):this.pendingCounters[e.name][r]=A(this.pendingCounters[e.name][r],e.value)}else this.pendingCounters[e.name]=[e]}synchroniseTimeBetweenContexts(e){return(0,n.zG)(x.gz(a.G5)(this.timeOriginForContext,this.timeOriginSdkInit),a.UI((t=>{let[r,n]=t;return e+r-n})))}trackTimeSinceInit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:performance.now();(0,n.zG)(this.synchroniseTimeBetweenContexts(r),a.UI((e=>(e-this.sdkInitTimestamp)/1e3)),a.UI((r=>this.track({name:e,value:r,labels:t}))))}startTimer(e,t){const r=performance.now(),n=this.generateRandomKey(e);return this.pendingTimers[n]={startTime:r,labels:t},n}stopTimer(e,t){const r=this.pendingTimers[t];if(r){const n=(performance.now()-r.startTime)/1e3;this.logDebug("timer stopped",e,n),this.track({name:e,value:n,labels:r.labels}),delete this.pendingTimers[t]}}generateRandomKey(e){return`${e}-${[...Array(24)].map((()=>Math.random().toString(36)[2])).join("")}`}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}}class U{isEnabled(){return!1}getNoMetricsTracked(){return 0}consume(){return[]}track(e){}trackCounter(e){}trackTimeSinceInit(e,t){}startTimer(e,t){return""}stopTimer(e,t){}}const A=(e,t)=>({...e,value:e.value+t}),P=()=>(0,n.zG)(a.Y3((()=>performance.timeOrigin)),a.hX((e=>"number"==typeof e&&!Number.isNaN(e))));class D{sdkInitTimestamp;prefix="[Permutive]"+(self.document?"[Main]":"[Worker]");debugStyle=["color: blue"].join(";");constructor(e){this.sdkInitTimestamp=e}get timeDeltaFromInit(){return`[${(new Date).getTime()-this.sdkInitTimestamp}ms]`}log(){return console.log.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}debug(){return console.debug.bind(self.console,"%s%c%s",this.timeDeltaFromInit,this.debugStyle,this.prefix)(...arguments)}warn(){return console.warn.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}error(){return console.error.bind(self.console,this.timeDeltaFromInit,this.prefix)(...arguments)}}class O{log(){}debug(){}warn(){}error(){}}class C{crypto=self.crypto||self.msCrypto;ALG_NAME="AES-GCM";isAvailable(){var e;return!(null===(e=this.crypto)||void 0===e||!e.subtle)}generateKey(){let t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return(0,e.t_)(this.crypto.subtle.generateKey({name:this.ALG_NAME,length:256},t,["encrypt","decrypt"]))}encrypt(e,t){const[r,n]=this._encrypt(e,this.str2bytes(t));return r.then((e=>{const t=new Uint8Array(16+e.byteLength);return t.set(n,0),t.set(new Uint8Array(Uint32Array.of(e.byteLength).buffer),12),t.set(new Uint8Array(e),16),t.buffer}))}decrypt(e,t){const r=new Uint8Array(t,0,12),n=new Uint32Array(t,12,1)[0],i=t.slice(16,16+n);return this._decrypt(e,r,i).then(this.bytes2str)}_encrypt(t,r){const n=this.crypto.getRandomValues(new Uint8Array(12));return[(0,e.t_)(this.crypto.subtle.encrypt({name:this.ALG_NAME,iv:n},t,r)),n]}_decrypt(t,r,n){return(0,e.t_)(this.crypto.subtle.decrypt({name:this.ALG_NAME,iv:r},t,n))}str2bytes(e){return(new TextEncoder).encode(e).buffer}bytes2str(e){return(new TextDecoder).decode(e)}}class T{config;constructor(e){this.config=e}getNamespacedStorageKey(e){return`${this.config.stateNamespace}${e}`}}var q=r(46),M=r(694),B=r(450),R=r(327),L=r(214);var j=r(654),F=r(469);class Q{timeoutDurationInMilliseconds;maxTimeOutDurationInMilliseconds;constructor(e,t){this.timeoutDurationInMilliseconds=e,this.maxTimeOutDurationInMilliseconds=t}schedule(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.timeoutDurationInMilliseconds,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,t,r)}scheduleAccumulated(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.timeoutDurationInMilliseconds,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.maxTimeOutDurationInMilliseconds;return this.debounce(e,r,n,t)}scheduleForPageUnload(e){return(0,s.aT)(e)}debounce(t,r,n,i){let a,o,u,c=[];return l=>{i&&(u=i.concat(u??i.empty,l));const p=(0,s.b2)();c.push(p);var m;return null===(m=a)||void 0===m||m(),a=(0,e.HJ)((()=>{var e;null===(e=o)||void 0===e||e(),o=void 0;const r=t(u||l);c.forEach((e=>e.resolve(r))),u=null==i?void 0:i.empty,c=[]}),r),o||(o=(0,e.HJ)((()=>{var e;null===(e=a)||void 0===e||e(),o=void 0;const r=t(u||l);c.forEach((e=>e.resolve(r))),u=null==i?void 0:i.empty,c=[]}),n)),p.promise}}}class Y extends Error{constructor(e){super(e),this.name="StoreClosingError"}}const N="permutive-events-cache",$="permutive-events-for-page",H="[EVENTSCACHE]",Z=e=>"QuotaExceededError"===e.name||"NS_ERROR_DOM_QUOTA_REACHED"===e.name;class V{config;logger;reportError;trace;metrics;userId;makeEventsStore;eventStore;eventsCache=this.makeEventsRepository(N);eventsForPage=this.makeEventsRepository($);eventsTTLInMilliseconds;readiness;debouncedReportError=(()=>new Q(5e3,5e3).schedule((e=>this.reportError(e.errorMessage,{userId:e.userId}))))();static initialise(e,t,r,i,a,o,s){return(0,n.zG)(s(),u.UI((n=>new V(e,t,r,i,a,o,s,n))))}constructor(e,t,r,i,o,u,c,l){this.config=e,this.logger=t,this.reportError=r,this.trace=i,this.metrics=o,this.userId=u,this.makeEventsStore=c,this.eventStore=l,this.eventsTTLInMilliseconds=(0,n.zG)((0,a.ij)(this.config.eventsTTLInDays),(0,a.tS)((e=>"number"==typeof e&&e>0?(0,a.G)(24*e*3600):a.YP))),this.eventsCache.events=(0,s.HP)((()=>(0,s.PQ)((0,n.zG)(q.tD((()=>this.trace.startSpan("load_event_cache"))),q.tS((e=>(0,n.zG)(this.loadFromDisk(),q.At((t=>()=>{e.finish(),this.logDebug(`Event cache loaded, #e ${t.length}`)}))))))))),this.readiness=this.eventsCache.events().then((()=>this.migratePreviousPagesEvents())),u.onChange((()=>this.reset()))}async migratePreviousPagesEvents(){const e=this.trace.startSpan("migrate_previous_for_page_events"),t=(0,q.pE)((e=>(0,u.Y3)((()=>e.flush()),j.w)));return(0,n.zG)([this.eventsForPage,this.eventsCache],t,(0,q.UI)((t=>{const r=o.bj(t);return r.length>0&&this.reportError(`Migrate previous events failed. Got:\\n${r.join("\\n ")}`,{userId:this.userId.current}),e.finish()})),(e=>e()))}all(){return Promise.all([this.eventsCache.events(),this.eventsForPage.events()]).then(o.xH)}async add(e,t){let{persistOnDisk:r}=t;return this.logDebug("Adding to cache",e),this.eventsForPage.events=(0,n.zG)(this.eventsForPage.events,q.UI((t=>[...t,e])),s.HP),r&&this.readiness.then((()=>this.eventsForPage.flush())),e}filterEventsByWorkspace(e){return e}pruneEventsToSizeLimit(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.config.eventsCacheLimitBytes;if(r<=0||t<=r)return this.logDebug(`Event size of ${t} less than limit of ${r}`),{events:e,sizeInBytes:t};this.logDebug("Events before pruning",{count:e.length,sizeInBytes:t,byteLimit:r});let n=1,i=[...e];for(;t>r;)i.splice(0,n),n*=2,t=2*JSON.stringify(i).length;return this.logDebug("Events after pruning",{count:i.length,sizeInBytes:t}),{events:i,sizeInBytes:t}}loadFromDisk(){const e=()=>[],t=(0,n.zG)(this.eventsTTLInMilliseconds,a.EQ((()=>n.yR),(e=>o.hX((t=>e>Date.now()-t.time.getTime())))));return(0,n.zG)(q.tD((()=>(this.logLog("Loading event cache..."),this.metrics.startTimer("sdk_load_events_cache_task_duration_seconds",{})))),q.YO("loadEventsCacheTask"),q.ak("eventsFromDisk",(()=>(0,n.zG)(o.nI([this.eventStore.get(N),this.eventStore.get($)]),o.UI(u.LV((0,s.lo)([[e=>e instanceof Y,(0,n.ls)(e,q.of)],t=>(0,n.zG)(q.tD((()=>this.reportError(`Error fetching data from store. Got ${t}`,{userId:this.userId.current}))),q.tS((()=>()=>this.reset("historical"))),q.UI(e))]),(0,n.ls)(a.fS(e),q.of))),o.vP(q.qA)))),q.At((e=>{let{eventsFromDisk:t,loadEventsCacheTask:r}=e;return()=>{this.logDebug("Read events from store:",t),this.metrics.stopTimer("sdk_load_events_cache_task_duration_seconds",r)}})),q.UI((0,n.ls)((0,s.vg)("eventsFromDisk"),o.xH,this.filterEventsByWorkspace,(e=>this.pruneEventsToSizeLimit(e,2*JSON.stringify(e).length)),(e=>(this.eventsCache.sizeInBytes=e.sizeInBytes,this.eventsCache.sizeInBytesLastSuccessfulWrite=e.sizeInBytes,e.events.length>0&&(this.metrics.track({name:"sdk_events_cache_byte_total",value:e.sizeInBytes,labels:{}}),this.metrics.track({name:"sdk_events_cache_size_total",value:e.events.length,labels:{}})),e.events)),o.UI(F.k),t)))}async reset(e){return(0,n.zG)(q.tD((()=>this.logDebug("Resetting Events Cache"))),q.tS((()=>this.eventStore.deleteStore())),u.tS((()=>this.makeEventsStore())),u.Zl((t=>(this.eventStore=t,"historical"===e?x.gz(u.Ij)(this.eventsCache.reset,this.eventsForPage.flush):x.gz(u.Ij)(this.eventsCache.reset,this.eventsForPage.reset)))),u.wE((()=>()=>this.all())),u.fS((()=>q.of(K()))),(e=>e()))}getStateSizeInBytes(){return this.eventsForPage.sizeInBytes+this.eventsCache.sizeInBytes}makeEventsRepository(e){const t=(()=>{let e=Promise.resolve(p.F2((0,n.Q1)()));return t=>e=e.then(t)})(),r=e=>(0,n.zG)(q.tD((()=>this.logDebug(`Writing ${e.length} events to ${d.key}`))),q.tS((()=>this.eventStore.put(e.map(F.X),d.key))),u.UI(n.Q1)),i=(0,n.zG)(q.tD((()=>this.logDebug(`Deleting events for ${d.key}`))),q.tS((()=>this.eventStore.delete(d.key))),u.Vn(j.w)),a=(0,n.ls)(q.of,q.At((e=>()=>this.logError(`Events cache failed to put ${d.key}. Got ${e}`))),q.tS((0,s.lo)([[e=>Z(e)&&d.retryAttempts<9,()=>(0,n.zG)(q.tD((()=>{d.retryAttempts+=1,this.logDebug(`Attempt #${d.retryAttempts} to write ${d.key} to EventsStore`)})),q.tS((()=>f)),q.tS((()=>c)))],[e=>Z(e),e=>(0,n.zG)(q.tD((()=>this.logDebug(`Attempted ${d.retryAttempts} rewrite attempts and reached limit of 9 max writes.`,"Reporting QuotaExceededError to API"))),q.tS((()=>()=>this.debouncedReportError({errorMessage:`Events cache failed to put ${d.key}. Got ${e}`,userId:this.userId.current}))),q.tS((()=>u.t$(e))))],u.t$]))),o=e=>u.tD((()=>{this.logDebug(`Successfully wrote events for ${d.key} after ${d.retryAttempts} attempts`),d.retryAttempts=0,d.sizeInBytes=2*JSON.stringify(e).length,d.sizeInBytesLastSuccessfulWrite=d.sizeInBytes})),c=(0,n.zG)((()=>d.events()),q.tS((e=>(0,n.zG)(r(e),q.mU(p.EQ(a,(()=>o(e)))))))),l=(e,t)=>(0,n.zG)(e.events,q.UI((r=>{const n=2*JSON.stringify(r).length,i=this.pruneEventsToSizeLimit(r,n,t);return e.events=q.of(i.events),e.sizeInBytes=i.sizeInBytes,t-e.sizeInBytes}))),m=(e,t)=>{let[r,...i]=e;return r&&0!==t?(0,n.zG)(l(r,t),q.tS((e=>(this.logDebug(`${e} left after pruning ${r.key}`),m(i,e))))):q.of((0,n.Q1)())},f=(0,n.zG)(u.tD((()=>this.eventsForPage.sizeInBytes-this.eventsForPage.sizeInBytesLastSuccessfulWrite)),u.fX(p.DT((e=>e>0),(e=>new Error(`${this.eventsForPage.key} failed to write the same or smaller events cache of size ${e}`)))),u.tS((e=>{const t=1.2*e,r=[this.eventsCache,this.eventsForPage];return this.logDebug(`Pruning ${t} bytes from`,r),(0,n.zG)(m(r,t),u.fF)}))),d={key:e,events:q.of([]),sizeInBytes:0,sizeInBytesLastSuccessfulWrite:0,retryAttempts:0,flush:()=>(0,n.zG)(q.tD((()=>this.trace.startSpan(`write_${d.key}`))),q.tS((e=>(0,n.zG)(c,q.At((()=>()=>e.finish()))))),t),reset:()=>(0,n.zG)(q.tD((()=>{d.events=q.of([]),d.sizeInBytes=0,d.sizeInBytesLastSuccessfulWrite=0})),q.tS((()=>i)),t)};return d}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(H,...t)}logWarn(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.warn(H,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(H,...t)}logLog(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.log(H,...t)}}const K=()=>[],X=`permutive.${self.document?"main":"worker"}.`;class W{config;shouldUsePerformanceMark=!1;constructor(e){var t;this.config=e,this.shouldUsePerformanceMark=((null===(t=self.performance)||void 0===t?void 0:t.mark)&&this.config.tracingEnabled)??!1}startSpan(e){const t=this.generateSpan(e);return t.start(),{spanId:t.spanId,finish:t.finish}}measureSinceInit(t){const r=this.generateSpan(`${t}_since_init`);return r.start({startTime:e.NC}),{spanId:r.spanId,finish:r.finish}}traceTask(e){return t=>async()=>{const r=this.startSpan(e),n=await t();return r.finish(),n}}measureBetween(e,t,r){const n=this.generateSpan(e);n.start({startTime:t}),n.finish({startTime:r})}generateSpan(e){if(!this.shouldUsePerformanceMark)return{spanId:null,start:()=>{},finish:()=>{}};const{spanName:t,startMarkerName:r,endMarkerName:n}=W.generateUniqueMarkerNames(e);return{spanId:r,start:e=>{var t;return null===(t=self.performance)||void 0===t?void 0:t.mark(r,e)},finish:e=>{var i,a,o;null===(i=self.performance)||void 0===i||i.mark(n,{startTime:(null==e?void 0:e.startTime)??performance.now()}),null===(a=self.performance)||void 0===a||null===(o=a.measure)||void 0===o||o.call(a,t,r,n)}}}static generateUniqueMarkerNames(e){const t=`${X}${e}`,r=`${t}${W.generateId()}`;return{spanName:t,startMarkerName:`${r}_start`,endMarkerName:`${r}_end`}}static generateId(){return"_"+Math.random().toString(36).substr(2,9)}}class J{db;static version=3;static connect(t,i,a,o,s,c,l,p,m,f){return(0,n.zG)(u.Y3((()=>Promise.resolve().then(r.bind(r,188))),String),e.N1,u.tS((e=>e.make(t,i,a,o,s,c,l,J.version,p,m,f))),u.UI((e=>new J(Promise.resolve(e)))))}constructor(e){this.db=e}shouldThrowStoreClosingError(e){return"NotFoundError"===e.name||"InvalidStateError"===e.name}makeStoreClosingDuringOpertationError(e){return new Y(`Attempted ${e} when the current store is closing.`)}put(e,t){return(0,u.Y3)((()=>this.db.then((r=>r.put(e,t)))),(e=>{const t=(0,j.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("put"):t}))}get(e){return(0,u.Y3)((()=>this.db.then((t=>t.get(e))).then(a.ij)),(e=>{const t=(0,j.w)(e);return this.shouldThrowStoreClosingError(t)?this.makeStoreClosingDuringOpertationError("get"):t}))}delete(e){return(0,u.Y3)((()=>this.db.then((t=>t.delete(e)))),(e=>String(e)))}deleteStore(){return(0,u.Y3)((()=>this.db.then((e=>e.deleteStore()))),(e=>String(e)))}}const ee=e=>{if(!e)return"";return(0,n.zG)(e,(e=>{const t=e.length-1;return"/"===e[t]?e.slice(0,t):e}))};class te{urls;config;network;metricsCollector;logger;webClient;prefix="[API]";constructor(e,t,r,n,i){let o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:()=>a.YP;this.urls=e,this.config=t,this.network=r,this.metricsCollector=n,this.logger=i,this.webClient=o}async reportError(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:new Date;const i=(0,j.w)(e);if(this.logError("Reporting error:\\n",i),!this.config.sendClientErrors)return void this.logDebug("Send errors not enabled. Skipping");const s=(0,n.zG)(this.webClient,M.UI(a.fS((()=>{var e,t,r,n;return{domain:(null===(e=self.location)||void 0===e?void 0:e.hostname)??"",referrer:"document"in self?null===(t=self.document)||void 0===t?void 0:t.referrer:"",url:(null===(r=self.location)||void 0===r?void 0:r.href)??"",user_agent:(null===(n=navigator)||void 0===n?void 0:n.userAgent)??""}}))),M.UI((e=>{var n,a;const o={error_message:(null==i||null===(n=i.message)||void 0===n?void 0:n.toString())??"",stack_trace:null==i||null===(a=i.stack)||void 0===a?void 0:a.split("\\n")},s=t?{user_id:t}:{};return{platform:"web",sdk_version:"v20.39.0",ql_runtime_version:"v14.1.0",timestamp:r,domain:e.domain,url:ee(e.url),referrer:ee(e.referrer),user_agent:e.user_agent,error_message:o.error_message??String(i),stack_trace:o.stack_trace,...s}}))),u=e=>this.network.req({url:this.urls.getSdkErrorsUrl("/errors",a.G(this.config.sdkErrorsApiVersion)),method:"POST",payload:[e],contentType:"text/plain",dataType:"text",withCredentials:!1}),c=e=>{this.metricsCollector.trackCounter({name:"sdk_http_generic_network_request_fail_count_total",value:1,labels:{network_error_type:e}})};await(0,n.zG)([m,f],o.Ew((e=>i.name===e.errorName||i.message.indexOf(e.errorName)>=0||i.message.indexOf(e.defaultMessage)>=0)),a.g_((()=>{const e=s();return u(e).catch((0,n.ls)(j.w,(e=>this.logError(e))))}),(async e=>c(e.errorName))))}logDebug(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.debug(this.prefix,...t)}logError(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];this.logger.error(this.prefix,...t)}}const re=e=>{const{provideEnvironment:t,...r}=function(e){let t,r=!1,n=[];return{onReady:e=>{r?e(t):n.push(e)},provideEnvironment:i=>{t={events:e.eventsLookup(i),literals:e.literalsLookup(i),properties:e.propertiesLookup(i),ahoCorasick:e.ahoCorasickLookup(i),subexpressions:e.subexpressionsLookup(i),rootCompression:e.rootCompressionLookup(i)},n.forEach((e=>e(t))),n=[],r=!0}}}(e.runtimeInput),n=function(e){const t=e=>()=>{throw new Error(`${e} lookup has not been provided`)};let r=t("events"),n=t("literals"),i=t("properties"),a=t("ahoCorasick"),o=t("subexpressions"),s=t("rootCompression");function u(e){return c(e)&&!l(e)}function c(e){return Boolean(e&&"object"==typeof e&&!Array.isArray(e))}function l(e){for(const t in e)return!1;return!0}function p(e){return(t,r)=>{const n=null!=t&&null!=r?e(t,r):t||r;return null==n||c(n)&&l(n)?null:n}}function m(e){const t=(t,r)=>({result:e.r(t,r)});return{lift:(t,r)=>e.d.l(t,r),append:p(e.d.a),interpret:(r,n)=>t(n,e.d.i(r,n)),compact:e.d.c,migrate:g,m:e.a.m,z:e.a.z,r:e.r,i:e.d.i}}function f(e){return{interpret:(t,r)=>({result:e.d.i(t,r)}),compact:e.d.c}}function d(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;function n(e,t){return e&&null!=e[t]?e[t]:null}const a=i(t).reduce(n,e);return null===a?null:r(a)}function _(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return e.properties?d(e.properties,t,r):null}function v(e){const t=Object.keys(e);let r=t.length,n=new Array(r);for(;r--;)n[r]=[t[r],e[t[r]]];return n}e.lookups.onReady((e=>{const{ahoCorasick:t,events:u,literals:c,properties:l,subexpressions:p,rootCompression:m}=e;r=e=>"number"==typeof e?u[e]:e,n=e=>"number"==typeof e?c[e]:e,i=e=>"number"==typeof e?l[e]:e,a=e=>t[e],o=e=>p[e],s=e=>m[e]}));let g=e=>e,h=e=>!0;function y(e,t){function r(r){for(let n=0;n<e.length;n++){if((e[n](r)||!1)===t)return t}return!t}return r}function b(e){return y(e,!0)}function S(e){return y(e,!1)}let I=e=>t=>!e(t),w=e=>t=>t===e,G=e=>t=>t!==e,k=e=>t=>t>e,z=e=>t=>t>=e,x=e=>t=>t<e,E=e=>t=>t<=e,U=(e,t)=>r=>r>=e&&r<=t,A=e=>t=>t===n(e),P=e=>t=>t!==n(e),D=e=>new Date(e).getTime(),O=(e,t,r)=>n=>{const i=_(n,t),a=r.length;let o=!0;for(let t=0;t<a;t++){const n=r[t];if(o=e(n)(i),!o)break}return o},C=(e,t,r)=>n=>{const i=_(n,t),a=r.length;let o=!1;for(let t=0;t<a;t++){const n=r[t];if(o=e(n)(i),o)break}return o},T=(e,t)=>r=>d(r,e)===t,q=(e,t)=>r=>d(r,e)!==t,M=(e,t)=>r=>d(r,e)>t,B=(e,t)=>r=>d(r,e)>=t,R=(e,t)=>r=>{const n=d(r,e);return null!==n&&n<t},L=(e,t)=>r=>{const n=d(r,e);return null!==n&&n<=t},j=(e,t)=>r=>Et(t,d(r,e)),F=(e,t)=>r=>Ue(t)(d(r,e)),Q=(e,t)=>r=>d(r,e)===n(t),Y=(e,t)=>r=>d(r,e)!==n(t),N=(e,t)=>r=>_(r,e)===t,$=(e,t)=>r=>_(r,e)!==t,H=(e,t)=>r=>_(r,e)>t,Z=(e,t)=>r=>_(r,e)>=t,V=(e,t)=>r=>{let n=_(r,e);return null!==n&&n<t},K=(e,t)=>r=>{let n=_(r,e);return null!==n&&n<=t},X=(e,t,r)=>n=>U(t,r)(_(n,e)),W=(e,t)=>r=>Ue(t)(_(r,e)),J=(e,t)=>r=>Et(t,_(r,e)),ee=(e,t)=>r=>_(r,e)===n(t),te=(e,t)=>r=>_(r,e)!==n(t),re=(e,t)=>r=>{const n=_(r,e);return null!=n&&Array.isArray(n)&&n.indexOf(t)>=0},ne=(e,t)=>r=>{const i=_(r,e),a=n(t);return null!=i&&Array.isArray(i)&&i.indexOf(a)>=0},ie=e=>d(e,["time"],D),ae=(e,t)=>d(t,e,D),oe=e=>t=>ie(t)===e,se=e=>t=>ie(t)!==e,ue=e=>t=>ie(t)>e,ce=e=>t=>ie(t)>=e,le=e=>t=>ie(t)<e,pe=e=>t=>ie(t)<e,me=(e,t)=>r=>U(e,t)(ie(r)),fe=(e,t)=>r=>ae(e,r)===t,de=(e,t)=>r=>ae(e,r)!==t,_e=(e,t)=>r=>ae(e,r)>t,ve=(e,t)=>r=>ae(e,r)>=t,ge=(e,t)=>r=>ae(e,r)<t,he=(e,t)=>r=>ae(e,r)<t,ye=(e,t,r,n,i,a)=>o=>{const s=d(o,e,(e=>e.filter(n).map((e=>d(e,t))).reduce(i,a)));return r(null===s?a:s)},be=function(e,t,r){return ye(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:h,((e,t)=>e+t),0)},Se=function(e,t,r){return ye(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:h,((e,t)=>e*t),1)},Ie=function(e,t,r){return ye(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:h,((e,t)=>Math.min(e,t)),Number.POSITIVE_INFINITY)},we=function(e,t,r){return ye(e,t,r,arguments.length>3&&void 0!==arguments[3]?arguments[3]:h,((e,t)=>Math.max(e,t)),Number.NEGATIVE_INFINITY)},Ge=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h;return i=>{const a=d(i,e,(e=>e.filter(n)));return null===a||0===a.length?r(0):r(a.map((e=>d(e,t))).reduce(((e,t)=>e+t),0)/a.length)}};function ke(e,t,r,n){for(const i of e)if(r(i)&&t(i)===n)return n;return!n}let ze=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return n=>d(n,e,(e=>ke(e,t,r,!0)))||!1},xe=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return n=>d(n,e,(e=>ke(e,t,r,!1)))&&!0},Ee=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h;return n=>{const i=d(n,e,(e=>e.filter(r).length));return t(null===i?0:i)}},Ue=e=>t=>("string"==typeof e||"number"==typeof e)&&"string"==typeof t&&t.toLowerCase().indexOf(n(e).toLowerCase())>-1,Ae=e=>t=>null!=t&&Array.isArray(t)&&t.indexOf(e)>=0,Pe=(e,t)=>r=>Ae(t)(d(r,e)),De=(e,t)=>r=>Ae(n(t))(d(r,e)),Oe=e=>t=>Ae(n(e))(t);const Ce=(e,t)=>({l:n=>d(n,["name"])===r(e)&&t(n)?["p",1]:null,a:(e,t)=>["p",e[1]+t[1]],i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,c:e=>Array.isArray(e)&&e[1]?e:null});function Te(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return{a:{m:(e,t)=>e+t,z:0},r:(e,t)=>r(t),d:Ce(e,t)}}function qe(e,t,n,i){return{a:{m:(e,t)=>Math.min(e+t,i),z:0},r:(e,t)=>n(t),d:{l:n=>d(n,["name"])===r(e)&&t(n)?[`b${i}p`,1]:null,a:(e,t)=>[`b${i}p`,Math.min(e[1]+t[1],i)],i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:0,c:e=>Array.isArray(e)&&e[1]?e:null}}}function Me(e){return{d:{i:t=>{let r=t?Array.isArray(t)?t.slice(-1)[0]:t:0;return e(r)},c:e=>Array.isArray(e)&&e[1]?e:null}}}function Be(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;const a=Number.NEGATIVE_INFINITY;return{a:{m:(e,t)=>e>t?e:t,z:a},r:(e,t)=>i(t),d:{l:i=>d(i,["name"])===r(e)&&t(i)?["v",d(i,n)]:null,a:(e,t)=>e[1]>t[1]?e:t,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:a,c:e=>Array.isArray(e)&&e[1]!==a?e:null}}}function Re(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;const a=Number.POSITIVE_INFINITY;return{a:{m:(e,t)=>e<t?e:t,z:a},r:(e,t)=>i(t),d:{a:(e,t)=>e[1]<t[1]?e:t,l:i=>d(i,["name"])===r(e)&&t(i)?["n",d(i,n)]:null,i:e=>e?Array.isArray(e)?e.slice(-1)[0]:e:a,c:e=>Array.isArray(e)&&e[1]!==a?e:null}}}function Le(e,t,n){let i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;const a=0;let o=e=>e<0?["p2",null,-e]:["p2",e],s=e=>(e[0]||0)-(e[1]||0),u=n=>d(n,["name"])===r(e)&&t(n);return{a:{m:(e,t)=>e+t,z:a},r:(e,t)=>i(t),d:{a:(e,t)=>{const r=new Array(Math.max(e.length,t.length));r[0]="p2";for(let n=1;n<r.length;n++)r[n]=(e[n]??0)+(t[n]??0);return r},l:e=>u(e)?o(d(e,n)):null,i:e=>e?Array.isArray(e)?s("p2"===e[0]?e.slice(1):e):e:a,c:e=>Array.isArray(e)&&(e[1]||e[2])?e:null}}}function je(e,t,r,n,i){const a=d(e.getSegments(),[t,r])||!1;return i&&(n||a)&&e.setSegmentActivation(t,r,i),a}function Fe(e,t,r){return d(e.getSegments(),[t,r])||!1}const Qe=()=>null,Ye=e=>({a:{m:Qe,z:null},r:t=>e(t),d:{a:Qe,l:Qe,i:Qe,c:Qe}}),Ne=(e,t,r,n)=>Ye((i=>je(i,e,t,r,n))),$e=Ne,He=e=>Ye((t=>Fe(t,"1p",e)));function Ze(e,t,r){if(void 0===t[r])return NaN;const n=e||{};if(0==(n["1p"]||[]).length)return NaN;const i=e=>1/(1+Math.pow(Math.E,-e)),a=t[r]||{};let o=(a["1p"]||{}).const||0;return Object.keys(n).forEach((e=>{n[e].forEach((t=>{const r=(a[e]||{})[t]||0;o+=r}))})),i(o)}const Ve=(e,t)=>{let r=t=>Ze(t.getSegmentsArray(),t.getLookalikeModels(),e);return Ye((e=>t(r(e))))};function Ke(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:18e5;return n=>{function i(e,t,r){if(u(t)){if(u(r)){const n={...t,...r};for(const i in r)if(t[i]){const o=a(e,t[i],r[i]);null!=o&&(n[i]=o)}return n}return t}return r}function a(e,t,r){if(u(t)){if(u(r)){const i={...t,...r};for(const a in r)if(t[a]){const o=Array.isArray(t[a])?[e,...t[a]]:[e,t[a]],s=Array.isArray(r[a])?[e,...r[a]]:[e,r[a]],u=n.d.a(o,s);if(null!=u){const[e,...t]=u;i[a]=t}}return i}return t}return r}const o=e=>Array.isArray(e)&&"object"==typeof e[3];return{a:{m:(e,t)=>[t[0],n.a.m(null!=e[0]&&e[0][0]===t[0][0]?e[1]:n.a.z,t[1])],z:[[],n.a.z]},r:(t,r)=>n.r(t,0!==r[0].length&&r[0][0]===e(t)?r[1]:n.a.z),d:n.d.sq||{a:(e,t)=>{if(!o(e))return o(t)?t:null;if(!o(t))return o(e)?e:null;const[r,,,n]=e;return[r,"u",null,i(r,n,t[3])]},l:(i,a)=>{let o=d(i,t),s=e(a);if(o!==s)return null;let u=n.d.l(i,a);if(!(Array.isArray(u)&&u.length>1))return null;let[c,...l]=u,p=+(ie(i)||a.getCurrentTime()),m=Math.floor(p/r),f={};return f[m]={},f[m][s]=1===l.length?l[0]:l,[c,"u",null,f]},i:(t,r)=>{if(!o(t))return[[],n.a.z];let i=e(r),a=t[3];return[[i],Object.keys(a).map((e=>{var t;return null===(t=a[e])||void 0===t?void 0:t[i]})).filter(Je).map((e=>n.d.i([t[0]].concat(e),r))).reduce(n.a.m,n.a.z)]},c:g}}}}let Xe=Ke((e=>e.getCurrentSession()),["session_id"],18e5),We=Ke((e=>e.getCurrentView()),["view_id"],3e5);const Je=e=>!!e;function et(e){return function(t){return{d:{i:(r,n)=>{const i=e(n),a=(Array.isArray(r)?r:[])[3]||{},o=Object.keys(a).map((e=>{var t;const r=null===(t=a[e])||void 0===t?void 0:t[i];return Array.isArray(r)?r[0]:r})).filter(Je).reduce(((e,t)=>e+t),0);return t.d.i(["p",o],n)},c:g}}}}let tt=et((e=>e.getCurrentSession())),rt=et((e=>e.getCurrentView()));function nt(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:1;return{a:{m:(e,t)=>e.concat(t).slice(-r),z:[]},r:(t,r)=>e.r(t,r.reduce(((t,r)=>e.a.m(t,r)),e.a.z)),d:e.d.ftn||{a:(e,t)=>{const n=Object.entries({...e[3],...t[3]}).sort(((e,t)=>{let[r]=e,[n]=t;return Number(r)-Number(n)})).slice(-r);return[e[0],e[1],null,Object.fromEntries(n)]},l:(t,i)=>{const a=e.d.l(t,i),o=d(t,["time"],D)*n;return a&&[a[0],"x"+r,null,{[o]:2==a.length?a[1]:a.slice(1)}]},i:(t,r)=>t?Object.keys(t[3]||{}).sort().reverse().map((e=>Array.isArray(e)?[t[0],...t[3][e]]:[t[0],t[3][e]])).map((t=>e.d.i(t,r))):[],c:g}}}function it(e,t){return{d:{i:(t,r)=>{const n=Array.isArray(t)?t:[],i=Object.keys(n[3]||{}).reduce(((e,t)=>n[3][t]+e),0);return e.d.i(["p",i],r)},c:g}}}const at=it,ot=it;function st(e,t,r){return{a:{m:(e,t)=>e.concat(t.slice(0,r-e.length)),z:[]},r:(t,r)=>e.r(t,r.reduce(((t,r)=>e.a.m(t,r)),e.a.z)),d:nt(e,t,r,-1).d}}function ut(e,t,r){const n=r||100,i=Math.ceil(t/n),a=e=>Math.floor(e/i),o=(e,r,n)=>[a(e.getTime()-t),{[a(r)]:n}],s=(t,r)=>{const n=Math.max(t[0],r[0]),i=Object.keys(t[1]).filter((e=>e>=n)).concat(Object.keys(r[1]).filter((e=>e>=n))).filter(((e,t,r)=>r.indexOf(e)===t)).reduce(((n,i)=>{const a=e.a.m(t[1][i]||e.a.z,r[1][i]||e.a.z);return a!==e.a.z&&(n[i]=a),n}),{});return[n,i]},u=[Number.NEGATIVE_INFINITY,{}],c=e=>{const t=t=>t.map((t=>{let[r,n,i]=t;return o(e.t,i,r)})).reduce(s,u);return s(t(e.in),t(e.out))};return{a:{m:(e,t)=>{const r=e.w?c(e):e;return s(r,t)},z:u},r:(t,r)=>{const n=(r.w?c(r):r)[1];return e.r(t,Object.keys(n).reduce(((t,r)=>e.a.m(t,n[r])),e.a.z))},d:e.d.tw||{a:(e,t)=>{let[r,,...n]=e,[,,...i]=t;return[r,"w",...s(n,i)]},l:(t,r)=>{const n=e.d.l(t,r),i=e.d.i(n,r);return n&&[n[0],"w",...o(r.getCurrentTime(),d(t,["time"],D),i)]},i:(e,r)=>{const n=Array.isArray(e)?e:[],i=r.getCurrentTime(),o=a(i.getTime()-t);return[n[2]||null,Object.keys(n[3]||{}).map((e=>({[e]:n[3][e]}))).reduce(((e,t)=>(Object.keys(t).filter((e=>parseInt(e)>=o)).forEach((r=>e[r]=t[r])),e)),{})]},c:g}}}function ct(e,t,r){const n=r||100,i=Math.ceil(t/n),a=e=>Math.floor(e/i);return{d:{i:(r,n)=>{const i=Array.isArray(r)?r:[],o=n.getCurrentTime(),s=a(o.getTime()-t),u=Object.keys(i[3]||{}).reduce(((e,t)=>parseInt(t)>=s?i[3][t]+e:e),0);return e.d.i(["p",u],n)},c:g}}}function lt(e,t){return{r:(r,n)=>e(t.r(r,n)),a:t.a,d:t.d}}let pt=(e,t)=>null==e?null==t?null:{b:t}:null==t?{a:e}:{a:e,b:t};function mt(e,t){return r=>{if(!r||null==r.a&&null==r.b)return null;const n=null==r.a?void 0:e.d.c(r.a)??void 0,i=null==r.b?void 0:t.d.c(r.b)??void 0;return n===r.a&&i===r.b?r:pt(n,i)}}function ft(e,t){return{a:(r,n)=>{const i=null!=r.a&&null!=n.a?e.d.a(r.a,n.a):r.a||n.a,a=null!=r.b&&null!=n.b?t.d.a(r.b,n.b):r.b||n.b;return pt(i,a)},l:(r,n)=>pt(e.d.l(r,n),t.d.l(r,n)),i:(r,n)=>r?[e.d.i(r.a||null,n),t.d.i(r.b||null,n)]:[e.a.z,t.a.z],c:mt(e,t)}}function dt(e,t){return{r:(r,n)=>e.r(r,n[0])&&t.r(r,n[1]),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:ft(e,t)}}function _t(e,t){return{r:(r,n)=>e.r(r,n[0])||t.r(r,n[1]),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:ft(e,t)}}function vt(e,t,r,n){let i=e,a=t.map(r),o=(e,r)=>n(t[e])(r);for(let e=t.length-1;e>0&&i;e--)i.b&&(a[e]=o(e,i.b)),i.a&&1===e&&(a[0]=o(0,i.a)),i=i.a;return a}const gt=e=>function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.length-1;if(!t||null==t.a&&null==t.b)return null;const n=e[r];if(!n)return null;if(1===r)return mt(e[0],n)(t);const i=null==t.a?void 0:gt(e)(t.a,r-1)??void 0,a=null==t.b?void 0:n.d.c(t.b)??void 0;return i===t.a&&a===t.b?t:pt(i,a)};let ht=e=>t=>{function r(e){let t=e[0];for(let r=1;r<e.length;r++)t=[t,e[r]];return t}function n(e){let r=e,n=Array(t.length);for(let e=t.length-1;e>0;e--)n[e]=r[1],r=r[0];return n[0]=r,n}let i=(e,n)=>r(vt(e,t,(e=>e.a.z),(e=>t=>e.d.i(t,n))));function a(e){let t=e[0];for(let r=1;r<e.length;r++)t=pt(t,e[r]);return t}function o(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t.length-1;if(0==n)throw new Error("subquery index out of bounds.");const i=(1==n?p(t[0].d.a)(null==e?void 0:e.a,null==r?void 0:r.a):o(null==e?void 0:e.a,null==r?void 0:r.a,n-1))||void 0,a=p(t[n].d.a)(null==e?void 0:e.b,null==r?void 0:r.b)||void 0;return pt(i,a)}return{r:(r,i)=>{const a=n(i);return e(t.map(((e,t)=>()=>e.r(r,a[t]))))({})},a:{z:r(t.map((e=>e.a.z))),m:(e,i)=>{const a=n(e),o=n(i);function s(e,t,r){return null===t?r:null===r?t:e.a.m(t,r)}return r(t.map(((e,t)=>s(e,a[t],o[t]))))}},d:{a:(e,r)=>1==t.length?p(t[0].d.a)(e,r):o(e,r),l:(e,r)=>a(t.map((t=>t.d.l(e,r)))),i:(e,t)=>i(e,t),c:gt(t)}}},yt=ht(b),bt=ht(S);function St(e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];"number"==typeof n?(t+=n,r+=1):t+=1}let r=Array(t),n=0;for(let t=0;t<e.length;t++){let i=e[t];"number"==typeof i?(r.fill(e[t+1],n,n+i),t+=1,n+=i):(r[n]=i,n++)}return r}let It=e=>t=>({d:{i:(r,n)=>e(vt(r,t,(e=>e.d.i(null,n)),(e=>t=>e.d.i(t,n))).map((e=>t=>e)))({}),c:gt(t)}}),wt=It(S),Gt=It(b);function kt(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return{r:(n,i)=>r(e.r(n,i[0])+t.r(n,i[1])),a:{z:[e.a.z,t.a.z],m:(r,n)=>[e.a.m(r[0],n[0]),t.a.m(r[1],n[1])]},d:ft(e,t)}}function zt(e,t,n,i){const a="p",o=`x${i}`,s="",u=e=>e?2===e.length?[a,o,s,e[1]]:e:null,c=e=>d(e,["session_id"]),l=n=>{const i=c(n);return i&&d(n,["name"])===r(e)&&t(n)?[a,o,s,{[i]:1}]:null},m=(e,t)=>{const r=u(e),n=u(t);return r?n?[a,o,s,{...r[3],...n[3]}]:r:n};return{a:{m,z:null},r:(e,t)=>{const r=t&&t[3]&&"object"==typeof t[3]?Object.keys(t[3]).length:0;return n(r)},d:{a:p(m),l:(e,t)=>l(e),i:(e,t)=>u(e),c:g}}}let xt=e=>{let t=[];for(let r=0;r<e.length;++r){let n=e.charCodeAt(r);if(n>=55296&&n<=56319){let n=e.charCodeAt(r+1);if(n>=56320&&n<=57343){t.push(e.slice(r,r+2)),++r;continue}}t.push(e.charAt(r))}return t};function Et(e,t){let r=a(e);if(!t||!r)return!1;if(!r.length)return!0;let n=0,i=!1,o=xt(t.toLowerCase());for(let e=0;e<o.length;e++){let t=o[e];for(;n>0&&!r[n][t];)n=r[n].su?r[n].su:0;if(r[n][t]&&(n=r[n][t],i=!!r[n].te,i))break}return i}let Ut=(t,r)=>{let n,i,a=e.hash(t);if(0===r.length)return!1;if(r[0]===a)return!0;let o=0,s=r.length,u=!1;for(;(u=(n=r[i=o+(s-o>>1)])!==a)&&(n<a?o=i:s=i,!(o>=s-1)););return!u},At=(e,t)=>r=>Ut(d(r,e),t),Pt=(e,t)=>r=>Ut(_(r,e),t),Dt=(e,t)=>I(At(e,t)),Ot=(e,t)=>I(Pt(e,t));function Ct(e){return t=>o(e)(t)}function Tt(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];return s(e)(...r)}function qt(e){const t=e.split("\\t");if(0===t.length)return[];var r=t[0],n=new Array(Math.ceil(t.length/2));n[0]=t[0];for(var i=1;i<t.length/2;i+=1){const e=t[2*i-1],a=t[2*i];if(""===e)r=a;else{const t=parseInt(e);r=r.slice(0,t)+a}n[i]=r}return n}return{q:m,i_q:f,a:S,acq:dt,acqs:bt,acs:Et,acs_:j,af_i:xe,af_l:Ee,af_m:Ge,af_n:Ie,af_p:Se,af_s:be,af_u:ze,af_x:we,as:O,c:Ae,c_:Pe,cl_:De,cx:Oe,cw:Te,cb:qe,e:w,e_:T,fm:lt,frontDecode:qt,ftn:st,g:k,g_:M,ge:z,ge_:B,bse:(t,r)=>n=>{let i=d(n,t);return e.hash(i)===r},bsne:(t,r)=>n=>{let i=d(n,t);return e.hash(i)!==r},bsc:At,bsnc:Dt,bsc_:Pt,bsnc_:Ot,i_:g,ifp:He,isp:$e,itp:Ne,i_cw:Me,i_acqs:wt,i_ocqs:Gt,i_tw:ct,i_ltn:at,i_ftn:ot,i_sq:tt,i_vq:rt,k:d,l:x,l_:R,le:E,le_:L,lm:Ve,ltn:nt,mnw:Re,mxw:Be,n0:I(g),n:G,nt:I,n_:q,o:b,ocq:_t,ocqs:yt,oe:v,os:C,pacs:J,pb:X,pc:re,pc_:ne,pe:N,pg:H,pge:Z,pl:V,ple:K,pn:$,ps:W,r:Tt,ref:Ct,rle:St,s:Ue,s_:F,scq:kt,sq:Xe,dscq:zt,sw:Le,t:h,tb:me,te:oe,te_:fe,tg:ue,tg_:_e,tge:ce,tge_:ve,ti:D,tl:le,tl_:ge,tle:pe,tle_:he,tn:se,tn_:de,tw:ut,vq:We,w:A,x:P,y:ee,y_:Q,z:te,z_:Y}}({lookups:r,hash:e.hash});return t(n),{env:n,locallyLiftedQueries:e.runtimeInput.queries(n)||{},cloudLiftedQueries:"function"==typeof e.runtimeInput.interpretOnlyQueries?e.runtimeInput.interpretOnlyQueries(n):{},queriesByEvent:e.runtimeInput.eventSegments(n)||{},createCloudLiftQueries:e=>(null===eval||void 0===eval?void 0:(0,eval)(`"use strict";${e}`))(n)}};const ne=e=>{const t=ie(e.javaScriptInput),{env:r,...n}=re({hash:e.hash,runtimeInput:t});return n},ie=e=>{if(e&&"object"==typeof e)return e;throw new Error("Invalid runtime input specified.")};var ae,oe,se,ue,ce,le;const pe=(null===(ae="undefined"!=typeof globalThis?globalThis:void 0)||void 0===ae?void 0:ae.crypto)||(null===(oe="undefined"!=typeof global?global:void 0)||void 0===oe?void 0:oe.crypto)||(null===(se="undefined"!=typeof window?window:void 0)||void 0===se?void 0:se.crypto)||(null===(ue="undefined"!=typeof self?self:void 0)||void 0===ue?void 0:ue.crypto)||(null===(ce="undefined"!=typeof frames?frames:void 0)||void 0===ce||null===(le=ce[0])||void 0===le?void 0:le.crypto);let me;me=pe?e=>{const t=[];for(let r=0;r<e;r+=4)t.push(pe.getRandomValues(new Uint32Array(1))[0]);return new de(t,e)}:e=>{const t=[],r=e=>{let t=e,r=987654321;const n=4294967295;return()=>{r=36969*(65535&r)+(r>>16)&n,t=18e3*(65535&t)+(t>>16)&n;let e=(r<<16)+t&n;return e/=4294967296,e+=.5,e*(Math.random()>.5?1:-1)}};for(let n,i=0;i<e;i+=4){const e=r(4294967296*(n||Math.random()));n=987654071*e(),t.push(4294967296*e()|0)}return new de(t,e)};class fe{static create(){for(var e=arguments.length,t=new Array(e),r=0;r<e;r++)t[r]=arguments[r];return new this(...t)}mixIn(e){return Object.assign(this,e)}clone(){const e=new this.constructor;return Object.assign(e,this),e}}class de extends fe{constructor(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4*e.length;super();let r=e;if(r instanceof ArrayBuffer&&(r=new Uint8Array(r)),(r instanceof Int8Array||r instanceof Uint8ClampedArray||r instanceof Int16Array||r instanceof Uint16Array||r instanceof Int32Array||r instanceof Uint32Array||r instanceof Float32Array||r instanceof Float64Array)&&(r=new Uint8Array(r.buffer,r.byteOffset,r.byteLength)),r instanceof Uint8Array){const e=r.byteLength,t=[];for(let n=0;n<e;n+=1)t[n>>>2]|=r[n]<<24-n%4*8;this.words=t,this.sigBytes=e}else this.words=e,this.sigBytes=t}static random=me;toString(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:_e).stringify(this)}concat(e){const t=this.words,r=e.words,n=this.sigBytes,i=e.sigBytes;if(this.clamp(),n%4)for(let e=0;e<i;e+=1){const i=r[e>>>2]>>>24-e%4*8&255;t[n+e>>>2]|=i<<24-(n+e)%4*8}else for(let e=0;e<i;e+=4)t[n+e>>>2]=r[e>>>2];return this.sigBytes+=i,this}clamp(){const{words:e,sigBytes:t}=this;e[t>>>2]&=4294967295<<32-t%4*8,e.length=Math.ceil(t/4)}clone(){const e=super.clone.call(this);return e.words=this.words.slice(0),e}}const _e={stringify(e){const{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;n.push((r>>>4).toString(16)),n.push((15&r).toString(16))}return n.join("")},parse(e){const t=e.length,r=[];for(let n=0;n<t;n+=2)r[n>>>3]|=parseInt(e.substr(n,2),16)<<24-n%8*4;return new de(r,t/2)}},ve={stringify(e){const{words:t,sigBytes:r}=e,n=[];for(let e=0;e<r;e+=1){const r=t[e>>>2]>>>24-e%4*8&255;n.push(String.fromCharCode(r))}return n.join("")},parse(e){const t=e.length,r=[];for(let n=0;n<t;n+=1)r[n>>>2]|=(255&e.charCodeAt(n))<<24-n%4*8;return new de(r,t)}},ge={stringify(e){try{return decodeURIComponent(escape(ve.stringify(e)))}catch(e){throw new Error("Malformed UTF-8 data")}},parse:e=>ve.parse(unescape(encodeURIComponent(e)))};class he extends fe{constructor(){super(),this._minBufferSize=0}reset(){this._data=new de,this._nDataBytes=0}_append(e){let t=e;"string"==typeof t&&(t=ge.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes}_process(e){let t;const{_data:r,blockSize:n}=this,i=r.words,a=r.sigBytes;let o=a/(4*n);o=e?Math.ceil(o):Math.max((0|o)-this._minBufferSize,0);const s=o*n,u=Math.min(4*s,a);if(s){for(let e=0;e<s;e+=n)this._doProcessBlock(i,e);t=i.splice(0,s),r.sigBytes-=u}return new de(t,u)}clone(){const e=super.clone.call(this);return e._data=this._data.clone(),e}}class ye extends he{constructor(e){super(),this.blockSize=16,this.cfg=Object.assign(new fe,e),this.reset()}static _createHelper(e){return(t,r)=>new e(r).finalize(t)}static _createHmacHelper(e){return(t,r)=>new be(e,r).finalize(t)}reset(){super.reset.call(this),this._doReset()}update(e){return this._append(e),this._process(),this}finalize(e){e&&this._append(e);return this._doFinalize()}}class be extends fe{constructor(e,t){super();const r=new e;this._hasher=r;let n=t;"string"==typeof n&&(n=ge.parse(n));const i=r.blockSize,a=4*i;n.sigBytes>a&&(n=r.finalize(t)),n.clamp();const o=n.clone();this._oKey=o;const s=n.clone();this._iKey=s;const u=o.words,c=s.words;for(let e=0;e<i;e+=1)u[e]^=1549556828,c[e]^=909522486;o.sigBytes=a,s.sigBytes=a,this.reset()}reset(){const e=this._hasher;e.reset(),e.update(this._iKey)}update(e){return this._hasher.update(e),this}finalize(e){const t=this._hasher,r=t.finalize(e);t.reset();return t.finalize(this._oKey.clone().concat(r))}}const Se=[];class Ie extends ye{_doReset(){this._hash=new de([1732584193,4023233417,2562383102,271733878,3285377520])}_doProcessBlock(e,t){const r=this._hash.words;let n=r[0],i=r[1],a=r[2],o=r[3],s=r[4];for(let r=0;r<80;r+=1){if(r<16)Se[r]=0|e[t+r];else{const e=Se[r-3]^Se[r-8]^Se[r-14]^Se[r-16];Se[r]=e<<1|e>>>31}let u=(n<<5|n>>>27)+s+Se[r];u+=r<20?1518500249+(i&a|~i&o):r<40?1859775393+(i^a^o):r<60?(i&a|i&o|a&o)-1894007588:(i^a^o)-899497514,s=o,o=a,a=i<<30|i>>>2,i=n,n=u}r[0]=r[0]+n|0,r[1]=r[1]+i|0,r[2]=r[2]+a|0,r[3]=r[3]+o|0,r[4]=r[4]+s|0}_doFinalize(){const e=this._data,t=e.words,r=8*this._nDataBytes,n=8*e.sigBytes;return t[n>>>5]|=128<<24-n%32,t[14+(n+64>>>9<<4)]=Math.floor(r/4294967296),t[15+(n+64>>>9<<4)]=r,e.sigBytes=4*t.length,this._process(),this._hash}clone(){const e=super.clone.call(this);return e._hash=this._hash.clone(),e}}const we=ye._createHelper(Ie),Ge=(ye._createHmacHelper(Ie),{stringify(e){const{words:t,sigBytes:r}=e,n=this._map;e.clamp();const i=[];for(let e=0;e<r;e+=3){const a=(t[e>>>2]>>>24-e%4*8&255)<<16|(t[e+1>>>2]>>>24-(e+1)%4*8&255)<<8|t[e+2>>>2]>>>24-(e+2)%4*8&255;for(let t=0;t<4&&e+.75*t<r;t+=1)i.push(n.charAt(a>>>6*(3-t)&63))}const a=n.charAt(64);if(a)for(;i.length%4;)i.push(a);return i.join("")},parse(e){let t=e.length;const r=this._map;let n=this._reverseMap;if(!n){this._reverseMap=[],n=this._reverseMap;for(let e=0;e<r.length;e+=1)n[r.charCodeAt(e)]=e}const i=r.charAt(64);if(i){const r=e.indexOf(i);-1!==r&&(t=r)}return((e,t,r)=>{const n=[];let i=0;for(let a=0;a<t;a+=1)if(a%4){const t=r[e.charCodeAt(a-1)]<<a%4*2|r[e.charCodeAt(a)]>>>6-a%4*2;n[i>>>2]|=t<<24-i%4*8,i+=1}return de.create(n,i)})(e,t,n)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="});const ke=function(e){let t=a.YP;const r=a.fS((()=>{const r=e();return t=a.G(r),r}));return()=>r(t)}((()=>({metadata:{88584:"0c8b70cdb7",183817:"5d736d3aff",183818:"805c047f77",183819:"e858f6bd25",183821:"1a58305cd3",183822:"ee8a69254b",183823:"4d2a7b8f02",183824:"12ac80d254",183825:"93ffd900f1",183826:"4f8ad8a4d3",184283:"8e0ae21f90",184515:"291ce15cbd",184529:"a06c273b8a",184530:"1f78859a7b",184559:"40e367b954",184581:"50c0412a54",184848:"19e973d55b",188658:"0251fb8b33",188737:"6a58aab4db",188738:"a808b288c0",188740:"418dfb5887",188741:"20a3bd633b",188743:"832d22c109",188744:"ef50df093a",188745:"a6a3d098c3",188747:"aa0caab0a7",188748:"be39f8e427",188750:"dc36709dd8",188751:"08b9fa876a",188755:"87022b37b6",188758:"97bc8503a1",189145:"d034c63ff7",189147:"7f5eedf4c9",189157:"3232ce5784",189158:"1f9bbc2f53",189162:"a3d3433e10",189164:"e1dabe907a",189168:"fe309053c8",189200:"f7d802f7bc",189215:"cd60bd1f3a",189217:"1b778b65eb",189218:"6a407c2a1f",189219:"2589e35e00",189220:"71c0a1f8ce",189222:"bae1b27fc8",189223:"82e6286478",189225:"c9aefc9429",189227:"27c568f036",189228:"51ab46d3a2",189291:"ef90114158",190494:"15f7123324",190496:"79e79bef86",190608:"a99803d7f7",190612:"b0cf174883",190626:"e712dc23c1",190635:"7d486a7cc9",192639:"19e973d55b",192642:"2b51c8720c",192643:"c5b02c3301",192644:"1090988226",192651:"bbe6b2007d",192658:"51e611f52b",193216:"0164215a9f",193810:"edd7c40f0d",193811:"4c901f0628",195247:"36ce9457e5",196255:"0bc511d087",196280:"761c143dd3",196374:"f836caff24",196377:"2b2f3e95e4",196378:"8ca5508df1",196379:"0bc511d087",196381:"7224ade985",196382:"041761704e",196387:"698745fa99",196389:"83e9e8c3c1",196390:"a30e2db7da",196686:"87c8e97c94",196717:"8d52534fc1",196718:"2d0a1bf510",196931:"080ad463e8",196935:"a0ccac5cce",196937:"fb7f0c02f6",196963:"44908d7599",197381:"3332164893",197383:"3d69afd8b6",197384:"cd1a35817d",197385:"af9da325c9",197386:"4083189e81",197387:"ae0d651ffc",198068:"9e3c91103c",198069:"5ff133e8aa",198070:"ca1526d908",198071:"be9ac838d5",198072:"4d11395ed8",198073:"746e920fc3",198074:"f3451e0241",201119:"b531064a60",201121:"9fd4d20f86",201122:"ecf3cc53ce",201128:"181d1b3084",201136:"bf949cc7be",201500:"77278743cd",201556:"0461e9062f",201711:"eb629f987d",202001:"e4f4c76476",202002:"9ccbf806ac",202003:"97d2249d1f",203050:"d9a4c11537",204885:"35bc06f83f",204886:"e8e6e24307",208669:"7eaea647f8",208672:"dd3d5ed877",209525:"58fbdde9d5",210358:"b514d523dc",212382:"6621b205e7",212383:"7b336455b9",212384:"80b010c34b",212385:"a77a05f16c",212387:"4236c7ccfc",212388:"45a3e21426",213836:"b20f212ca6",216269:"056b61a84b",216303:"a92be9ec27",216342:"3f72771fe5",216343:"d8da8ee345",216344:"2c604d117c",217353:"677846a877",217436:"ef90114158",217437:"f4675573dc",220122:"d1a7ff8e95",220133:"84b4308c02",220134:"693c821060",220135:"70fcd41878",220142:"3144bfb764",220156:"afd2443058",221232:"e2f28d0d98",221669:"d975f4aaca",221677:"81abf1cc50",221692:"a0ef44e0fe",221696:"dbec537a4c",221744:"6744981139",221745:"53ebaa52b4",221746:"d4cc5a786e",221747:"58bb660742",221748:"ae90a3d158",221750:"a13fe27dec",221751:"1f72e68c5c",221752:"144d6b346f",221754:"2c8da9997c",221755:"c7ac90e7d4",221758:"57ad63640f",221770:"bdeca90d12",221771:"b50e2ee6b6",221772:"38fa9c555c",221774:"3de9319ac2",221776:"c7e660a45e",221777:"a1d356ee70",221779:"ac9c209c83",221783:"408052915e",221785:"8aba061925",221787:"ed55b83f82",221793:"eb98106969",221796:"3246931041",221807:"2ddb5c0e34",221812:"93be7561ed",221814:"cad23f72ee",221818:"205523c523",222288:"13a0c4fcee",222290:"677094b9b4",222332:"3b092c5462",222335:"f1b2f88669",222345:"ba1b554274",222359:"fdcaa35f3d",222360:"b9dfc842b5",222367:"beedfa6b38",231787:"c22a243e5e",232117:"7980a8edf8",233923:"d1c229e118",233924:"a73c064be4",233926:"1dc4da02c4",234008:"3d31bf410e",234259:"56a6a11f64",234748:"771aef9687",234749:"783c9e3b4a",234751:"fa5547c1dd",234761:"7f0b0a36c4"},runtime:ne({hash:function(e){return we(e).toString(Ge).slice(0,8)},javaScriptInput:{ahoCorasickLookup:e=>[],eventSegments:e=>({"!UpdateLookalikeModels":["193216","193810","193811","198068","198069","198070","198071","198072","198073","198074"],"!UpdateSecondPartyData":["183817","183818","183819","183821","183822","183823","183824","183825","183826","201556","203050","208669","208672","210358","212382","212383","212384","212385","212387","212388","220142","221746","221750","221754","221774","221779","221787","221807","221818","222345","233923","233924","234761"],"!UpdateThirdPartyData":["196255","196280","196374","196377","196378","196379","196381","196382","196387","196389","196390","196686","196717","196718","196931","196935","196937","196963","197381","197383","197384","197385","197386","197387","201119","201121","201122","201128","201136","201500","202001","202002","202003","209525","217353","220142","220156","221696","221746","221750","221754","221770","221774","221779","221787","221807","221818","222288","222290","222345","222367","232117","233923","233924","233926","234008","234259","234748","234761"],AdBreakStart:["201711"],Pageview:["184529","184559","184581","184848","189291","192639","192642","192643","192644","192651","192658","196255","196280","196374","196377","196378","196379","196381","196382","196387","196389","196390","196686","196717","196718","196931","196935","196937","196963","197381","197383","197384","197385","197386","197387","201119","201121","201122","201128","201136","201500","202001","202002","202003","204885","204886","209525","216269","216303","216342","216343","216344","217353","217436","217437","220122","220133","220134","220135","220142","220156","221232","221669","221677","221692","221696","221744","221745","221746","221747","221748","221750","221751","221752","221754","221755","221758","221770","221771","221772","221774","221776","221777","221779","221783","221785","221787","221793","221796","221807","221812","221814","221818","222288","222290","222332","222335","222345","222359","222360","222367","231787","232117","233923","233924","233926","234008","234259","234748","234749","234751","234761","88584"],PageviewComplete:["231787"],PageviewEngagement:["231787"],SegmentEntry:[],SegmentExit:[],SlotViewable:["184515"],StreamComplete:["184530","188745","190626"],StreamStart:["184283","188658","188737","188738","188740","188741","188743","188744","188745","188747","188748","188750","188751","188755","188758","189145","189147","189157","189158","189162","189164","189168","189200","189215","189217","189218","189219","189220","189222","189223","189225","189227","189228","190494","190496","190608","190612","190626","190635","195247","208669","208672","210358","212382","212383","212384","212385","212387","212388","213836"]}),eventsLookup:e=>["Pageview","StreamStart","StreamComplete"],interpretOnlyQueries:e=>({}),literalsLookup:e=>e.frontDecode("02lwsf\\t1\\t7cpau\\t\\t10037\\t1\\t11100\\t2\\t2200\\t4\\t19\\t2\\t4400\\t1\\t32200\\t2\\tftvt\\t1\\t7c6tb\\t\\t39ykdu\\t1\\tlfw48\\t\\t48g41s\\t\\t58fc2s\\t\\t67y498\\t\\t8b6tey\\t\\t9k1k0v\\t\\tBased on a Video Game\\t1\\tusiness\\t\\tExpedition X - Dem Unheimlichen auf der Spur\\t\\tFashion\\t\\tHealth\\t\\tLuxury\\t\\tMarkets\\t\\tPolitics\\t\\tSport\\t1\\ttyle\\t\\tTech\\t1\\travel\\t\\tWorld\\t\\taction\\t1\\tdhemm\\t2\\trenaline rush\\t10\\t-rush\\t2\\tventure\\t1\\tnimal behavior\\t8\\treeding\\t7\\theroes\\t7\\trescue\\t7\\ttraining\\t6\\t-heroes\\t7\\trescue\\t6\\ts\\t1\\tpocalyptic\\t1\\trabic\\t2\\tt\\t3\\tificial intelligence & robots\\t10\\t-intelligence-robots\\t1\\tthlete\\t1\\tustralian open\\t10\\t-open\\t2\\ttomotive\\t\\tbafta nominated\\t5\\t-nominated\\t2\\tking\\t6\\t shows\\t2\\tseball\\t4\\td on a book\\t11\\tcomic book\\t11\\tplay\\t5\\t-on-a-book\\t11\\tcomic-book\\t11\\tplay\\t11\\tvideo-game\\t3\\tketball\\t1\\tlockbuster\\t1\\tmw\\t1\\tooks\\t1\\tuilding & renovation\\t2\\tsiness\\t8\\t technology\\t8\\t-technology\\t2\\tying & selling\\t\\tcar\\t2\\tts\\t1\\thef\\t1\\tlassic warner bros.\\t7\\ts\\t2\\timate\\t2\\tothing\\t1\\tnntrue\\t1\\tomedian\\t5\\ty\\t6\\t-drama\\t2\\tok-off\\t4\\ting\\t7\\t shows\\t1\\tricket\\t3\\tme\\t5\\t documentary\\t4\\tinals\\t3\\ttically acclaimed\\t10\\t-acclaimed\\t1\\tulinary travel\\t8\\t-travel\\t3\\tture\\t2\\tstom build\\t6\\t-build\\t1\\tyber tech\\t2\\tcling\\t7\\t *\\t8\\tshow\\t8\\ttrack\\t\\tdark & edgy\\t4\\t-comedy\\t5\\tedgy\\t1\\teadliest catch\\t2\\tm1021\\t3\\t2021\\t3\\t3001\\t6\\t2\\t6\\t3\\t6\\t4\\t6\\t5\\t1\\tiverse cast\\t7\\t-cast\\t2\\ty\\t1\\to-it-yourself\\t2\\tcumentaries\\t10\\ty\\t2\\tgs\\t1\\trama\\t1\\tystopian-drama\\t\\te16\\t1\\tconomy\\t1\\tnergy\\t2\\tgineering\\t2\\tsemble cast\\t8\\t-cast\\t2\\ttertainment\\t1\\txtinct animal\\t8\\tspecies\\t7\\t-animal\\t3\\treme jobs\\t7\\t-jobs\\t\\tf653zc\\t1\\tamiljen lundell\\t5\\ty\\t6\\t content\\t6\\t-content\\t2\\tntasy\\t2\\tshion\\t7\\t & style\\t8\\taccessory\\t8\\tdesigner\\t8\\tindustry\\t8\\tmodeling\\t7\\t-accessory\\t8\\tdesigner\\t8\\tindustry\\t8\\tmodeling\\t8\\tstyle\\t1\\terrari\\t1\\titness\\t1\\tood\\t3\\ttball\\t8\\t (soccer)\\t9\\t*\\t2\\trmula e\\t7\\t-e\\t1\\ty0crr\\t\\tgardening\\t1\\thost\\t1\\tmc9us\\t1\\toghls\\t2\\tlden globe nominated\\t13\\twinning\\t6\\t-globe-nominated\\t13\\twin\\t3\\tf\\t2\\tnoup\\t1\\trand slam\\t\\th3adaq\\t1\\taunted\\t1\\tbi43e\\t1\\tealth\\t1\\tome\\t2\\trror\\t1\\tp9a9l\\t\\ticonic villain\\t6\\t-villain\\t1\\tkuqq1\\t1\\tsland\\t\\tj5234h\\t1\\t73g9a\\t1\\tobhd5\\t2\\turneys\\t8\\t & transformations\\t8\\t-transformations\\t\\tkids\\t1\\tpf407\\t\\tlife off the grid\\t4\\t-off-the-grid\\t4\\tstyle\\t1\\tuxury\\t\\tmagic\\t2\\trkets\\t1\\tedical marvels\\t2\\trcedes-benz\\t1\\tlb\\t1\\tockumentary\\t2\\tney\\t2\\tto gp\\t4\\t-gp\\t4\\tcross\\t4\\trcycle\\t10\\ts\\t5\\tsports\\t2\\tuntain biking\\t9\\tclimbing\\t8\\t-climbing\\t2\\tvie\\t1\\tuseum\\t3\\tic\\t1\\tysteries\\t\\tn0603d\\t1\\tature\\t6\\t documentaries\\t6\\t-documentaries\\t1\\tba\\t1\\tews\\t1\\tykkff\\t\\to42d0s\\t1\\tjps08\\t1\\tlympic games\\t7\\t-games\\t7\\ts\\t1\\trigin story\\t6\\t-story\\t1\\tscar nominated\\t5\\t-nominated\\t1\\tuter space\\t\\tpa_eye101\\t7\\t10\\t8\\t1\\t7\\t57\\t8\\t9\\t7\\t61\\t6\\t240\\t6\\t83\\t6\\t97\\t3\\tp1058\\t4\\tlk0039\\t3\\tsig00013\\t3\\ttuMA2939\\t2\\tranormal\\t10\\t & unexplained\\t1\\teriod-drama\\t2\\tt-care\\t4\\tfood\\t3\\ts\\t1\\tga tour\\t3\\t-tour\\t1\\tlot twist\\t4\\t-twist\\t1\\tolitics\\t2\\trsche\\t1\\tremier league\\t7\\t-league\\t7\\tship\\t2\\tison\\t\\treality\\t2\\tstaurant\\t10\\ts\\t4\\toration & repair\\t11\\t-repair\\t1\\th6\\t1\\tock climbing\\t4\\t-climbing\\t2\\tland garros\\t6\\t-garros\\t2\\tmance\\t1\\tugby\\t\\ts6anw8\\t1\\tatires & parodies\\t7\\t-parodies\\t1\\tcandals & lies\\t8\\t-lies\\t2\\ti-fi\\t3\\tence\\t7\\t fiction\\t7\\t-fiction\\t2\\tulpture\\t1\\tolutions\\t1\\tpace\\t5\\t & beyond\\t6\\texploration\\t6\\ttravel\\t2\\ties & agents\\t5\\t-agents\\t3\\tnoffs\\t2\\tort\\t5\\ts\\t6\\t documentaries\\t1\\ttation wagon\\t7\\t-wagon\\t2\\trong female lead\\t6\\t-female-lead\\t2\\tyle\\t1\\tuperbike\\t5\\theroes\\t5\\tnatural\\t2\\trvival\\t6\\te this\\t2\\tspense\\t\\tt1xced\\t1\\tech\\t4\\tnology & inventions\\t10\\t-inventions\\t2\\ten-drama\\t2\\tnnis\\t6\\t *\\t7\\tgrand slam\\t1\\the olympians\\t3\\t-olympians\\t3\\tme restaurant\\t5\\t-restaurant\\t2\\triller\\t8\\ts\\t1\\tour de france\\t4\\t-de-france\\t1\\transportation\\t3\\tvel\\t2\\teasure hunting\\t8\\t-hunting\\t1\\tw5\\t\\tuefa europa conference league\\t1\\tnb61l\\t2\\texplained-phenomena\\t1\\ts open\\t2\\t-open\\t\\tvehicle customization\\t8\\tparts and accessories\\t8\\trestoration\\t7\\t-restoration\\t1\\tzmgok\\t\\tw7iuu5\\t1\\tatch as a family\\t5\\t-as-a-family\\t1\\teather\\t1\\timbledon\\t1\\torld\\t1\\tww.tntsports.co.uk\\t\\tx67pfl\\t1\\tzox48\\t\\tyle5oe\\t1\\toung adult lead\\t5\\t-adult-lead\\t\\tzog97d"),propertiesLookup:e=>[["alternateId"],["page","description"],["isTestData"],["clientCustom","product"],["page","sections"],["kind"],["client","domain"],["video","seriesTitle"],["page","type"],["client","type"],["geo_info","postal_code"],["videoId"]],queries:e=>({183817:e.r(29,"F200","183817","175446","183817"),183818:e.r(29,"M100","183818","175445","183818"),183819:e.r(29,"A105","183819","175444","183819"),183821:e.r(29,"A104","183821","175443","183821"),183822:e.r(29,"A103","183822","175442","183822"),183823:e.r(29,"A102","183823","175441","183823"),183824:e.r(29,"A101","183824","175440","183824"),183825:e.r(29,"A100","183825","175439","183825"),183826:e.r(39,"discovery_dplusemea","O300","183826"),184283:e.r(23,1,e.t,e.ge(1),1),184515:e.r(40,36e5,"SlotViewable",e.t,e.ge(2),2),184529:e.r(25,1,2,!0,1),184530:e.r(23,2,e.pe(2,!0),e.ge(1),1),184559:e.r(25,2,2,!1,2),184581:e.q(e.tw(e.cb(0,e.a([e.pe(2,!1),e.pe(8,"story"),e.af_i(["properties","page","taxonomies"],e.e_(["name"],"football"),e.y_(5,291))]),e.ge(3),3),18e5)),184848:e.r(43),188658:e.r(40,24192e5,1,e.af_u(["properties","video","genres"],e.s_(5,"true-crime"),e.o([e.s_(["name"],"british crime"),e.s_(["name"],"celebrity crime"),e.s_(["name"],89),e.s_(["name"],"crimes & misdemeanors"),e.s_(["name"],"family crime"),e.s_(["name"],"notorious crimes"),e.s_(["name"],"true crime"),e.s_(["name"],"unsolved crime")])),e.ge(1),1),188737:e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.s_(5,82)),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o([e.s_(["name"],81),e.s_(["name"],82),e.s_(["name"],274)])),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o([e.y_(0,275),e.e_(0,"stand-up-comedy"),e.e_(0,"romantic-comedy"),e.e_(0,"musical-comedy"),e.e_(0,"action-comedy"),e.y_(0,104),e.e_(0,"teen-comedy"),e.y_(0,83),e.y_(0,81),e.y_(0,82)])),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(0,81),e.s_(0,82),e.s_(0,275)])),e.ge(1),1),24192e5)])),188738:e.r(30,1,["properties","video","genres"],e.ref(16),["properties","video","taxonomies"],["properties","video","taxonomies"],e.ref(16),[e.s_(0,30)]),188740:e.r(30,1,["properties","video","genres"],e.ref(28),["properties","video","taxonomies"],["properties","video","taxonomies"],e.ref(28),[e.s_(0,33),e.s_(0,34),e.s_(0,182),e.s_(0,188),e.s_(0,192),e.s_(0,"man-vs-nature"),e.s_(0,210),e.s_(0,"natural"),e.s_(0,218),e.s_(0,268),e.s_(0,302),e.s_(0,"survive-this")]),188741:e.r(31,[e.s_(["name"],88),e.s_(["name"],90),e.s_(["name"],260),e.s_(["name"],276),e.s_(["name"],304)],88,90,260,277,304,88,90,"murder",260,276,304),188743:e.r(31,[e.s_(["name"],118),e.s_(["name"],119),e.s_(["name"],200),e.s_(["name"],220)],"documentari-crime",118,119,200,220,89,"documentari crime",118,"documentary series",200,220),188744:e.r(30,1,["properties","video","genres"],e.o([e.s_(["name"],46),e.s_(["name"],70),e.s_(["name"],126),e.s_(["name"],197),e.s_(["name"],216),e.s_(["name"],231),e.s_(["name"],279),e.s_(["name"],285),e.s_(["name"],286),e.s_(["name"],287),e.s_(["name"],307)]),["properties","video","taxonomies"],["properties","video","taxonomies"],e.o([e.s_(["name"],46),e.s_(["name"],70),e.s_(["name"],197),e.s_(["name"],216),e.s_(["name"],279),e.s_(["name"],284),e.s_(["name"],307)]),[e.s_(0,47),e.s_(0,71),e.s_(0,"medical-marvels"),e.s_(0,216),e.s_(0,279),e.s_(0,284),e.s_(0,308)]),188745:e.r(30,2,["properties","video","taxonomies"],e.o([e.s_(["name"],56),e.s_(["name"],64),e.s_(["name"],87),e.s_(["name"],156),e.s_(["name"],157),e.s_(["name"],171),e.s_(["name"],219),e.s_(["name"],269),e.s_(["name"],292),e.s_(["name"],311)]),["properties","video","genres"],["properties","video","taxonomies"],e.o([e.s_(0,56),e.s_(0,64),e.s_(0,87),e.s_(0,155),e.s_(0,159),e.s_(0,"grand-slam"),e.s_(0,203),e.s_(0,219),e.s_(0,270),e.s_(0,292),e.s_(0,310)]),[e.s_(["name"],56),e.s_(["name"],64),e.s_(["name"],87),e.s_(["name"],99),e.s_(["name"],155),e.s_(["name"],158),e.s_(["name"],171),e.s_(["name"],202),e.s_(["name"],204),e.s_(["name"],219),e.s_(["name"],257),e.s_(["name"],269),e.s_(["name"],272),e.s_(["name"],291),e.s_(["name"],311)]),188747:e.r(32,1,1,1,1,1,1,1,1,[e.s_(5,"fiction"),e.s_(5,278)],[e.s_(0,47),e.s_(0,140),e.s_(0,195),e.s_(0,214),e.s_(0,"paranormal-unexplained"),e.s_(0,278),e.s_(0,281)],[e.s_(["name"],46),e.s_(["name"],195),e.s_(["name"],246),e.s_(["name"],278),e.s_(["name"],280)],46,140,195,214,246,278,280),188748:e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(0,75),e.s_(0,85),e.s_(0,94),e.s_(0,154),e.s_(0,176),e.s_(0,"kitchen"),e.s_(0,262)])),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(["name"],75),e.s_(["name"],85),e.s_(["name"],93),e.s_(["name"],154),e.s_(["name"],262)])),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o([e.s_(["name"],75),e.s_(["name"],85),e.s_(["name"],"fast food"),e.s_(["name"],"food & home"),e.s_(["name"],"food competitions"),e.s_(["name"],"food court"),e.s_(["name"],"food truck"),e.s_(["name"],262),e.s_(["name"],"seafood")])),e.ge(1),1),24192e5)])),188750:e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(21)),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(3)),e.ge(1),1),24192e5),e.tw(e.cb(1,e.ref(24),e.ge(1),1),24192e5)])),188751:e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(0,162),e.s_(0,173),e.s_(0,245),e.s_(0,328)])),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o([e.s_(["name"],162),e.s_(["name"],173),e.s_(["name"],177),e.s_(["name"],245),e.s_(["name"],"unexplained phenomena")])),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o([e.s_(0,162),e.s_(0,173),e.s_(0,177),e.s_(0,245),e.s_(0,328)])),e.ge(1),1),24192e5)])),188755:e.r(30,1,["properties","video","taxonomies"],e.o([e.s_(0,"co-viewing-parents"),e.s_(0,137),e.s_(0,189)]),["properties","video","genres"],["properties","video","genres"],e.o([e.s_(0,137),e.s_(0,189)]),[e.s_(["name"],137),e.s_(["name"],189)]),188758:e.r(30,1,["properties","video","genres"],e.o([e.s_(5,193),e.s_(5,261)]),["properties","video","genres"],["properties","video","genres"],e.y_(0,261),[e.s_(["name"],55),e.s_(["name"],86),e.s_(["name"],"game show"),e.s_(["name"],261),e.s_(["name"],"talent show"),e.s_(["name"],"talk show")]),189145:e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(0,33),e.s_(0,34),e.s_(0,134),e.s_(0,188),e.s_(0,192),e.s_(0,210),e.s_(0,268),e.s_(0,324)])),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(12)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.ref(12)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o([e.s_(0,33),e.s_(0,34),e.s_(0,134),e.s_(0,192),e.s_(0,210),e.s_(0,268),e.s_(0,324)])),e.ge(3),3),24192e5)])),189147:e.r(35,1,1,1,1,1,1,1,1,42,42,9,9),189157:e.r(34,0,5,5,0),189158:e.r(36,[e.s_(0,88),e.s_(0,105),e.s_(0,260),e.s_(0,277),e.s_(0,"sopranos"),e.s_(0,304),e.s_(0,317)],[e.s_(["name"],88),e.s_(["name"],260),e.s_(["name"],276),e.s_(["name"],304),e.s_(["name"],317)],[e.s_(["name"],88),e.s_(["name"],260),e.s_(["name"],276),e.s_(["name"],304),e.s_(["name"],318)],[e.s_(0,88),e.s_(0,260),e.s_(0,277),e.s_(0,304),e.s_(0,317)]),189162:e.r(32,3,3,3,3,3,3,3,3,[e.s_(5,116),e.s_(5,176),e.s_(5,193)],[e.s_(0,"building-renovation"),e.s_(0,"buying-selling"),e.s_(0,117),e.s_(0,161),e.s_(0,176),e.s_(0,193)],[e.s_(["name"],68),e.s_(["name"],72),e.s_(["name"],117),e.s_(["name"],"dream homes"),e.s_(["name"],161),e.s_(["name"],"home improvement"),e.s_(["name"],"home selling"),e.s_(["name"],"homesteading"),e.s_(["name"],193)],68,72,116,117,161,176,193),189164:e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(0,83),e.s_(0,122),e.s_(0,139),e.s_(0,247),e.s_(0,"romantic-drama"),e.s_(0,309)])),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(["name"],121),e.s_(["name"],138)])),e.ge(3),3),24192e5),e.tw(e.cb(1,e.ref(24),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.ref(21)),e.ge(3),3),24192e5)])),189168:e.r(37,[e.s_(0,292)],[e.s_(["name"],56),e.s_(["name"],64),e.s_(["name"],87),e.s_(["name"],100),e.s_(["name"],155),e.s_(["name"],158),e.s_(["name"],169),e.s_(["name"],251),e.s_(["name"],257),e.s_(["name"],259),e.s_(["name"],272),e.s_(["name"],291),e.s_(["name"],326)],[e.s_(0,56),e.s_(0,64),e.s_(0,87),e.s_(0,"europa-league"),e.s_(0,155),e.s_(0,159),e.s_(0,169),e.s_(0,203),e.s_(0,258),e.s_(0,259),e.s_(0,292)],"all sports",56,64,87,156,158,202,207,293),189200:e.r(38,3,3,3,3,3,e.ref(22),3,e.ref(22),3,3,56,56),189215:e.r(33,49,49,[e.s_(["name"],64),e.s_(["name"],219)],[e.s_(["name"],"basketball entertainment"),e.s_(["name"],219)]),189217:e.r(33,11,11,[e.s_(["name"],"fa trophy"),e.s_(["name"],155),e.s_(["name"],257),e.s_(["name"],259),e.s_(["name"],"uefa champions league"),e.s_(["name"],326),e.s_(["name"],"uefa europa league highlights show")],[e.s_(["name"],156),e.s_(["name"],157),e.s_(["name"],"football champions league"),e.s_(["name"],"football europa conference league"),e.s_(["name"],"football europa league"),e.s_(["name"],"football national english championship"),e.s_(["name"],"football national french championship"),e.s_(["name"],"football national italian championship")]),189218:e.r(35,1,1,1,1,1,1,1,1,4,4,18,18),189219:e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(0,71),e.s_(0,126),e.s_(0,206),e.s_(0,279),e.s_(0,284),e.s_(0,308)])),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o([e.s_(["name"],"cars & trucks"),e.s_(["name"],98),e.s_(["name"],126),e.s_(["name"],"man & medicine"),e.s_(["name"],206),e.s_(["name"],214),e.s_(["name"],231),e.s_(["name"],279),e.s_(["name"],286),e.s_(["name"],287),e.s_(["name"],"technology")])),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(["name"],70),e.s_(["name"],98),e.s_(["name"],126),e.s_(["name"],279),e.s_(["name"],285),e.s_(["name"],286),e.s_(["name"],287),e.s_(["name"],307)])),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o([e.s_(0,"cyber-tech"),e.s_(0,126),e.s_(0,279),e.s_(0,"space-beyond"),e.s_(0,"space-exploration"),e.s_(0,"space-travel"),e.s_(0,308)])),e.ge(3),3),24192e5)])),189220:e.r(35,3,3,3,3,3,3,3,3,23,23,41,41),189222:e.r(38,1,1,1,1,1,e.s_(["name"],17),1,e.s_(["name"],17),1,1,63,63),189223:e.r(34,19,50,50,19),189225:e.r(37,[e.s_(0,75),e.s_(0,85),e.s_(0,94),e.s_(0,154),e.s_(0,263),e.s_(0,316)],[e.s_(["name"],"baking competitions"),e.s_(["name"],55),e.s_(["name"],75),e.s_(["name"],85),e.s_(["name"],93),e.s_(["name"],154),e.s_(["name"],263),e.s_(["name"],315)],[e.s_(0,54),e.s_(0,75),e.s_(0,84),e.s_(0,85),e.s_(0,94),e.s_(0,154),e.s_(0,263),e.s_(0,316)],54,75,84,"cooking competitions",86,93,154,263,315),189227:e.r(35,1,1,1,1,1,1,1,1,31,31,30,30),189228:e.r(36,[e.s_(0,30),e.s_(0,"anti-heroes"),e.s_(0,43),e.s_(0,53),e.s_(0,60),e.s_(0,65),e.s_(0,77),e.s_(0,83),e.s_(0,92),e.s_(0,104),e.s_(0,105),e.s_(0,115),e.s_(0,122),e.s_(0,128),e.s_(0,139),e.s_(0,"family-crime"),e.s_(0,167),e.s_(0,168),e.s_(0,"high-school"),e.s_(0,177),e.s_(0,180),e.s_(0,211),e.s_(0,214),e.s_(0,228),e.s_(0,"original"),e.s_(0,230),e.s_(0,247),e.s_(0,254),e.s_(0,278),e.s_(0,289),e.s_(0,290),e.s_(0,297),e.s_(0,300),e.s_(0,304),e.s_(0,309),e.s_(0,338),e.s_(0,347)],[e.s_(["name"],30),e.s_(["name"],43),e.s_(["name"],52),e.s_(["name"],57),e.s_(["name"],65),e.s_(["name"],76),e.s_(["name"],77),e.s_(["name"],83),e.s_(["name"],91),e.s_(["name"],103),e.s_(["name"],"dark comedy"),e.s_(["name"],114),e.s_(["name"],"dystopian drama"),e.s_(["name"],127),e.s_(["name"],140),e.s_(["name"],165),e.s_(["name"],166),e.s_(["name"],"high school"),e.s_(["name"],177),e.s_(["name"],179),e.s_(["name"],211),e.s_(["name"],214),e.s_(["name"],227),e.s_(["name"],229),e.s_(["name"],253),e.s_(["name"],"revenge"),e.s_(["name"],271),e.s_(["name"],"romantic comedy"),e.s_(["name"],278),e.s_(["name"],288),e.s_(["name"],290),e.s_(["name"],296),e.s_(["name"],300),e.s_(["name"],301),e.s_(["name"],304),e.s_(["name"],"teen dramas"),e.s_(["name"],337),e.s_(["name"],346)],[e.s_(["name"],43),e.s_(["name"],52),e.s_(["name"],57),e.s_(["name"],65),e.s_(["name"],"classic criminals"),e.s_(["name"],76),e.s_(["name"],82),e.s_(["name"],91),e.s_(["name"],103),e.s_(["name"],114),e.s_(["name"],121),e.s_(["name"],"emmy winning"),e.s_(["name"],127),e.s_(["name"],138),e.s_(["name"],140),e.s_(["name"],165),e.s_(["name"],166),e.s_(["name"],"hbo classics"),e.s_(["name"],177),e.s_(["name"],179),e.s_(["name"],211),e.s_(["name"],227),e.s_(["name"],229),e.s_(["name"],253),e.s_(["name"],271),e.s_(["name"],278),e.s_(["name"],280),e.s_(["name"],288),e.s_(["name"],290),e.s_(["name"],296),e.s_(["name"],300),e.s_(["name"],301),e.s_(["name"],318),e.s_(["name"],337),e.s_(["name"],346)],[e.s_(0,43),e.s_(0,53),e.s_(0,60),e.s_(0,65),e.s_(0,"classic-criminals"),e.s_(0,"classic-warner-bros"),e.s_(0,82),e.s_(0,92),e.s_(0,105),e.s_(0,115),e.s_(0,121),e.s_(0,"emmy-winning"),e.s_(0,128),e.s_(0,139),e.s_(0,140),e.s_(0,"female-superhero"),e.s_(0,167),e.s_(0,168),e.s_(0,"hbo-classics"),e.s_(0,177),e.s_(0,180),e.s_(0,211),e.s_(0,228),e.s_(0,230),e.s_(0,254),e.s_(0,271),e.s_(0,278),e.s_(0,281),e.s_(0,289),e.s_(0,290),e.s_(0,297),e.s_(0,300),e.s_(0,317),e.s_(0,338),e.s_(0,347)]),189291:e.r(44),190494:e.r(26,1,10,1,10),190496:e.r(27,1,[e.s_(0,51),e.s_(0,66),e.s_(0,73),e.s_(0,97),e.s_(0,152),e.s_(0,159),e.s_(0,198),e.s_(0,203),e.s_(0,204),e.s_(0,205),e.s_(0,256),e.s_(0,265),e.s_(0,295),e.s_(0,299),e.s_(0,321),e.s_(0,334)],[e.s_(["name"],51),e.s_(["name"],66),e.s_(["name"],73),e.s_(["name"],96),e.s_(["name"],152),e.s_(["name"],158),e.s_(["name"],198),e.s_(["name"],202),e.s_(["name"],204),e.s_(["name"],205),e.s_(["name"],256),e.s_(["name"],264),e.s_(["name"],294),e.s_(["name"],299),e.s_(["name"],321),e.s_(["name"],331),e.s_(["name"],332),e.s_(["name"],333),e.s_(["name"],"vehicle sales")],[e.s_(0,51),e.s_(0,66),e.s_(0,73),e.s_(0,97),e.s_(0,152),e.s_(0,159),e.s_(0,198),e.s_(0,203),e.s_(0,204),e.s_(0,205),e.s_(0,256),e.s_(0,265),e.s_(0,295),e.s_(0,299),e.s_(0,321),e.s_(0,"vehicle-customization"),e.s_(0,"vehicle-parts-and-accessories"),e.s_(0,334),e.s_(0,"vehicle-sales")],[e.s_(["name"],"auto racing"),e.s_(["name"],51),e.s_(["name"],66),e.s_(["name"],73),e.s_(["name"],96),e.s_(["name"],"drag racing"),e.s_(["name"],152),e.s_(["name"],158),e.s_(["name"],198),e.s_(["name"],"moto gp *"),e.s_(["name"],204),e.s_(["name"],205),e.s_(["name"],"rally racing"),e.s_(["name"],264),e.s_(["name"],294),e.s_(["name"],299),e.s_(["name"],321),e.s_(["name"],331),e.s_(["name"],332),e.s_(["name"],333)]),190608:e.r(26,54,34,34,54),190612:e.r(26,36,25,36,25),190626:e.r(27,2,[e.s_(0,40),e.s_(0,41),e.s_(0,42),e.s_(0,74),e.s_(0,120),e.s_(0,132),e.s_(0,248),e.s_(0,249),e.s_(0,250)],[e.s_(["name"],"animal adoption"),e.s_(["name"],35),e.s_(["name"],36),e.s_(["name"],37),e.s_(["name"],38),e.s_(["name"],39),e.s_(["name"],42),e.s_(["name"],74),e.s_(["name"],120),e.s_(["name"],130),e.s_(["name"],131),e.s_(["name"],"pet")],[e.s_(0,"animal-adoption"),e.s_(0,"animal-behavior"),e.s_(0,"animal-breeding"),e.s_(0,40),e.s_(0,41),e.s_(0,"animal-training"),e.s_(0,42),e.s_(0,74),e.s_(0,120),e.s_(0,132),e.s_(0,"extinct-species"),e.s_(0,248),e.s_(0,249),e.s_(0,250)],[e.s_(["name"],35),e.s_(["name"],36),e.s_(["name"],37),e.s_(["name"],38),e.s_(["name"],39),e.s_(["name"],42),e.s_(["name"],74),e.s_(["name"],120),e.s_(["name"],130),e.s_(["name"],131),e.s_(["name"],"pet food"),e.s_(["name"],250)]),190635:e.q(e.ocqs([e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(33)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(["name"],100),e.s_(["name"],101),e.s_(["name"],102),e.s_(["name"],"indoor cycling"),e.s_(["name"],319)])),e.ge(1),1),e.cb(1,e.af_u(["properties","video","genres"],e.ref(33)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","genres"],e.o([e.s_(["name"],100),e.s_(["name"],101),e.s_(["name"],102),e.s_(["name"],319)])),e.ge(1),1)])),192639:e.r(43),192642:e.r(42,"football"),192643:e.r(42,"cycling"),192644:e.r(42,"golf"),192651:e.r(41,[e.e_(["name"],"nascar"),e.e_(["name"],"drag-racing"),e.e_(["name"],"formula-1"),e.e_(["name"],"supermoto"),e.y_(["name"],204),e.e_(["name"],"us-motorsport"),e.y_(["name"],207)]),192658:e.r(41,[e.e_(["name"],"snowboard"),e.e_(["name"],"snowcross"),e.e_(["name"],"ice-sledge-hockey"),e.e_(["name"],"ice-climbing"),e.e_(["name"],"nordic-combined"),e.e_(["name"],"nordic-skiing"),e.e_(["name"],"nordic-open"),e.e_(["name"],"luge"),e.e_(["name"],"skeleton"),e.e_(["name"],"bobsleigh"),e.e_(["name"],"ski-jumping"),e.e_(["name"],"biathlon"),e.e_(["name"],"speed-skating"),e.e_(["name"],"speed-skiing"),e.e_(["name"],"skiing"),e.e_(["name"],"cross-country-skiing"),e.e_(["name"],"alpine-skiing"),e.e_(["name"],"figure-skating"),e.e_(["name"],"ice-hockey"),e.e_(["name"],"winter-sports")]),193216:e.r(28,"37b55166-f671-4ecb-8e8f-9c6edbb512d2","190496",.54906875),193810:e.r(28,"e39c1195-12f5-43f7-a784-473015769fed","188748",.617974),193811:e.r(28,"e4c1a89c-a0fe-46a3-88d5-a45e64896d56","188755",.69656897),195247:e.q(e.ocqs([e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(47)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(48)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","genres"],e.ref(47)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","genres"],e.ref(48)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","taxonomies"],e.s_(5,"olympicssport")),e.ge(1),1)])),196255:e.r(17,"196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255","196255"),196280:e.r(12,[e.itp("eyeota","6533",!1,"196280"),e.itp("liveramp_DunandBradstreet","1000311026",!1,"196280"),e.itp("eyeota_bombora","13899",!1,"196280"),e.itp("liveramp_DunandBradstreet","1001640196",!1,"196280"),e.itp("eyeota","6565",!1,"196280"),e.itp("eyeota_dunbradstreet","20889",!1,"196280"),e.itp("eyeota_dunbradstreet","20757",!1,"196280"),e.itp("eyeota","34867",!1,"196280"),e.itp("eyeota","6565",!1,"196280"),e.itp("eyeota","34902",!1,"196280"),e.itp("eyeota","6563",!1,"196280"),e.itp("eyeota_dunbradstreet","20903",!1,"196280"),e.itp("eyeota","6565",!1,"196280"),e.itp("eyeota_dunbradstreet","20890",!1,"196280"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.e_(0,"2xvcrl"),e.e_(0,"6oq81h"),e.y_(0,240)])),e.ge(1),1)]),196374:e.r(12,[e.itp("liveramp_Acxiom","1003643819",!1,"196374"),e.itp("eyeota_stirista","32926",!1,"196374"),e.itp("liveramp_Acxiom","1005523959",!1,"196374"),e.itp("eyeota","35714",!1,"196374"),e.itp("liveramp_StatSocial","1006913991",!1,"196374"),e.itp("liveramp_Mastercard","1005908471",!1,"196374"),e.itp("liveramp_Mastercard","1005909131",!1,"196374"),e.itp("eyeota_dunbradstreet","39095",!1,"196374"),e.itp("liveramp_DunandBradstreet","1005070829",!1,"196374"),e.itp("eyeota_experian","28024",!1,"196374"),e.itp("liveramp_Bombora","1000096334",!1,"196374"),e.itp("eyeota_bombora","13829",!1,"196374"),e.itp("eyeota_experian","27449",!1,"196374"),e.itp("liveramp_Acxiom","300398499",!1,"196374"),e.itp("eyeota_dunbradstreet","27976",!1,"196374"),e.itp("liveramp_Bombora","1005388079",!1,"196374"),e.itp("liveramp_Alliant","1001433159",!1,"196374"),e.itp("liveramp_Acxiom","300543499",!1,"196374"),e.itp("eyeota","35281",!1,"196374"),e.itp("liveramp_Bombora","1000884229",!1,"196374"),e.itp("liveramp_Bombora","1005390479",!1,"196374"),e.itp("liveramp_Bombora","1000884569",!1,"196374"),e.itp("eyeota","35253",!1,"196374"),e.itp("liveramp_DunandBradstreet","1001640396",!1,"196374"),e.itp("eyeota_dunbradstreet","21067",!1,"196374"),e.itp("liveramp_Bombora","1005237939",!1,"196374"),e.itp("eyeota","35248",!1,"196374"),e.itp("liveramp_Bombora","1000884199",!1,"196374"),e.itp("eyeota_bombora","13829",!1,"196374"),e.itp("liveramp_Kantar","1003693969",!1,"196374"),e.itp("liveramp_ShareThis","1006582191",!1,"196374"),e.itp("liveramp_Acxiom","300398499",!1,"196374"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.e_(0,"rdxffz")),e.ge(1),1)]),196377:e.r(14,"liveramp_killi","1006991331","196377","liveramp_StatSocial","1006918711","196377","liveramp_33across","1002504436","196377","eyeota","13139","196377","liveramp_Epsilon","1000455756","196377","liveramp_Epsilon","1000998179","196377","liveramp_ShareThis","1005133739","196377","eyeota","1516","196377","liveramp_StatSocial","1006915201","196377","liveramp_Lifesight","1005447586","196377","eyeota","1516","196377","liveramp_ShareThis","1003631149","196377","eyeota","34857","196377","liveramp_ShareThis","1005133729","196377","liveramp_Stirista","1003893739","196377","liveramp_Acxiom","300146099","196377","liveramp_ShareThis","1001014819","196377","liveramp_ShareThis","1003627319","196377","eyeota","35629","196377","liveramp_33across","1002461406","196377","liveramp_killi","1007022571","196377","liveramp_Zeotap","1004585359","196377","liveramp_Stirista","1000307696","196377","liveramp_Acxiom","300158999","196377","liveramp_33across","1002504416","196377","eyeota_experian","27987","196377","liveramp_Lifesight","1005448136","196377","liveramp_Zeotap","1004465389","196377","liveramp_OnAudience","1002862026","196377","liveramp_StatSocial","1006915401","196377","eyeota","35614","196377","eyeota_experian","27985","196377","liveramp_Bombora","1005387899","196377","liveramp_Fluent","1005087969","196377","liveramp_Zeotap","1004466809","196377","liveramp_Acxiom","300170699","196377","liveramp_Experian","1004581049","196377","eyeota_experian","22831","196377","liveramp_Acxiom","300618699","196377","35325","196377","liveramp_Acxiom","300171399","196377","liveramp_Bombora","1000883989","196377","liveramp_Lifesight","1005252939","196377","liveramp_33across","1002460036","196377","eyeota","34912","196377","liveramp_Acxiom","1005525219","196377","liveramp_ShareThis","1003631149","196377","eyeota","1617","196377",[e.e_(0,"2kxy99"),e.e_(0,"mlfgqa"),e.e_(0,"lzfao2"),e.e_(0,"131130"),e.e_(0,"110000")]),196378:e.r(14,"eyeota","6555","196378","liveramp_DunandBradstreet","1001640266","196378","eyeota","6564","196378","liveramp_MeritDirect","1002714236","196378","eyeota_dunbradstreet","20907","196378","liveramp_DunandBradstreet","1000310186","196378","liveramp_MeritDirect","1000072644","196378","liveramp_IPSOS","1003132986","196378","liveramp_Bombora","1005098959","196378","liveramp_IXIDigital","1003987049","196378","liveramp_DunandBradstreet","1001640206","196378","liveramp_Bombora","1000096194","196378","liveramp_Bombora","1005251439","196378","eyeota","34892","196378","liveramp_Bombora","1005229579","196378","liveramp_MeritDirect","1006274911","196378","liveramp_Bombora","1005227109","196378","liveramp_Bombora","1000096194","196378","liveramp_Bombora","1005390079","196378","liveramp_MeritDirect","1006274911","196378","liveramp_Bombora","1005198619","196378","liveramp_Bombora","1005237819","196378","liveramp_DunandBradstreet","1001640196","196378","liveramp_MeritDirect","1002714426","196378","eyeota_dunbradstreet","20889","196378","eyeota","6565","196378","eyeota_dunbradstreet","20878","196378","liveramp_IPSOS","1003133006","196378","liveramp_Bombora","1004558969","196378","liveramp_IXIDigital","1003987059","196378","liveramp_DunandBradstreet","1001640206","196378","eyeota","6565","196378","eyeota_bombora","14273","196378","eyeota","6558","196378","eyeota_dunbradstreet","20881","196378","liveramp_Bombora","1004559019","196378","liveramp_IPSOS","1003133036","196378","liveramp_Bombora","1004559019","196378","eyeota","6559","196378","34896","196378","eyeota_dunbradstreet","20880","196378","liveramp_DunandBradstreet","1001640176","196378","liveramp_MeritDirect","1000072744","196378","liveramp_IPSOS","1003133016","196378","liveramp_DunandBradstreet","1001640206","196378","liveramp_DunandBradstreet","1000310916","196378","eyeota_bombora","14273","196378","liveramp_ShareThis","1005652221","196378",[e.y_(0,232),e.y_(0,240),e.y_(0,239),e.e_(0,"gmgpvb"),e.e_(0,"0q6h2o"),e.e_(0,"uwv2gv"),e.e_(0,"620d92")]),196379:e.r(17,"196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379","196379"),196381:e.r(22,"liveramp_Zeotap","1003814389","196381","liveramp_FluentModel","1007276341","196381","eyeota","243","196381","liveramp_StatSocial","1006911341","196381","liveramp_Stirista","1000308376","196381","liveramp_StartApp","1004305289","196381","liveramp_MeritDirect","1002713866","196381","liveramp_Experian","1004256489","196381","eyeota_experian","21467","196381","eyeota_bombora","14300","196381","liveramp_Acxiom","300335399","196381",e.ref(38)),196382:e.r(22,"liveramp_StartApp","1003725009","196382","liveramp_Experian","1004256479","196382","liveramp_ShareThis","1003555829","196382","eyeota_experian","21466","196382","eyeota_bombora","14299","196382","eyeota","300","196382","liveramp_Acxiom","10797","196382","liveramp_Epsilon","1003069926","196382","liveramp_DLG","1003696879","196382","liveramp_MeritDirect","1002713876","196382","liveramp_killi","1006992131","196382",e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,108),e.y_(0,31),e.e_(0,"o1hvg8")]))),196387:e.r(12,[e.itp("liveramp_33across","1002504596",!1,"196387"),e.itp("liveramp_Alliant","1001431289",!1,"196387"),e.itp("liveramp_ShareThis","1001142659",!1,"196387"),e.itp("liveramp_33across","1002503976",!1,"196387"),e.itp("liveramp_killi","1006991441",!1,"196387"),e.itp("liveramp_ShareThis","1004107439",!1,"196387"),e.itp("liveramp_33across","1002503976",!1,"196387"),e.itp("liveramp_Acxiom","300729199",!1,"196387"),e.itp("liveramp_Zeotap","1004230679",!1,"196387"),e.itp("liveramp_StatSocial","1006912171",!1,"196387"),e.itp("liveramp_Bombora","1000883779",!1,"196387"),e.itp("liveramp_Acxiom","300146199",!1,"196387"),e.itp("liveramp_StatSocial","1006916571",!1,"196387"),e.itp("liveramp_DLG","1003696939",!1,"196387"),e.itp("eyeota_experian","8813",!1,"196387"),e.itp("liveramp_Alliant","1001433139",!1,"196387"),e.itp("liveramp_StatSocial","1006915221",!1,"196387"),e.itp("eyeota","1522",!1,"196387"),e.itp("liveramp_Epsilon","1000455766",!1,"196387"),e.itp("eyeota_roymorgan","40900",!1,"196387"),e.itp("liveramp_StartApp","1004431719",!1,"196387"),e.itp("liveramp_ShareThis","1001600466",!1,"196387"),e.itp("liveramp_Acxiom","300347699",!1,"196387"),e.itp("eyeota_experian","8813",!1,"196387"),e.itp("eyeota_experian","27558",!1,"196387"),e.itp("liveramp_Lifesight","1005201009",!1,"196387"),e.itp("liveramp_Bombora","1005388039",!1,"196387"),e.itp("liveramp_ShareThis","1001600456",!1,"196387"),e.itp("liveramp_Acxiom","300288899",!1,"196387"),e.itp("liveramp_ShareThis","1001142659",!1,"196387"),e.itp("eyeota_roymorgan","40825",!1,"196387"),e.itp("eyeota_experian","30492",!1,"196387"),e.itp("liveramp_Acxiom","300382799",!1,"196387"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,190),e.y_(0,345),e.y_(0,31),e.e_(0,"j6mo4j"),e.e_(0,"4ea65v"),e.e_(0,"130000")])),e.ge(1),1)]),196389:e.r(12,[e.itp("liveramp_Stirista","1002959666",!1,"196389"),e.itp("eyeota_bombora","13911",!1,"196389"),e.itp("liveramp_Bombora","1000095074",!1,"196389"),e.itp("liveramp_33across","1002462246",!1,"196389"),e.itp("liveramp_ShareThis","1003629999",!1,"196389"),e.itp("liveramp_Bombora","1005387369",!1,"196389"),e.itp("liveramp_OnAudience","1002862236",!1,"196389"),e.itp("eyeota_experian","27992",!1,"196389"),e.itp("eyeota_experian","27622",!1,"196389"),e.itp("liveramp_OnAudience","1002859966",!1,"196389"),e.itp("liveramp_Acxiom","1005523679",!1,"196389"),e.itp("liveramp_Alliant","1000846836",!1,"196389"),e.itp("eyeota_bombora","14043",!1,"196389"),e.itp("liveramp_ShareThis","1001010259",!1,"196389"),e.itp("liveramp_Bombora","1002686926",!1,"196389"),e.itp("liveramp_AnalyticsIQ","1000691266",!1,"196389"),e.itp("liveramp_killi","1006992101",!1,"196389"),e.itp("eyeota","35290",!1,"196389"),e.itp("liveramp_Zeotap","1004466709",!1,"196389"),e.itp("eyeota_dunbradstreet","27974",!1,"196389"),e.itp("eyeota","35050",!1,"196389"),e.itp("liveramp_Acxiom","300068499",!1,"196389"),e.itp("eyeota","35550",!1,"196389"),e.itp("liveramp_OnAudience","1002862606",!1,"196389"),e.itp("eyeota","1609",!1,"196389"),e.itp("eyeota_experian","8795",!1,"196389"),e.itp("eyeota","35552",!1,"196389"),e.itp("eyeota","35553",!1,"196389"),e.itp("liveramp_ShareThis","1003626269",!1,"196389"),e.cb(0,e.ref(26),e.ge(1),1)]),196390:e.r(12,[e.itp("eyeota","1603",!1,"196390"),e.itp("liveramp_killi","1006832891",!1,"196390"),e.itp("liveramp_AnalyticsIQ","1000693166",!1,"196390"),e.itp("liveramp_killi","1006982781",!1,"196390"),e.itp("liveramp_Acxiom","300072999",!1,"196390"),e.itp("liveramp_MeritDirect","1002710006",!1,"196390"),e.itp("liveramp_StatSocial","1006915171",!1,"196390"),e.itp("liveramp_33across","1002504986",!1,"196390"),e.itp("liveramp_Bombora","1000095414",!1,"196390"),e.itp("liveramp_IPSOS","1002976906",!1,"196390"),e.itp("liveramp_Bombora","1005387699",!1,"196390"),e.itp("liveramp_33across","1002504986",!1,"196390"),e.itp("liveramp_33across","1002462026",!1,"196390"),e.itp("liveramp_Acxiom","300144699",!1,"196390"),e.itp("liveramp_StatSocial","1006912981",!1,"196390"),e.itp("liveramp_Yougov","1006309681",!1,"196390"),e.itp("liveramp_Zeotap","1004572879",!1,"196390"),e.itp("liveramp_Zeotap","1004466119",!1,"196390"),e.itp("liveramp_Zeotap","1004551739",!1,"196390"),e.itp("eyeota_roymorgan","40896",!1,"196390"),e.itp("liveramp_Acxiom","1005524099",!1,"196390"),e.itp("eyeota_experian","27989",!1,"196390"),e.itp("liveramp_StatSocial","1006912971",!1,"196390"),e.itp("eyeota","34722",!1,"196390"),e.itp("eyeota_experian","41464",!1,"196390"),e.itp("liveramp_StartApp","1004431869",!1,"196390"),e.itp("liveramp_Alliant","1002760276",!1,"196390"),e.itp("eyeota","34913",!1,"196390"),e.itp("liveramp_RoyMorgan","1003202339",!1,"196390"),e.itp("eyeota_experian","31331",!1,"196390"),e.itp("liveramp_Epsilon","1001001219",!1,"196390"),e.itp("eyeota_experian","22790",!1,"196390"),e.itp("liveramp_Lifesight","1005201079",!1,"196390"),e.itp("liveramp_Acxiom","300454199",!1,"196390"),e.itp("liveramp_Acxiom","300454899",!1,"196390"),e.itp("liveramp_Epsilon","1000993159",!1,"196390"),e.itp("liveramp_ShareThis","1005134049",!1,"196390"),e.itp("liveramp_StatSocial","1006912951",!1,"196390"),e.itp("liveramp_OnAudience","1002862126",!1,"196390"),e.itp("liveramp_RoyMorgan","1002212436",!1,"196390"),e.itp("eyeota","1544",!1,"196390"),e.itp("liveramp_Stirista","1003671509",!1,"196390"),e.itp("eyeota_experian","27990",!1,"196390"),e.itp("liveramp_OnAudience","1002859786",!1,"196390"),e.itp("eyeota_experian","41993",!1,"196390"),e.itp("eyeota_experian","30570",!1,"196390"),e.cb(0,e.ref(45),e.ge(1),1)]),196686:e.q(e.ocqs([e.cb(0,e.a([e.pe(2,!1),e.af_u(["properties","page","taxonomies"],e.o([e.e_(["name"],"world-sprint-championships"),e.e_(["name"],"marathon"),e.e_(["name"],"trail-running")]))]),e.ge(1),1),e.itp("eyeota","35922",!1,"196686"),e.itp("eyeota","4017",!1,"196686")])),196717:e.r(12,[e.itp("eyeota","13439",!1,"196717"),e.itp("liveramp_Zeotap","1004562079",!1,"196717"),e.itp("liveramp_Factual","1004287889",!1,"196717"),e.itp("liveramp_Epsilon","1000984999",!1,"196717"),e.itp("liveramp_StartApp","1004431249",!1,"196717"),e.itp("liveramp_Experian","1007228951",!1,"196717"),e.itp("liveramp_Zeotap","1004125689",!1,"196717"),e.itp("liveramp_Epsilon","1000467376",!1,"196717"),e.itp("eyeota_experian","22961",!1,"196717"),e.itp("eyeota_experian","22036",!1,"196717"),e.itp("liveramp_Experian","1004268939",!1,"196717"),e.itp("eyeota_experian","22035",!1,"196717"),e.itp("liveramp_AnalyticsIQ","1004391689",!1,"196717"),e.itp("liveramp_Experian","1004860809",!1,"196717"),e.itp("liveramp_AnalyticsIQ","1004391689",!1,"196717"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.e_(0,"ayd592"),e.e_(0,"3ll5dh"),e.e_(0,"uljdw0")])),e.ge(1),1)]),196718:e.r(12,[e.itp("liveramp_33across","1002504366",!1,"196718"),e.itp("liveramp_DunandBradstreet","1000311746",!1,"196718"),e.itp("eyeota_experian","23081",!1,"196718"),e.itp("eyeota_experian","27526",!1,"196718"),e.itp("eyeota","35369",!1,"196718"),e.itp("liveramp_33across","1002459966",!1,"196718"),e.itp("liveramp_ShareThis","1003624749",!1,"196718"),e.itp("eyeota_dunbradstreet","20789",!1,"196718"),e.itp("liveramp_Epsilon","1000466166",!1,"196718"),e.itp("liveramp_StatSocial","1006916581",!1,"196718"),e.itp("liveramp_Zeotap","1004465519",!1,"196718"),e.itp("liveramp_OnAudience","1002862746",!1,"196718"),e.itp("liveramp_ShareThis","1003629219",!1,"196718"),e.itp("liveramp_Zeotap","1004572989",!1,"196718"),e.itp("eyeota","6710",!1,"196718"),e.itp("liveramp_Zeotap","1004464689",!1,"196718"),e.itp("liveramp_Zeotap","1004464689",!1,"196718"),e.itp("liveramp_StatSocial","1006915081",!1,"196718"),e.itp("liveramp_OnAudience","1002862736",!1,"196718"),e.itp("liveramp_OnAudience","1002862816",!1,"196718"),e.itp("liveramp_OnAudience","1002862736",!1,"196718"),e.itp("liveramp_MeritDirect","1002716276",!1,"196718"),e.itp("liveramp_ShareThis","1003629249",!1,"196718"),e.itp("liveramp_killi","1006892421",!1,"196718"),e.itp("liveramp_OnAudience","1002862846",!1,"196718"),e.itp("liveramp_OnAudience","1002862766",!1,"196718"),e.itp("liveramp_StatSocial","1006915051",!1,"196718"),e.itp("liveramp_OnAudience","1002860376",!1,"196718"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.e_(0,"ovao4w"),e.e_(0,"626xos"),e.e_(0,"f8ncps"),e.e_(0,"116600")])),e.ge(1),1)]),196931:e.r(16,"liveramp_Bombora","1005237779","196931","liveramp_DunandBradstreet","1000311616","196931","liveramp_MeritDirect","1006274831","196931","liveramp_DunandBradstreet","1000310286","196931","liveramp_33across","1002504016","196931","35086","196931","eyeota","6634","196931","liveramp_Bombora","1000884089","196931","liveramp_DunandBradstreet","1003342629","196931","eyeota_bombora","14064","196931","liveramp_Mastercard","1005909001","196931","liveramp_33across","1002460086","196931","liveramp_ShareThis","1001010719","196931","liveramp_ShareThis","1001601306","196931","liveramp_AudienceElements","1001851136","196931","liveramp_ShareThis","1001785106","196931","liveramp_Acxiom","300148999","196931","eyeota","35698","196931","liveramp_ShareThis","1005134239","196931","liveramp_Fluent","1005087709","196931","liveramp_ShareThis","1001013529","196931","liveramp_Experian","1004268219","196931","liveramp_Bombora","1005237779","196931","liveramp_ShareThis","1006582141","196931","liveramp_ShareThis","1003624729","196931","liveramp_Experian","1004269609","196931","liveramp_Stirista","1003668639","196931","liveramp_Acxiom","300606999","196931","liveramp_Kantar","1004734949","196931","liveramp_Acxiom","300122099","196931","liveramp_Epsilon","1003068246","196931","eyeota_dunbradstreet","27895","196931","liveramp_Kantar","1004734649","196931","liveramp_Epsilon","1000985859","196931","liveramp_StatSocial","1006912551","196931",e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,234),e.y_(0,233),e.e_(0,"lh44si"),e.e_(0,"w4tily"),e.y_(0,9),e.e_(0,"as3nsn"),e.e_(0,"117700")]))),196935:e.r(12,[e.itp("liveramp_Bombora","1005238119",!1,"196935"),e.itp("liveramp_MeritDirect","1000073144",!1,"196935"),e.itp("liveramp_Bombora","1000096154",!1,"196935"),e.itp("liveramp_Bombora","1005227409",!1,"196935"),e.itp("liveramp_Bombora","1005251739",!1,"196935"),e.itp("liveramp_Bombora","1005229869",!1,"196935"),e.itp("liveramp_Bombora","1000884089",!1,"196935"),e.itp("liveramp_Bombora","1005227409",!1,"196935"),e.itp("liveramp_Bombora","1005251739",!1,"196935"),e.itp("liveramp_Bombora","1005198909",!1,"196935"),e.itp("liveramp_Bombora","1005390119",!1,"196935"),e.itp("eyeota","35087",!1,"196935"),e.itp("eyeota","6588",!1,"196935"),e.itp("eyeota","35088",!1,"196935"),e.itp("eyeota","35090",!1,"196935"),e.itp("eyeota","35089",!1,"196935"),e.itp("eyeota","35091",!1,"196935"),e.itp("liveramp_Alliant","1000853366",!1,"196935"),e.itp("liveramp_Bombora","1000096404",!1,"196935"),e.itp("liveramp_Acxiom","1923",!1,"196935"),e.itp("liveramp_StatSocial","1006911971",!1,"196935"),e.itp("liveramp_AudienceElements","1001851876",!1,"196935"),e.itp("eyeota","34881",!1,"196935"),e.itp("eyeota","34881",!1,"196935"),e.itp("liveramp_Acxiom","300068299",!1,"196935"),e.itp("liveramp_Acxiom","300122099",!1,"196935"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,234),e.y_(0,9)])),e.ge(1),1)]),196937:e.r(16,"eyeota_experian","18495","196937","eyeota_experian","16338","196937","eyeota","35578","196937","eyeota_roymorgan","40790","196937","liveramp_IXIDigital","1000089854","196937","318","196937","liveramp_Mastercard","1005909081","196937","eyeota_experian","18572","196937","liveramp_AudienceElements","1001851276","196937","liveramp_AudienceElements","1001851246","196937","liveramp_AudienceElements","1001851266","196937","liveramp_Mastercard","1005906971","196937","liveramp_CoreLogic","1000868746","196937","liveramp_AudienceElements","1001851266","196937","liveramp_CoreLogic","1000868736","196937","liveramp_Mastercard","1005909081","196937","eyeota","35578","196937","eyeota_roymorgan","40790","196937","eyeota","318","196937","eyeota_experian","18572","196937","liveramp_Alliant","1003267729","196937","liveramp_Alliant","1000846536","196937","liveramp_Acxiom","300727999","196937","liveramp_Stirista","1003670949","196937","liveramp_Acxiom","300727699","196937","eyeota_experian","16808","196937","liveramp_CACI","1004178939","196937","liveramp_CACI","1004178749","196937","eyeota_experian","30383","196937","liveramp_AudienceElements","1001850346","196937","liveramp_CoreLogic","1000868716","196937","liveramp_CoreLogic","1000868706","196937","liveramp_CoreLogic","1000868686","196937","liveramp_CoreLogic","1000868726","196937","liveramp_CoreLogic","1000868606","196937",e.ref(17)),196963:e.r(12,[e.itp("liveramp_Epsilon","1003024226",!1,"196963"),e.itp("liveramp_AudienceElements","1001850346",!1,"196963"),e.itp("eyeota","34662",!1,"196963"),e.itp("eyeota","35944",!1,"196963"),e.itp("liveramp_Zeotap","1004559769",!1,"196963"),e.itp("liveramp_Experian","1007227851",!1,"196963"),e.itp("liveramp_AudienceElements","1001851996",!1,"196963"),e.itp("eyeota","34662",!1,"196963"),e.itp("liveramp_Zeotap","1004559769",!1,"196963"),e.itp("eyeota","12777",!1,"196963"),e.itp("liveramp_Experian","1007227331",!1,"196963"),e.itp("liveramp_ShareThis","1005134329",!1,"196963"),e.itp("eyeota","34754",!1,"196963"),e.itp("eyeota","35796",!1,"196963"),e.itp("liveramp_Acxiom","277784682",!1,"196963"),e.itp("liveramp_Zeotap","1004572859",!1,"196963"),e.itp("liveramp_Acxiom","300457199",!1,"196963"),e.itp("liveramp_CoreLogic","1000869196",!1,"196963"),e.itp("liveramp_Alliant","1000846396",!1,"196963"),e.itp("liveramp_Alliant","1000847356",!1,"196963"),e.itp("liveramp_Experian","1003186999",!1,"196963"),e.itp("liveramp_Epsilon","1005045799",!1,"196963"),e.itp("liveramp_33across","1002461476",!1,"196963"),e.itp("liveramp_Factual","1004287879",!1,"196963"),e.itp("eyeota_experian","30098",!1,"196963"),e.itp("liveramp_Acxiom","115604",!1,"196963"),e.itp("liveramp_Experian","1006410031",!1,"196963"),e.itp("liveramp_AudienceElements","1001850346",!1,"196963"),e.itp("eyeota_experian","22937",!1,"196963"),e.itp("liveramp_ShareThis","1003631519",!1,"196963"),e.itp("eyeota_experian","22937",!1,"196963"),e.itp("liveramp_ShareThis","1003631179",!1,"196963"),e.itp("liveramp_AnalyticsIQ","1004391769",!1,"196963"),e.itp("liveramp_Experian","1004577949",!1,"196963"),e.itp("liveramp_IXIDigital","1000091664",!1,"196963"),e.itp("liveramp_Mastercard","1005908151",!1,"196963"),e.itp("liveramp_IXIDigital","1000092174",!1,"196963"),e.itp("liveramp_IXIDigital","1000092184",!1,"196963"),e.itp("liveramp_CoreLogic","1000868526",!1,"196963"),e.itp("liveramp_Alliant","1000851436",!1,"196963"),e.itp("liveramp_CoreLogic","1003792589",!1,"196963"),e.itp("liveramp_Alliant","1000846526",!1,"196963"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.e_(0,"111112"),e.y_(0,242),e.e_(0,"tp3p5n"),e.e_(0,"uuqwbn"),e.y_(0,237),e.y_(0,183),e.y_(0,305)])),e.ge(1),1)]),197381:e.r(12,[e.itp("eyeota","1728",!1,"197381"),e.itp("liveramp_ShareThis","1005133039",!1,"197381"),e.itp("liveramp_Mastercard","1005911421",!1,"197381"),e.itp("liveramp_Zeotap","1004652229",!1,"197381"),e.itp("liveramp_ShareThis","1003631519",!1,"197381"),e.itp("liveramp_StartApp","1004431229",!1,"197381"),e.itp("liveramp_AudienceElements","1001851996",!1,"197381"),e.itp("liveramp_Stirista","1003672989",!1,"197381"),e.itp("liveramp_Mastercard","1005908551",!1,"197381"),e.itp("liveramp_Zeotap","1004652229",!1,"197381"),e.itp("eyeota","1574",!1,"197381"),e.itp("eyeota","13438",!1,"197381"),e.itp("liveramp_Mastercard","1005907021",!1,"197381"),e.itp("liveramp_IXIDigital","1000091954",!1,"197381"),e.itp("liveramp_ShareThis","1003276329",!1,"197381"),e.itp("liveramp_Mastercard","1005063309",!1,"197381"),e.itp("liveramp_Mastercard","1005063709",!1,"197381"),e.itp("liveramp_AnalyticsIQ","1004391769",!1,"197381"),e.itp("liveramp_AudienceElements","1001850346",!1,"197381"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,183),e.y_(0,305),e.y_(0,237)])),e.ge(1),1)]),197383:e.r(12,[e.itp("liveramp_ShareThis","1006582301",!1,"197383"),e.itp("liveramp_Stirista","1000901629",!1,"197383"),e.itp("liveramp_ShareThis","1006581901",!1,"197383"),e.itp("eyeota_stirista","26052",!1,"197383"),e.itp("liveramp_Acxiom","300271699",!1,"197383"),e.itp("eyeota_dunbradstreet","20963",!1,"197383"),e.itp("eyeota","6614",!1,"197383"),e.itp("liveramp_ShareThis","1001290529",!1,"197383"),e.itp("liveramp_33across","1002504696",!1,"197383"),e.itp("eyeota_experian","31819",!1,"197383"),e.itp("liveramp_Kantar","1004780109",!1,"197383"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.e_(0,"pq1tml"),e.e_(0,"dflk2u")])),e.ge(1),1)]),197384:e.r(15,"eyeota_experian","27450","197384","liveramp_ShareThis","1003625639","197384","liveramp_ShareThis","1001014049","197384","eyeota_bombora","14059","197384","liveramp_ShareThis","1003625669","197384","eyeota_bombora","13927","197384","liveramp_MeritDirect","1002714706","197384","liveramp_MeritDirect","1006274771","197384","1005387519","197384","liveramp_Bombora","1005227159","197384","liveramp_Bombora","1005229619","197384","liveramp_ShareThis","1005134999","197384","liveramp_Bombora","1005389229","197384","liveramp_DunandBradstreet","1000311546","197384","liveramp_ShareThis","1001601516","197384","35226","197384","liveramp_Bombora","1004559069","197384","eyeota","35080","197384",e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,238),e.e_(0,"2idxpt"),e.e_(0,"belzpt"),e.e_(0,"1mdqu6"),e.e_(0,"emrsya"),e.e_(0,"c3v12m"),e.e_(0,"120004"),e.e_(0,"112208")]))),197385:e.r(13,"eyeota","12967",!1,"197385","eyeota_experian","10252",!1,"197385","liveramp_Yougov","1006302721",!1,"197385","liveramp_Yougov","1006302741",!1,"197385","liveramp_Yougov","1006302791",!1,"197385","liveramp_Yougov","1006302691",!1,"197385","liveramp_Yougov","1006302781",!1,"197385","liveramp_Bombora","1000094694",!1,"197385","eyeota","1649",!1,"197385","liveramp_StatSocial","1006912521",!1,"197385","liveramp_StatSocial","1006912381",!1,"197385","eyeota_stirista","26153",!1,"197385","liveramp_Bombora","1005388449",!1,"197385","liveramp_Acxiom","10892",!1,"197385","liveramp_ShareThis","1003626599",!1,"197385","eyeota","35789",!1,"197385","liveramp_Bombora","1004559069",!1,"197385",0,e.af_u(["properties","page","taxonomies"],e.o([e.e_(0,"5u5i6t"),e.e_(0,"ojmahg"),e.e_(0,"71lpjx"),e.e_(0,"nfgdf3"),e.e_(0,"112216"),e.e_(0,"itzk4j"),e.e_(0,"eku23b"),e.e_(0,"xj73xy"),e.e_(0,"prc9c6")])),e.ge(1),1),197386:e.r(12,[e.itp("liveramp_Yougov","1006995661",!1,"197386"),e.itp("liveramp_Yougov","1006995681",!1,"197386"),e.itp("liveramp_Yougov","1006995691",!1,"197386"),e.itp("liveramp_StatSocial","1006916721",!1,"197386"),e.itp("liveramp_Yougov","1006995671",!1,"197386"),e.itp("liveramp_Yougov","1006995671",!1,"197386"),e.itp("liveramp_OnAudience","1002861446",!1,"197386"),e.itp("liveramp_Lifesight","1005447816",!1,"197386"),e.itp("eyeota_roymorgan","40872",!1,"197386"),e.itp("liveramp_Acxiom","1004908599",!1,"197386"),e.itp("liveramp_AnalyticsIQ","1001373109",!1,"197386"),e.itp("liveramp_RoyMorgan","1003811309",!1,"197386"),e.itp("liveramp_MeritDirect","1006274801",!1,"197386"),e.itp("liveramp_Yougov","1006995691",!1,"197386"),e.itp("liveramp_Lifesight","1005447816",!1,"197386"),e.itp("liveramp_33across","1002503906",!1,"197386"),e.itp("liveramp_killi","1007022531",!1,"197386"),e.itp("eyeota","35046",!1,"197386"),e.itp("liveramp_Acxiom","1004909569",!1,"197386"),e.itp("eyeota_bombora","14276",!1,"197386"),e.itp("eyeota","64",!1,"197386"),e.itp("liveramp_OnAudience","1002861466",!1,"197386"),e.itp("liveramp_OnAudience","1002861516",!1,"197386"),e.itp("liveramp_Acxiom","300171099",!1,"197386"),e.itp("eyeota_experian","22597",!1,"197386"),e.itp("eyeota","1709",!1,"197386"),e.itp("liveramp_ShareThis","1001010009",!1,"197386"),e.itp("eyeota","64",!1,"197386"),e.itp("liveramp_MeritDirect","1006274801",!1,"197386"),e.itp("liveramp_33across","1002463456",!1,"197386"),e.itp("liveramp_OnAudience","1002863316",!1,"197386"),e.itp("eyeota_stirista","26056",!1,"197386"),e.itp("liveramp_Yougov","1006302801",!1,"197386"),e.itp("liveramp_OnAudience","1002861406",!1,"197386"),e.itp("liveramp_ShareThis","1003628959",!1,"197386"),e.itp("liveramp_33across","1002459276",!1,"197386"),e.itp("liveramp_DunandBradstreet","1001640206",!1,"197386"),e.itp("eyeota_bombora","13836",!1,"197386"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,241),e.e_(0,"yyujdp"),e.e_(0,"zddr0b"),e.e_(0,"wie93m"),e.e_(0,"io0re3"),e.e_(0,"jx3gvg"),e.e_(0,"131100")])),e.ge(1),1)]),197387:e.r(15,"liveramp_Stirista","1000302066","197387","eyeota_experian","27629","197387","liveramp_killi","1007022741","197387","liveramp_ShareThis","1005134769","197387","eyeota","276","197387","liveramp_StatSocial","1006912831","197387","eyeota","12966","197387","liveramp_Acxiom","1005523739","197387","1005237799","197387","liveramp_Epsilon","1000996619","197387","liveramp_DunandBradstreet","1001204249","197387","liveramp_Bombora","1000094764","197387","liveramp_Mastercard","1005908231","197387","liveramp_Epsilon","1000993599","197387","liveramp_Acxiom","300338499","197387","12966","197387","liveramp_Epsilon","1000997659","197387","liveramp_Epsilon","1001000679","197387",e.ref(43)),198068:e.r(28,"b635a33c-f68c-462d-8de8-5e885fd65007","183821",.7864404),198069:e.r(28,"470a8537-4314-4d62-976d-1e6dfd61ef0b","183822",.7739302),198070:e.r(28,"907ad934-0154-4f0f-aa19-281bf5009fc1","183823",.73501766),198071:e.r(28,"7a8feccd-4279-438d-ae24-d4e4db4fb2df","183824",.724422),198072:e.r(28,"1001d195-1b83-446f-832d-c746af6177ed","183825",.8424168),198073:e.r(28,"63547d5c-7a25-4cef-9c7c-672f2c69be3e","183818",.9024622),198074:e.r(28,"181b3fa0-a097-4439-92cd-f86fcf878c53","183817",.7967495),201119:e.r(13,"liveramp_Alliant","1000848126",!1,"201119","liveramp_Zeotap","1004330129",!1,"201119","liveramp_CACI","1004179139",!1,"201119","liveramp_AnalyticsIQ","1005534069",!1,"201119","liveramp_Alliant","1000848906",!1,"201119","liveramp_Zeotap","1004330199",!1,"201119","liveramp_PlaceIQ","1002437036",!1,"201119","liveramp_Zeotap","1004330209",!1,"201119","liveramp_killi","1006833131",!1,"201119","liveramp_AudienceElements","1001851146",!1,"201119","liveramp_StartApp","1004305309",!1,"201119","liveramp_StartApp","1003725019",!1,"201119","liveramp_Zeotap","1004761309",!1,"201119","eyeota","291",!1,"201119","eyeota","35438",!1,"201119","liveramp_Comscore","1004338569",!1,"201119","liveramp_Zeotap","1004761349",!1,"201119",0,e.af_u(["properties","page","taxonomies"],e.y_(0,109)),e.ge(1),1),201121:e.r(18,"1004572659","201121","1004179079","201121","1005534079","201121","1004330219","201121","liveramp_Zeotap","1004330259","201121","liveramp_PlaceIQ","1002437046","201121","liveramp_Zeotap","1004076479","201121","liveramp_killi","1006832831","201121","1004305319","201121","liveramp_StartApp","1003725029","201121","eyeota_experian","41311","201121","1004485079","201121","1004761359","201121","1004076429","201121","16683","201121","eyeota","35442","201121","liveramp_Zeotap","1004076429","201121",110),201122:e.r(18,"1004572649","201122","1004179089","201122","1005534089","201122","1004330239","201122","liveramp_PlaceIQ","1002437056","201122","liveramp_Zeotap","1004076489","201122","liveramp_killi","1006833121","201122","liveramp_StartApp","1004305329","201122","1003725039","201122","eyeota_experian","41312","201122","liveramp_Zeotap","1004485089","201122","1004572729","201122","1004076279","201122","1004076439","201122","16684","201122","liveramp_Epsilon","1003071356","201122","eyeota_bombora","14282","201122",111),201128:e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.ocqs([e.itp("liveramp_Zeotap","1004330139",!1,"201128"),e.itp("liveramp_CACI","1004179099",!1,"201128"),e.itp("liveramp_AnalyticsIQ","1005534099",!1,"201128"),e.itp("liveramp_PlaceIQ","1002437066",!1,"201128"),e.itp("liveramp_Zeotap","1004076499",!1,"201128"),e.itp("liveramp_killi","1006833071",!1,"201128"),e.itp("liveramp_StartApp","1004305339",!1,"201128"),e.itp("liveramp_StartApp","1003725049",!1,"201128"),e.itp("eyeota_experian","41313",!1,"201128"),e.itp("liveramp_Zeotap","1004572739",!1,"201128"),e.itp("liveramp_Zeotap","1004076289",!1,"201128"),e.itp("eyeota_experian","16685",!1,"201128"),e.itp("eyeota","297",!1,"201128"),e.itp("eyeota","35445",!1,"201128"),e.itp("eyeota_stirista","26137",!1,"201128"),e.itp("liveramp_ShareThis","1004107619",!1,"201128"),e.itp("eyeota_bombora","14283",!1,"201128"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.y_(0,112)),e.ge(1),1)])])),201136:e.r(13,"liveramp_CACI","1004179109",!1,"201136","liveramp_Zeotap","1004330109",!1,"201136","liveramp_Zeotap","1004572669",!1,"201136","liveramp_AnalyticsIQ","1005534109",!1,"201136","liveramp_AnalyticsIQ","1005534109",!1,"201136","liveramp_PlaceIQ","1002437076",!1,"201136","liveramp_IXIDigital","1000089234",!1,"201136","liveramp_killi","1006833191",!1,"201136","liveramp_IXIDigital","1000089214",!1,"201136","liveramp_Alliant","1000845626",!1,"201136","liveramp_Zeotap","1004330109",!1,"201136","liveramp_CACI","1004179209",!1,"201136","eyeota_experian","42021",!1,"201136","liveramp_StartApp","1004305349",!1,"201136","liveramp_Experian","1005797731",!1,"201136","liveramp_StartApp","1004305349",!1,"201136","liveramp_Acxiom","2031951348",!1,"201136",0,e.af_u(["properties","page","taxonomies"],e.y_(0,113)),e.ge(1),1),201500:e.r(12,[e.itp("eyeota","235",!1,"201500"),e.itp("eyeota","35434",!1,"201500"),e.itp("liveramp_Fluent","1006088291",!1,"201500"),e.itp("liveramp_Experian","1004256419",!1,"201500"),e.itp("liveramp_Experian","1005000139",!1,"201500"),e.itp("liveramp_Acxiom","33086",!1,"201500"),e.itp("eyeota_experian","18491",!1,"201500"),e.itp("eyeota_experian","21460",!1,"201500"),e.itp("liveramp_ShareThis","1003555819",!1,"201500"),e.itp("liveramp_killi","1006861971",!1,"201500"),e.itp("eyeota","299",!1,"201500"),e.itp("liveramp_Stirista","1000305586",!1,"201500"),e.itp("eyeota_experian","18569",!1,"201500"),e.itp("liveramp_DLG","1003696189",!1,"201500"),e.itp("liveramp_Acxiom","10786",!1,"201500"),e.itp("liveramp_ShareThis","1004108139",!1,"201500"),e.itp("liveramp_CACI","1004179119",!1,"201500"),e.itp("liveramp_Zeotap","1004330269",!1,"201500"),e.itp("liveramp_Acxiom","276943290",!1,"201500"),e.itp("liveramp_Acxiom","1404983428",!1,"201500"),e.itp("liveramp_PlaceIQ","1002437086",!1,"201500"),e.itp("eyeota_experian","41315",!1,"201500"),e.itp("eyeota_experian","22975",!1,"201500")]),201556:e.r(39,"discovery_maxemeatest","177300","201556"),201711:e.r(23,"AdBreakStart",e.t,e.ge(1),1),202001:e.r(12,[e.itp("liveramp_Alliant","1002764476",!1,"202001"),e.itp("liveramp_RoyMorgan","1004653349",!1,"202001"),e.itp("liveramp_Bombora","1005416689",!1,"202001"),e.itp("liveramp_killi","1007022731",!1,"202001"),e.itp("liveramp_killi","1007022251",!1,"202001"),e.itp("liveramp_RoyMorgan","1002214336",!1,"202001"),e.itp("eyeota_experian","22674",!1,"202001"),e.itp("liveramp_StatSocial","1006915761",!1,"202001"),e.itp("liveramp_Experian","1004258759",!1,"202001"),e.itp("liveramp_OnAudience","1002863916",!1,"202001"),e.itp("liveramp_StatSocial","1006914631",!1,"202001"),e.itp("liveramp_Acxiom","4115",!1,"202001"),e.itp("liveramp_Zeotap","1004559899",!1,"202001"),e.itp("liveramp_Fluent","1005087999",!1,"202001"),e.itp("liveramp_Epsilon","1000985009",!1,"202001"),e.itp("eyeota","1539",!1,"202001"),e.itp("liveramp_Epsilon","1000996819",!1,"202001"),e.itp("liveramp_Epsilon","1000985009",!1,"202001"),e.itp("eyeota","13253",!1,"202001"),e.itp("eyeota","1718",!1,"202001"),e.itp("liveramp_Acxiom","301128013",!1,"202001"),e.itp("liveramp_IXIDigital","1002276986",!1,"202001"),e.itp("liveramp_Alliant","1000847056",!1,"202001"),e.itp("liveramp_AnalyticsIQ","1004391739",!1,"202001"),e.itp("liveramp_AnalyticsIQ","1004391809",!1,"202001"),e.itp("liveramp_AnalyticsIQ","1004391759",!1,"202001"),e.itp("liveramp_AnalyticsIQ","1004391719",!1,"202001"),e.itp("liveramp_AnalyticsIQ","1004391679",!1,"202001"),e.itp("eyeota_experian","22962",!1,"202001"),e.itp("liveramp_Alliant","1000847056",!1,"202001"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,236),e.y_(0,15),e.y_(0,16),e.y_(0,160),e.y_(0,14),e.y_(0,0),e.y_(0,221),e.y_(0,8),e.y_(0,185),e.y_(0,215),e.y_(0,11),e.y_(0,343),e.y_(0,7)])),e.ge(1),1)]),202002:e.r(12,[e.itp("liveramp_OnAudience","1002862696",!1,"202002"),e.itp("liveramp_OnAudience","1002860086",!1,"202002"),e.itp("liveramp_OnAudience","1002862636",!1,"202002"),e.itp("liveramp_OnAudience","1002862676",!1,"202002"),e.itp("liveramp_OnAudience","1002860356",!1,"202002"),e.itp("liveramp_OnAudience","1002860266",!1,"202002"),e.itp("liveramp_OnAudience","1002860176",!1,"202002"),e.itp("liveramp_OnAudience","1002860166",!1,"202002"),e.itp("liveramp_OnAudience","1002860246",!1,"202002"),e.itp("liveramp_OnAudience","1002860286",!1,"202002"),e.itp("liveramp_Zeotap","1004464739",!1,"202002"),e.itp("liveramp_OnAudience","1002862686",!1,"202002"),e.itp("liveramp_OnAudience","1002860106",!1,"202002"),e.itp("liveramp_Lifesight","1005448056",!1,"202002"),e.itp("liveramp_OnAudience","1002860206",!1,"202002"),e.itp("liveramp_Zeotap","1005616561",!1,"202002"),e.itp("liveramp_OnAudience","1002862666",!1,"202002"),e.itp("liveramp_OnAudience","1002862646",!1,"202002"),e.itp("liveramp_StatSocial","1006915231",!1,"202002"),e.itp("liveramp_OnAudience","1002860226",!1,"202002"),e.itp("liveramp_Acxiom","300618199",!1,"202002"),e.itp("liveramp_Alliant","1000853366",!1,"202002"),e.itp("liveramp_StatSocial","1006917401",!1,"202002"),e.itp("liveramp_OnAudience","1002860256",!1,"202002"),e.itp("liveramp_Stirista","1002960106",!1,"202002"),e.itp("liveramp_Acxiom","1005524159",!1,"202002"),e.itp("liveramp_Zeotap","1005616561",!1,"202002"),e.itp("liveramp_Zeotap","1004630219",!1,"202002"),e.itp("liveramp_Zeotap","1004627389",!1,"202002"),e.itp("liveramp_Zeotap","1005616561",!1,"202002"),e.itp("liveramp_Lifesight","1005448056",!1,"202002"),e.itp("liveramp_33across","1002504906",!1,"202002"),e.itp("eyeota","35721",!1,"202002"),e.itp("liveramp_ShareThis","1001012629",!1,"202002"),e.itp("liveramp_StatSocial","1006914401",!1,"202002"),e.itp("liveramp_killi","1006991461",!1,"202002"),e.itp("liveramp_33across","1002504666",!1,"202002"),e.itp("liveramp_StartApp","1004431009",!1,"202002"),e.itp("liveramp_33across","1002504306",!1,"202002"),e.itp("liveramp_killi","1007022951",!1,"202002"),e.itp("liveramp_ShareThis","1001601306",!1,"202002"),e.itp("liveramp_AudienceElements","1001851136",!1,"202002"),e.itp("liveramp_Acxiom","300148999",!1,"202002"),e.itp("eyeota","35698",!1,"202002"),e.itp("eyeota","35709",!1,"202002"),e.itp("liveramp_33across","1002504326",!1,"202002"),e.itp("liveramp_Fluent","1005080159",!1,"202002"),e.itp("liveramp_Stirista","1003672209",!1,"202002"),e.itp("liveramp_OnAudience","1002862696",!1,"202002"),e.itp("liveramp_Stirista","1003672209",!1,"202002")]),202003:e.r(12,[e.itp("eyeota_roymorgan","40925",!1,"202003"),e.itp("eyeota_roymorgan","40924",!1,"202003"),e.itp("eyeota_roymorgan","40922",!1,"202003"),e.itp("eyeota_roymorgan","40923",!1,"202003"),e.itp("liveramp_Zeotap","1004465969",!1,"202003"),e.itp("eyeota_roymorgan","40920",!1,"202003"),e.itp("eyeota_roymorgan","40921",!1,"202003"),e.itp("eyeota_roymorgan","17257",!1,"202003"),e.itp("liveramp_33across","1002463526",!1,"202003"),e.itp("liveramp_Acxiom","15613",!1,"202003"),e.itp("liveramp_IXIDigital","1000092034",!1,"202003"),e.itp("liveramp_Epsilon","1000991559",!1,"202003"),e.itp("liveramp_StartApp","1004431089",!1,"202003"),e.itp("liveramp_Stirista","1000307426",!1,"202003"),e.itp("liveramp_33across","1002461356",!1,"202003"),e.itp("liveramp_Bombora","1005416689",!1,"202003"),e.itp("liveramp_killi","1007022731",!1,"202003"),e.itp("liveramp_killi","1007022251",!1,"202003"),e.itp("liveramp_Epsilon","1000985009",!1,"202003"),e.itp("liveramp_StatSocial","1006915761",!1,"202003"),e.itp("eyeota","1539",!1,"202003"),e.cb(0,e.ref(35),e.ge(1),1)]),203050:e.r(39,"discovery_maxemea","175445","203050"),204885:e.r(24,e.os(e.w,9,["ios","android"]),e.ge(1),1),204886:e.r(25,1,9,"web",1),208669:e.r(19,"175445","208669",51),208672:e.r(19,"175446","208672",51),209525:e.r(12,[e.itp("liveramp_Acxiom","300060099",!1,"209525"),e.itp("liveramp_killi","1007022701",!1,"209525"),e.itp("eyeota","1466",!1,"209525"),e.itp("liveramp_StatSocial","1006912421",!1,"209525"),e.itp("liveramp_Bombora","1005387459",!1,"209525"),e.itp("liveramp_Acxiom","300049599",!1,"209525"),e.itp("liveramp_Acxiom","300277299",!1,"209525"),e.itp("liveramp_StatSocial","1006913981",!1,"209525"),e.itp("liveramp_Stirista","1006894581",!1,"209525"),e.itp("eyeota","12",!1,"209525"),e.itp("eyeota","6702",!1,"209525"),e.itp("eyeota","6548",!1,"209525"),e.itp("liveramp_Acxiom","300071799",!1,"209525"),e.itp("liveramp_Acxiom","300540999",!1,"209525"),e.itp("liveramp_Zeotap","1004652279",!1,"209525"),e.itp("liveramp_Acxiom","300546899",!1,"209525"),e.itp("eyeota","1466",!1,"209525"),e.itp("liveramp_Acxiom","300532099",!1,"209525"),e.itp("liveramp_StatSocial","1006913981",!1,"209525"),e.itp("liveramp_MeritDirect","1002709616",!1,"209525"),e.itp("liveramp_ShareThis","1003629109",!1,"209525"),e.itp("eyeota","35",!1,"209525"),e.itp("eyeota","6549",!1,"209525"),e.itp("eyeota","1466",!1,"209525"),e.itp("liveramp_ShareThis","1005652001",!1,"209525"),e.itp("liveramp_Acxiom","300432102",!1,"209525"),e.itp("eyeota_experian","21725",!1,"209525"),e.itp("liveramp_Experian","1004266959",!1,"209525"),e.itp("liveramp_MeritDirect","1000072624",!1,"209525"),e.itp("liveramp_Experian","1004268879",!1,"209525"),e.itp("liveramp_ShareThis","1003629199",!1,"209525"),e.itp("eyeota_dunbradstreet","20974",!1,"209525"),e.itp("eyeota_dunbradstreet","20762",!1,"209525"),e.itp("eyeota","35715",!1,"209525"),e.itp("eyeota","45",!1,"209525"),e.itp("eyeota_bombora","13925",!1,"209525"),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o([e.e_(0,"szsbeq"),e.e_(0,"19ydr6")])),e.ge(1),1)]),210358:e.q(e.acqs([e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(["name"],87),e.s_(["name"],99),e.s_(["name"],156),e.s_(["name"],202),e.s_(["name"],207),e.s_(["name"],219),e.s_(["name"],293),e.s_(["name"],"sports documentary"),e.s_(["name"],"sports stars & stories"),e.s_(["name"],"winter sports *")])),e.ge(1),1),e.isp("discovery_maxemea","175445",!1,"210358")])),212382:e.r(21,"175445","212382"),212383:e.r(21,"175446","212383"),212384:e.r(19,"175445","212384",7),212385:e.r(19,"175446","212385",7),212387:e.r(20,"M100","212387"),212388:e.r(20,"F200","212388"),213836:e.r(0,1,e.bsc_(11,["0mjzarPg","3cz9pJxG","Co5exrtn","JGPOR68g","poDdL9Uj","xAa9Qb29"]),2,2,1,e.bsc_(11,["IAgjJ6Kl","RaeivP+N","VwbCCYgu","cDPeoRCp","jWvfN7Gy","pOxURYP+","zg5l/DDF"]),e.ge(2),2),216269:e.r(11,[e.e_(0,"kldzcy"),e.y_(0,15),e.e_(0,"itq8l3"),e.y_(0,16),e.y_(0,160),e.y_(0,14),e.y_(0,0),e.y_(0,221),e.y_(0,8),e.y_(0,185),e.y_(0,11),e.y_(0,183),e.y_(0,343),e.y_(0,305),e.y_(0,236),e.y_(0,215),e.y_(0,7)]),216303:e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.cb(0,e.ref(35),e.ge(1),1)])),216342:e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.cb(0,e.af_u(["properties","page","taxonomies"],e.y_(0,235)),e.ge(1),1)])),216343:e.r(11,[e.y_(0,234),e.y_(0,233),e.y_(0,232),e.y_(0,238),e.y_(0,240),e.y_(0,239)]),216344:e.r(11,[e.e_(0,"pa_g24"),e.y_(0,113),e.y_(0,112),e.y_(0,111),e.y_(0,110),e.y_(0,109),e.y_(0,107),e.y_(0,108),e.y_(0,242),e.y_(0,241),e.y_(0,236),e.y_(0,237),e.y_(0,235),e.y_(0,243),e.y_(0,234),e.y_(0,233),e.y_(0,232),e.y_(0,238),e.y_(0,240),e.y_(0,239)]),217353:e.r(12,[e.itp("liveramp_Experian","1003512969",!1,"217353"),e.itp("eyeota_experian","27496",!1,"217353"),e.itp("liveramp_Alliant","1003269649",!1,"217353"),e.itp("liveramp_StartApp","1004432559",!1,"217353"),e.itp("liveramp_PlaceIQ","1002439796",!1,"217353"),e.itp("liveramp_StatSocial","1006917741",!1,"217353"),e.itp("liveramp_StatSocial","1006919121",!1,"217353"),e.itp("liveramp_ShareThis","1003631269",!1,"217353"),e.itp("liveramp_ShareThis","1003626839",!1,"217353"),e.itp("liveramp_Yougov","1006281341",!1,"217353"),e.itp("liveramp_ShareThis","1001009369",!1,"217353"),e.itp("eyeota","35887",!1,"217353"),e.itp("liveramp_OnAudience","1002861786",!1,"217353"),e.itp("liveramp_ShareThis","1001014889",!1,"217353"),e.itp("liveramp_ShareThis","1001014899",!1,"217353"),e.itp("liveramp_ShareThis","1001009359",!1,"217353"),e.itp("liveramp_ShareThis","1003626689",!1,"217353"),e.itp("eyeota","35890",!1,"217353"),e.itp("liveramp_ShareThis","1001014889",!1,"217353"),e.itp("liveramp_StatSocial","1006919051",!1,"217353"),e.cb(0,e.a([e.pe(2,!1),e.af_u(["properties","page","taxonomies"],e.o([e.e_(["name"],"bellator-237"),e.e_(["name"],"mixed-martial-arts"),e.e_(["name"],"mma"),e.e_(["name"],"combat-sports"),e.e_(["name"],"ufc-308-topuria-holloway"),e.e_(["name"],"ufc")]))]),e.ge(1),1)]),217436:e.r(44),217437:e.q(e.tw(e.cb(0,e.pe(6,"www.eurosport.com"),e.ge(1),1),2592e6)),220122:e.r(24,e.a([e.pe(2,!1),e.ref(2)]),e.ge(1),1),220133:e.r(5,2,2,2,2,27,39),220134:e.r(8,2,2,2,2,322,28),220135:e.r(10,2,2,2,2),220142:e.r(1,[e.cb(0,e.ref(27),e.ge(1),1),e.cb(0,e.ref(39),e.ge(1),1),e.itp("liveramp_Bombora","1005390219",!1,"220142"),e.itp("liveramp_Bombora","1004559099",!1,"220142"),e.itp("liveramp_DunandBradstreet","1000310996",!1,"220142"),e.itp("liveramp_Bombora","1002686876",!1,"220142"),e.itp("liveramp_DunandBradstreet","1002786436",!1,"220142"),e.itp("eyeota","34820",!1,"220142"),e.itp("liveramp_DunandBradstreet","1000724676",!1,"220142"),e.itp("liveramp_StatSocial","1006912891",!1,"220142"),e.itp("liveramp_Zeotap","1004627679",!1,"220142"),e.itp("liveramp_DunandBradstreet","1002786436",!1,"220142"),e.itp("liveramp_ShareThis","1005652241",!1,"220142"),e.itp("eyeota","6531",!1,"220142"),e.isp("liveramp_Bombora_discovery","1019501641",!1,"220142"),e.isp("liveramp_Bombora_discovery","1019501621",!1,"220142"),e.isp("liveramp_Bombora_discovery","1019501631",!1,"220142"),e.isp("liveramp_Bombora_discovery","1019501601",!1,"220142"),e.isp("liveramp_Bombora_discovery","1012196511",!1,"220142"),e.isp("liveramp_Bombora_discovery","1019501641",!1,"220142"),e.isp("liveramp_Bombora_discovery","1019501631",!1,"220142"),e.isp("liveramp_Bombora_discovery","1019501601",!1,"220142"),e.isp("liveramp_Bombora_discovery","1019501601",!1,"220142")]),220156:e.r(1,[e.cb(0,e.pc_(4,322),e.ge(1),1),e.cb(0,e.y(1,28),e.ge(1),1),e.itp("liveramp_Epsilon","1000985009",!1,"220156"),e.itp("eyeota","13253",!1,"220156"),e.itp("eyeota","1718",!1,"220156"),e.itp("liveramp_Acxiom","301128013",!1,"220156"),e.itp("eyeota","1724",!1,"220156"),e.itp("eyeota","1726",!1,"220156"),e.itp("eyeota","1725",!1,"220156"),e.itp("liveramp_Alliant","1000846886",!1,"220156"),e.itp("eyeota_experian","22962",!1,"220156"),e.itp("liveramp_Epsilon","1000991539",!1,"220156"),e.itp("liveramp_killi","1007022251",!1,"220156"),e.itp("liveramp_ShareThis","1005134719",!1,"220156"),e.itp("liveramp_OnAudience","1002862306",!1,"220156"),e.itp("liveramp_Acxiom","300171299",!1,"220156")]),221232:e.q(e.tw(e.cb(0,e.a([e.pe(2,!1),e.ref(2)]),e.ge(5),5),7776e6)),221669:e.r(8,1,1,1,1,322,28),221677:e.r(5,1,1,1,1,27,39),221692:e.r(10,1,1,1,1),221696:e.r(1,[e.cb(0,e.pc_(4,129),e.ge(1),1),e.cb(0,e.ref(52),e.ge(1),1),e.itp("eyeota","13139",!1,"221696"),e.itp("liveramp_StatSocial","1006915401",!1,"221696"),e.itp("liveramp_killi","1006892411",!1,"221696"),e.itp("eyeota","35644",!1,"221696"),e.itp("liveramp_Zeotap","1004572829",!1,"221696"),e.itp("liveramp_Fluent","1005080399",!1,"221696"),e.itp("liveramp_ShareThis","1001010829",!1,"221696"),e.itp("eyeota","35629",!1,"221696"),e.itp("liveramp_Acxiom","300158899",!1,"221696"),e.itp("eyeota_bombora","14096",!1,"221696"),e.itp("eyeota_experian","30272",!1,"221696"),e.itp("eyeota","1617",!1,"221696"),e.itp("liveramp_Acxiom","300479399",!1,"221696"),e.itp("liveramp_Fluent","1005080339",!1,"221696"),e.itp("liveramp_OnAudience","1002859686",!1,"221696")]),221744:e.r(5,1,1,1,1,46,13),221745:e.r(5,2,2,2,2,46,13),221746:e.r(6,e.ref(13),"liveramp_Bombora","1000883779","221746","liveramp_Acxiom","300146199","221746","eyeota","1634","221746","liveramp_Acxiom","1005524149","221746","eyeota","13157","221746","1019668391","221746",46),221747:e.r(8,1,1,1,1,175,21),221748:e.r(8,2,2,2,2,175,21),221750:e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs([e.cb(0,e.pc_(4,175),e.ge(1),1),e.cb(0,e.y(1,21),e.ge(1),1),e.itp("liveramp_Acxiom","300148999",!1,"221750"),e.itp("liveramp_Acxiom","300082010",!1,"221750"),e.itp("liveramp_Acxiom","1005524159",!1,"221750"),e.itp("eyeota","35721",!1,"221750"),e.itp("liveramp_Acxiom","300728699",!1,"221750"),e.isp("liveramp_Bombora_discovery","1012196441",!1,"221750"),e.isp("liveramp_Bombora_discovery","1012197101",!1,"221750")])])),221751:e.r(8,1,1,1,1,194,22),221752:e.r(8,2,2,2,2,194,22),221754:e.r(9,"277784682","221754","eyeota","1728","221754","eyeota","35944","221754","liveramp_ShareThis","1001266389","221754","1012196451","221754","1012196601","221754","1012196511","221754",194,22),221755:e.r(8,1,1,1,1,255,24),221758:e.r(8,2,2,2,2,255,24),221770:e.r(3,e.itp("eyeota","1666",!1,"221770"),e.pc_(4,255),e.y(1,24),"liveramp_Acxiom","1252","221770","liveramp_Alliant","1000848116","221770","liveramp_Acxiom","300435399","221770"),221771:e.r(8,1,1,1,1,306,27),221772:e.r(8,2,2,2,2,306,27),221774:e.r(9,"1005523699","221774","liveramp_Acxiom","1003645739","221774","liveramp_Acxiom","300147199","221774","eyeota","1709","221774","1019501621","221774","1012196911","221774","1012196471","221774",306,27),221776:e.r(7,1,1,1,1),221777:e.r(7,2,2,2,2),221779:e.r(6,e.y(1,25),"liveramp_Acxiom","1004216369","221779","eyeota","6721","221779","liveramp_Acxiom","4113","221779","eyeota","13252","221779","liveramp_Acxiom","300070099","221779","1019668411","221779",15),221783:e.r(5,1,1,1,1,20,29),221785:e.r(5,2,2,2,2,20,29),221787:e.r(3,e.isp("liveramp_Bombora_discovery","1019668421",!1,"221787"),e.os(e.cx,4,[339,283,125,78]),e.ref(29),"eyeota","1649","221787","eyeota_bombora","13824","221787","eyeota_experian","41461","221787"),221793:e.r(5,1,1,1,1,44,8),221796:e.r(5,2,2,2,2,44,8),221807:e.r(1,[e.cb(0,e.ref(44),e.ge(1),1),e.cb(0,e.ref(8),e.ge(1),1),e.itp("liveramp_Acxiom","300146499",!1,"221807"),e.itp("liveramp_Acxiom","300338199",!1,"221807"),e.itp("liveramp_OnAudience","1002860376",!1,"221807"),e.itp("liveramp_ShareThis","1003629219",!1,"221807"),e.itp("liveramp_OnAudience","1002860376",!1,"221807"),e.itp("eyeota","35391",!1,"221807"),e.itp("liveramp_Yougov","1006309931",!1,"221807"),e.itp("eyeota","34963",!1,"221807"),e.isp("liveramp_Bombora_discovery","1019668451",!1,"221807")]),221812:e.r(5,1,1,1,1,32,40),221814:e.r(5,2,2,2,2,32,40),221818:e.r(1,[e.cb(0,e.ref(32),e.ge(1),1),e.cb(0,e.ref(40),e.ge(1),1),e.itp("liveramp_DunandBradstreet","1000310916",!1,"221818"),e.itp("eyeota","61",!1,"221818"),e.itp("eyeota_bombora","14273",!1,"221818"),e.itp("liveramp_Bombora","1000096194",!1,"221818"),e.itp("liveramp_DunandBradstreet","1001640156",!1,"221818"),e.itp("liveramp_DunandBradstreet","1002785576",!1,"221818"),e.itp("liveramp_IXIDigital","1004247749",!1,"221818"),e.itp("liveramp_DunandBradstreet","1001640156",!1,"221818"),e.isp("liveramp_Bombora_discovery","1012196501",!1,"221818"),e.isp("liveramp_Bombora_discovery","1012196431",!1,"221818"),e.isp("liveramp_Bombora_discovery","1012196511",!1,"221818"),e.isp("liveramp_Bombora_discovery","1019501641",!1,"221818"),e.isp("liveramp_Bombora_discovery","1019501621",!1,"221818"),e.isp("liveramp_Bombora_discovery","1019501601",!1,"221818"),e.isp("liveramp_Bombora_discovery","1012196601",!1,"221818"),e.isp("liveramp_Bombora_discovery","1012196521",!1,"221818")]),222288:e.q(e.acqs([e.ocqs([e.itp("liveramp_Zeotap","1003814389",!1,"222288"),e.itp("liveramp_FluentModel","1007276341",!1,"222288"),e.itp("eyeota","243",!1,"222288"),e.itp("liveramp_StatSocial","1006911341",!1,"222288"),e.itp("liveramp_Stirista","1000308376",!1,"222288"),e.itp("liveramp_StartApp","1004305289",!1,"222288"),e.itp("liveramp_MeritDirect","1002713866",!1,"222288"),e.itp("liveramp_Experian","1004256489",!1,"222288"),e.itp("eyeota_experian","21467",!1,"222288"),e.itp("eyeota_bombora","14300",!1,"222288"),e.itp("liveramp_Acxiom","300335399",!1,"222288"),e.itp("liveramp_Acxiom","1958",!1,"222288"),e.itp("liveramp_Experian","1004256489",!1,"222288")]),e.ocqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.cb(0,e.ref(38),e.ge(1),1)]),e.cb(0,e.ref(2),e.ge(1),1)])),222290:e.q(e.acqs([e.ocqs([e.itp("liveramp_StartApp","1003725009",!1,"222290"),e.itp("liveramp_Experian","1004256479",!1,"222290"),e.itp("liveramp_ShareThis","1003555829",!1,"222290"),e.itp("eyeota_experian","21466",!1,"222290"),e.itp("eyeota_bombora","14299",!1,"222290"),e.itp("eyeota","300",!1,"222290"),e.itp("liveramp_Acxiom","10797",!1,"222290"),e.itp("liveramp_Epsilon","1003069926",!1,"222290"),e.itp("liveramp_DLG","1003696879",!1,"222290"),e.itp("liveramp_MeritDirect","1002713876",!1,"222290"),e.itp("liveramp_killi","1006992131",!1,"222290"),e.itp("liveramp_Acxiom","10797",!1,"222290"),e.itp("liveramp_Epsilon","1003069926",!1,"222290"),e.itp("liveramp_MeritDirect","1002713876",!1,"222290")]),e.cb(0,e.ref(2),e.ge(1),1)])),222332:e.r(5,1,1,1,1,37,53),222335:e.r(5,2,2,2,2,37,53),222345:e.r(4,e.itp("eyeota_experian","18572",!1,"222345"),e.itp("liveramp_Mastercard","1005909081",!1,"222345"),e.itp("eyeota","13098",!1,"222345"),e.itp("liveramp_Epsilon","1000461026",!1,"222345"),e.itp("liveramp_Bombora","1002683316",!1,"222345"),1,e.bsc_(1,["1hP/ydfr","Ly8HQot9","foVIww/v","w8SdPoOM"]),1,"liveramp_Acxiom","300729199","222345","liveramp_Acxiom","300471099","222345","liveramp_Mastercard","1005907301","222345","eyeota","34662","222345","eyeota","36003","222345","liveramp_AudienceElements","1001851996","222345","liveramp_Acxiom","2030989545","222345","liveramp_ShareThis","1003631179","222345","liveramp_ShareThis","1003276329","222345","eyeota","35578","222345","eyeota","318","222345","1012196451","222345","1019501671","222345","1019501701","222345","1019501681","222345","1012196511","222345","1012196601","222345",[201,124,196,194],1,1),222359:e.r(8,1,1,1,1,341,29),222360:e.r(8,2,2,2,2,341,29),222367:e.r(1,[e.cb(0,e.pc_(4,341),e.ge(1),1),e.cb(0,e.y(1,29),e.ge(1),1),e.itp("liveramp_ShareThis","1001290529",!1,"222367"),e.itp("liveramp_Acxiom","301127749",!1,"222367")]),231787:e.q(e.acqs([e.tw(e.cb(0,e.o([e.os(e.cx,4,["celebrity","television","movies",129,"cinema","beauty",298,194,141,"architecture","arts"]),e.os(e.s,["client","url"],["https://edition.cnn.com/entertainment","https://edition.cnn.com/style"])]),e.ge(1),1),7776e6),e.scq(e.tw(e.sw("PageviewComplete",e.t,["properties","aggregations","PageviewEngagement","engaged_time"]),7776e6),e.vq(e.sw("PageviewEngagement",e.t,["properties","engaged_time"])),e.g(60))])),232117:e.r(12,[e.itp("eyeota_experian","18495",!1,"232117"),e.itp("eyeota_experian","16338",!1,"232117"),e.itp("eyeota","35578",!1,"232117"),e.itp("eyeota_roymorgan","40790",!1,"232117"),e.itp("liveramp_IXIDigital","1000089854",!1,"232117"),e.itp("eyeota","318",!1,"232117"),e.itp("liveramp_Mastercard","1005909081",!1,"232117"),e.itp("eyeota_experian","18572",!1,"232117"),e.itp("liveramp_AudienceElements","1001851276",!1,"232117"),e.itp("liveramp_AudienceElements","1001851246",!1,"232117"),e.itp("liveramp_AudienceElements","1001851266",!1,"232117"),e.itp("liveramp_Mastercard","1005906971",!1,"232117"),e.itp("liveramp_CoreLogic","1000868746",!1,"232117"),e.itp("liveramp_AudienceElements","1001851266",!1,"232117"),e.itp("liveramp_CoreLogic","1000868736",!1,"232117"),e.itp("liveramp_Mastercard","1005909081",!1,"232117"),e.itp("eyeota","35578",!1,"232117"),e.itp("eyeota_roymorgan","40790",!1,"232117"),e.itp("eyeota","318",!1,"232117"),e.itp("eyeota_experian","18572",!1,"232117"),e.itp("liveramp_Alliant","1003267729",!1,"232117"),e.itp("liveramp_Alliant","1000846536",!1,"232117"),e.itp("liveramp_Acxiom","300727999",!1,"232117"),e.itp("liveramp_Stirista","1003670949",!1,"232117"),e.itp("liveramp_Acxiom","300727699",!1,"232117"),e.itp("eyeota_experian","16808",!1,"232117"),e.itp("liveramp_CACI","1004178939",!1,"232117"),e.itp("liveramp_CACI","1004178749",!1,"232117"),e.itp("eyeota_experian","30383",!1,"232117"),e.itp("liveramp_AudienceElements","1001850346",!1,"232117"),e.itp("liveramp_CoreLogic","1000868716",!1,"232117"),e.itp("liveramp_CoreLogic","1000868706",!1,"232117"),e.itp("liveramp_CoreLogic","1000868686",!1,"232117"),e.itp("liveramp_CoreLogic","1000868726",!1,"232117"),e.itp("liveramp_CoreLogic","1000868606",!1,"232117"),e.cb(0,e.ref(17),e.ge(1),1),e.itp("eyeota","1709",!1,"232117"),e.itp("liveramp_Epsilon","1000985029",!1,"232117"),e.itp("eyeota_bombora","13867",!1,"232117"),e.itp("liveramp_OnAudience","1002861496",!1,"232117"),e.itp("liveramp_Bombora","1000094044",!1,"232117")]),233923:e.r(1,[e.itp("liveramp_Stirista","1000302066",!1,"233923"),e.itp("eyeota_experian","27629",!1,"233923"),e.itp("liveramp_killi","1007022741",!1,"233923"),e.itp("liveramp_ShareThis","1005134769",!1,"233923"),e.itp("eyeota","276",!1,"233923"),e.itp("liveramp_StatSocial","1006912831",!1,"233923"),e.itp("eyeota","12966",!1,"233923"),e.itp("liveramp_Acxiom","1005523739",!1,"233923"),e.itp("liveramp_Bombora","1005237799",!1,"233923"),e.itp("liveramp_Epsilon","1000996619",!1,"233923"),e.itp("liveramp_DunandBradstreet","1001204249",!1,"233923"),e.itp("liveramp_Bombora","1000094764",!1,"233923"),e.itp("liveramp_Mastercard","1005908231",!1,"233923"),e.itp("liveramp_Epsilon","1000993599",!1,"233923"),e.itp("liveramp_Acxiom","300338499",!1,"233923"),e.itp("eyeota","12966",!1,"233923"),e.itp("liveramp_Epsilon","1000997659",!1,"233923"),e.itp("liveramp_Epsilon","1001000679",!1,"233923"),e.cb(0,e.ref(43),e.ge(1),1),e.isp("liveramp_Bombora_discovery","1019668431",!1,"233923")]),233924:e.r(4,e.isp("liveramp_Bombora_discovery","1019501641",!1,"233924"),e.isp("liveramp_Bombora_discovery","1019501621",!1,"233924"),e.isp("liveramp_Bombora_discovery","1019501631",!1,"233924"),e.isp("liveramp_Bombora_discovery","1019501601",!1,"233924"),e.isp("liveramp_Bombora_discovery","1012196511",!1,"233924"),2,e.os(e.w,1,["Economy",23,18]),2,"liveramp_Bombora","1005390219","233924","liveramp_Bombora","1004559099","233924","liveramp_DunandBradstreet","1000310996","233924","liveramp_Bombora","1002686876","233924","liveramp_DunandBradstreet","1002786436","233924","eyeota","34820","233924","liveramp_DunandBradstreet","1000724676","233924","liveramp_StatSocial","1006912891","233924","liveramp_Zeotap","1004627679","233924","liveramp_DunandBradstreet","1002786436","233924","liveramp_ShareThis","1005652241","233924","1019501641","233924","1019501631","233924","1019501601","233924","1019501601","233924","1012196421","233924","1012196781","233924",[124,196,69],2,2),233926:e.r(1,[e.itp("eyeota","1603",!1,"233926"),e.itp("liveramp_killi","1006832891",!1,"233926"),e.itp("liveramp_AnalyticsIQ","1000693166",!1,"233926"),e.itp("liveramp_killi","1006982781",!1,"233926"),e.itp("liveramp_Acxiom","300072999",!1,"233926"),e.itp("liveramp_MeritDirect","1002710006",!1,"233926"),e.itp("liveramp_StatSocial","1006915171",!1,"233926"),e.itp("liveramp_33across","1002504986",!1,"233926"),e.itp("liveramp_Bombora","1000095414",!1,"233926"),e.itp("liveramp_IPSOS","1002976906",!1,"233926"),e.itp("liveramp_Bombora","1005387699",!1,"233926"),e.itp("liveramp_33across","1002504986",!1,"233926"),e.itp("liveramp_33across","1002462026",!1,"233926"),e.itp("liveramp_Acxiom","300144699",!1,"233926"),e.itp("liveramp_StatSocial","1006912981",!1,"233926"),e.itp("liveramp_Yougov","1006309681",!1,"233926"),e.itp("liveramp_Zeotap","1004572879",!1,"233926"),e.itp("liveramp_Zeotap","1004466119",!1,"233926"),e.itp("liveramp_Zeotap","1004551739",!1,"233926"),e.itp("eyeota_roymorgan","40896",!1,"233926"),e.itp("liveramp_Acxiom","1005524099",!1,"233926"),e.itp("eyeota_experian","27989",!1,"233926"),e.itp("liveramp_StatSocial","1006912971",!1,"233926"),e.itp("eyeota","34722",!1,"233926"),e.itp("eyeota_experian","41464",!1,"233926"),e.itp("liveramp_StartApp","1004431869",!1,"233926"),e.itp("liveramp_Alliant","1002760276",!1,"233926"),e.itp("eyeota","34913",!1,"233926"),e.itp("liveramp_RoyMorgan","1003202339",!1,"233926"),e.itp("eyeota_experian","31331",!1,"233926"),e.itp("liveramp_Epsilon","1001001219",!1,"233926"),e.itp("eyeota_experian","22790",!1,"233926"),e.itp("liveramp_Lifesight","1005201079",!1,"233926"),e.itp("liveramp_Acxiom","300454199",!1,"233926"),e.itp("liveramp_Acxiom","300454899",!1,"233926"),e.itp("liveramp_Epsilon","1000993159",!1,"233926"),e.itp("liveramp_ShareThis","1005134049",!1,"233926"),e.itp("liveramp_StatSocial","1006912951",!1,"233926"),e.itp("liveramp_OnAudience","1002862126",!1,"233926"),e.itp("liveramp_RoyMorgan","1002212436",!1,"233926"),e.itp("eyeota","1544",!1,"233926"),e.itp("liveramp_Stirista","1003671509",!1,"233926"),e.itp("eyeota_experian","27990",!1,"233926"),e.itp("liveramp_OnAudience","1002859786",!1,"233926"),e.itp("eyeota_experian","41993",!1,"233926"),e.itp("eyeota_experian","30570",!1,"233926"),e.cb(0,e.ref(45),e.ge(1),1)]),234008:e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.ocqs([e.cb(0,e.pc_(4,"sailing"),e.ge(1),1),e.itp("eyeota","1698",!1,"234008")]),e.ocqs([e.itp("liveramp_killi","1007022371",!1,"234008"),e.itp("liveramp_StatSocial","1006919201",!1,"234008"),e.itp("eyeota","35930",!1,"234008"),e.itp("liveramp_Acxiom","1280",!1,"234008"),e.itp("liveramp_Epsilon","1000466766",!1,"234008"),e.itp("liveramp_AnalyticsIQ","1005883201",!1,"234008")])])),234259:e.r(12,[e.cb(0,e.os(e.cx,4,["athletics",48]),e.ge(1),1),e.cb(0,e.y(8,48),e.ge(1),1),e.itp("eyeota","1670",!1,"234259"),e.itp("liveramp_MeritDirect","1000072584",!1,"234259"),e.itp("liveramp_killi","1007022511",!1,"234259"),e.itp("eyeota","35879",!1,"234259"),e.itp("liveramp_Acxiom","300335199",!1,"234259"),e.itp("liveramp_33across","1002460796",!1,"234259"),e.itp("liveramp_33across","1002460796",!1,"234259")]),234748:e.r(2,[e.cb(0,e.pc_(4,322),e.ge(1),1),e.cb(0,e.y(1,28),e.ge(1),1),e.itp("liveramp_Epsilon","1000985009",!1,"234748"),e.itp("eyeota","13253",!1,"234748"),e.itp("eyeota","1718",!1,"234748"),e.itp("liveramp_Acxiom","301128013",!1,"234748"),e.itp("eyeota","1724",!1,"234748"),e.itp("eyeota","1726",!1,"234748"),e.itp("eyeota","1725",!1,"234748"),e.itp("liveramp_Alliant","1000846886",!1,"234748"),e.itp("eyeota_experian","22962",!1,"234748"),e.itp("liveramp_Epsilon","1000991539",!1,"234748"),e.itp("liveramp_killi","1007022251",!1,"234748"),e.itp("liveramp_ShareThis","1005134719",!1,"234748"),e.itp("liveramp_OnAudience","1002862306",!1,"234748"),e.itp("liveramp_Acxiom","300171299",!1,"234748")],e.ref(6)),234749:e.r(0,0,e.a([e.pe(2,!1),e.ref(2)]),1,1,0,e.ref(6),e.ge(1),1),234751:e.r(2,[e.cb(0,e.ref(27),e.ge(1),1),e.cb(0,e.ref(39),e.ge(1),1)],e.os(e.w,10,[2,"E16","RH6","TW5"])),234761:e.r(1,[e.itp("liveramp_Stirista","1002959666",!1,"234761"),e.itp("eyeota_bombora","13911",!1,"234761"),e.itp("liveramp_Bombora","1000095074",!1,"234761"),e.itp("liveramp_33across","1002462246",!1,"234761"),e.itp("liveramp_ShareThis","1003629999",!1,"234761"),e.itp("liveramp_Bombora","1005387369",!1,"234761"),e.itp("liveramp_OnAudience","1002862236",!1,"234761"),e.itp("eyeota_experian","27992",!1,"234761"),e.itp("eyeota_experian","27622",!1,"234761"),e.itp("liveramp_OnAudience","1002859966",!1,"234761"),e.itp("liveramp_Acxiom","1005523679",!1,"234761"),e.itp("liveramp_Alliant","1000846836",!1,"234761"),e.itp("eyeota_bombora","14043",!1,"234761"),e.itp("liveramp_ShareThis","1001010259",!1,"234761"),e.itp("liveramp_Bombora","1002686926",!1,"234761"),e.itp("liveramp_AnalyticsIQ","1000691266",!1,"234761"),e.itp("liveramp_killi","1006992101",!1,"234761"),e.itp("eyeota","35290",!1,"234761"),e.itp("liveramp_Zeotap","1004466709",!1,"234761"),e.itp("eyeota_dunbradstreet","27974",!1,"234761"),e.itp("eyeota","35050",!1,"234761"),e.itp("liveramp_Acxiom","300068499",!1,"234761"),e.itp("eyeota","35550",!1,"234761"),e.itp("liveramp_OnAudience","1002862606",!1,"234761"),e.itp("eyeota","1609",!1,"234761"),e.itp("eyeota_experian","8795",!1,"234761"),e.itp("eyeota","35552",!1,"234761"),e.itp("eyeota","35553",!1,"234761"),e.itp("liveramp_ShareThis","1003626269",!1,"234761"),e.cb(0,e.ref(26),e.ge(1),1),e.isp("liveramp_Bombora_discovery","1019668441",!1,"234761")]),88584:e.r(24,e.t,e.ge(1),1)}),rootCompressionLookup:e=>[(t,r,n,i,a,o,s,u)=>e.q(e.acqs([e.cb(t,r,e.ge(i),n),e.cb(a,o,s,u)])),t=>e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs(t)])),(t,r)=>e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs(t),e.cb(0,r,e.ge(1),1)])),(t,r,n,i,a,o,s,u,c,l,p,m)=>e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs([e.cb(0,r,e.ge(1),1),e.cb(0,n,e.ge(1),1),e.itp(i,a,!1,o),e.itp(s,u,!1,c),e.itp(l,p,!1,m),t])])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h,y,b,S,I,w,G,k,z,x,E,U,A,P,D,O,C,T,q,M,B,R,L,j,F,Q,Y,N,$,H,Z,V,K,X,W,J,ee,te,re)=>e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs([e.cb(0,e.os(e.cx,4,ee),e.ge(te),o),e.cb(0,s,e.ge(re),u),e.itp(c,l,!1,p),e.itp(m,f,!1,d),e.itp(_,v,!1,g),e.itp(h,y,!1,b),e.itp(S,I,!1,w),e.itp(G,k,!1,z),e.itp(x,E,!1,U),e.itp(A,P,!1,D),e.itp(O,C,!1,T),e.itp(q,M,!1,B),e.itp(R,L,!1,j),t,r,n,i,a,e.isp("liveramp_Bombora_discovery",F,!1,Q),e.isp("liveramp_Bombora_discovery",Y,!1,N),e.isp("liveramp_Bombora_discovery",$,!1,H),e.isp("liveramp_Bombora_discovery",Z,!1,V),e.isp("liveramp_Bombora_discovery",K,!1,X),e.isp("liveramp_Bombora_discovery",W,!1,J)])])),(t,r,n,i,a,o)=>e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs([e.cb(0,e.ref(a),e.ge(n),t),e.cb(0,e.ref(o),e.ge(i),r)])])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h,y)=>e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs([e.cb(0,e.ref(y),e.ge(1),1),e.cb(0,t,e.ge(1),1),e.itp(r,n,!1,i),e.itp(a,o,!1,s),e.itp(u,c,!1,l),e.itp(p,m,!1,f),e.itp(d,_,!1,v),e.isp("liveramp_Bombora_discovery",g,!1,h)])])),(t,r,n,i)=>e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs([e.cb(0,e.ref(15),e.ge(n),t),e.cb(0,e.y(1,25),e.ge(i),r)])])),(t,r,n,i,a,o)=>e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs([e.cb(0,e.pc_(4,a),e.ge(n),t),e.cb(0,e.y(1,o),e.ge(i),r)])])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h,y)=>e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs([e.cb(0,e.pc_(4,h),e.ge(1),1),e.cb(0,e.y(1,y),e.ge(1),1),e.itp("liveramp_Acxiom",t,!1,r),e.itp(n,i,!1,a),e.itp(o,s,!1,u),e.itp(c,l,!1,p),e.isp("liveramp_Bombora_discovery",m,!1,f),e.isp("liveramp_Bombora_discovery",d,!1,_),e.isp("liveramp_Bombora_discovery",v,!1,g)])])),(t,r,n,i)=>e.q(e.acqs([e.cb(0,e.ref(2),e.ge(1),1),e.ocqs([e.cb(0,e.pc_(4,129),e.ge(n),t),e.cb(0,e.ref(52),e.ge(i),r)])])),t=>e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o(t)),e.ge(1),1)])),t=>e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.ocqs(t)])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h,y,b,S,I,w,G,k,z,x,E,U,A,P,D,O,C,T,q,M,B,R,L,j,F,Q,Y,N,$,H,Z,V,K,X,W,J,ee,te,re,ne,ie,ae,oe,se,ue,ce,le,pe,me,fe,de,_e,ve,ge,he)=>e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.ocqs([e.itp(t,r,n,i),e.itp(a,o,s,u),e.itp(c,l,p,m),e.itp(f,d,_,v),e.itp(g,h,y,b),e.itp(S,I,w,G),e.itp(k,z,x,E),e.itp(U,A,P,D),e.itp(O,C,T,q),e.itp(M,B,R,L),e.itp(j,F,Q,Y),e.itp(N,$,H,Z),e.itp(V,K,X,W),e.itp(J,ee,te,re),e.itp(ne,ie,ae,oe),e.itp(se,ue,ce,le),e.itp(pe,me,fe,de),e.cb(_e,ve,ge,he)])])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h,y,b,S,I,w,G,k,z,x,E,U,A,P,D,O,C,T,q,M,B,R,L,j,F,Q,Y,N,$,H,Z,V,K,X,W,J,ee,te,re,ne,ie,ae,oe,se,ue,ce,le,pe,me,fe,de,_e,ve,ge,he,ye,be,Se,Ie,we,Ge,ke,ze,xe,Ee,Ue,Ae,Pe,De,Oe,Ce,Te,qe,Me,Be,Re,Le,je,Fe,Qe,Ye,Ne,$e,He,Ze,Ve,Ke,Xe,We,Je,et,tt,rt,nt,it,at,ot,st,ut,ct,lt,pt,mt,ft,dt,_t,vt,gt,ht,yt,bt,St,It,wt,Gt,kt,zt,xt,Et,Ut,At,Pt,Dt,Ot,Ct,Tt,qt)=>e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.ocqs([e.itp(t,r,!1,n),e.itp(i,a,!1,o),e.itp(s,u,!1,c),e.itp(l,p,!1,m),e.itp(f,d,!1,_),e.itp(v,g,!1,h),e.itp(y,b,!1,S),e.itp(I,w,!1,G),e.itp(k,z,!1,x),e.itp(E,U,!1,A),e.itp(P,D,!1,O),e.itp(C,T,!1,q),e.itp(M,B,!1,R),e.itp(L,j,!1,F),e.itp(Q,Y,!1,N),e.itp($,H,!1,Z),e.itp(V,K,!1,X),e.itp(W,J,!1,ee),e.itp(te,re,!1,ne),e.itp(ie,ae,!1,oe),e.itp(se,ue,!1,ce),e.itp(le,pe,!1,me),e.itp(fe,de,!1,_e),e.itp(ve,ge,!1,he),e.itp(ye,be,!1,Se),e.itp(Ie,we,!1,Ge),e.itp(ke,ze,!1,xe),e.itp(Ee,Ue,!1,Ae),e.itp(Pe,De,!1,Oe),e.itp(Ce,Te,!1,qe),e.itp(Me,Be,!1,Re),e.itp(Le,je,!1,Fe),e.itp(Qe,Ye,!1,Ne),e.itp($e,He,!1,Ze),e.itp(Ve,Ke,!1,Xe),e.itp(We,Je,!1,et),e.itp(tt,rt,!1,nt),e.itp(it,at,!1,ot),e.itp(st,ut,!1,ct),e.itp("eyeota",lt,!1,pt),e.itp(mt,ft,!1,dt),e.itp(_t,vt,!1,gt),e.itp(ht,yt,!1,bt),e.itp(St,It,!1,wt),e.itp(Gt,kt,!1,zt),e.itp(xt,Et,!1,Ut),e.itp(At,Pt,!1,Dt),e.itp(Ot,Ct,!1,Tt),e.cb(0,e.af_u(["properties","page","taxonomies"],e.o(qt)),e.ge(1),1)])])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h,y,b,S,I,w,G,k,z,x,E,U,A,P,D,O,C,T,q,M,B,R,L,j,F,Q,Y,N,$,H,Z,V,K,X,W,J)=>e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.ocqs([e.itp(t,r,!1,n),e.itp(i,a,!1,o),e.itp(s,u,!1,c),e.itp(l,p,!1,m),e.itp(f,d,!1,_),e.itp(v,g,!1,h),e.itp(y,b,!1,S),e.itp(I,w,!1,G),e.itp("liveramp_Bombora",k,!1,z),e.itp(x,E,!1,U),e.itp(A,P,!1,D),e.itp(O,C,!1,T),e.itp(q,M,!1,B),e.itp(R,L,!1,j),e.itp(F,Q,!1,Y),e.itp("eyeota",N,!1,$),e.itp(H,Z,!1,V),e.itp(K,X,!1,W),e.cb(0,J,e.ge(1),1)])])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h,y,b,S,I,w,G,k,z,x,E,U,A,P,D,O,C,T,q,M,B,R,L,j,F,Q,Y,N,$,H,Z,V,K,X,W,J,ee,te,re,ne,ie,ae,oe,se,ue,ce,le,pe,me,fe,de,_e,ve,ge,he,ye,be,Se,Ie,we,Ge,ke,ze,xe,Ee,Ue,Ae,Pe,De,Oe,Ce,Te,qe,Me,Be,Re,Le,je,Fe,Qe,Ye,Ne,$e,He,Ze,Ve,Ke,Xe)=>e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.ocqs([e.itp(t,r,!1,n),e.itp(i,a,!1,o),e.itp(s,u,!1,c),e.itp(l,p,!1,m),e.itp(f,d,!1,_),e.itp("eyeota",v,!1,g),e.itp(h,y,!1,b),e.itp(S,I,!1,w),e.itp(G,k,!1,z),e.itp(x,E,!1,U),e.itp(A,P,!1,D),e.itp(O,C,!1,T),e.itp(q,M,!1,B),e.itp(R,L,!1,j),e.itp(F,Q,!1,Y),e.itp(N,$,!1,H),e.itp(Z,V,!1,K),e.itp(X,W,!1,J),e.itp(ee,te,!1,re),e.itp(ne,ie,!1,ae),e.itp(oe,se,!1,ue),e.itp(ce,le,!1,pe),e.itp(me,fe,!1,de),e.itp(_e,ve,!1,ge),e.itp(he,ye,!1,be),e.itp(Se,Ie,!1,we),e.itp(Ge,ke,!1,ze),e.itp(xe,Ee,!1,Ue),e.itp(Ae,Pe,!1,De),e.itp(Oe,Ce,!1,Te),e.itp(qe,Me,!1,Be),e.itp(Re,Le,!1,je),e.itp(Fe,Qe,!1,Ye),e.itp(Ne,$e,!1,He),e.itp(Ze,Ve,!1,Ke),e.cb(0,Xe,e.ge(1),1)])])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h,y,b,S,I,w,G,k,z,x,E,U,A,P,D,O,C,T,q,M,B,R,L,j,F,Q,Y,N,$,H,Z,V,K)=>e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.ocqs([e.itp("liveramp_Bombora","1005390219",!1,t),e.itp("liveramp_Zeotap","1004627679",!1,r),e.itp("eyeota_roymorgan","40734",!1,n),e.itp("liveramp_Bombora","1005390159",!1,i),e.itp("liveramp_DunandBradstreet","1000310996",!1,a),e.itp("liveramp_ShareThis","1005652241",!1,o),e.itp("eyeota_bombora","13904",!1,s),e.itp("liveramp_StatSocial","1006912881",!1,u),e.itp("eyeota_dunbradstreet","20705",!1,c),e.itp("eyeota","6541",!1,l),e.itp("eyeota","6555",!1,p),e.itp("liveramp_DunandBradstreet","1001640266",!1,m),e.itp("eyeota","6564",!1,f),e.itp("liveramp_MeritDirect","1002714236",!1,d),e.itp("eyeota_dunbradstreet","20907",!1,_),e.itp("liveramp_IXIDigital","1003987049",!1,v),e.itp("liveramp_DunandBradstreet","1001640236",!1,g),e.itp("liveramp_Bombora","1000096194",!1,h),e.itp("liveramp_Acxiom","1003644469",!1,y),e.itp("eyeota_experian","27452",!1,b),e.itp("liveramp_Acxiom","1003644459",!1,S),e.itp("liveramp_Experian","1003187589",!1,I),e.itp("liveramp_DunandBradstreet","1000310726",!1,w),e.itp("liveramp_AnalyticsIQ","1000694156",!1,G),e.itp("liveramp_Acxiom","800235011",!1,k),e.itp("liveramp_Stirista","1006716011",!1,z),e.itp("liveramp_Zeotap","1004559859",!1,x),e.itp("liveramp_Compass","1000037864",!1,E),e.itp("liveramp_Experian","1003187589",!1,U),e.itp("eyeota","59",!1,A),e.itp("liveramp_StartApp","1004428289",!1,P),e.itp("liveramp_StatSocial","1006912891",!1,D),e.itp("liveramp_AudienceElements","1001851846",!1,O),e.itp("liveramp_Experian","1007229091",!1,C),e.itp("eyeota_dunbradstreet","20860",!1,T),e.itp("liveramp_DunandBradstreet","1000310756",!1,q),e.itp("liveramp_DunandBradstreet","1000310796",!1,M),e.itp("eyeota_experian","30497",!1,B),e.itp("liveramp_IPSOS","1003133116",!1,R),e.itp("liveramp_MeritDirect","1002715066",!1,L),e.itp("eyeota_dunbradstreet","20908",!1,j),e.itp("eyeota","34905",!1,F),e.itp("liveramp_Acxiom","1003644309",!1,Q),e.itp("liveramp_MeritDirect","1000072614",!1,Y),e.itp("eyeota_dunbradstreet","21014",!1,N),e.itp("liveramp_IPSOS","1003133236",!1,$),e.itp("liveramp_Bombora","1005198609",!1,H),e.itp("liveramp_Bombora","1005227099",!1,Z),e.itp("liveramp_Bombora","1005251429",!1,V),e.itp("liveramp_Bombora","1005229559",!1,K),e.cb(0,e.ref(55),e.ge(1),1)])])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h,y,b,S,I,w,G,k,z,x,E,U,A,P,D,O,C,T,q,M,B,R,L,j,F,Q)=>e.q(e.acqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.ocqs([e.itp("liveramp_Zeotap",t,!1,r),e.itp("liveramp_CACI",n,!1,i),e.itp("liveramp_AnalyticsIQ",a,!1,o),e.itp("liveramp_Zeotap",s,!1,u),e.itp(c,l,!1,p),e.itp(m,f,!1,d),e.itp(_,v,!1,g),e.itp(h,y,!1,b),e.itp("liveramp_StartApp",S,!1,I),e.itp(w,G,!1,k),e.itp(z,x,!1,E),e.itp("liveramp_Zeotap",U,!1,A),e.itp("liveramp_Zeotap",P,!1,D),e.itp("liveramp_Zeotap",O,!1,C),e.itp("eyeota_experian",T,!1,q),e.itp(M,B,!1,R),e.itp(L,j,!1,F),e.cb(0,e.af_u(["properties","page","taxonomies"],e.y_(0,Q)),e.ge(1),1)])])),(t,r,n)=>e.q(e.acqs([e.cb(1,e.ref(n),e.ge(1),1),e.isp("discovery_maxemea",t,!1,r)])),(t,r)=>e.q(e.acqs([e.cb(1,e.ps(7,19),e.ge(1),1),e.isp("discovery_dplusemea",t,!1,r)])),(t,r)=>e.q(e.acqs([e.cb(1,e.ps(7,136),e.ge(1),1),e.isp("discovery_maxemea",t,!1,r)])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h,y,b,S,I,w,G,k,z,x,E,U,A,P,D,O,C)=>e.q(e.acqs([e.ocqs([e.itp(t,r,!1,n),e.itp(i,a,!1,o),e.itp(s,u,!1,c),e.itp(l,p,!1,m),e.itp(f,d,!1,_),e.itp(v,g,!1,h),e.itp(y,b,!1,S),e.itp(I,w,!1,G),e.itp(k,z,!1,x),e.itp(E,U,!1,A),e.itp(P,D,!1,O)]),e.ocqs([e.cb(0,e.pe(2,!1),e.ge(1),1),e.cb(0,C,e.ge(1),1)])])),(t,r,n,i)=>e.q(e.cb(t,r,n,i)),(t,r,n)=>e.q(e.cb(0,t,r,n)),(t,r,n,i)=>e.q(e.cb(0,e.pe(r,n),e.ge(i),t)),(t,r,n,i)=>e.q(e.ocqs([e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(t)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(r)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","genres"],e.ref(n)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","genres"],e.ref(i)),e.ge(1),1)])),(t,r,n,i,a)=>e.q(e.ocqs([e.cb(1,e.af_u(["properties","video","taxonomies"],e.o(r)),e.ge(1),1),e.cb(t,e.af_u(["properties","video","taxonomies"],e.o(n)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","genres"],e.o(i)),e.ge(1),1),e.cb(1,e.af_u(["properties","video","genres"],e.o(a)),e.ge(1),1)])),(t,r,n)=>e.q(e.ocqs([e.lm(t,e.ge(n)),e.ifp(r)])),(t,r,n,i)=>e.q(e.ocqs([e.isp("discovery_dplusemea",t,!1,r),e.isp("discovery_maxemea",n,!1,i)])),(t,r,n,i,a,o,s)=>e.q(e.ocqs([e.tw(e.cb(1,e.af_u(r,n),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(i,e.o(s)),e.ge(1),1),24192e5),e.tw(e.cb(t,e.af_u(a,o),e.ge(1),1),24192e5)])),(t,r,n,i,a,o,s,u,c,l,p,m)=>e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o(t)),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(0,r),e.s_(0,n),e.s_(0,i),e.s_(0,a),e.s_(0,o)])),e.ge(1),1),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o([e.s_(["name"],s),e.s_(["name"],u),e.s_(["name"],c),e.s_(["name"],l),e.s_(["name"],p),e.s_(["name"],m)])),e.ge(1),1),24192e5)])),(t,r,n,i,a,o,s,u,c,l,p,m,f,d,_,v,g,h)=>e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o(c)),e.ge(a),t),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o([e.s_(["name"],m),e.s_(["name"],f),e.s_(["name"],d),e.s_(["name"],_),e.s_(["name"],v),e.s_(["name"],g),e.s_(["name"],h)])),e.ge(o),r),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o(l)),e.ge(s),n),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o(p)),e.ge(u),i),24192e5)])),(t,r,n,i)=>e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(t)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o(n)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o(i)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.ref(r)),e.ge(3),3),24192e5)])),(t,r,n,i)=>e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(t)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(r)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.ref(n)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.ref(i)),e.ge(3),3),24192e5)])),(t,r,n,i,a,o,s,u,c,l,p,m)=>e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(c)),e.ge(a),t),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.ref(p)),e.ge(o),r),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.ref(m)),e.ge(s),n),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.ref(l)),e.ge(u),i),24192e5)])),(t,r,n,i)=>e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o(t)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o(r)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o(n)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o(i)),e.ge(3),3),24192e5)])),(t,r,n,i,a,o,s,u,c,l,p,m)=>e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o(t)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.o(r)),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o([e.s_(["name"],i),e.s_(["name"],a),e.s_(["name"],o),e.s_(["name"],s),e.s_(["name"],u),e.s_(["name"],c),e.s_(["name"],l),e.s_(["name"],p),e.s_(["name"],m)])),e.ge(3),3),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.o(n)),e.ge(3),3),24192e5)])),(t,r,n,i,a,o,s,u,c,l,p,m)=>e.q(e.ocqs([e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],e.s_(0,p)),e.ge(a),t),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],o),e.ge(s),r),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","taxonomies"],u),e.ge(c),n),24192e5),e.tw(e.cb(1,e.af_u(["properties","video","genres"],e.s_(0,m)),e.ge(l),i),24192e5)])),(t,r,n)=>e.q(e.isp(t,r,!1,n)),(t,r,n,i,a)=>e.q(e.tw(e.cb(r,n,i,a),t)),t=>e.q(e.tw(e.cb(0,e.a([e.pe(2,!1),e.af_u(["properties","page","taxonomies"],e.o(t))]),e.ge(3),3),7776e6)),t=>e.q(e.tw(e.cb(0,e.a([e.pe(2,!1),e.af_u(["properties","page","taxonomies"],e.e_(["name"],t))]),e.ge(3),3),7776e6)),()=>e.q(e.tw(e.cb(0,e.a([e.pe(2,!1),e.af_u(["properties","page","taxonomies"],e.e_(["name"],"tennis"))]),e.ge(3),3),7776e6)),()=>e.q(e.tw(e.cb(0,e.y(6,342),e.ge(1),1),2592e6))],stateSyncReplays:e=>[],subexpressionsLookup:e=>[e.o([e.s_(0,82),e.s_(0,275)]),e.o([e.s_(0,50),e.s_(0,270),e.s_(0,310),e.s_(0,330),e.s_(0,340)]),e.os(e.w,3,[44,80]),e.o([e.s_(["name"],121)]),e.o([e.s_(0,169),e.s_(0,252)]),e.o([e.s_(["name"],82),e.s_(["name"],274)]),e.os(e.s,10,[2,123,266,325]),e.os(e.s,7,[106]),e.bsc_(1,["qXBKKtmv"]),e.o([e.s_(["name"],45),e.s_(["name"],95),e.s_(["name"],212),e.s_(["name"],282)]),e.o([e.s_(["name"],49),e.s_(["name"],269),e.s_(["name"],311),e.s_(["name"],312),e.s_(["name"],329),e.s_(["name"],340)]),e.o([e.s_(0,155),e.s_(0,258),e.s_(0,259)]),e.o([e.s_(["name"],32),e.s_(["name"],34),e.s_(["name"],133),e.s_(["name"],187),e.s_(["name"],191),e.s_(["name"],209),e.s_(["name"],267),e.s_(["name"],323)]),e.os(e.w,1,[20,26]),e.bsc([],["OcyzLZXt","PkCXRPmD","k4duaZkR"]),e.os(e.cx,4,[292,291]),e.o([e.s_(["name"],30)]),e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,244),e.y_(0,174),e.y_(0,273),e.y_(0,336),e.y_(0,344),e.y_(0,135),e.y_(0,345)])),e.o([e.s_(["name"],169),e.s_(["name"],251)]),e.o([e.s_(0,79),e.s_(0,147),e.s_(0,148),e.s_(0,149),e.s_(0,150),e.s_(0,151)]),e.os(e.cx,4,[283,339,125,78]),e.o([e.s_(0,121)]),e.o([e.s_(["name"],56),e.s_(["name"],199)]),e.o([e.s_(0,218),e.s_(0,322)]),e.af_u(["properties","video","genres"],e.ref(3)),e.o([e.s_(["name"],213)]),e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,172),e.y_(0,6)])),e.os(e.cx,4,[196,69]),e.o([e.s_(["name"],32),e.s_(["name"],34),e.s_(["name"],182),e.s_(["name"],187),e.s_(["name"],191),e.s_(["name"],209),e.s_(["name"],216),e.s_(["name"],267),e.s_(["name"],302),e.s_(["name"],303)]),e.bsc_(1,["KErz6Igr","Q3vLFREn","SFeGAX2+","fU1s7u0I"]),e.o([e.s_(["name"],153),e.s_(["name"],175)]),e.o([e.s_(0,153),e.s_(0,175)]),e.os(e.cx,4,[201,124,196]),e.o([e.s_(0,99),e.s_(0,320)]),e.o([e.s_(["name"],57),e.s_(["name"],58),e.s_(["name"],59),e.s_(["name"],67)]),e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,236),e.y_(0,215),e.y_(0,7)])),e.o([e.s_(0,213)]),e.os(e.cx,4,[194,201,124,196]),e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,107),e.y_(0,190),e.y_(0,178)])),e.os(e.w,1,[23,18]),e.bsc_(1,["1hP/ydfr","dIGRR2WD","foVIww/v","w8SdPoOM"]),e.o([e.s_(["name"],217),e.s_(["name"],322)]),e.o([e.s_(0,45),e.s_(0,95),e.s_(0,212),e.s_(0,282)]),e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,243),e.y_(0,184),e.y_(0,164),e.y_(0,5)])),e.af_u(["properties","page","sections"],e.ref(14)),e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,222),e.y_(0,327),e.y_(0,348),e.y_(0,181),e.y_(0,12),e.y_(0,335),e.y_(0,10),e.y_(0,170),e.y_(0,163),e.y_(0,3)])),e.os(e.cx,4,[141,298]),e.o([e.s_(0,225),e.s_(0,226),e.s_(0,314)]),e.o([e.s_(["name"],224),e.s_(["name"],226),e.s_(["name"],313)]),e.o([e.s_(0,64),e.s_(0,219)]),e.o([e.s_(["name"],79),e.s_(["name"],142),e.s_(["name"],143),e.s_(["name"],144),e.s_(["name"],145),e.s_(["name"],146)]),e.af_u(["properties","video","taxonomies"],e.o([e.s_(["name"],34),e.s_(["name"],186),e.s_(["name"],208),e.s_(["name"],209)])),e.bsc_(1,["jFILtHLr"]),e.bsc_(1,["1hP/ydfr","Ly8HQot9","dIGRR2WD","foVIww/v","w8SdPoOM"]),e.o([e.s_(0,60),e.s_(0,61),e.s_(0,62),e.s_(0,67)]),e.af_u(["properties","page","taxonomies"],e.o([e.y_(0,239),e.y_(0,13),e.y_(0,1),e.y_(0,223),e.y_(0,4)]))]}})})));var ze=r(978),xe=r(229);async function Ee(m){let{contextsInitTimestampPerformance:f,master:d}=m;const _=await d.next(),v=performance.now();Object.entries(_.globals??{}).forEach((e=>{let[t,r]=e;Object.defineProperty(self,t,{value:r})}));const g=new W(_.permutiveConfig);g.measureBetween("waiting_worker_high_priority_config",f,v);const h=function(t){var r;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.RP;return t.loggingEnabled&&void 0!==(null===(r=self.console)||void 0===r?void 0:r.log)?new D(n):new O}(_.permutiveConfig,_.sdkInitTimestampDate),y=_.metricsEnabled?new E(_.sdkInitTimestampPerformance,_.timeOriginMainContext,h):new U;y.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_evaluated",time_origin:"sdk_init"},f),y.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_received_high_priority_config",time_origin:"sdk_init"},v);const b=(0,n.zG)(d.next,g.traceTask("waiting_worker_low_priority_config"))();b.then((()=>y.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"worker_received_low_priority_config",time_origin:"sdk_init"})));const S=(0,n.zG)((()=>d.read()),function(e,r){const i=e=>(0,n.zG)(e,B.Hd((e=>e in r)),(e=>{let{left:t,right:r}=e;return{buffers:r,nonBuffers:t}}));return a=>{const{buffers:o,nonBuffers:s}=i(e),[u,c]=t.Ue({...s,...(0,n.zG)(o,B.Su((e=>()=>{const t=o[e];return o[e]=r[e].empty,t})))});return(async()=>{for(;;){const e=(0,n.zG)(await a(),L.UI(i),L.ur({concat:(e,t)=>({nonBuffers:{...e.nonBuffers,...t.nonBuffers},buffers:(()=>{const n={...e.buffers};for(const e in t.buffers)n[e]=e in n?r[e].concat(n[e],t.buffers[e]):t.buffers[e];return n})()})})),t=(0,n.zG)(e.buffers,B.Su(((e,t)=>(o[e]=r[e].concat(o[e],t),()=>{const t=o[e];return o[e]=r[e].empty,t}))));c({...u.current,...e.nonBuffers,...t})}})(),(0,n.zG)(e,B.Su((e=>(0,n.zG)(u,t.UI((t=>t[e]))))))}}({contextualCohorts:a.YP,consent:_.consent,enrichmentReplacementMap:a.YP,eventSourceId:_.eventSourceId,identities:a.YP,newEvents:o.cS,pageviewState:_.pageviewState,priorCachedEventsResponses:o.cS,sessionId:_.sessionId,userId:_.userId,userIdIsNewlyGenerated:_.userIdIsNewlyGenerated,viewId:_.pageviewState.viewId,webClient:a.G(_.webClient)},{newEvents:o.uZ(),priorCachedEventsResponses:o.uZ()}),(0,s.rO)({newEvents:(0,ze.F)(y,"pageview_received_by_worker")}),(e=>({...e,currentTimestampSecs:Ue((0,n.zG)(_.initialTimestampSecs,a.EQ((()=>0),(e=>e-Date.now()/1e3))))}))),{eventsCachedInWorker:I,coreService:w}=await function(s,m,f,d,_,v){d.debug("SDK core started",s);const g=500,h=new G(v),y=new k(s.permutiveConfig),b=new te(y,s.permutiveConfig,h,v,d,(()=>f.webClient.current)),S=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};b.reportError(e,null==t?void 0:t.userId,null==t?void 0:t.timestamp)},I=(0,n.zG)(u.Y3((()=>Promise.resolve().then(r.bind(r,521)).then((e=>e.watson))),(()=>"Failed to import watson.")),u.UI((e=>(0,n.zG)(f.webClient,t.UI(a.UI((e=>e.url))),t.D8(a.Eh(xe.Eq)),(r=>e({config:s.permutiveConfig,metrics:v,permutiveApi:h,permutiveUrls:y,pageUrl:r,trace:_,watsonEnabled:(0,n.zG)(f.pageviewState,t.UI((e=>e.watsonEnabled)))})))))),w=(0,n.zG)(V.initialise(s.permutiveConfig,d,S,_,v,f.userId,(()=>(0,n.zG)(J.connect(new T(s.permutiveConfig),v,new C,s.organizationId,`events_${f.userId.current}`,`keys_${f.userId.current}`,"events",d,f.consent,s.isSecureContext),_.traceTask("connect_idb_events_cache")))),_.traceTask("initialise_events_cache"),u.At((()=>()=>v.trackTimeSinceInit("sdk_lifecycle_timestamps",{timestamp_name:"events_cache_initialised",time_origin:"sdk_init"},performance.now()))),u.EQ((e=>{d.error(`Worker failed to initialise IndexedDB event cache: ${e}`);const r={},[i,a]=t.gS(o.uZ()),s=()=>new Promise((e=>{const t=String(Math.random());r[t]=n=>{delete r[t],e(n)},a([[t,void 0]])}));return(0,n.zG)(f.priorCachedEventsResponses,t.UI((e=>(0,n.zG)(e(),o.UI((e=>{var t;let[n,i]=e;return null===(t=r[n])||void 0===t?void 0:t.call(r,i)})))))),{eventsCachedInWorker:!1,coreOutput:{priorCachedEventsRequests:i},coreConfig:{eventsCache:p.t$(s)}}}),(e=>({eventsCachedInWorker:!0,coreOutput:{priorCachedEventsRequests:t.a9(M.of(o.bM()))},coreConfig:{eventsCache:p.F2(e)}})))),E=(0,n.zG)(!0,u.DT(n.yR,(()=>"IndexedDB disabled.")),u.tS((()=>(0,n.zG)(z.K.initialise(new T(s.permutiveConfig),v,d,new C,`worker_${s.organizationId}`,"core_service_state","keys","core_service_state",4,s.isSecureContext),_.traceTask("initialise-core-idb")))),u.tS((e=>(0,x.Yt)(u.Hi)({persistCoreState:c(e,"core"),persistLalState:c(e,"lal")})))),U=()=>new Promise((e=>(0,n.zG)(f.consent,t.YP((t=>{t&&e()}))))),A=o=>(0,n.zG)(u.fF(E),u.YO("servicePersistence"),u.Qt("eventsCache",u.fF((()=>o))),u.Qt("coreService",(0,n.zG)(u.Y3((()=>Promise.resolve().then(r.bind(r,142)).then((e=>e.service))),(e=>`Failed to import core service: ${e}`)),_.traceTask("import-core-service"))),u.Qt("lookalikeModelsService",u.Y3((()=>Promise.resolve().then(r.bind(r,905)).then((e=>e.lookalikeModelsService))),(()=>"Failed to import lookalike models."))),u.Qt("optimisedActivationsConfig",u.Y3((()=>Promise.resolve().then(r.bind(r,332)).then((e=>e.optimisedActivationsConfig))),(()=>"Failed to import lookalike models."))),u.Qt("watson",I),q.mU((()=>U)),u.UI((r=>{let{coreService:o,eventsCache:u,lookalikeModelsService:c,optimisedActivationsConfig:b,servicePersistence:I,watson:w}=r;const G={config:s.permutiveConfig,customQueries:ke(),logger:d,metrics:v,optimisedActivationsConfig:b,permutiveApi:h,permutiveUrls:y,reportError:S,trackPageviewComplete:s.trackPageviewComplete,migratedStateMaps:(0,n.zG)(a.lo(!s.isFirstPageview),a.EQ((()=>q.of({external:a.bM(),internal:a.bM()})),(()=>M.of(m.then((e=>e.migratedStateMaps)))))),trace:_,watson:a.G(w),performance:a.ij(self.performance)};return(0,n.zG)(I,p.UI((r=>{let{persistCoreState:s,persistLalState:p}=r;return(0,n.zG)(c({...G,...f}),p,i.VS((r=>{let[c,p]=r;return(0,n.zG)(f,o({...G,...u.coreConfig,lookalikeModels:a.G(p)}),(m=g,d=t.a9(!1),r=>i=>{const{value:a,state:o}=r(i),[s,u]=t.Ue(o.current),c=(0,e.UM)((()=>u(o.current)),m),l=(0,n.zG)(t.vP(o,s),t.UI((e=>{let[t,r]=e;return t===r})));return(0,n.zG)(d,t.bw((e=>e&&c()))),{value:(0,n.bc)(l,a),state:(0,n.zG)(t.vP(d,o,s),t.UI((e=>{let[t,r,n]=e;return t?r:n})))}}),l(f.consent),s,i.UI((e=>{let[r,[i,a]]=e;return{...a,stateFlushed:(0,n.zG)(t.vP(c,r,i),t.UI((e=>{let[t,r,n]=e;return t&&r&&n})))}})));var m,d})),(e=>{const{value:r}=e({stopped:t.a9(!1),previousState:{}});return e=>({value:r,state:t.a9(void 0)})}))})),p.fS((e=>(d.warn("Worker running in non-persistent mode.",e),(0,n.zG)(f,o({...G,...u.coreConfig,lookalikeModels:a.YP}),i.Hr("stateFlushed",(()=>t.a9(!0))),l(f.consent))))),i.UI((e=>({...e,...u.coreOutput}))))})));return async()=>{const e=w(),t=A(e)(),{eventsCachedInWorker:r}=await e;return{eventsCachedInWorker:r,coreService:t}}}(_,b,S,h,g,y)();d.send({eventsCachedInWorker:I});const A=await w;var P,j;if(p.nM(A))return h.error(`Failed to start worker: ${A.left}`),void(null===(P=(j=self).close)||void 0===P||P.call(j));const F=A.right,Q=await b,Y=(await F)({stopped:t.a9(!1),previousState:Q.previousState}),[N,$]=t.Ue(y.getNoMetricsTracked());(0,e.UM)((()=>$(y.getNoMetricsTracked())),100),function(e,r,i){const o=(0,n.zG)(t.vP(r),t.UI((0,n.ls)(B.UI((e=>"function"==typeof e?e:M.of(e))),(0,x.Yt)(M.G5))));let s=o.current();e(s),(0,n.zG)(o,t.YP((t=>{const r=t(),o=(0,n.zG)(r,B.z7(((e,t)=>{var r;return t!==s[e]&&(null===(r=i[e])||void 0===r||!r.isEmpty(t))})),a.DT((0,R.ff)(B.xb)));a.pC(o)&&(s={...s,...o.value},e(o.value))})))}(d.send,{activations:t.vP(Y.value.activations),cohorts:t.vP(Y.value.cohorts),context:Y.value.context,eventsToPublish:Y.value.eventsToPublish,eventsToPublishOnPageUnload:Y.value.eventsToPublishOnPageUnload,externalData:Y.value.externalData,geoIP:Y.value.geoIP,metrics:(0,n.zG)(N,t.UI((()=>()=>y.consume()))),priorCachedEventsRequests:Y.value.priorCachedEventsRequests,realtime:Y.value.realtime,state:Y.state,transitionsSinceInit:Y.value.transitionsSinceInit,workerStateFlushed:Y.value.stateFlushed,stateMigratedThisInitialisation:Y.value.stateMigratedThisInitialisation,secureSignal:Y.value.secureSignal},{eventsToPublish:{isEmpty:o.xb},metrics:{isEmpty:o.xb}})}function Ue(r){const n=()=>Math.floor(Date.now()/1e3)+r,[i,a]=t.Ue(n());return(0,e.UM)((()=>a(n())),1e3),i}const Ae=t=>{const r=[],n=[],i=()=>{for(;r.length>0&&n.length>0;)n.shift()()},a=t=>new Promise((r=>{n.push((()=>r(t()))),(0,e.HJ)(i)}));return t.addEventListener("message",(0,e.GL)((t=>{null!==t.data&&(r.push(t.data),(0,e.HJ)(i))}))),{next:()=>a((()=>r.shift())),read:()=>a((()=>r.splice(0)))}};!async function(){const t=self;Ee({contextsInitTimestampPerformance:e.NC,master:{...Ae(t),send:e=>t.postMessage(e)}})}()})()})();',"Worker",void 0,void 0)}},1005:e=>{e.exports=function(e,t,r,n){var i=self||window;try{try{var a;try{a=new i.Blob([e])}catch(t){(a=new(i.BlobBuilder||i.WebKitBlobBuilder||i.MozBlobBuilder||i.MSBlobBuilder)).append(e),a=a.getBlob()}var o=i.URL||i.webkitURL,s=o.createObjectURL(a),u=new i[t](s,r);return o.revokeObjectURL(s),u}catch(n){return new i[t]("data:application/javascript,".concat(encodeURIComponent(e)),r)}}catch(e){if(!n)throw Error("Inline worker is not supported");return new i[t](n,r)}}}},__webpack_module_cache__={};function __webpack_require__(e){var t=__webpack_module_cache__[e];if(void 0!==t)return t.exports;var r=__webpack_module_cache__[e]={exports:{}};return __webpack_modules__[e](r,r.exports,__webpack_require__),r.exports}__webpack_require__.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return __webpack_require__.d(t,{a:t}),t},__webpack_require__.d=(e,t)=>{for(var r in t)__webpack_require__.o(t,r)&&!__webpack_require__.o(e,r)&&Object.defineProperty(e,r,{enumerable:!0,get:t[r]})},__webpack_require__.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),__webpack_require__.r=e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})};var __webpack_exports__={};(()=>{var e=__webpack_require__(8586);const t=(()=>{try{return self.document.currentScript}catch{return null}})();(()=>{var r,n;(0,e.ho)(!0);const i="permutive.main.import_runWebSdk",a=`${i}_start`;null===(r=performance)||void 0===r||null===(n=r.mark)||void 0===n||n.call(r,a),(0,e.SF)((()=>Promise.resolve().then(__webpack_require__.bind(__webpack_require__,1498))))().then((r=>{var n,o;null===(n=performance)||void 0===n||null===(o=n.measure)||void 0===o||o.call(n,i,a),r.runSdk({contextsInitTimestampPerformance:e.NC,contextsInitTimestamp:e.RP,currentScript:t})})).catch(console.error)})()})()})();