(()=>{var P=(n=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(n,{get:(y,e)=>(typeof require<"u"?require:y)[e]}):n)(function(n){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+n+'" is not supported')});var S=(n,y)=>()=>(y||n((y={exports:{}}).exports,y),y.exports);var q=S((df,At)=>{var Os=Array.isArray;At.exports=Os});var ke=S((cf,Mt)=>{var Ss=typeof window=="object"&&window&&window.Object===Object&&window;Mt.exports=Ss});var $=S((gf,Ft)=>{var As=ke(),Ms=typeof self=="object"&&self&&self.Object===Object&&self,Fs=As||Ms||Function("return this")();Ft.exports=Fs});var ce=S((pf,Lt)=>{var Ls=$(),Cs=Ls.Symbol;Lt.exports=Cs});var It=S((ff,Pt)=>{var Ct=ce(),Tt=Object.prototype,Ts=Tt.hasOwnProperty,Ps=Tt.toString,ge=Ct?Ct.toStringTag:void 0;function Is(n){var y=Ts.call(n,ge),e=n[ge];try{n[ge]=void 0;var l=!0}catch{}var c=Ps.call(n);return l&&(y?n[ge]=e:delete n[ge]),c}Pt.exports=Is});var Ut=S((hf,Dt)=>{var Ds=Object.prototype,Us=Ds.toString;function Rs(n){return Us.call(n)}Dt.exports=Rs});var Y=S((yf,Nt)=>{var Rt=ce(),xs=It(),Ns=Ut(),js="[object Null]",ks="[object Undefined]",xt=Rt?Rt.toStringTag:void 0;function Ws(n){return n==null?n===void 0?ks:js:xt&&xt in Object(n)?xs(n):Ns(n)}Nt.exports=Ws});var K=S((mf,jt)=>{function Gs(n){return n!=null&&typeof n=="object"}jt.exports=Gs});var Se=S((vf,kt)=>{var Vs=Y(),qs=K(),Hs="[object Symbol]";function $s(n){return typeof n=="symbol"||qs(n)&&Vs(n)==Hs}kt.exports=$s});var Ae=S((wf,Wt)=>{var Bs=q(),zs=Se(),Js=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Ys=/^\w*$/;function Ks(n,y){if(Bs(n))return!1;var e=typeof n;return e=="number"||e=="symbol"||e=="boolean"||n==null||zs(n)?!0:Ys.test(n)||!Js.test(n)||y!=null&&n in Object(y)}Wt.exports=Ks});var Me=S((bf,Gt)=>{function Qs(n){var y=typeof n;return n!=null&&(y=="object"||y=="function")}Gt.exports=Qs});var We=S((_f,Vt)=>{var Zs=Y(),Xs=Me(),el="[object AsyncFunction]",tl="[object Function]",ol="[object GeneratorFunction]",rl="[object Proxy]";function nl(n){if(!Xs(n))return!1;var y=Zs(n);return y==tl||y==ol||y==el||y==rl}Vt.exports=nl});var Ht=S((Ef,qt)=>{var il=$(),sl=il["__core-js_shared__"];qt.exports=sl});var zt=S((Of,Bt)=>{var Ge=Ht(),$t=function(){var n=/[^.]+$/.exec(Ge&&Ge.keys&&Ge.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}();function ll(n){return!!$t&&$t in n}Bt.exports=ll});var Ve=S((Sf,Jt)=>{var al=Function.prototype,ul=al.toString;function dl(n){if(n!=null){try{return ul.call(n)}catch{}try{return n+""}catch{}}return""}Jt.exports=dl});var Kt=S((Af,Yt)=>{var cl=We(),gl=zt(),pl=Me(),fl=Ve(),hl=/[\\^$.*+?()[\]{}|]/g,yl=/^\[object .+?Constructor\]$/,ml=Function.prototype,vl=Object.prototype,wl=ml.toString,bl=vl.hasOwnProperty,_l=RegExp("^"+wl.call(bl).replace(hl,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function El(n){if(!pl(n)||gl(n))return!1;var y=cl(n)?_l:yl;return y.test(fl(n))}Yt.exports=El});var Zt=S((Mf,Qt)=>{function Ol(n,y){return n==null?void 0:n[y]}Qt.exports=Ol});var te=S((Ff,Xt)=>{var Sl=Kt(),Al=Zt();function Ml(n,y){var e=Al(n,y);return Sl(e)?e:void 0}Xt.exports=Ml});var pe=S((Lf,eo)=>{var Fl=te(),Ll=Fl(Object,"create");eo.exports=Ll});var ro=S((Cf,oo)=>{var to=pe();function Cl(){this.__data__=to?to(null):{},this.size=0}oo.exports=Cl});var io=S((Tf,no)=>{function Tl(n){var y=this.has(n)&&delete this.__data__[n];return this.size-=y?1:0,y}no.exports=Tl});var lo=S((Pf,so)=>{var Pl=pe(),Il="__lodash_hash_undefined__",Dl=Object.prototype,Ul=Dl.hasOwnProperty;function Rl(n){var y=this.__data__;if(Pl){var e=y[n];return e===Il?void 0:e}return Ul.call(y,n)?y[n]:void 0}so.exports=Rl});var uo=S((If,ao)=>{var xl=pe(),Nl=Object.prototype,jl=Nl.hasOwnProperty;function kl(n){var y=this.__data__;return xl?y[n]!==void 0:jl.call(y,n)}ao.exports=kl});var go=S((Df,co)=>{var Wl=pe(),Gl="__lodash_hash_undefined__";function Vl(n,y){var e=this.__data__;return this.size+=this.has(n)?0:1,e[n]=Wl&&y===void 0?Gl:y,this}co.exports=Vl});var fo=S((Uf,po)=>{var ql=ro(),Hl=io(),$l=lo(),Bl=uo(),zl=go();function ne(n){var y=-1,e=n==null?0:n.length;for(this.clear();++y<e;){var l=n[y];this.set(l[0],l[1])}}ne.prototype.clear=ql;ne.prototype.delete=Hl;ne.prototype.get=$l;ne.prototype.has=Bl;ne.prototype.set=zl;po.exports=ne});var yo=S((Rf,ho)=>{function Jl(){this.__data__=[],this.size=0}ho.exports=Jl});var qe=S((xf,mo)=>{function Yl(n,y){return n===y||n!==n&&y!==y}mo.exports=Yl});var fe=S((Nf,vo)=>{var Kl=qe();function Ql(n,y){for(var e=n.length;e--;)if(Kl(n[e][0],y))return e;return-1}vo.exports=Ql});var bo=S((jf,wo)=>{var Zl=fe(),Xl=Array.prototype,ea=Xl.splice;function ta(n){var y=this.__data__,e=Zl(y,n);if(e<0)return!1;var l=y.length-1;return e==l?y.pop():ea.call(y,e,1),--this.size,!0}wo.exports=ta});var Eo=S((kf,_o)=>{var oa=fe();function ra(n){var y=this.__data__,e=oa(y,n);return e<0?void 0:y[e][1]}_o.exports=ra});var So=S((Wf,Oo)=>{var na=fe();function ia(n){return na(this.__data__,n)>-1}Oo.exports=ia});var Mo=S((Gf,Ao)=>{var sa=fe();function la(n,y){var e=this.__data__,l=sa(e,n);return l<0?(++this.size,e.push([n,y])):e[l][1]=y,this}Ao.exports=la});var he=S((Vf,Fo)=>{var aa=yo(),ua=bo(),da=Eo(),ca=So(),ga=Mo();function ie(n){var y=-1,e=n==null?0:n.length;for(this.clear();++y<e;){var l=n[y];this.set(l[0],l[1])}}ie.prototype.clear=aa;ie.prototype.delete=ua;ie.prototype.get=da;ie.prototype.has=ca;ie.prototype.set=ga;Fo.exports=ie});var Fe=S((qf,Lo)=>{var pa=te(),fa=$(),ha=pa(fa,"Map");Lo.exports=ha});var Po=S((Hf,To)=>{var Co=fo(),ya=he(),ma=Fe();function va(){this.size=0,this.__data__={hash:new Co,map:new(ma||ya),string:new Co}}To.exports=va});var Do=S(($f,Io)=>{function wa(n){var y=typeof n;return y=="string"||y=="number"||y=="symbol"||y=="boolean"?n!=="__proto__":n===null}Io.exports=wa});var ye=S((Bf,Uo)=>{var ba=Do();function _a(n,y){var e=n.__data__;return ba(y)?e[typeof y=="string"?"string":"hash"]:e.map}Uo.exports=_a});var xo=S((zf,Ro)=>{var Ea=ye();function Oa(n){var y=Ea(this,n).delete(n);return this.size-=y?1:0,y}Ro.exports=Oa});var jo=S((Jf,No)=>{var Sa=ye();function Aa(n){return Sa(this,n).get(n)}No.exports=Aa});var Wo=S((Yf,ko)=>{var Ma=ye();function Fa(n){return Ma(this,n).has(n)}ko.exports=Fa});var Vo=S((Kf,Go)=>{var La=ye();function Ca(n,y){var e=La(this,n),l=e.size;return e.set(n,y),this.size+=e.size==l?0:1,this}Go.exports=Ca});var Le=S((Qf,qo)=>{var Ta=Po(),Pa=xo(),Ia=jo(),Da=Wo(),Ua=Vo();function se(n){var y=-1,e=n==null?0:n.length;for(this.clear();++y<e;){var l=n[y];this.set(l[0],l[1])}}se.prototype.clear=Ta;se.prototype.delete=Pa;se.prototype.get=Ia;se.prototype.has=Da;se.prototype.set=Ua;qo.exports=se});var Bo=S((Zf,$o)=>{var Ho=Le(),Ra="Expected a function";function He(n,y){if(typeof n!="function"||y!=null&&typeof y!="function")throw new TypeError(Ra);var e=function(){var l=arguments,c=y?y.apply(this,l):l[0],d=e.cache;if(d.has(c))return d.get(c);var i=n.apply(this,l);return e.cache=d.set(c,i)||d,i};return e.cache=new(He.Cache||Ho),e}He.Cache=Ho;$o.exports=He});var Jo=S((Xf,zo)=>{var xa=Bo(),Na=500;function ja(n){var y=xa(n,function(l){return e.size===Na&&e.clear(),l}),e=y.cache;return y}zo.exports=ja});var Ko=S((eh,Yo)=>{var ka=Jo(),Wa=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ga=/\\(\\)?/g,Va=ka(function(n){var y=[];return n.charCodeAt(0)===46&&y.push(""),n.replace(Wa,function(e,l,c,d){y.push(c?d.replace(Ga,"$1"):l||e)}),y});Yo.exports=Va});var Zo=S((th,Qo)=>{function qa(n,y){for(var e=-1,l=n==null?0:n.length,c=Array(l);++e<l;)c[e]=y(n[e],e,n);return c}Qo.exports=qa});var nr=S((oh,rr)=>{var Xo=ce(),Ha=Zo(),$a=q(),Ba=Se(),za=1/0,er=Xo?Xo.prototype:void 0,tr=er?er.toString:void 0;function or(n){if(typeof n=="string")return n;if($a(n))return Ha(n,or)+"";if(Ba(n))return tr?tr.call(n):"";var y=n+"";return y=="0"&&1/n==-za?"-0":y}rr.exports=or});var sr=S((rh,ir)=>{var Ja=nr();function Ya(n){return n==null?"":Ja(n)}ir.exports=Ya});var $e=S((nh,lr)=>{var Ka=q(),Qa=Ae(),Za=Ko(),Xa=sr();function eu(n,y){return Ka(n)?n:Qa(n,y)?[n]:Za(Xa(n))}lr.exports=eu});var me=S((ih,ar)=>{var tu=Se(),ou=1/0;function ru(n){if(typeof n=="string"||tu(n))return n;var y=n+"";return y=="0"&&1/n==-ou?"-0":y}ar.exports=ru});var Be=S((sh,ur)=>{var nu=$e(),iu=me();function su(n,y){y=nu(y,n);for(var e=0,l=y.length;n!=null&&e<l;)n=n[iu(y[e++])];return e&&e==l?n:void 0}ur.exports=su});var ze=S((lh,dr)=>{var lu=Be();function au(n,y,e){var l=n==null?void 0:lu(n,y);return l===void 0?e:l}dr.exports=au});var Je=S((ah,cr)=>{function uu(n,y){return function(e){return n(y(e))}}cr.exports=uu});var pr=S((uh,gr)=>{var du=Je(),cu=du(Object.getPrototypeOf,Object);gr.exports=cu});var yr=S((dh,hr)=>{var gu=Y(),pu=pr(),fu=K(),hu="[object Object]",yu=Function.prototype,mu=Object.prototype,fr=yu.toString,vu=mu.hasOwnProperty,wu=fr.call(Object);function bu(n){if(!fu(n)||gu(n)!=hu)return!1;var y=pu(n);if(y===null)return!0;var e=vu.call(y,"constructor")&&y.constructor;return typeof e=="function"&&e instanceof e&&fr.call(e)==wu}hr.exports=bu});var vr=S((ch,mr)=>{var _u=Y(),Eu=q(),Ou=K(),Su="[object String]";function Au(n){return typeof n=="string"||!Eu(n)&&Ou(n)&&_u(n)==Su}mr.exports=Au});var br=S((gh,wr)=>{function Mu(n,y,e,l){var c=-1,d=n==null?0:n.length;for(l&&d&&(e=n[++c]);++c<d;)e=y(e,n[c],c,n);return e}wr.exports=Mu});var Er=S((ph,_r)=>{function Fu(n){return function(y,e,l){for(var c=-1,d=Object(y),i=l(y),o=i.length;o--;){var r=i[n?o:++c];if(e(d[r],r,d)===!1)break}return y}}_r.exports=Fu});var Sr=S((fh,Or)=>{var Lu=Er(),Cu=Lu();Or.exports=Cu});var Mr=S((hh,Ar)=>{function Tu(n,y){for(var e=-1,l=Array(n);++e<n;)l[e]=y(e);return l}Ar.exports=Tu});var Lr=S((yh,Fr)=>{var Pu=Y(),Iu=K(),Du="[object Arguments]";function Uu(n){return Iu(n)&&Pu(n)==Du}Fr.exports=Uu});var Ye=S((mh,Pr)=>{var Cr=Lr(),Ru=K(),Tr=Object.prototype,xu=Tr.hasOwnProperty,Nu=Tr.propertyIsEnumerable,ju=Cr(function(){return arguments}())?Cr:function(n){return Ru(n)&&xu.call(n,"callee")&&!Nu.call(n,"callee")};Pr.exports=ju});var Dr=S((vh,Ir)=>{function ku(){return!1}Ir.exports=ku});var Ke=S((ve,le)=>{var Wu=$(),Gu=Dr(),xr=typeof ve=="object"&&ve&&!ve.nodeType&&ve,Ur=xr&&typeof le=="object"&&le&&!le.nodeType&&le,Vu=Ur&&Ur.exports===xr,Rr=Vu?Wu.Buffer:void 0,qu=Rr?Rr.isBuffer:void 0,Hu=qu||Gu;le.exports=Hu});var Qe=S((wh,Nr)=>{var $u=9007199254740991,Bu=/^(?:0|[1-9]\d*)$/;function zu(n,y){var e=typeof n;return y=y==null?$u:y,!!y&&(e=="number"||e!="symbol"&&Bu.test(n))&&n>-1&&n%1==0&&n<y}Nr.exports=zu});var Ce=S((bh,jr)=>{var Ju=9007199254740991;function Yu(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=Ju}jr.exports=Yu});var Wr=S((_h,kr)=>{var Ku=Y(),Qu=Ce(),Zu=K(),Xu="[object Arguments]",ed="[object Array]",td="[object Boolean]",od="[object Date]",rd="[object Error]",nd="[object Function]",id="[object Map]",sd="[object Number]",ld="[object Object]",ad="[object RegExp]",ud="[object Set]",dd="[object String]",cd="[object WeakMap]",gd="[object ArrayBuffer]",pd="[object DataView]",fd="[object Float32Array]",hd="[object Float64Array]",yd="[object Int8Array]",md="[object Int16Array]",vd="[object Int32Array]",wd="[object Uint8Array]",bd="[object Uint8ClampedArray]",_d="[object Uint16Array]",Ed="[object Uint32Array]",I={};I[fd]=I[hd]=I[yd]=I[md]=I[vd]=I[wd]=I[bd]=I[_d]=I[Ed]=!0;I[Xu]=I[ed]=I[gd]=I[td]=I[pd]=I[od]=I[rd]=I[nd]=I[id]=I[sd]=I[ld]=I[ad]=I[ud]=I[dd]=I[cd]=!1;function Od(n){return Zu(n)&&Qu(n.length)&&!!I[Ku(n)]}kr.exports=Od});var Vr=S((Eh,Gr)=>{function Sd(n){return function(y){return n(y)}}Gr.exports=Sd});var Hr=S((we,ae)=>{var Ad=ke(),qr=typeof we=="object"&&we&&!we.nodeType&&we,be=qr&&typeof ae=="object"&&ae&&!ae.nodeType&&ae,Md=be&&be.exports===qr,Ze=Md&&Ad.process,Fd=function(){try{var n=be&&be.require&&be.require("util").types;return n||Ze&&Ze.binding&&Ze.binding("util")}catch{}}();ae.exports=Fd});var Xe=S((Oh,zr)=>{var Ld=Wr(),Cd=Vr(),$r=Hr(),Br=$r&&$r.isTypedArray,Td=Br?Cd(Br):Ld;zr.exports=Td});var Yr=S((Sh,Jr)=>{var Pd=Mr(),Id=Ye(),Dd=q(),Ud=Ke(),Rd=Qe(),xd=Xe(),Nd=Object.prototype,jd=Nd.hasOwnProperty;function kd(n,y){var e=Dd(n),l=!e&&Id(n),c=!e&&!l&&Ud(n),d=!e&&!l&&!c&&xd(n),i=e||l||c||d,o=i?Pd(n.length,String):[],r=o.length;for(var a in n)(y||jd.call(n,a))&&!(i&&(a=="length"||c&&(a=="offset"||a=="parent")||d&&(a=="buffer"||a=="byteLength"||a=="byteOffset")||Rd(a,r)))&&o.push(a);return o}Jr.exports=kd});var Qr=S((Ah,Kr)=>{var Wd=Object.prototype;function Gd(n){var y=n&&n.constructor,e=typeof y=="function"&&y.prototype||Wd;return n===e}Kr.exports=Gd});var Xr=S((Mh,Zr)=>{var Vd=Je(),qd=Vd(Object.keys,Object);Zr.exports=qd});var tn=S((Fh,en)=>{var Hd=Qr(),$d=Xr(),Bd=Object.prototype,zd=Bd.hasOwnProperty;function Jd(n){if(!Hd(n))return $d(n);var y=[];for(var e in Object(n))zd.call(n,e)&&e!="constructor"&&y.push(e);return y}en.exports=Jd});var et=S((Lh,on)=>{var Yd=We(),Kd=Ce();function Qd(n){return n!=null&&Kd(n.length)&&!Yd(n)}on.exports=Qd});var Te=S((Ch,rn)=>{var Zd=Yr(),Xd=tn(),ec=et();function tc(n){return ec(n)?Zd(n):Xd(n)}rn.exports=tc});var sn=S((Th,nn)=>{var oc=Sr(),rc=Te();function nc(n,y){return n&&oc(n,y,rc)}nn.exports=nc});var an=S((Ph,ln)=>{var ic=et();function sc(n,y){return function(e,l){if(e==null)return e;if(!ic(e))return n(e,l);for(var c=e.length,d=y?c:-1,i=Object(e);(y?d--:++d<c)&&l(i[d],d,i)!==!1;);return e}}ln.exports=sc});var dn=S((Ih,un)=>{var lc=sn(),ac=an(),uc=ac(lc);un.exports=uc});var gn=S((Dh,cn)=>{var dc=he();function cc(){this.__data__=new dc,this.size=0}cn.exports=cc});var fn=S((Uh,pn)=>{function gc(n){var y=this.__data__,e=y.delete(n);return this.size=y.size,e}pn.exports=gc});var yn=S((Rh,hn)=>{function pc(n){return this.__data__.get(n)}hn.exports=pc});var vn=S((xh,mn)=>{function fc(n){return this.__data__.has(n)}mn.exports=fc});var bn=S((Nh,wn)=>{var hc=he(),yc=Fe(),mc=Le(),vc=200;function wc(n,y){var e=this.__data__;if(e instanceof hc){var l=e.__data__;if(!yc||l.length<vc-1)return l.push([n,y]),this.size=++e.size,this;e=this.__data__=new mc(l)}return e.set(n,y),this.size=e.size,this}wn.exports=wc});var tt=S((jh,_n)=>{var bc=he(),_c=gn(),Ec=fn(),Oc=yn(),Sc=vn(),Ac=bn();function ue(n){var y=this.__data__=new bc(n);this.size=y.size}ue.prototype.clear=_c;ue.prototype.delete=Ec;ue.prototype.get=Oc;ue.prototype.has=Sc;ue.prototype.set=Ac;_n.exports=ue});var On=S((kh,En)=>{var Mc="__lodash_hash_undefined__";function Fc(n){return this.__data__.set(n,Mc),this}En.exports=Fc});var An=S((Wh,Sn)=>{function Lc(n){return this.__data__.has(n)}Sn.exports=Lc});var Fn=S((Gh,Mn)=>{var Cc=Le(),Tc=On(),Pc=An();function Pe(n){var y=-1,e=n==null?0:n.length;for(this.__data__=new Cc;++y<e;)this.add(n[y])}Pe.prototype.add=Pe.prototype.push=Tc;Pe.prototype.has=Pc;Mn.exports=Pe});var Cn=S((Vh,Ln)=>{function Ic(n,y){for(var e=-1,l=n==null?0:n.length;++e<l;)if(y(n[e],e,n))return!0;return!1}Ln.exports=Ic});var Pn=S((qh,Tn)=>{function Dc(n,y){return n.has(y)}Tn.exports=Dc});var ot=S((Hh,In)=>{var Uc=Fn(),Rc=Cn(),xc=Pn(),Nc=1,jc=2;function kc(n,y,e,l,c,d){var i=e&Nc,o=n.length,r=y.length;if(o!=r&&!(i&&r>o))return!1;var a=d.get(n),u=d.get(y);if(a&&u)return a==y&&u==n;var g=-1,t=!0,f=e&jc?new Uc:void 0;for(d.set(n,y),d.set(y,n);++g<o;){var p=n[g],h=y[g];if(l)var w=i?l(h,p,g,y,n,d):l(p,h,g,n,y,d);if(w!==void 0){if(w)continue;t=!1;break}if(f){if(!Rc(y,function(s,b){if(!xc(f,b)&&(p===s||c(p,s,e,l,d)))return f.push(b)})){t=!1;break}}else if(!(p===h||c(p,h,e,l,d))){t=!1;break}}return d.delete(n),d.delete(y),t}In.exports=kc});var Un=S(($h,Dn)=>{var Wc=$(),Gc=Wc.Uint8Array;Dn.exports=Gc});var xn=S((Bh,Rn)=>{function Vc(n){var y=-1,e=Array(n.size);return n.forEach(function(l,c){e[++y]=[c,l]}),e}Rn.exports=Vc});var jn=S((zh,Nn)=>{function qc(n){var y=-1,e=Array(n.size);return n.forEach(function(l){e[++y]=l}),e}Nn.exports=qc});var qn=S((Jh,Vn)=>{var kn=ce(),Wn=Un(),Hc=qe(),$c=ot(),Bc=xn(),zc=jn(),Jc=1,Yc=2,Kc="[object Boolean]",Qc="[object Date]",Zc="[object Error]",Xc="[object Map]",eg="[object Number]",tg="[object RegExp]",og="[object Set]",rg="[object String]",ng="[object Symbol]",ig="[object ArrayBuffer]",sg="[object DataView]",Gn=kn?kn.prototype:void 0,rt=Gn?Gn.valueOf:void 0;function lg(n,y,e,l,c,d,i){switch(e){case sg:if(n.byteLength!=y.byteLength||n.byteOffset!=y.byteOffset)return!1;n=n.buffer,y=y.buffer;case ig:return!(n.byteLength!=y.byteLength||!d(new Wn(n),new Wn(y)));case Kc:case Qc:case eg:return Hc(+n,+y);case Zc:return n.name==y.name&&n.message==y.message;case tg:case rg:return n==y+"";case Xc:var o=Bc;case og:var r=l&Jc;if(o||(o=zc),n.size!=y.size&&!r)return!1;var a=i.get(n);if(a)return a==y;l|=Yc,i.set(n,y);var u=$c(o(n),o(y),l,c,d,i);return i.delete(n),u;case ng:if(rt)return rt.call(n)==rt.call(y)}return!1}Vn.exports=lg});var $n=S((Yh,Hn)=>{function ag(n,y){for(var e=-1,l=y.length,c=n.length;++e<l;)n[c+e]=y[e];return n}Hn.exports=ag});var zn=S((Kh,Bn)=>{var ug=$n(),dg=q();function cg(n,y,e){var l=y(n);return dg(n)?l:ug(l,e(n))}Bn.exports=cg});var Yn=S((Qh,Jn)=>{function gg(n,y){for(var e=-1,l=n==null?0:n.length,c=0,d=[];++e<l;){var i=n[e];y(i,e,n)&&(d[c++]=i)}return d}Jn.exports=gg});var Qn=S((Zh,Kn)=>{function pg(){return[]}Kn.exports=pg});var ei=S((Xh,Xn)=>{var fg=Yn(),hg=Qn(),yg=Object.prototype,mg=yg.propertyIsEnumerable,Zn=Object.getOwnPropertySymbols,vg=Zn?function(n){return n==null?[]:(n=Object(n),fg(Zn(n),function(y){return mg.call(n,y)}))}:hg;Xn.exports=vg});var oi=S((ey,ti)=>{var wg=zn(),bg=ei(),_g=Te();function Eg(n){return wg(n,_g,bg)}ti.exports=Eg});var ii=S((ty,ni)=>{var ri=oi(),Og=1,Sg=Object.prototype,Ag=Sg.hasOwnProperty;function Mg(n,y,e,l,c,d){var i=e&Og,o=ri(n),r=o.length,a=ri(y),u=a.length;if(r!=u&&!i)return!1;for(var g=r;g--;){var t=o[g];if(!(i?t in y:Ag.call(y,t)))return!1}var f=d.get(n),p=d.get(y);if(f&&p)return f==y&&p==n;var h=!0;d.set(n,y),d.set(y,n);for(var w=i;++g<r;){t=o[g];var s=n[t],b=y[t];if(l)var v=i?l(b,s,t,y,n,d):l(s,b,t,n,y,d);if(!(v===void 0?s===b||c(s,b,e,l,d):v)){h=!1;break}w||(w=t=="constructor")}if(h&&!w){var m=n.constructor,E=y.constructor;m!=E&&"constructor"in n&&"constructor"in y&&!(typeof m=="function"&&m instanceof m&&typeof E=="function"&&E instanceof E)&&(h=!1)}return d.delete(n),d.delete(y),h}ni.exports=Mg});var li=S((oy,si)=>{var Fg=te(),Lg=$(),Cg=Fg(Lg,"DataView");si.exports=Cg});var ui=S((ry,ai)=>{var Tg=te(),Pg=$(),Ig=Tg(Pg,"Promise");ai.exports=Ig});var ci=S((ny,di)=>{var Dg=te(),Ug=$(),Rg=Dg(Ug,"Set");di.exports=Rg});var pi=S((iy,gi)=>{var xg=te(),Ng=$(),jg=xg(Ng,"WeakMap");gi.exports=jg});var _i=S((sy,bi)=>{var nt=li(),it=Fe(),st=ui(),lt=ci(),at=pi(),wi=Y(),de=Ve(),fi="[object Map]",kg="[object Object]",hi="[object Promise]",yi="[object Set]",mi="[object WeakMap]",vi="[object DataView]",Wg=de(nt),Gg=de(it),Vg=de(st),qg=de(lt),Hg=de(at),oe=wi;(nt&&oe(new nt(new ArrayBuffer(1)))!=vi||it&&oe(new it)!=fi||st&&oe(st.resolve())!=hi||lt&&oe(new lt)!=yi||at&&oe(new at)!=mi)&&(oe=function(n){var y=wi(n),e=y==kg?n.constructor:void 0,l=e?de(e):"";if(l)switch(l){case Wg:return vi;case Gg:return fi;case Vg:return hi;case qg:return yi;case Hg:return mi}return y});bi.exports=oe});var Ci=S((ly,Li)=>{var ut=tt(),$g=ot(),Bg=qn(),zg=ii(),Ei=_i(),Oi=q(),Si=Ke(),Jg=Xe(),Yg=1,Ai="[object Arguments]",Mi="[object Array]",Ie="[object Object]",Kg=Object.prototype,Fi=Kg.hasOwnProperty;function Qg(n,y,e,l,c,d){var i=Oi(n),o=Oi(y),r=i?Mi:Ei(n),a=o?Mi:Ei(y);r=r==Ai?Ie:r,a=a==Ai?Ie:a;var u=r==Ie,g=a==Ie,t=r==a;if(t&&Si(n)){if(!Si(y))return!1;i=!0,u=!1}if(t&&!u)return d||(d=new ut),i||Jg(n)?$g(n,y,e,l,c,d):Bg(n,y,r,e,l,c,d);if(!(e&Yg)){var f=u&&Fi.call(n,"__wrapped__"),p=g&&Fi.call(y,"__wrapped__");if(f||p){var h=f?n.value():n,w=p?y.value():y;return d||(d=new ut),c(h,w,e,l,d)}}return t?(d||(d=new ut),zg(n,y,e,l,c,d)):!1}Li.exports=Qg});var dt=S((ay,Ii)=>{var Zg=Ci(),Ti=K();function Pi(n,y,e,l,c){return n===y?!0:n==null||y==null||!Ti(n)&&!Ti(y)?n!==n&&y!==y:Zg(n,y,e,l,Pi,c)}Ii.exports=Pi});var Ui=S((uy,Di)=>{var Xg=tt(),ep=dt(),tp=1,op=2;function rp(n,y,e,l){var c=e.length,d=c,i=!l;if(n==null)return!d;for(n=Object(n);c--;){var o=e[c];if(i&&o[2]?o[1]!==n[o[0]]:!(o[0]in n))return!1}for(;++c<d;){o=e[c];var r=o[0],a=n[r],u=o[1];if(i&&o[2]){if(a===void 0&&!(r in n))return!1}else{var g=new Xg;if(l)var t=l(a,u,r,n,y,g);if(!(t===void 0?ep(u,a,tp|op,l,g):t))return!1}}return!0}Di.exports=rp});var ct=S((dy,Ri)=>{var np=Me();function ip(n){return n===n&&!np(n)}Ri.exports=ip});var Ni=S((cy,xi)=>{var sp=ct(),lp=Te();function ap(n){for(var y=lp(n),e=y.length;e--;){var l=y[e],c=n[l];y[e]=[l,c,sp(c)]}return y}xi.exports=ap});var gt=S((gy,ji)=>{function up(n,y){return function(e){return e==null?!1:e[n]===y&&(y!==void 0||n in Object(e))}}ji.exports=up});var Wi=S((py,ki)=>{var dp=Ui(),cp=Ni(),gp=gt();function pp(n){var y=cp(n);return y.length==1&&y[0][2]?gp(y[0][0],y[0][1]):function(e){return e===n||dp(e,n,y)}}ki.exports=pp});var Vi=S((fy,Gi)=>{function fp(n,y){return n!=null&&y in Object(n)}Gi.exports=fp});var Hi=S((hy,qi)=>{var hp=$e(),yp=Ye(),mp=q(),vp=Qe(),wp=Ce(),bp=me();function _p(n,y,e){y=hp(y,n);for(var l=-1,c=y.length,d=!1;++l<c;){var i=bp(y[l]);if(!(d=n!=null&&e(n,i)))break;n=n[i]}return d||++l!=c?d:(c=n==null?0:n.length,!!c&&wp(c)&&vp(i,c)&&(mp(n)||yp(n)))}qi.exports=_p});var Bi=S((yy,$i)=>{var Ep=Vi(),Op=Hi();function Sp(n,y){return n!=null&&Op(n,y,Ep)}$i.exports=Sp});var Ji=S((my,zi)=>{var Ap=dt(),Mp=ze(),Fp=Bi(),Lp=Ae(),Cp=ct(),Tp=gt(),Pp=me(),Ip=1,Dp=2;function Up(n,y){return Lp(n)&&Cp(y)?Tp(Pp(n),y):function(e){var l=Mp(e,n);return l===void 0&&l===y?Fp(e,n):Ap(y,l,Ip|Dp)}}zi.exports=Up});var Ki=S((vy,Yi)=>{function Rp(n){return n}Yi.exports=Rp});var Zi=S((wy,Qi)=>{function xp(n){return function(y){return y==null?void 0:y[n]}}Qi.exports=xp});var es=S((by,Xi)=>{var Np=Be();function jp(n){return function(y){return Np(y,n)}}Xi.exports=jp});var os=S((_y,ts)=>{var kp=Zi(),Wp=es(),Gp=Ae(),Vp=me();function qp(n){return Gp(n)?kp(Vp(n)):Wp(n)}ts.exports=qp});var ns=S((Ey,rs)=>{var Hp=Wi(),$p=Ji(),Bp=Ki(),zp=q(),Jp=os();function Yp(n){return typeof n=="function"?n:n==null?Bp:typeof n=="object"?zp(n)?$p(n[0],n[1]):Hp(n):Jp(n)}rs.exports=Yp});var ss=S((Oy,is)=>{function Kp(n,y,e,l,c){return c(n,function(d,i,o){e=l?(l=!1,d):y(e,d,i,o)}),e}is.exports=Kp});var as=S((Sy,ls)=>{var Qp=br(),Zp=dn(),Xp=ns(),ef=ss(),tf=q();function of(n,y,e){var l=tf(n)?Qp:ef,c=arguments.length<3;return l(n,Xp(y,4),e,c,Zp)}ls.exports=of});var cs=S((Ay,_e)=>{var rf=ze(),nf=yr(),us=vr(),ds=as(),ft=typeof window<"u";function sf(n,y="ERROR"){console.log("[service/dotenv][".concat(y,"] ").concat(n))}function lf(n){return n==="True"||n==="true"?!0:n==="False"||n==="false"?!1:n}function re(n){return Array.isArray(n)?ds(n,(y,e,l)=>(y[l]=re(e),y),[]):nf(n)?ds(n,(y,e,l)=>(y[l]=re(e),y),{}):us(n)&&n.split(",").length>1?n.split(","):us(n)?lf(n):n}function De(n,y){if(n){let e=rf(n,y,n[y]);return e!==void 0?re(e):void 0}}var pt=class{constructor(){this.allowedOnClient=[],this.allowedOnEditClient=[],this.getAllForWindow=this.getAllForWindow.bind(this)}getForClient(y,e=void 0){let l=De(window.env,y),c=De(window.env,y);return l!==void 0?l:c!==void 0?c:re(e)}getForServer(y,e=void 0){let l=De(window.env,y),c=De(process.env,y);return l!==void 0?l:c!==void 0?c:re(e)}getAllForClient(){return re({...window.env,...window.env})}getAllForWindow(y){["allowedOnClient","allowedOnEditClient"].forEach(l=>{this[l]&&!Array.isArray(this[l])&&sf("EnvVars.".concat(l," must be an array of environment variable key strings"))});let e=this.allowedOnClient;return y&&(e=e.concat(this.allowedOnEditClient)),e&&e.reduce((l,c)=>{let d=this.getForServer(c);return l[c]=d,l},{})}getAllForServer(){return re({...process.env,...window.env})}},Q=new pt;function af(n={}){Q.allowedOnClient=n.allowedOnClient||[],Q.allowedOnEditClient=n.allowedOnEditClient||[]}_e.exports.configure=af;_e.exports.get=ft?Q.getForClient:Q.getForServer;_e.exports.getAll=ft?Q.getAllForClient:Q.getAllForServer;_e.exports.getAllForWindow=ft?Q.getForClient:Q.getAllForWindow});var ps=S((gs,ht)=>{(function(n){typeof gs=="object"&&typeof ht<"u"?ht.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:this).Cep=n()})(function(){return function n(y,e,l){function c(o,r){if(!e[o]){if(!y[o]){var a=typeof P=="function"&&P;if(!r&&a)return a(o,!0);if(d)return d(o,!0);throw(r=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",r}a=e[o]={exports:{}},y[o][0].call(a.exports,function(u){return c(y[o][1][u]||u)},a,a.exports,n,y,e,l)}return e[o].exports}for(var d=typeof P=="function"&&P,i=0;i<l.length;i++)c(l[i]);return c}({1:[function(o,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var l,c=o("./Logger"),d=o("./promiseWithTimeout"),i=o("./localization"),o=((o=l=e.ModuleFlags||(e.ModuleFlags={}))[o.None=0]="None",o[o.EnableForDomestic=1]="EnableForDomestic",o[o.EnableForForeign=2]="EnableForForeign",o[o.RunWithoutAdFuel=4]="RunWithoutAdFuel",o[o.RunWithoutConsent=8]="RunWithoutConsent",o[o.HasVideoAPI=16]="HasVideoAPI",o[o.DisableForCanada=32]="DisableForCanada",Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r);function r(a,u,g,t,f,p,h,w){p===void 0&&(p=l.EnableForDomestic|l.EnableForForeign),h===void 0&&(h=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var s=this;this.config=a,this.MODULE_NAME=u,this.MODULE_VERSION=g,this.MODULE_LOG_TAG=t,this.logStyle=f,this.moduleFlags=p,this.consentTags=h,this.MODULE_VIDEO_API_KEY=w,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((a=window.WM)==null?void 0:a.UserConsent)||((u=window.WBD)==null?void 0:u.UserConsent),this.environmentMatchesFlags=function(){return(0,i.isIntl)()?(!(0,i.isCanada)()||(s.moduleFlags&l.DisableForCanada)!==l.DisableForCanada)&&(s.moduleFlags&l.EnableForForeign)===l.EnableForForeign:(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic},this.callInit=function(){s.logger.log("Waiting for UserConsent..."),s.waitForUserConsent().then(function(){var b;s.logger.log("Checking Module Flags...",s.moduleFlags),(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent||(b=s.userConsentLib)!=null&&b.inUserConsentState(s.consentTags,{id:s.MODULE_NAME})?(s.moduleFlags&&l.RunWithoutAdFuel)==l.RunWithoutAdFuel?((b=window.AdFuel)!=null&&b.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var v;s.logger.log("Registering with AdFuel..."),(v=window.AdFuel)!=null&&v.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var v;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(v=window.AdFuel)!=null&&v.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)}))})):(s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)}))):(s.logger.log("Waiting for AdFuel..."),s.waitForAdFuel().then(function(){var v;(v=window.AdFuel)!=null&&v.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Registering with AdFuel..."),(m=window.AdFuel)!=null&&m.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var m;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var E;s.logger.log("Setting Module Loaded..."),(E=window.AdFuel)!=null&&E.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)}).catch(function(v){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for AdFuel."),v)})):(s.logger.info("User consent is not granted.",(b=s.userConsentLib)==null?void 0:b.inUserConsentState(s.consentTags)),(b=window.AdFuel)!=null&&b.setModuleLoaded(s.MODULE_LOG_TAG))}).catch(function(b){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for consent."),b)})},this.waitForAdFuel=function(){return(s.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(b){window.AdFuel?b():document.addEventListener("AdFuelCreated",function(){b()})}))},this.waitForUserConsent=function(){return!s.userConsentLib||(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(b){var v;s._logger.log("Consent Promise with Timeout..."),(v=s.userConsentLib)!=null&&v.isReady()?(s._logger.log("Consent Is Ready..."),(v=s.userConsentLib)!=null&&v.isInRegion("gdpr")?(s._logger.log("Region is GDPR..."),(v=((v=s.userConsentLib)==null?void 0:v.isOneTrustLoaded())&&!((v=s.userConsentLib)!=null&&v.isOneTrustFailing()))!=null&&v?(s._logger.log("Optanon is Loaded..."),b()):(s._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){s._logger.log("OneTrust is Loaded..."),b()}),document.addEventListener("oneTrustFailed",function(){s._logger.error("OneTrust Failed To Load..."),b()}),document.addEventListener("oneTrustBlocked",function(){s._logger.error("OneTrust Loading Was Blocked..."),b()}))):(s._logger.log("Region is not GDPR..."),b())):s.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),b()})):(console.log("No User Consent..."),b())}))},this._logger=new c.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=o},{"./Logger":3,"./localization":6,"./promiseWithTimeout":7}],2:[function(n,y,e){"use strict";function l(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,l.hasCookie=function(c){return typeof window<"u"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+c+"=")||document.cookie.indexOf(c+"=")===0)},l.setCookie=function(c){var d=c.cookieName+"="+c.cookieValue+";";c.attributes.forEach(function(i){d+=" "+i.key+"="+i.value+";"}),c.secure&&(d+=" Secure"),document.cookie=d},l.readCookie=function(c){var d,i,o=!1,r=null;return(o=typeof localStorage<"u"?!0:o)&&(r=localStorage.getItem(c)),o&&r!==null||(i=(d=c).length+1,r=typeof document<"u"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,i)==="".concat(d,"=")}).map(function(a){return decodeURIComponent(a.substring(i))})[0]||null),r},e.CookieHelper=l},{}],3:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(c=l=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",c.Warning="background: orange;color: black",c.Error="background: red;color:white",Object.defineProperty(d.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),d.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},d.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},d.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},d.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},d.prototype.getUrlParam=function(i){return typeof document<"u"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var l,c=d;function d(i,o,r,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=r||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),l.Info,this._normalStyle))}e.Logger=c},{}],4:[function(n,y,e){"use strict";function l(c,d,i,o){var r=this;this.setMajorTo=c,this.setMinorTo=d,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(a){return r.setFamilyTo=a,r},this.toString=function(){return"".concat(r.major,".").concat(r.minor.toString().padStart(2,"0"),".").concat(r.revision.toString().padStart(3,"0")," ").concat(r.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(l.prototype,"major",{get:function(){var c;return(c=this.setMajorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minor",{get:function(){var c;return(c=this.setMinorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"revision",{get:function(){var c;return(c=this.setRevisionTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"family",{get:function(){var c;return(c=this.setFamilyTo)!=null?c:""},enumerable:!1,configurable:!0}),e.Version=l},{}],5:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(l){return typeof document<"u"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""}},{}],6:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var l=n("./setHostAndPathNames"),c=n("./getUrlParam"),d=n("./Logger"),i=n("./variables"),o=new d.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),r=!1,a=!1,u=new Set(["US","CA"]),g=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var t;return(t=(t=(t=window.WM)==null?void 0:t.UserConsent)==null?void 0:t.getGeoCountry())!=null?t:i.countryCode},e.isIntl=function(){var t=!1,f=(0,l.setHostAndPathNames)(),p=(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getGeoCountry&&typeof((p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry)=="function"?(p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry():i.countryCode,h=(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.getGeoState&&typeof((h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoState)=="function"?(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoState():"",w=0<=f.search(/^(.*\.)?cnn\.com$/);return w&&u.delete("CA"),o.log("Is CNN:",w),o.log("Domestic Country Codes: ",Array.from(u)),o.log("UserConsent Location: ",{state:h,country:p}),(0,c.getUrlParam)("isIntl")==="true"?(r||(r=!0,o.log("Faking international site. Using International PubIds.")),t=!0):0<=f.search(g)?(r||(r=!0,o.log("Full international site. Using International PubIds.")),t=!0):p===""||p===null?(r||(r=!0,o.log("No country code. Using Domestic PubIds.")),t=!1):u.has(p)?r||(r=!0,o.log("Domestic site or country code. Using Domestic PubIds."),t=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(r||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),r||(r=!0,o.log("International country code. Using International PubIds.")),t=!0):0<=f.search(/^.*us\.cnn\.com/)?(r||(r=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=t=!0):(r||(r=!0,o.log("International country code but domestic site. Using International PubIds if available.")),t=!0),t},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":8,"./variables":9}],7:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(l,c,d){d===void 0&&(d="The promise timed out.");var i=new Promise(function(o,r){var a=setTimeout(function(){clearTimeout(a),r(d)},l)});return Promise.race([c,i])}},{}],8:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var l=typeof document<"u"?document.createElement("a"):{href:"",hostname:"",pathname:""};return l.href=typeof document<"u"?document.location.href:"",l.hostname}},{}],9:[function(c,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var l=c("./Version"),c=c("./CookieHelper"),d=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new l.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=d.toString,e.noop=function(){},e.countryCode=c.CookieHelper.readCookie("countryCode")||((d=(l=c.CookieHelper.readCookie("CG"))==null?void 0:l.substr(0,2))!=null?d:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(l=c.CookieHelper.readCookie("SelectedEdition"))!=null?l:"www",e.hasUserConsent=typeof window<"u"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],10:[function(a,y,e){"use strict";var l,c,d=this&&this.__extends||(l=function(g,t){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(f,p){f.__proto__=p}:function(f,p){for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&(f[h]=p[h])}))(g,t)},function(g,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function f(){this.constructor=g}l(g,t),g.prototype=t===null?Object.create(t):(f.prototype=t.prototype,new f)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.Cep=void 0,a("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=a("@turnercode/digital-ads-utilities/dist/Version"),r=a("./version.json"),a=(c=i.AAdFuelModule,d(u,c),u.prototype.init=function(){var g=this;return new Promise(function(t){g.logger.log("Initializing the module...",g.site),window.AdFuel?window.AdFuel.setModuleReady(g.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(g.MODULE_LOG_TAG)}),t()})},u.prototype.preQueue=function(g){var t=this;return new Promise(function(f){t.cepTags=window[t.site]&&window[t.site].cep_topics?window[t.site].cep_topics:t.cepTags,f({name:"CEP",tags:t.cepTags})})},u.prototype.preDispatch=function(g){var t=this;return new Promise(function(f){var p;t.targetingSet?f({name:"CEP",tags:t.cepTags}):(p=!(t.targetingSet=!0),Object.keys(t.cepTags).forEach(function(h){0<t.cepTags[h].length&&(t.logger.log("Adding CEP "+h+" Targeting: ",t.cepTags[h]),window.AdFuel?window.AdFuel.addPageLevelTarget(h,t.cepTags[h]):window.googletag.cmd.push(function(){window.googletag.pubads().setTargeting(h,t.cepTags[h])}),p=!0,f({name:"CEP",tags:t.cepTags}))}),p||(f({name:"CEP",tags:t.cepTags}),t.logger.log("No CEP targeting... adding CEP=0..."),window.AdFuel?window.AdFuel.addPageLevelTarget("cep","0"):window.googletag.cmd.push(function(){window.googletag.pubads().setTargeting("cep","0")})))})},u);function u(g){return g=c.call(this,g,"CEP",new o.Version(r.major,r.minor,r.revision,r.family),"cep","color: #d2b000; padding: 2px",i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutConsent)||this,g.cepTags={cep_brsf:[],cep_iabt:[],cep_sent:[],cep_tags:[]},g.site=window.AdFuelOptions.ADFUEL?window.AdFuelOptions.ADFUEL.SITE_OBJECT:"",g.targetingSet=!1,g}new(e.Cep=a)({debug:!1})},{"./version.json":11,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4}],11:[function(n,y,e){y.exports={family:"TS",major:5,minor:0,revision:11}},{}]},{},[10])(10)})});var hs=S((fs,yt)=>{(function(n){typeof fs=="object"&&typeof yt<"u"?yt.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:this).InViewRefresh=n()})(function(){return function n(y,e,l){function c(o,r){if(!e[o]){if(!y[o]){var a=typeof P=="function"&&P;if(!r&&a)return a(o,!0);if(d)return d(o,!0);throw(r=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",r}a=e[o]={exports:{}},y[o][0].call(a.exports,function(u){return c(y[o][1][u]||u)},a,a.exports,n,y,e,l)}return e[o].exports}for(var d=typeof P=="function"&&P,i=0;i<l.length;i++)c(l[i]);return c}({1:[function(o,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var l,c=o("./Logger"),d=o("./promiseWithTimeout"),i=o("./localization"),o=((o=l=e.ModuleFlags||(e.ModuleFlags={}))[o.None=0]="None",o[o.EnableForDomestic=1]="EnableForDomestic",o[o.EnableForForeign=2]="EnableForForeign",o[o.RunWithoutAdFuel=4]="RunWithoutAdFuel",o[o.RunWithoutConsent=8]="RunWithoutConsent",o[o.HasVideoAPI=16]="HasVideoAPI",o[o.DisableForCanada=32]="DisableForCanada",Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r);function r(a,u,g,t,f,p,h,w){p===void 0&&(p=l.EnableForDomestic|l.EnableForForeign),h===void 0&&(h=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var s=this;this.config=a,this.MODULE_NAME=u,this.MODULE_VERSION=g,this.MODULE_LOG_TAG=t,this.logStyle=f,this.moduleFlags=p,this.consentTags=h,this.MODULE_VIDEO_API_KEY=w,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((a=window.WM)==null?void 0:a.UserConsent)||((u=window.WBD)==null?void 0:u.UserConsent),this.environmentMatchesFlags=function(){return(0,i.isIntl)()?(!(0,i.isCanada)()||(s.moduleFlags&l.DisableForCanada)!==l.DisableForCanada)&&(s.moduleFlags&l.EnableForForeign)===l.EnableForForeign:(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic},this.callInit=function(){s.logger.log("Waiting for UserConsent..."),s.waitForUserConsent().then(function(){var b;s.logger.log("Checking Module Flags...",s.moduleFlags),(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent||(b=s.userConsentLib)!=null&&b.inUserConsentState(s.consentTags,{id:s.MODULE_NAME})?(s.moduleFlags&&l.RunWithoutAdFuel)==l.RunWithoutAdFuel?((b=window.AdFuel)!=null&&b.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var v;s.logger.log("Registering with AdFuel..."),(v=window.AdFuel)!=null&&v.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var v;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(v=window.AdFuel)!=null&&v.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)}))})):(s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)}))):(s.logger.log("Waiting for AdFuel..."),s.waitForAdFuel().then(function(){var v;(v=window.AdFuel)!=null&&v.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Registering with AdFuel..."),(m=window.AdFuel)!=null&&m.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var m;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var E;s.logger.log("Setting Module Loaded..."),(E=window.AdFuel)!=null&&E.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)}).catch(function(v){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for AdFuel."),v)})):(s.logger.info("User consent is not granted.",(b=s.userConsentLib)==null?void 0:b.inUserConsentState(s.consentTags)),(b=window.AdFuel)!=null&&b.setModuleLoaded(s.MODULE_LOG_TAG))}).catch(function(b){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for consent."),b)})},this.waitForAdFuel=function(){return(s.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(b){window.AdFuel?b():document.addEventListener("AdFuelCreated",function(){b()})}))},this.waitForUserConsent=function(){return!s.userConsentLib||(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(b){var v;s._logger.log("Consent Promise with Timeout..."),(v=s.userConsentLib)!=null&&v.isReady()?(s._logger.log("Consent Is Ready..."),(v=s.userConsentLib)!=null&&v.isInRegion("gdpr")?(s._logger.log("Region is GDPR..."),(v=((v=s.userConsentLib)==null?void 0:v.isOneTrustLoaded())&&!((v=s.userConsentLib)!=null&&v.isOneTrustFailing()))!=null&&v?(s._logger.log("Optanon is Loaded..."),b()):(s._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){s._logger.log("OneTrust is Loaded..."),b()}),document.addEventListener("oneTrustFailed",function(){s._logger.error("OneTrust Failed To Load..."),b()}),document.addEventListener("oneTrustBlocked",function(){s._logger.error("OneTrust Loading Was Blocked..."),b()}))):(s._logger.log("Region is not GDPR..."),b())):s.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),b()})):(console.log("No User Consent..."),b())}))},this._logger=new c.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=o},{"./Logger":3,"./localization":6,"./promiseWithTimeout":7}],2:[function(n,y,e){"use strict";function l(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,l.hasCookie=function(c){return typeof window<"u"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+c+"=")||document.cookie.indexOf(c+"=")===0)},l.setCookie=function(c){var d=c.cookieName+"="+c.cookieValue+";";c.attributes.forEach(function(i){d+=" "+i.key+"="+i.value+";"}),c.secure&&(d+=" Secure"),document.cookie=d},l.readCookie=function(c){var d,i,o=!1,r=null;return(o=typeof localStorage<"u"?!0:o)&&(r=localStorage.getItem(c)),o&&r!==null||(i=(d=c).length+1,r=typeof document<"u"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,i)==="".concat(d,"=")}).map(function(a){return decodeURIComponent(a.substring(i))})[0]||null),r},e.CookieHelper=l},{}],3:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(c=l=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",c.Warning="background: orange;color: black",c.Error="background: red;color:white",Object.defineProperty(d.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),d.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},d.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},d.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},d.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},d.prototype.getUrlParam=function(i){return typeof document<"u"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var l,c=d;function d(i,o,r,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=r||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),l.Info,this._normalStyle))}e.Logger=c},{}],4:[function(n,y,e){"use strict";function l(c,d,i,o){var r=this;this.setMajorTo=c,this.setMinorTo=d,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(a){return r.setFamilyTo=a,r},this.toString=function(){return"".concat(r.major,".").concat(r.minor.toString().padStart(2,"0"),".").concat(r.revision.toString().padStart(3,"0")," ").concat(r.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(l.prototype,"major",{get:function(){var c;return(c=this.setMajorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minor",{get:function(){var c;return(c=this.setMinorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"revision",{get:function(){var c;return(c=this.setRevisionTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"family",{get:function(){var c;return(c=this.setFamilyTo)!=null?c:""},enumerable:!1,configurable:!0}),e.Version=l},{}],5:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(l){return typeof document<"u"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""}},{}],6:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var l=n("./setHostAndPathNames"),c=n("./getUrlParam"),d=n("./Logger"),i=n("./variables"),o=new d.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),r=!1,a=!1,u=new Set(["US","CA"]),g=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var t;return(t=(t=(t=window.WM)==null?void 0:t.UserConsent)==null?void 0:t.getGeoCountry())!=null?t:i.countryCode},e.isIntl=function(){var t=!1,f=(0,l.setHostAndPathNames)(),p=(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getGeoCountry&&typeof((p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry)=="function"?(p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry():i.countryCode,h=(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.getGeoState&&typeof((h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoState)=="function"?(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoState():"",w=0<=f.search(/^(.*\.)?cnn\.com$/);return w&&u.delete("CA"),o.log("Is CNN:",w),o.log("Domestic Country Codes: ",Array.from(u)),o.log("UserConsent Location: ",{state:h,country:p}),(0,c.getUrlParam)("isIntl")==="true"?(r||(r=!0,o.log("Faking international site. Using International PubIds.")),t=!0):0<=f.search(g)?(r||(r=!0,o.log("Full international site. Using International PubIds.")),t=!0):p===""||p===null?(r||(r=!0,o.log("No country code. Using Domestic PubIds.")),t=!1):u.has(p)?r||(r=!0,o.log("Domestic site or country code. Using Domestic PubIds."),t=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(r||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),r||(r=!0,o.log("International country code. Using International PubIds.")),t=!0):0<=f.search(/^.*us\.cnn\.com/)?(r||(r=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=t=!0):(r||(r=!0,o.log("International country code but domestic site. Using International PubIds if available.")),t=!0),t},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":8,"./variables":9}],7:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(l,c,d){d===void 0&&(d="The promise timed out.");var i=new Promise(function(o,r){var a=setTimeout(function(){clearTimeout(a),r(d)},l)});return Promise.race([c,i])}},{}],8:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var l=typeof document<"u"?document.createElement("a"):{href:"",hostname:"",pathname:""};return l.href=typeof document<"u"?document.location.href:"",l.hostname}},{}],9:[function(c,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var l=c("./Version"),c=c("./CookieHelper"),d=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new l.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=d.toString,e.noop=function(){},e.countryCode=c.CookieHelper.readCookie("countryCode")||((d=(l=c.CookieHelper.readCookie("CG"))==null?void 0:l.substr(0,2))!=null?d:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(l=c.CookieHelper.readCookie("SelectedEdition"))!=null?l:"www",e.hasUserConsent=typeof window<"u"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],10:[function(a,y,e){"use strict";var l,c,d=this&&this.__extends||(l=function(g,t){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(f,p){f.__proto__=p}:function(f,p){for(var h in p)Object.prototype.hasOwnProperty.call(p,h)&&(f[h]=p[h])}))(g,t)},function(g,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");function f(){this.constructor=g}l(g,t),g.prototype=t===null?Object.create(t):(f.prototype=t.prototype,new f)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.InViewRefresh=void 0,a("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=a("@turnercode/digital-ads-utilities/dist/Version"),r=a("./version.json"),a=(c=i.AAdFuelModule,d(u,c),u);function u(g){var t=c.call(this,g,"In-View Refresh Module",new o.Version(r.major,r.minor,r.revision,r.family),"ivr","color: #00e1e1; padding: 2px",i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutConsent)||this;return t.DISALLOWED_RENDERED_SIZES=["970x66","970x90","970x250"],t.TARGET_DISPLAY_MILLISECONDS=t.config.DEFAULT_DISPLAY_MILLISECONDS,t.TARGET_DISPLAY_PERCENT=t.config.DEFAULT_DISPLAY_PERCENT,t._focused=!0,t._registeredSlots=[],t._renderedCreativeIds={},t._renderedLineItemIds={},t._invalidSlotIds=[],t._viewabilityListenersStarted=!1,t._refreshableInViewSlots={},t.init=function(){return new Promise(function(f,p){t.logger.log("Initializing IVR..."),window.AdFuel?window.AdFuel.setModuleReady(t.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(t.MODULE_LOG_TAG)}),f()})},t.start=function(){return new Promise(function(){t.startViewabilityListeners()})},t.startViewabilityListeners=function(){t._viewabilityListenersStarted||(window.googletag.cmd.push(function(){window.googletag.pubads().addEventListener("impressionViewable",function(h){t.logger.log("impressionViewable changed"),t.logger.log("impressionViewable changed");var p=h,h=(h=h.slot)==null?void 0:h.getSlotElementId();t.logger.log("Refreshable In View Slots: ",t._refreshableInViewSlots),t._refreshableInViewSlots[h]!==void 0&&t._refreshableInViewSlots[h].listenersSet?t.logger.log("Refreshable In View Slot listeners have already been set for: ",h,{object:t._refreshableInViewSlots[h]}):(t.logger.log("Refreshable In View Slot listeners have not been set: ",h,{object:t._refreshableInViewSlots[h]}),t.createInViewRefreshObject(p))}),window.googletag.pubads().addEventListener("slotVisibilityChanged",function(f){t.logger.log("slotVisibilityChanged"),t.logger.log("slotVisibilityChanged"),t.visibilityChanged(f)}),window.googletag.pubads().addEventListener("slotRenderEnded",function(f){t.logger.log("slotRenderEnded"),t.logger.log("slotRenderEnded");var h=f,p=h.slot.getSlotElementId(),h=(h.size?Array.isArray(h.size)&&(h.size=h.size.join("x")):h.size="0x0",h.size),w=(w=f.creativeId||f.sourceAgnosticCreativeId)!=null?w:0,s=(s=f.lineItemId||f.sourceAgnosticLineItemId)!=null?s:0,b=t._renderedCreativeIds[p]||[],v=t._renderedLineItemIds[p]||[];t.logger.log("----------Slot: ["+p+"]----------"),t.logger.log("Rendered Size: ",h),t.logger.log("Creative Ids: ",{selected:w,native:f.creativeId,agnostic:f.sourceAgnosticCreativeId}),0<=b.indexOf(w)?(delete t._refreshableInViewSlots[p],t._registeredSlots.splice(t._registeredSlots.indexOf(p),1),t._invalidSlotIds.push(p),t.logger.log("Duplicate Creative ["+w+"] returned for slot ["+p+"].  Stopping refresh.",t._registeredSlots)):0<=t.DISALLOWED_RENDERED_SIZES.indexOf(h)?(delete t._refreshableInViewSlots[p],t._registeredSlots.splice(t._registeredSlots.indexOf(p),1),t._invalidSlotIds.push(p),t.logger.log("Rendered size ["+h+"] for slot ["+p+"] is invalid for IVR.  Stopping refresh.",t._registeredSlots)):(w&&b.indexOf(w)<0&&b.push(w),s&&v.indexOf(s)<0&&v.push(s),t._renderedCreativeIds[p]=b,t._renderedLineItemIds[p]=v,t.logger.log("Rendered Creatives: ",t._renderedCreativeIds[p]),t.logger.log("Rendered LineItems: ",t._renderedLineItemIds[p]))})}),document.addEventListener("visibilitychange",t.visibilityChangeEvent),t._viewabilityListenersStarted=!0,t.logger.log("Listeners Started!"))},t.visibilityChangeEvent=function(f){t.logger.log("Visibility Change Event: ",f),t.logger.log("Relaying to _focusChanged..."),t._focused=!document.hidden,t.focusChanged(f)},t.focusChanged=function(f){t.logger.log("Focus Change Event: ",f),document.hidden?(t.logger.log("Page is hidden.  Destroying all intervals..."),t.destroyInterval()):(t.logger.log("Page is not hidden. Checking Intervals..."),Object.keys(t._refreshableInViewSlots).forEach(function(p){t.logger.log("",{index:p,slot:t._refreshableInViewSlots[p]}),t.getInterval(p)?t.logger.log("Interval exists...",p):(t.logger.log("Creating Interval...",p),t.detectInView())}))},t.visibilityChanged=function(h){var p=h.inViewPercentage||0,h=h.slot.getSlotElementId(),w=t.getInterval(h);p>=t.TARGET_DISPLAY_PERCENT?(t.logger.log("Element ["+h+"] Meets In-View Percentage Requirements",p),t._focused?(t.logger.log("... and page has focus"),w||(t.logger.log("... interval does not exist. Creating Interval..."),t.createInterval(h))):t.logger.log("... but page does not have focus.  Not creating interval.")):(t.logger.log("Element ["+h+"] Does NOT Meet In-View Percentage Requirements",p),w&&(t.logger.log("Found Interval for Element ["+h+"]... Destroying Interval."),t.destroyInterval(h)))},t.getInterval=function(f){return t.logger.log("Getting Interval for: ",f),!(t._refreshableInViewSlots[f]&&t._refreshableInViewSlots[f].timer===null||!t._refreshableInViewSlots[f])&&t._refreshableInViewSlots[f].timer},t.createInterval=function(f){var p,h;t.logger.log("Refreshable In-View Slots: ",t._refreshableInViewSlots),t._refreshableInViewSlots[f]&&(h=typeof(p=t._refreshableInViewSlots[f]).inViewRefreshInterval=="string"?1e3*parseInt(p.inViewRefreshInterval,10):typeof p.inViewRefreshInterval=="number"?1e3*p.inViewRefreshInterval:t.TARGET_DISPLAY_MILLISECONDS,t.logger.log("Slot ".concat(f," interval: ").concat(h)),p.inViewRefreshCounter=t._refreshableInViewSlots[f].inViewRefreshCounter||0,t.logger.log("Creating Interval for: ",f),p.timer=window.setInterval(function(){var w,s,b;t.logger.log("Slot: ",p),p!=null?(typeof p.inViewRefreshCount=="string"&&(p.inViewRefreshCount=parseInt(p.inViewRefreshCount)),0<p.inViewRefreshCount?(p.el=p.el||document.getElementById(f),w=(s=(s=p.el)==null?void 0:s.id)!=null?s:"",p.inViewRefreshCount--,p.inViewRefreshCounter++,0<=p.inViewRefreshCount&&(s=window.googletag.pubads().getSlots().filter(function(v){return v.getSlotElementId()===w})[0],t.logger.log("GoogleSlot: ",s),t.logger.log("Slot ["+w+"] is in view and is being refreshed."),t.logger.log("Starting Targeting Keys: ",s.getTargetingKeys()),t.logger.log("Clearing targeting on slot ["+w+"]...",p),b=s.getTargeting("pos"),s.clearTargeting(),b&&s.setTargeting("pos",b),t.logger.log("Cleared Targeting Keys: ",s.getTargetingKeys()),t.logger.log("Setting rfv count targeting on slot ["+w+"]: ",p.inViewRefreshCounter),s.setTargeting("rfv",p.inViewRefreshCounter.toString()),t._invalidSlotIds.indexOf(w)<0?(t.logger.log("Calling refresh On slot["+w+"]...",p),(b=window.AdFuel)!=null&&b.refresh([w]),t.logger.log("Slot ["+p.el.id+"] is in view, was just refreshed, and still has "+p.inViewRefreshCount+" refreshes remaining.")):t.logger.log("Slot ["+p.el.id+"] is invalid for refresh."))):t.logger.log("Slot ["+f+"] is in view but has no refreshes remaining.",p,p.inViewRefreshCount)):t.logger.log("Slot refresh prevented due to rendered size.")},h),t.logger.log("Done."))},t.destroyInterval=function(f){var p;f?(t.logger.log("Destroying interval for: ",f),p=t._refreshableInViewSlots[f],window.clearInterval((f=p.timer)!=null?f:0),p.timer=null,p.inView=!1):(t.logger.log("Destroying All Intervals"),Object.keys(t._refreshableInViewSlots).forEach(function(h){t.logger.log("Destroying interval for: ",h),p=t._refreshableInViewSlots[h],window.clearInterval((h=p.timer)!=null?h:0),p.timer=null,p.inView=!1}))},t.createInViewRefreshObject=function(p){t.logger.log("Checking Element: ",{event:p});var p=(p=p.slot)==null?void 0:p.getSlotElementId(),h=document.getElementById(p);t._registeredSlots.indexOf(p)!==-1&&t._refreshableInViewSlots[p]?(t.logger.log("Slot is registered with InView Refresh"),t._refreshableInViewSlots[p].inView=!1,t._refreshableInViewSlots[p].el=h,t._refreshableInViewSlots[p].refreshCount=0,t._refreshableInViewSlots[p].listenersSet=!0):t.logger.log("registered with InView Refresh")},t.isInsideBounds=function(f,p,F,w,s,b,v,m){var E=Math.max(F,v),O=Math.min(w,m),M=Math.max(f,s),T=Math.min(p,b),C=0,F=(F<=E&&E<=w&&F<=O&&O<=w&&f<=M&&M<=p&&f<=T&&T<=p&&(C=(O-E)*(T-M)),(b-s)*(m-v));return 0<F?C/F:0},t.getPercentInView=function(E){var p=window.innerWidth||document.documentElement.clientWidth||document.body.clientWidth,h=window.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,w=window.pageXOffset||document.body.scrollLeft||document.documentElement.scrollLeft,s=window.pageYOffset||document.body.scrollTop||document.documentElement.scrollTop,v=E.getBoundingClientRect(),b=v.left+document.body.scrollLeft,v=v.top+document.body.scrollTop,m=b+E.clientWidth,E=v+E.clientHeight;return 100*t.isInsideBounds(w,w+p,s,s+h,b,m,v,E)},t.detectInView=function(){t.logger.log("Detecting In View Slots."),Object.keys(t._refreshableInViewSlots).length<1&&t.logger.log("No registered slots have been rendered yet."),Object.keys(t._refreshableInViewSlots).forEach(function(f){var h=t._refreshableInViewSlots[f].el||document.getElementById(f),p=!1,h=(h&&(p=h&&t._focused&&t.getPercentInView(h)>=t.TARGET_DISPLAY_PERCENT&&0<t._refreshableInViewSlots[f].inViewRefreshCount),t.getInterval(f));p&&!h&&t.createInterval(f)})},t.preQueue=function(f){return new Promise(function(p){for(var h=!1,w=0;w<f.length;w++){var s=f[w].unWrappedSlot;s.hasInViewRefresh===!0&&(t.logger.log("Slot has In-View Refresh..."),h=!(s.inViewRefreshCounter=0),t._registeredSlots.push(s.rktr_slot_id))}h&&(t.logger.log("Starting IVR Listeners..."),t.startViewabilityListeners()),p({name:"IVR"})})},t.preDispatch=function(f){return new Promise(function(p){for(var h=0;h<f.length;h++){var w=f[h].unWrappedSlot;w.hasInViewRefresh?(t.logger.log("Slot is configured for in view refresh.  Creating refresh object for slot ["+w.rktr_slot_id+"]"),t._refreshableInViewSlots[w.rktr_slot_id]=w):t.logger.log("Slot is not configured for in view refresh. ["+w.rktr_slot_id+"]")}p({name:"IVR"})})},t.logger.log("InViewRefresh created..."),t}new(e.InViewRefresh=a)(window.IVR||((d=window.AdFuelOptions)==null?void 0:d.IVR)||{DEFAULT_DISPLAY_MILLISECONDS:3e3,DEFAULT_DISPLAY_PERCENT:50,DEBUG:!1})},{"./version.json":11,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4}],11:[function(n,y,e){y.exports={family:"TS",major:5,minor:0,revision:12}},{}]},{},[10])(10)})});var ms=S((ys,mt)=>{(function(n){typeof ys=="object"&&typeof mt<"u"?mt.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:this).MalvertisingDetection=n()})(function(){return function n(y,e,l){function c(o,r){if(!e[o]){if(!y[o]){var a=typeof P=="function"&&P;if(!r&&a)return a(o,!0);if(d)return d(o,!0);throw(r=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",r}a=e[o]={exports:{}},y[o][0].call(a.exports,function(u){return c(y[o][1][u]||u)},a,a.exports,n,y,e,l)}return e[o].exports}for(var d=typeof P=="function"&&P,i=0;i<l.length;i++)c(l[i]);return c}({1:[function(o,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var l,c=o("./Logger"),d=o("./promiseWithTimeout"),i=o("./localization"),o=((o=l=e.ModuleFlags||(e.ModuleFlags={}))[o.None=0]="None",o[o.EnableForDomestic=1]="EnableForDomestic",o[o.EnableForForeign=2]="EnableForForeign",o[o.RunWithoutAdFuel=4]="RunWithoutAdFuel",o[o.RunWithoutConsent=8]="RunWithoutConsent",o[o.HasVideoAPI=16]="HasVideoAPI",o[o.DisableForCanada=32]="DisableForCanada",Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r);function r(a,u,g,t,f,p,h,w){p===void 0&&(p=l.EnableForDomestic|l.EnableForForeign),h===void 0&&(h=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var s=this;this.config=a,this.MODULE_NAME=u,this.MODULE_VERSION=g,this.MODULE_LOG_TAG=t,this.logStyle=f,this.moduleFlags=p,this.consentTags=h,this.MODULE_VIDEO_API_KEY=w,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((a=window.WM)==null?void 0:a.UserConsent)||((u=window.WBD)==null?void 0:u.UserConsent),this.environmentMatchesFlags=function(){return(0,i.isIntl)()?(!(0,i.isCanada)()||(s.moduleFlags&l.DisableForCanada)!==l.DisableForCanada)&&(s.moduleFlags&l.EnableForForeign)===l.EnableForForeign:(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic},this.callInit=function(){s.logger.log("Waiting for UserConsent..."),s.waitForUserConsent().then(function(){var b;s.logger.log("Checking Module Flags...",s.moduleFlags),(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent||(b=s.userConsentLib)!=null&&b.inUserConsentState(s.consentTags,{id:s.MODULE_NAME})?(s.moduleFlags&&l.RunWithoutAdFuel)==l.RunWithoutAdFuel?((b=window.AdFuel)!=null&&b.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var v;s.logger.log("Registering with AdFuel..."),(v=window.AdFuel)!=null&&v.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var v;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(v=window.AdFuel)!=null&&v.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)}))})):(s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)}))):(s.logger.log("Waiting for AdFuel..."),s.waitForAdFuel().then(function(){var v;(v=window.AdFuel)!=null&&v.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Registering with AdFuel..."),(m=window.AdFuel)!=null&&m.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var m;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var E;s.logger.log("Setting Module Loaded..."),(E=window.AdFuel)!=null&&E.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)}).catch(function(v){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for AdFuel."),v)})):(s.logger.info("User consent is not granted.",(b=s.userConsentLib)==null?void 0:b.inUserConsentState(s.consentTags)),(b=window.AdFuel)!=null&&b.setModuleLoaded(s.MODULE_LOG_TAG))}).catch(function(b){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for consent."),b)})},this.waitForAdFuel=function(){return(s.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(b){window.AdFuel?b():document.addEventListener("AdFuelCreated",function(){b()})}))},this.waitForUserConsent=function(){return!s.userConsentLib||(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(b){var v;s._logger.log("Consent Promise with Timeout..."),(v=s.userConsentLib)!=null&&v.isReady()?(s._logger.log("Consent Is Ready..."),(v=s.userConsentLib)!=null&&v.isInRegion("gdpr")?(s._logger.log("Region is GDPR..."),(v=((v=s.userConsentLib)==null?void 0:v.isOneTrustLoaded())&&!((v=s.userConsentLib)!=null&&v.isOneTrustFailing()))!=null&&v?(s._logger.log("Optanon is Loaded..."),b()):(s._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){s._logger.log("OneTrust is Loaded..."),b()}),document.addEventListener("oneTrustFailed",function(){s._logger.error("OneTrust Failed To Load..."),b()}),document.addEventListener("oneTrustBlocked",function(){s._logger.error("OneTrust Loading Was Blocked..."),b()}))):(s._logger.log("Region is not GDPR..."),b())):s.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),b()})):(console.log("No User Consent..."),b())}))},this._logger=new c.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=o},{"./Logger":3,"./localization":7,"./promiseWithTimeout":8}],2:[function(n,y,e){"use strict";function l(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,l.hasCookie=function(c){return typeof window<"u"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+c+"=")||document.cookie.indexOf(c+"=")===0)},l.setCookie=function(c){var d=c.cookieName+"="+c.cookieValue+";";c.attributes.forEach(function(i){d+=" "+i.key+"="+i.value+";"}),c.secure&&(d+=" Secure"),document.cookie=d},l.readCookie=function(c){var d,i,o=!1,r=null;return(o=typeof localStorage<"u"?!0:o)&&(r=localStorage.getItem(c)),o&&r!==null||(i=(d=c).length+1,r=typeof document<"u"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,i)==="".concat(d,"=")}).map(function(a){return decodeURIComponent(a.substring(i))})[0]||null),r},e.CookieHelper=l},{}],3:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(c=l=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",c.Warning="background: orange;color: black",c.Error="background: red;color:white",Object.defineProperty(d.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),d.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},d.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},d.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},d.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},d.prototype.getUrlParam=function(i){return typeof document<"u"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var l,c=d;function d(i,o,r,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=r||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),l.Info,this._normalStyle))}e.Logger=c},{}],4:[function(n,y,e){"use strict";function l(c,d,i,o){var r=this;this.setMajorTo=c,this.setMinorTo=d,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(a){return r.setFamilyTo=a,r},this.toString=function(){return"".concat(r.major,".").concat(r.minor.toString().padStart(2,"0"),".").concat(r.revision.toString().padStart(3,"0")," ").concat(r.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(l.prototype,"major",{get:function(){var c;return(c=this.setMajorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minor",{get:function(){var c;return(c=this.setMinorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"revision",{get:function(){var c;return(c=this.setRevisionTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"family",{get:function(){var c;return(c=this.setFamilyTo)!=null?c:""},enumerable:!1,configurable:!0}),e.Version=l},{}],5:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(l){return typeof document<"u"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""}},{}],6:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var l=n("./promiseWithTimeout");e.loadScriptFromUrl=function(c,d,i,o){return i===void 0&&(i=document),o===void 0&&(o=!0),(0,l.promiseWithTimeout)(5e3,new Promise(function(r,a){var u,g,t=i.createElement("script");if(t.setAttribute("data-nscript","beforeInteractive"),document.getElementById(d))a("Element name ".concat(d," already exists in the document."));else try{var f="",p=(f=1<c.split("//").length?c:((g=((u=i.location)==null?void 0:u.protocol)==="https:")!==null&&g?"https://":"http://").concat(c),i.getElementsByTagName("script")[0]);if(t.id=d,t.type="text/javascript",t.src=f,t.async=o,t.addEventListener("load",function(){r(t)}),p==null||!p.parentNode)throw new Error("Could not insert script.");p.parentNode.insertBefore(t,p)}catch(h){console.log("Error in loading script from ".concat(t.src),h),a(h)}}))}},{"./promiseWithTimeout":8}],7:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var l=n("./setHostAndPathNames"),c=n("./getUrlParam"),d=n("./Logger"),i=n("./variables"),o=new d.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),r=!1,a=!1,u=new Set(["US","CA"]),g=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var t;return(t=(t=(t=window.WM)==null?void 0:t.UserConsent)==null?void 0:t.getGeoCountry())!=null?t:i.countryCode},e.isIntl=function(){var t=!1,f=(0,l.setHostAndPathNames)(),p=(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getGeoCountry&&typeof((p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry)=="function"?(p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry():i.countryCode,h=(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.getGeoState&&typeof((h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoState)=="function"?(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoState():"",w=0<=f.search(/^(.*\.)?cnn\.com$/);return w&&u.delete("CA"),o.log("Is CNN:",w),o.log("Domestic Country Codes: ",Array.from(u)),o.log("UserConsent Location: ",{state:h,country:p}),(0,c.getUrlParam)("isIntl")==="true"?(r||(r=!0,o.log("Faking international site. Using International PubIds.")),t=!0):0<=f.search(g)?(r||(r=!0,o.log("Full international site. Using International PubIds.")),t=!0):p===""||p===null?(r||(r=!0,o.log("No country code. Using Domestic PubIds.")),t=!1):u.has(p)?r||(r=!0,o.log("Domestic site or country code. Using Domestic PubIds."),t=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(r||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),r||(r=!0,o.log("International country code. Using International PubIds.")),t=!0):0<=f.search(/^.*us\.cnn\.com/)?(r||(r=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=t=!0):(r||(r=!0,o.log("International country code but domestic site. Using International PubIds if available.")),t=!0),t},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":9,"./variables":10}],8:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(l,c,d){d===void 0&&(d="The promise timed out.");var i=new Promise(function(o,r){var a=setTimeout(function(){clearTimeout(a),r(d)},l)});return Promise.race([c,i])}},{}],9:[function(n,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var l=typeof document<"u"?document.createElement("a"):{href:"",hostname:"",pathname:""};return l.href=typeof document<"u"?document.location.href:"",l.hostname}},{}],10:[function(c,y,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var l=c("./Version"),c=c("./CookieHelper"),d=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new l.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=d.toString,e.noop=function(){},e.countryCode=c.CookieHelper.readCookie("countryCode")||((d=(l=c.CookieHelper.readCookie("CG"))==null?void 0:l.substr(0,2))!=null?d:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(l=c.CookieHelper.readCookie("SelectedEdition"))!=null?l:"www",e.hasUserConsent=typeof window<"u"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],11:[function(u,y,e){"use strict";var l,c,d=this&&this.__extends||(l=function(t,f){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(p,h){p.__proto__=h}:function(p,h){for(var w in h)Object.prototype.hasOwnProperty.call(h,w)&&(p[w]=h[w])}))(t,f)},function(t,f){if(typeof f!="function"&&f!==null)throw new TypeError("Class extends value "+String(f)+" is not a constructor or null");function p(){this.constructor=t}l(t,f),t.prototype=f===null?Object.create(f):(p.prototype=f.prototype,new p)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.MalvertisingDetection=void 0,u("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=u("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl"),r=u("@turnercode/digital-ads-utilities/dist/Version"),a=u("./version.json"),u=(c=i.AAdFuelModule,d(g,c),g.prototype.init=function(){var t=this;return new Promise(function(f,p){t.config.SCRIPT_SRC==""?p("SCRIPT_SRC is not set."):((0,o.loadScriptFromUrl)("".concat(t.config.SCRIPT_SRC),"maldetect").finally(function(){t.logger.info("Setting ready."),window.AdFuel?window.AdFuel.setModuleReady(t.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(t.MODULE_LOG_TAG)})}).catch(function(h){t.logger.error("There was an error loading MalvertisingDetection:",h)}),f())})},g);function g(t){return t=c.call(this,t,"Malvertising Detection",new r.Version(a.major,a.minor,a.revision,a.family),"maldetect","color: #58f53f; padding: 2px",i.ModuleFlags.RunWithoutAdFuel|i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign)||this,t.logger.log("Malvertising Detection constructed..."),t}new(e.MalvertisingDetection=u)(((d=window.AdFuelOptions)==null?void 0:d.MALVERTISING)||{SCRIPT_SRC:""})},{"./version.json":12,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":6}],12:[function(n,y,e){y.exports={family:"TS",major:5,minor:0,revision:11}},{}]},{},[11])(11)})});var ws=S((vs,vt)=>{(function(n){typeof vs=="object"&&typeof vt<"u"?vt.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:this).Blockthrough=n()})(function(){return function n(y,e,l){function c(o,r){if(!e[o]){if(!y[o]){var a=typeof P=="function"&&P;if(!r&&a)return a(o,!0);if(d)return d(o,!0);throw(r=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",r}a=e[o]={exports:{}},y[o][0].call(a.exports,function(u){return c(y[o][1][u]||u)},a,a.exports,n,y,e,l)}return e[o].exports}for(var d=typeof P=="function"&&P,i=0;i<l.length;i++)c(l[i]);return c}({1:[function(o,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var l,c=o("./Logger"),d=o("./promiseWithTimeout"),i=o("./localization"),o=((o=l=e.ModuleFlags||(e.ModuleFlags={}))[o.None=0]="None",o[o.EnableForDomestic=1]="EnableForDomestic",o[o.EnableForForeign=2]="EnableForForeign",o[o.RunWithoutAdFuel=4]="RunWithoutAdFuel",o[o.RunWithoutConsent=8]="RunWithoutConsent",o[o.HasVideoAPI=16]="HasVideoAPI",o[o.DisableForCanada=32]="DisableForCanada",Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r);function r(a,u,g,t,f,p,h,w){p===void 0&&(p=l.EnableForDomestic|l.EnableForForeign),h===void 0&&(h=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var s=this;this.config=a,this.MODULE_NAME=u,this.MODULE_VERSION=g,this.MODULE_LOG_TAG=t,this.logStyle=f,this.moduleFlags=p,this.consentTags=h,this.MODULE_VIDEO_API_KEY=w,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((a=window.WM)==null?void 0:a.UserConsent)||((u=window.WBD)==null?void 0:u.UserConsent),this.environmentMatchesFlags=function(){return(0,i.isIntl)()?(!(0,i.isCanada)()||(s.moduleFlags&l.DisableForCanada)!==l.DisableForCanada)&&(s.moduleFlags&l.EnableForForeign)===l.EnableForForeign:(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic},this.callInit=function(){s.logger.log("Waiting for UserConsent..."),s.waitForUserConsent().then(function(){var b;s.logger.log("Checking Module Flags...",s.moduleFlags),(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent||(b=s.userConsentLib)!=null&&b.inUserConsentState(s.consentTags,{id:s.MODULE_NAME})?(s.moduleFlags&&l.RunWithoutAdFuel)==l.RunWithoutAdFuel?((b=window.AdFuel)!=null&&b.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var v;s.logger.log("Registering with AdFuel..."),(v=window.AdFuel)!=null&&v.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var v;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(v=window.AdFuel)!=null&&v.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)}))})):(s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)}))):(s.logger.log("Waiting for AdFuel..."),s.waitForAdFuel().then(function(){var v;(v=window.AdFuel)!=null&&v.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Registering with AdFuel..."),(m=window.AdFuel)!=null&&m.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var m;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var E;s.logger.log("Setting Module Loaded..."),(E=window.AdFuel)!=null&&E.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)}).catch(function(v){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for AdFuel."),v)})):(s.logger.info("User consent is not granted.",(b=s.userConsentLib)==null?void 0:b.inUserConsentState(s.consentTags)),(b=window.AdFuel)!=null&&b.setModuleLoaded(s.MODULE_LOG_TAG))}).catch(function(b){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for consent."),b)})},this.waitForAdFuel=function(){return(s.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(b){window.AdFuel?b():document.addEventListener("AdFuelCreated",function(){b()})}))},this.waitForUserConsent=function(){return!s.userConsentLib||(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(b){var v;s._logger.log("Consent Promise with Timeout..."),(v=s.userConsentLib)!=null&&v.isReady()?(s._logger.log("Consent Is Ready..."),(v=s.userConsentLib)!=null&&v.isInRegion("gdpr")?(s._logger.log("Region is GDPR..."),(v=((v=s.userConsentLib)==null?void 0:v.isOneTrustLoaded())&&!((v=s.userConsentLib)!=null&&v.isOneTrustFailing()))!=null&&v?(s._logger.log("Optanon is Loaded..."),b()):(s._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){s._logger.log("OneTrust is Loaded..."),b()}),document.addEventListener("oneTrustFailed",function(){s._logger.error("OneTrust Failed To Load..."),b()}),document.addEventListener("oneTrustBlocked",function(){s._logger.error("OneTrust Loading Was Blocked..."),b()}))):(s._logger.log("Region is not GDPR..."),b())):s.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),b()})):(console.log("No User Consent..."),b())}))},this._logger=new c.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=o},{"./Logger":3,"./localization":7,"./promiseWithTimeout":8}],2:[function(n,y,e){function l(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,l.hasCookie=function(c){return typeof window<"u"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+c+"=")||document.cookie.indexOf(c+"=")===0)},l.setCookie=function(c){var d=c.cookieName+"="+c.cookieValue+";";c.attributes.forEach(function(i){d+=" "+i.key+"="+i.value+";"}),c.secure&&(d+=" Secure"),document.cookie=d},l.readCookie=function(c){var d,i,o=!1,r=null;return(o=typeof localStorage<"u"?!0:o)&&(r=localStorage.getItem(c)),o&&r!==null||(i=(d=c).length+1,r=typeof document<"u"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,i)==="".concat(d,"=")}).map(function(a){return decodeURIComponent(a.substring(i))})[0]||null),r},e.CookieHelper=l},{}],3:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(c=l=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",c.Warning="background: orange;color: black",c.Error="background: red;color:white",Object.defineProperty(d.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),d.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},d.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},d.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},d.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},d.prototype.getUrlParam=function(i){return typeof document<"u"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var l,c=d;function d(i,o,r,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=r||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),l.Info,this._normalStyle))}e.Logger=c},{}],4:[function(n,y,e){function l(c,d,i,o){var r=this;this.setMajorTo=c,this.setMinorTo=d,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(a){return r.setFamilyTo=a,r},this.toString=function(){return"".concat(r.major,".").concat(r.minor.toString().padStart(2,"0"),".").concat(r.revision.toString().padStart(3,"0")," ").concat(r.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(l.prototype,"major",{get:function(){var c;return(c=this.setMajorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minor",{get:function(){var c;return(c=this.setMinorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"revision",{get:function(){var c;return(c=this.setRevisionTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"family",{get:function(){var c;return(c=this.setFamilyTo)!=null?c:""},enumerable:!1,configurable:!0}),e.Version=l},{}],5:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(l){return typeof document<"u"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""}},{}],6:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var l=n("./promiseWithTimeout");e.loadScriptFromUrl=function(c,d,i,o){return i===void 0&&(i=document),o===void 0&&(o=!0),(0,l.promiseWithTimeout)(5e3,new Promise(function(r,a){var u,g,t=i.createElement("script");if(t.setAttribute("data-nscript","beforeInteractive"),document.getElementById(d))a("Element name ".concat(d," already exists in the document."));else try{var f="",p=(f=1<c.split("//").length?c:((g=((u=i.location)==null?void 0:u.protocol)==="https:")!==null&&g?"https://":"http://").concat(c),i.getElementsByTagName("script")[0]);if(t.id=d,t.type="text/javascript",t.src=f,t.async=o,t.addEventListener("load",function(){r(t)}),p==null||!p.parentNode)throw new Error("Could not insert script.");p.parentNode.insertBefore(t,p)}catch(h){console.log("Error in loading script from ".concat(t.src),h),a(h)}}))}},{"./promiseWithTimeout":8}],7:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var l=n("./setHostAndPathNames"),c=n("./getUrlParam"),d=n("./Logger"),i=n("./variables"),o=new d.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),r=!1,a=!1,u=new Set(["US","CA"]),g=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var t;return(t=(t=(t=window.WM)==null?void 0:t.UserConsent)==null?void 0:t.getGeoCountry())!=null?t:i.countryCode},e.isIntl=function(){var t=!1,f=(0,l.setHostAndPathNames)(),p=(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getGeoCountry&&typeof((p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry)=="function"?(p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry():i.countryCode,h=(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.getGeoState&&typeof((h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoState)=="function"?(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoState():"",w=0<=f.search(/^(.*\.)?cnn\.com$/);return w&&u.delete("CA"),o.log("Is CNN:",w),o.log("Domestic Country Codes: ",Array.from(u)),o.log("UserConsent Location: ",{state:h,country:p}),(0,c.getUrlParam)("isIntl")==="true"?(r||(r=!0,o.log("Faking international site. Using International PubIds.")),t=!0):0<=f.search(g)?(r||(r=!0,o.log("Full international site. Using International PubIds.")),t=!0):p===""||p===null?(r||(r=!0,o.log("No country code. Using Domestic PubIds.")),t=!1):u.has(p)?r||(r=!0,o.log("Domestic site or country code. Using Domestic PubIds."),t=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(r||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),r||(r=!0,o.log("International country code. Using International PubIds.")),t=!0):0<=f.search(/^.*us\.cnn\.com/)?(r||(r=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=t=!0):(r||(r=!0,o.log("International country code but domestic site. Using International PubIds if available.")),t=!0),t},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":3,"./getUrlParam":5,"./setHostAndPathNames":9,"./variables":10}],8:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(l,c,d){d===void 0&&(d="The promise timed out.");var i=new Promise(function(o,r){var a=setTimeout(function(){clearTimeout(a),r(d)},l)});return Promise.race([c,i])}},{}],9:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var l=typeof document<"u"?document.createElement("a"):{href:"",hostname:"",pathname:""};return l.href=typeof document<"u"?document.location.href:"",l.hostname}},{}],10:[function(c,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var l=c("./Version"),c=c("./CookieHelper"),d=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new l.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=d.toString,e.noop=function(){},e.countryCode=c.CookieHelper.readCookie("countryCode")||((d=(l=c.CookieHelper.readCookie("CG"))==null?void 0:l.substr(0,2))!=null?d:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(l=c.CookieHelper.readCookie("SelectedEdition"))!=null?l:"www",e.hasUserConsent=typeof window<"u"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":2,"./Version":4}],11:[function(g,y,e){var l,c,d=this&&this.__extends||(l=function(f,p){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(h,w){h.__proto__=w}:function(h,w){for(var s in w)Object.prototype.hasOwnProperty.call(w,s)&&(h[s]=w[s])}))(f,p)},function(f,p){if(typeof p!="function"&&p!==null)throw new TypeError("Class extends value "+String(p)+" is not a constructor or null");function h(){this.constructor=f}l(f,p),f.prototype=p===null?Object.create(p):(h.prototype=p.prototype,new h)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.Blockthrough=void 0,g("@turnercode/digital-ads-utilities/dist/AAdFuelModule")),o=g("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl"),r=g("@turnercode/digital-ads-utilities/dist/Version"),a=g("./version.json"),u=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"],g=(c=i.AAdFuelModule,d(t,c),t.prototype.init=function(){var f=this;return new Promise(function(p,h){(0,o.loadScriptFromUrl)("warnermediagroup-com.videoplayerhub.com/galleryloader.js","btScript").finally(function(){f.logger.info("Setting ready."),window.AdFuel?window.AdFuel.setModuleReady(f.MODULE_LOG_TAG):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(f.MODULE_LOG_TAG)})}).catch(function(w){f.logger.error("There was an error loading the Blockthrough script.",w)}),p()})},t);function t(f){f===void 0&&(f=i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutAdFuel);var p=c.call(this,null,"Blockthrough",new r.Version(a.major,a.minor,a.revision,a.family),"bt","color: #d2b000; padding: 2px",f,u)||this;return p.preDispatch=function(h){return new Promise(function(w,s){var b;p.logger.info("BLOCKTHROUGH: preDispatch was fired."),window.AdFuelUtils||(window.AdFuelUtils={isBlockerEnabled:!1,isReinsertionAllowed:!1,getPermissionToReinsert:function(v){}}),window.AdFuelUtils.isBlockerEnabled=(b=(b=window.BT)==null?void 0:b.BLOCKER_ENABLED)!=null&&b,window.AdFuelUtils.isReinsertionAllowed=(b=(b=window.BT)==null?void 0:b.REINSERTION_ALLOWED)!=null&&b,window.AdFuelUtils.getPermissionToReinsert=function(v){window.BT&&window.BT.getPermissionToReinsert(function(m){m&&v()})},w()})},console.log("ModuleFlags: ",{DOM:i.ModuleFlags.EnableForDomestic,INTL:i.ModuleFlags.EnableForForeign,ADF:i.ModuleFlags.RunWithoutAdFuel}),p.logger.info("Created Blockthrough Module"),p}new(e.Blockthrough=g)(i.ModuleFlags.EnableForDomestic|i.ModuleFlags.EnableForForeign|i.ModuleFlags.RunWithoutAdFuel)},{"./version.json":12,"@turnercode/digital-ads-utilities/dist/AAdFuelModule":1,"@turnercode/digital-ads-utilities/dist/Version":4,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":6}],12:[function(n,y,e){y.exports={family:"TS",major:5,minor:0,revision:13}},{}]},{},[11])(11)})});var _s=S((bs,wt)=>{(function(n){typeof bs=="object"&&typeof wt<"u"?wt.exports=n():typeof define=="function"&&define.amd?define([],n):(typeof window<"u"||typeof window<"u"?window:typeof self<"u"?self:this).AdFuel=n()})(function(){return function n(y,e,l){function c(o,r){if(!e[o]){if(!y[o]){var a=typeof P=="function"&&P;if(!r&&a)return a(o,!0);if(d)return d(o,!0);throw(r=new Error("Cannot find module '"+o+"'")).code="MODULE_NOT_FOUND",r}a=e[o]={exports:{}},y[o][0].call(a.exports,function(u){return c(y[o][1][u]||u)},a,a.exports,n,y,e,l)}return e[o].exports}for(var d=typeof P=="function"&&P,i=0;i<l.length;i++)c(l[i]);return c}({1:[function(o,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AAdFuelModule=e.ModuleFlags=void 0;var l,c=o("./Logger"),d=o("./promiseWithTimeout"),i=o("./localization"),o=((o=l=e.ModuleFlags||(e.ModuleFlags={}))[o.None=0]="None",o[o.EnableForDomestic=1]="EnableForDomestic",o[o.EnableForForeign=2]="EnableForForeign",o[o.RunWithoutAdFuel=4]="RunWithoutAdFuel",o[o.RunWithoutConsent=8]="RunWithoutConsent",o[o.HasVideoAPI=16]="HasVideoAPI",o[o.DisableForCanada=32]="DisableForCanada",Object.defineProperty(r.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),r);function r(a,u,g,t,f,p,h,w){p===void 0&&(p=l.EnableForDomestic|l.EnableForForeign),h===void 0&&(h=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);var s=this;this.config=a,this.MODULE_NAME=u,this.MODULE_VERSION=g,this.MODULE_LOG_TAG=t,this.logStyle=f,this.moduleFlags=p,this.consentTags=h,this.MODULE_VIDEO_API_KEY=w,this.adFuelExists=!!window.AdFuel,this.userConsentLib=((a=window.WM)==null?void 0:a.UserConsent)||((u=window.WBD)==null?void 0:u.UserConsent),this.environmentMatchesFlags=function(){return(0,i.isIntl)()?(!(0,i.isCanada)()||(s.moduleFlags&l.DisableForCanada)!==l.DisableForCanada)&&(s.moduleFlags&l.EnableForForeign)===l.EnableForForeign:(s.moduleFlags&l.EnableForDomestic)===l.EnableForDomestic},this.callInit=function(){s.logger.log("Waiting for UserConsent..."),s.waitForUserConsent().then(function(){var b;s.logger.log("Checking Module Flags...",s.moduleFlags),(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent||(b=s.userConsentLib)!=null&&b.inUserConsentState(s.consentTags,{id:s.MODULE_NAME})?(s.moduleFlags&&l.RunWithoutAdFuel)==l.RunWithoutAdFuel?((b=window.AdFuel)!=null&&b.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var v;s.logger.log("Registering with AdFuel..."),(v=window.AdFuel)!=null&&v.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var v;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(v=window.AdFuel)!=null&&v.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)}))})):(s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags),window.AdFuel?(window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)):document.addEventListener("AdFuelCreated",function(){window.AdFuel.setModuleReady(s.MODULE_LOG_TAG),window.AdFuel.setModuleLoaded(s.MODULE_LOG_TAG)}))):(s.logger.log("Waiting for AdFuel..."),s.waitForAdFuel().then(function(){var v;(v=window.AdFuel)!=null&&v.registerModule(s)||document.addEventListener("AdFuelCreated",function(){var m;s.logger.log("Registering with AdFuel..."),(m=window.AdFuel)!=null&&m.registerModule(s)}),s.logger.log("Checking Environment..."),s.environmentMatchesFlags()?(s.logger.log("Calling Init..."),s.init().then(function(){var m;window.AdFuel?(s.logger.log("Setting Module Loaded..."),(m=window.AdFuel)!=null&&m.setModuleLoaded(s.MODULE_LOG_TAG)):(s.logger.log("Waiting for AdFuelCreated..."),document.addEventListener("AdFuelCreated",function(){var E;s.logger.log("Setting Module Loaded..."),(E=window.AdFuel)!=null&&E.setModuleLoaded(s.MODULE_LOG_TAG)}))})):s.logger.warn("Not initializing ".concat(s.MODULE_NAME," for environmental reasons."),s.moduleFlags)}).catch(function(v){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for AdFuel."),v)})):(s.logger.info("User consent is not granted.",(b=s.userConsentLib)==null?void 0:b.inUserConsentState(s.consentTags)),(b=window.AdFuel)!=null&&b.setModuleLoaded(s.MODULE_LOG_TAG))}).catch(function(b){s.logger.warn("".concat(s.MODULE_NAME," errored waiting for consent."),b)})},this.waitForAdFuel=function(){return(s.moduleFlags&l.RunWithoutAdFuel)===l.RunWithoutAdFuel?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(b){window.AdFuel?b():document.addEventListener("AdFuelCreated",function(){b()})}))},this.waitForUserConsent=function(){return!s.userConsentLib||(s.moduleFlags&l.RunWithoutConsent)==l.RunWithoutConsent?Promise.resolve():(0,d.promiseWithTimeout)(5e3,new Promise(function(b){var v;s._logger.log("Consent Promise with Timeout..."),(v=s.userConsentLib)!=null&&v.isReady()?(s._logger.log("Consent Is Ready..."),(v=s.userConsentLib)!=null&&v.isInRegion("gdpr")?(s._logger.log("Region is GDPR..."),(v=((v=s.userConsentLib)==null?void 0:v.isOneTrustLoaded())&&!((v=s.userConsentLib)!=null&&v.isOneTrustFailing()))!=null&&v?(s._logger.log("Optanon is Loaded..."),b()):(s._logger.log("Waiting for OneTrust..."),document.addEventListener("oneTrustLoaded",function(){s._logger.log("OneTrust is Loaded..."),b()}),document.addEventListener("oneTrustFailed",function(){s._logger.error("OneTrust Failed To Load..."),b()}),document.addEventListener("oneTrustBlocked",function(){s._logger.error("OneTrust Loading Was Blocked..."),b()}))):(s._logger.log("Region is not GDPR..."),b())):s.userConsentLib?(console.log("Waiting for UserConsent..."),document.addEventListener("userConsentReady",function(){console.log("Consent Is Ready..."),b()})):(console.log("No User Consent..."),b())}))},this._logger=new c.Logger(this.MODULE_NAME,this.MODULE_VERSION.toString(),this.MODULE_LOG_TAG,this.logStyle),this.callInit()}e.AAdFuelModule=o},{"./Logger":4,"./localization":14,"./promiseWithTimeout":16}],2:[function(i,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Consent=void 0;var l=i("./Logger"),c=i("./CookieHelper"),d=i("./Version"),i=(Object.defineProperty(o.prototype,"consentChecked",{get:function(){return this._consentChecked},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"consentStatus",{get:function(){return this._consentChecked},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getFullConsentState",{get:function(){var r;return(r=(r=this.userConsentLib)==null?void 0:r.getConsentState())!=null&&r},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getConsentVersion",{get:function(){var r;return(r=(r=this.userConsentLib)==null?void 0:r.getConsentVersion())!=null?r:""},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getConsentString",{get:function(){var r,a="";return c.CookieHelper.hasCookie("eupubconsent")?(this._logger.log("Getting Consent Object from cookie..."),a=(r=c.CookieHelper.readCookie("eupubconsent"))!=null?r:""):typeof window<"u"&&window.__tcfapi&&typeof window.__tcfapi=="function"?(this._logger.log("Getting Consent Object from __tcfapi..."),window.__tcfapi("getTCData",2,function(u,g){return g?(a=u.tcString,u.tcString):a=""})):typeof window<"u"&&window.__cmp&&typeof window.__cmp=="function"&&(this._logger.log("Getting Consent Object from __cmp..."),window.__cmp("getVendorConsents",null,function(u){a=u.metadata})),this._logger.log("Returning consent string...",a),a},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getGDPRApplies",{get:function(){var r;return(r=(r=this.userConsentLib)==null?void 0:r.isInRegion("gdpr"))!=null&&r},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getCCPAApplies",{get:function(){var r;return(r=(r=this.userConsentLib)==null?void 0:r.isInRegion("ccpa"))!=null&&r},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getGPPApplies",{get:function(){var r;return(r=(r=this.userConsentLib)==null?void 0:r.isInRegion("gpp"))!=null&&r},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isReady",{get:function(){var r;return(r=(r=this.userConsentLib)==null?void 0:r.isReady())!=null&&r},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isInConsentRegion",{get:function(){var r;return((r=this.userConsentLib)==null?void 0:r.isInRegion("global"))===!1},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"getRegion",{get:function(){var r;return(r=(r=this.userConsentLib)==null?void 0:r.getRegion())!=null?r:"global"},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isOneTrustLoaded",{get:function(){var r;return(r=(r=this.userConsentLib)==null?void 0:r.isOneTrustLoaded())!=null&&r},enumerable:!1,configurable:!0}),Object.defineProperty(o.prototype,"isOptanonLoaded",{get:function(){var r;return(r=(r=this.userConsentLib)==null?void 0:r.isOneTrustLoaded())!=null&&r},enumerable:!1,configurable:!0}),o);function o(){var r,a=this;this._version=new d.Version(1,0,0),this._logger=new l.Logger("Adfuel Consent",this._version.toString(),"consent","color: #FF5733; padding: 2px"),this._consentChecked=!1,this.userConsentLib=((r=window.WM)==null?void 0:r.UserConsent)||((r=window.WBD)==null?void 0:r.UserConsent),this.getConsent=function(u,g){u===void 0&&(u=["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]),g===void 0&&(g="");var t="1.3.6";try{t=(p=(f=a.userConsentLib)==null?void 0:f.getVersion())!=null?p:"1.3.6"}catch{a._logger.warn("Running Older UserConsent - Please Update!")}var f=a.getRegion,p=window.__cmp!==void 0,h=window.__tcfapi!==void 0;return p&&h&&a._logger.warn("****************************\n** Running multiple GDPR UserConsent frameworks.\n** You may experience erratic ad behavior.\n** Please examine your UserConsent configuration.\n****************************"),f==="ccpa"&&(p||h)&&a._logger.warn("****************************\n** Running GDPR UserConsent framework.\n** You may experience erratic ad behavior.\n** Please examine your UserConsent configuration.\n****************************"),f!=="gdpr"||p||h||a._logger.warn("****************************\n** Could not find GDPR UserConsent framework.\n** You may experience erratic ad behavior.\n** Please examine your UserConsent configuration.\n****************************"),a._logger.log("UserConsent Version: ",t),a._logger.log("Consent States: ",u),a._consentChecked=!window.WM&&!window.WBD||(f=a.userConsentLib)==null||!f.isReady()||(2<=parseInt(t.split(".")[0])?(p=a.userConsentLib)==null?void 0:p.inUserConsentState(u,{id:g}):(h=a.userConsentLib)==null?void 0:h.inUserConsentState(["ads-general","ads-vendor"])),a._logger.log("Consent Granted: ",a.consentStatus),a._consentChecked=!0,a.consentStatus},window.consentAnnounced||(this._logger.info("AdFuel Consent loaded."),this._logger.info("User Consent Namespace Created: ".concat(!!window.WM||!!window.WBD)),this._logger.info("User Consent ready: ".concat((r=(r=this.userConsentLib)==null?void 0:r.isReady())!=null&&r)),window.consentAnnounced=!0)}e.Consent=i},{"./CookieHelper":3,"./Logger":4,"./Version":7}],3:[function(n,y,e){function l(){}Object.defineProperty(e,"__esModule",{value:!0}),e.CookieHelper=void 0,l.hasCookie=function(c){return typeof window<"u"&&!(!document||!document.cookie)&&(0<=document.cookie.indexOf("; "+c+"=")||document.cookie.indexOf(c+"=")===0)},l.setCookie=function(c){var d=c.cookieName+"="+c.cookieValue+";";c.attributes.forEach(function(i){d+=" "+i.key+"="+i.value+";"}),c.secure&&(d+=" Secure"),document.cookie=d},l.readCookie=function(c){var d,i,o=!1,r=null;return(o=typeof localStorage<"u"?!0:o)&&(r=localStorage.getItem(c)),o&&r!==null||(i=(d=c).length+1,r=typeof document<"u"&&document.cookie&&document.cookie.split(";").map(function(a){return a.trim()}).filter(function(a){return a.substring(0,i)==="".concat(d,"=")}).map(function(a){return decodeURIComponent(a.substring(i))})[0]||null),r},e.CookieHelper=l},{}],4:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Logger=e.LogLevel=void 0,(c=l=e.LogLevel||(e.LogLevel={})).Info="background: green;color: white;",c.Warning="background: orange;color: black",c.Error="background: red;color:white",Object.defineProperty(d.prototype,"isDebugging",{get:function(){var i;return this._debug===void 0&&(i=this.getUrlParam("debug").split(","),this._debug=i[0]==="true"||0<=i.indexOf(this._logKey.toLowerCase())),this._debug},enumerable:!1,configurable:!0}),d.prototype.info=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.warn=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.error=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.log=function(i){for(var o=1;o<arguments.length;o++)o-1},d.prototype.groupStart=function(i){this.isDebugging&&!this._inGroup&&(this._inGroup=!0,console.groupCollapsed("%c[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] ").concat(i," - START -----"),this._normalStyle))},d.prototype.groupEnd=function(i){this.isDebugging&&this._inGroup&&(this._inGroup=!1,console.groupEnd())},d.prototype.timeStart=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupStart(i),console.time(o)},d.prototype.timeEnd=function(i){var o="[ ".concat(this._moduleName," ").concat(this._moduleVersion," ] - ").concat(i);this.groupEnd(i),console.timeEnd(o)},d.prototype.getUrlParam=function(i){return typeof document<"u"&&(i=i.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),i=new RegExp("[\\?&]"+i+"=([^&#]*)"),document)&&document.location&&document.location.search&&(i=i.exec(document.location.search))?i[1]:""};var l,c=d;function d(i,o,r,a){this._defaultNormalStyle=["background: inherit","color: inherit"].join(";"),this._inGroup=!1,this._moduleName="",this._moduleVersion="",this._logKey="",this._normalStyle=this._defaultNormalStyle,this._debug=void 0,this._moduleName=i||"",this._moduleVersion=o||"",this._logKey=r||(i==null?void 0:i.toLowerCase())||"",this._normalStyle=a||this._defaultNormalStyle,this.isDebugging&&(this.info=console.info.bind(console.info,"%c --- %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Info,this._normalStyle),this.warn=console.warn.bind(console.warn,"%c >>> %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Warning,this._normalStyle),this.error=console.error.bind(console.error,"%c !!! %c[".concat(this._moduleName," ").concat(this._moduleVersion,"] "),l.Error,this._normalStyle),this.log=console.log.bind(console,"%c     %c[".concat(this._moduleName," ").concat(this._moduleVersion,"]"),l.Info,this._normalStyle))}e.Logger=c},{}],5:[function(n,y,e){function l(c){this._tag="ADFUEL",this._tag=c,this.addMark("AdFuel Load START")}Object.defineProperty(e,"__esModule",{value:!0}),e.Performance=void 0,l.prototype.addMark=function(c){typeof window<"u"&&window.performance.mark("[".concat(this._tag,"] ").concat(c))},l.prototype.addMeasure=function(c){typeof window<"u"&&window.performance.measure("[".concat(this._tag,"] ").concat(c),"[".concat(this._tag,"] ").concat(c," START"),"[".concat(this._tag,"] ").concat(c," END"))},l.prototype.getMarks=function(){var c,d=this;return(c=window==null?void 0:window.performance.getEntriesByType("mark").filter(function(i){return i.name.indexOf("[".concat(d._tag,"] "))}))!=null?c:[]},l.prototype.getMeasures=function(){var c,d=this;return(c=window==null?void 0:window.performance.getEntriesByType("measure").filter(function(i){return i.name.indexOf("[".concat(d._tag,"] "))}))!=null?c:[]},e.Performance=l},{}],6:[function(n,y,e){function l(c){var d=this;this.logger=c,this.re=/(([^<>()\[\]\.,;:\s@\"]+(\.[^<>()\[\]\.,;:\s@\"]+)*)|(\".+\"))@(([^<>()\[\]\.,;:\s@\"]+\.)+[^<>()\[\]\.,;:\s@\"]{2,})/i,this.present=function(){return d.presentInQueryString()||d.presentInHash()||d.presentInReferrer()}}Object.defineProperty(e,"__esModule",{value:!0}),e.PiiFilter=void 0,l.prototype.presentInQueryString=function(){if(document.location.search){var c=document.location.search.search(this.re)+1,d=void 0;try{d=decodeURIComponent(document.location.search).search(this.re)+1}catch{d=c}return c===1||d===1}return!1},l.prototype.presentInHash=function(){if(document.location.hash){var c=document.location.hash.search(this.re)+1,d=void 0;try{d=decodeURIComponent(document.location.hash).search(this.re)+1}catch{d=c}return c||d}return!1},l.prototype.presentInReferrer=function(){if(document.referrer){var c=document.referrer.search(this.re)+1,d=void 0;try{d=decodeURIComponent(document.location.referrer).search(this.re)+1}catch{d=c}return c||d}return!1},l.prototype.filterDFPRequest=function(){if(this.presentInQueryString()||this.presentInHash()||this.presentInReferrer()){if(typeof window<"u"&&window.AdFuel){this.logger.log("Filtering DFP Request due to PII in query string.");for(var c=Object.getOwnPropertyNames(window.AdFuel),d=0;d<c.length;d++);window.googletag=null}return!0}return!1},Object.defineProperty(l.prototype,"qs",{get:function(){return this.presentInQueryString},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"hash",{get:function(){return this.presentInHash},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"ref",{get:function(){return this.presentInReferrer},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"isPIIPresent",{get:function(){return this.present},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"filter",{get:function(){return this.filterDFPRequest},enumerable:!1,configurable:!0}),e.PiiFilter=l},{}],7:[function(n,y,e){function l(c,d,i,o){var r=this;this.setMajorTo=c,this.setMinorTo=d,this.setRevisionTo=i,this.setFamilyTo=o,this.setfamily=function(a){return r.setFamilyTo=a,r},this.toString=function(){return"".concat(r.major,".").concat(r.minor.toString().padStart(2,"0"),".").concat(r.revision.toString().padStart(3,"0")," ").concat(r.family).trim()}}Object.defineProperty(e,"__esModule",{value:!0}),e.Version=void 0,Object.defineProperty(l.prototype,"major",{get:function(){var c;return(c=this.setMajorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"minor",{get:function(){var c;return(c=this.setMinorTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"revision",{get:function(){var c;return(c=this.setRevisionTo)!=null?c:0},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"family",{get:function(){var c;return(c=this.setFamilyTo)!=null?c:""},enumerable:!1,configurable:!0}),e.Version=l},{}],8:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.generateCacheBuster=void 0,e.generateCacheBuster=function(){for(var l="",c=0;c<10;c++)l+=Math.floor(9*Math.random()).toString();return l}},{}],9:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getUrlParam=void 0,e.getUrlParam=function(l){return typeof document<"u"&&(l=l.replace(/[[]/,"\\[").replace(/[\]]/,"\\]"),l=new RegExp("[\\?&]"+l+"=([^&#]*)"),document)&&document.location&&document.location.search&&(l=l.exec(document.location.search))?l[1]:""}},{}],10:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.getViewport=void 0,e.getViewport=function(){var l=0,c=0,c=typeof window<"u"&&window&&window.innerWidth!==void 0?(l=window.innerWidth,window.innerHeight):(typeof document<"u"&&document&&document.documentElement!==void 0&&document.documentElement.clientWidth!==void 0&&document.documentElement.clientWidth!==0?(l=document.documentElement.clientWidth,document.documentElement):(l=document.getElementsByTagName("body")[0].clientWidth,document.getElementsByTagName("body")[0])).clientHeight;return{width:l,height:c,toGpt:[""+l,""+c]}}},{}],11:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasVideo=void 0,e.hasVideo=function(){var l=document.getElementsByTagName("video"),c=document.getElementsByClassName("fave-wrapper"),d=document.getElementsByClassName("top-container");return!!l.length||!!c.length||!!d.length}},{}],12:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.waitForVideo=e.Version=e.PiiFilter=e.Performance=e.toString=e.setHostAndPathNames=e.selectedEdition=e.promiseWithTimeout=e.normalizeUrl=e.noop=e.ModuleFlags=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=e.Logger=e.locationServiceURL=e.loadScriptFromUrl=e.isUSCNN=e.isIntl=e.hasVideo=e.hasUserConsent=e.getUrlParam=e.generateCacheBuster=e.countryCode=e.Consent=e.CookieHelper=e.AAdFuelModule=void 0;var l=n("./AAdFuelModule"),c=(Object.defineProperty(e,"AAdFuelModule",{enumerable:!0,get:function(){return l.AAdFuelModule}}),Object.defineProperty(e,"ModuleFlags",{enumerable:!0,get:function(){return l.ModuleFlags}}),n("./CookieHelper")),d=(Object.defineProperty(e,"CookieHelper",{enumerable:!0,get:function(){return c.CookieHelper}}),n("./Consent")),i=(Object.defineProperty(e,"Consent",{enumerable:!0,get:function(){return d.Consent}}),n("./getUrlParam")),o=(Object.defineProperty(e,"getUrlParam",{enumerable:!0,get:function(){return i.getUrlParam}}),n("./hasVideo")),r=(Object.defineProperty(e,"hasVideo",{enumerable:!0,get:function(){return o.hasVideo}}),n("./localization")),a=(Object.defineProperty(e,"isIntl",{enumerable:!0,get:function(){return r.isIntl}}),Object.defineProperty(e,"isUSCNN",{enumerable:!0,get:function(){return r.isUSCNN}}),n("./loadScriptFromUrl")),u=(Object.defineProperty(e,"loadScriptFromUrl",{enumerable:!0,get:function(){return a.loadScriptFromUrl}}),n("./Logger")),g=(Object.defineProperty(e,"Logger",{enumerable:!0,get:function(){return u.Logger}}),n("./normalizeUrl")),t=(Object.defineProperty(e,"normalizeUrl",{enumerable:!0,get:function(){return g.normalizeUrl}}),n("./promiseWithTimeout")),f=(Object.defineProperty(e,"promiseWithTimeout",{enumerable:!0,get:function(){return t.promiseWithTimeout}}),n("./Performance")),p=(Object.defineProperty(e,"Performance",{enumerable:!0,get:function(){return f.Performance}}),n("./PiiFilter")),h=(Object.defineProperty(e,"PiiFilter",{enumerable:!0,get:function(){return p.PiiFilter}}),n("./setHostAndPathNames")),w=(Object.defineProperty(e,"setHostAndPathNames",{enumerable:!0,get:function(){return h.setHostAndPathNames}}),n("./generateCacheBuster")),s=(Object.defineProperty(e,"generateCacheBuster",{enumerable:!0,get:function(){return w.generateCacheBuster}}),n("./variables")),b=(Object.defineProperty(e,"MODULE_VERSION",{enumerable:!0,get:function(){return s.MODULE_VERSION}}),Object.defineProperty(e,"MODULE_NAME",{enumerable:!0,get:function(){return s.MODULE_NAME}}),Object.defineProperty(e,"MODULE_LOG_TAG",{enumerable:!0,get:function(){return s.MODULE_LOG_TAG}}),Object.defineProperty(e,"toString",{enumerable:!0,get:function(){return s.toString}}),Object.defineProperty(e,"noop",{enumerable:!0,get:function(){return s.noop}}),Object.defineProperty(e,"countryCode",{enumerable:!0,get:function(){return s.countryCode}}),Object.defineProperty(e,"locationServiceURL",{enumerable:!0,get:function(){return s.locationServiceURL}}),Object.defineProperty(e,"selectedEdition",{enumerable:!0,get:function(){return s.selectedEdition}}),Object.defineProperty(e,"hasUserConsent",{enumerable:!0,get:function(){return s.hasUserConsent}}),n("./Version")),v=(Object.defineProperty(e,"Version",{enumerable:!0,get:function(){return b.Version}}),n("./waitForVideo"));Object.defineProperty(e,"waitForVideo",{enumerable:!0,get:function(){return v.waitForVideo}})},{"./AAdFuelModule":1,"./Consent":2,"./CookieHelper":3,"./Logger":4,"./Performance":5,"./PiiFilter":6,"./Version":7,"./generateCacheBuster":8,"./getUrlParam":9,"./hasVideo":11,"./loadScriptFromUrl":13,"./localization":14,"./normalizeUrl":15,"./promiseWithTimeout":16,"./setHostAndPathNames":17,"./variables":18,"./waitForVideo":19}],13:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.loadScriptFromUrl=void 0;var l=n("./promiseWithTimeout");e.loadScriptFromUrl=function(c,d,i,o){return i===void 0&&(i=document),o===void 0&&(o=!0),(0,l.promiseWithTimeout)(5e3,new Promise(function(r,a){var u,g,t=i.createElement("script");if(t.setAttribute("data-nscript","beforeInteractive"),document.getElementById(d))a("Element name ".concat(d," already exists in the document."));else try{var f="",p=(f=1<c.split("//").length?c:((g=((u=i.location)==null?void 0:u.protocol)==="https:")!==null&&g?"https://":"http://").concat(c),i.getElementsByTagName("script")[0]);if(t.id=d,t.type="text/javascript",t.src=f,t.async=o,t.addEventListener("load",function(){r(t)}),p==null||!p.parentNode)throw new Error("Could not insert script.");p.parentNode.insertBefore(t,p)}catch(h){console.log("Error in loading script from ".concat(t.src),h),a(h)}}))}},{"./promiseWithTimeout":16}],14:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setIsUSCNN=e.setIsIntl=e.isUSCNN=e.isIntl=e.isCanada=void 0;var l=n("./setHostAndPathNames"),c=n("./getUrlParam"),d=n("./Logger"),i=n("./variables"),o=new d.Logger(i.MODULE_NAME,i.MODULE_VERSION.toString(),i.MODULE_LOG_TAG,"color: coral; padding: 2px"),r=!1,a=!1,u=new Set(["US","CA"]),g=/^.*(edition|edition-m|arabic|cnnespanol|cnne-test)\.cnn.com/;e.isCanada=function(){var t;return(t=(t=(t=window.WM)==null?void 0:t.UserConsent)==null?void 0:t.getGeoCountry())!=null?t:i.countryCode},e.isIntl=function(){var t=!1,f=(0,l.setHostAndPathNames)(),p=(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getGeoCountry&&typeof((p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry)=="function"?(p=(p=window.WM)==null?void 0:p.UserConsent)==null?void 0:p.getGeoCountry():i.countryCode,h=(h=(h=window.WM)==null?void 0:h.UserConsent)!=null&&h.getGeoState&&typeof((h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoState)=="function"?(h=(h=window.WM)==null?void 0:h.UserConsent)==null?void 0:h.getGeoState():"",w=0<=f.search(/^(.*\.)?cnn\.com$/);return w&&u.delete("CA"),o.log("Is CNN:",w),o.log("Domestic Country Codes: ",Array.from(u)),o.log("UserConsent Location: ",{state:h,country:p}),(0,c.getUrlParam)("isIntl")==="true"?(r||(r=!0,o.log("Faking international site. Using International PubIds.")),t=!0):0<=f.search(g)?(r||(r=!0,o.log("Full international site. Using International PubIds.")),t=!0):p===""||p===null?(r||(r=!0,o.log("No country code. Using Domestic PubIds.")),t=!1):u.has(p)?r||(r=!0,o.log("Domestic site or country code. Using Domestic PubIds."),t=!1):0<=f.search(/^.*(money|\.cnn)\./)?(0<=f.search(/^.*us\.cnn\.com/)&&(r||o.log("International user but domestic page.  Using alternate International PubIds if available."),a=!0),r||(r=!0,o.log("International country code. Using International PubIds.")),t=!0):0<=f.search(/^.*us\.cnn\.com/)?(r||(r=!0,o.log("International user but domestic page. Using alternate International PubIds if available.")),a=t=!0):(r||(r=!0,o.log("International country code but domestic site. Using International PubIds if available.")),t=!0),t},e.isUSCNN=function(){return(0,e.isIntl)(),o.log("Is User on US.CNN.COM? ",a),a},e.setIsIntl=e.isIntl,e.setIsUSCNN=e.isUSCNN},{"./Logger":4,"./getUrlParam":9,"./setHostAndPathNames":17,"./variables":18}],15:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.normalizeUrl=void 0,e.normalizeUrl=function(l){var c=Object.assign({normalizeProtocol:!0,normalizeHttps:!1,normalizeHttp:!0,stripFragment:!0,stripWWW:!0,removeQueryParameters:!0,removeTrailingSlash:!1,removeDirectoryIndex:!1},{}),d=l.trim(),i=l[0]==="/"&&l[1]==="/",o=(!i&&/^\.*\//.test(l)||(d=l.replace(/^(?!(?:\w+:)?\/\/)|^\/\//,"http://")),document.createElement("a"));if(o.href=d,c.normalizeHttps&&c.normalizeHttp)throw new Error("The `normalizeHttp` and `normalizeHttps` options cannot be used together");return c.normalizeHttp&&(o.protocol==="http:"||i)&&(o.protocol="https:"),c.normalizeHttps&&(o.protocol==="https:"||i)&&(o.protocol="http:"),c.stripFragment&&(o.hash=""),o.pathname&&(o.pathname=o.pathname.replace(/((?![https?:]).)\/{2,}/g,function(r,a){return/^(?!\/)/g.test(a)?a+"/":"/"})),o.pathname&&(o.pathname=decodeURI(o.pathname)),o.hostname&&(o.hostname=o.hostname.replace(/\.$/,""),c.stripWWW)&&(o.hostname=o.hostname.replace(/^www\./,"")),c.removeQueryParameters&&(o.search=""),d=o.href,!c.removeTrailingSlash&&o.pathname!=="/"||(d=l.replace(/\/$/,"")),d=i&&!c.normalizeProtocol?l.replace(/^http:\/\//,"//"):d}},{}],16:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.promiseWithTimeout=void 0,e.promiseWithTimeout=function(l,c,d){d===void 0&&(d="The promise timed out.");var i=new Promise(function(o,r){var a=setTimeout(function(){clearTimeout(a),r(d)},l)});return Promise.race([c,i])}},{}],17:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.setHostAndPathNames=void 0,e.setHostAndPathNames=function(){var l=typeof document<"u"?document.createElement("a"):{href:"",hostname:"",pathname:""};return l.href=typeof document<"u"?document.location.href:"",l.hostname}},{}],18:[function(c,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.hasUserConsent=e.selectedEdition=e.locationServiceURL=e.countryCode=e.noop=e.toString=e.MODULE_LOG_TAG=e.MODULE_VERSION=e.MODULE_NAME=void 0;var l=c("./Version"),c=c("./CookieHelper"),d=Object.prototype;e.MODULE_NAME="Ad Utilities",e.MODULE_VERSION=new l.Version(5,0,102,"TS"),e.MODULE_LOG_TAG="utils",e.toString=d.toString,e.noop=function(){},e.countryCode=c.CookieHelper.readCookie("countryCode")||((d=(l=c.CookieHelper.readCookie("CG"))==null?void 0:l.substr(0,2))!=null?d:""),e.locationServiceURL="https://geo.ngtv.io/locate?appId=eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJwbGF0Zm9ybSI6IndlYiIsInByb2R1Y3QiOiJhZGZ1ZWwiLCJuZXR3b3JrIjoiY25uIiwiYXBwSWQiOiJjbm4tYWRmdWVsLXdlYi14bWQ2dTkifQ.N-lYZh_mvCV2gChDusNhd85B2BD7AiCIcNY2Gr5Rc6c",e.selectedEdition=(l=c.CookieHelper.readCookie("SelectedEdition"))!=null?l:"www",e.hasUserConsent=typeof window<"u"&&(window.WM&&window.WM.UserConsent||window.WBD&&window.WBD.UserConsent)||!1},{"./CookieHelper":3,"./Version":7}],19:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.waitForVideo=void 0,e.waitForVideo=function(l){var c=!1,d=new MutationObserver(function(a){var u=document.getElementsByTagName("video"),g=document.getElementsByClassName("fave-wrapper"),t=document.getElementsByClassName("top-container");(u.length||g.length||t.length)&&(c||l(),c=!0,d.disconnect())}),i=(d.observe(document,{attributes:!1,childList:!0,characterData:!1,subtree:!0}),document.getElementsByTagName("video")),o=document.getElementsByClassName("fave-wrapper"),r=document.getElementsByClassName("top-container");(i.length||o.length||r.length)&&(l(),c=!0,d.disconnect())}},{}],20:[function(o,y,e){var l,c=this&&this.__extends||(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(m,E){m.__proto__=E}:function(m,E){for(var O in E)E.hasOwnProperty(O)&&(m[O]=E[O])}),function(m,E){function O(){this.constructor=m}l(m,E),m.prototype=E===null?Object.create(E):(O.prototype=E.prototype,new O)}),d=(Object.defineProperty(e,"__esModule",{value:!0}),o("./Enumerables")),i=o("./Comparers"),o=(r.prototype.toList=function(){return new t(this.toArray())},r.prototype.toDictionary=function(m,E){return b.fromArray(this.toArray(),m,E)},r.prototype.reverse=function(){return new d.ReverseEnumerable(this.asEnumerable())},r.prototype.concat=function(m){for(var E,O=[],M=1;M<arguments.length;M++)O[M-1]=arguments[M];return(E=this.asEnumerable()).concat.apply(E,[m].concat(O))},r.prototype.contains=function(m){return this.any(function(E){return E===m})},r.prototype.where=function(m){return new d.ConditionalEnumerable(this.asEnumerable(),m)},r.prototype.select=function(m){return new d.TransformEnumerable(this.asEnumerable(),m)},r.prototype.selectMany=function(m){return this.select(function(E){return E=m(E),E instanceof Array?new d.ArrayEnumerable(E):E.asEnumerable()}).toArray().reduce(function(E,O){return new d.ConcatEnumerable(E,O)},d.Enumerable.empty())},r.prototype.elementAt=function(m){if(m=this.elementAtOrDefault(m),m===void 0)throw new Error("Out of bounds");return m},r.prototype.except=function(m){return this.asEnumerable().except(m)},r.prototype.first=function(m){if(m=m!==void 0?this.firstOrDefault(m):this.firstOrDefault(),m===void 0)throw new Error("Sequence contains no elements");return m},r.prototype.groupBy=function(m,E){for(var O=this.toArray(),M=new b,T=0;T<O.length;++T){var C=m(O[T]),F=E!==void 0?E(O[T]):O[T];M.containsKey(C)||M.set(C,new t),M.get(C).push(F)}return M.asEnumerable()},r.prototype.last=function(m){if(m=m!==void 0?this.lastOrDefault(m):this.lastOrDefault(),m===void 0)throw new Error("Sequence contains no elements");return m},r.prototype.single=function(m){if(m=m!==void 0?this.singleOrDefault(m):this.singleOrDefault(),m===void 0)throw new Error("Sequence contains no elements");return m},r.prototype.singleOrDefault=function(m){return m!==void 0?this.asEnumerable().singleOrDefault(m):this.asEnumerable().singleOrDefault()},r.prototype.skipWhile=function(m){return this.asEnumerable().skipWhile(m)},r.prototype.takeWhile=function(m){return this.asEnumerable().takeWhile(m)},r.prototype.sequenceEqual=function(m,E){return E!==void 0?this.asEnumerable().sequenceEqual(m,E):this.asEnumerable().sequenceEqual(m)},r.prototype.distinct=function(m){return new d.UniqueEnumerable(this.asEnumerable(),m)},r.prototype.min=function(m){return m!==void 0?new d.TransformEnumerable(this.asEnumerable(),m).min():this.aggregate(function(E,O){return E!==void 0&&E<O?E:O})},r.prototype.orderBy=function(m,E){return new d.OrderedEnumerable(this.asEnumerable(),i.createComparer(m,!0,E))},r.prototype.orderByDescending=function(m){return new d.OrderedEnumerable(this.asEnumerable(),i.createComparer(m,!1,void 0))},r.prototype.max=function(m){return m!==void 0?new d.TransformEnumerable(this.asEnumerable(),m).max():this.aggregate(function(E,O){return E!==void 0&&O<E?E:O})},r.prototype.sum=function(m){return this.aggregate(function(E,O){return E+m(O)},0)},r.prototype.skip=function(m){return new d.RangeEnumerable(this.asEnumerable(),m,void 0)},r.prototype.take=function(m){return new d.RangeEnumerable(this.asEnumerable(),void 0,m)},r.prototype.union=function(m){return new d.UniqueEnumerable(this.concat(m))},r.prototype.aggregate=function(m,E){return E!==void 0?this.asEnumerable().aggregate(m,E):this.asEnumerable().aggregate(m)},r.prototype.any=function(m){return m!==void 0?this.asEnumerable().any(m):this.asEnumerable().any()},r.prototype.all=function(m){return this.asEnumerable().all(m)},r.prototype.average=function(m){return this.asEnumerable().average(m)},r.prototype.count=function(m){return m!==void 0?this.asEnumerable().count(m):this.asEnumerable().count()},r.prototype.elementAtOrDefault=function(m){return this.asEnumerable().elementAtOrDefault(m)},r.prototype.firstOrDefault=function(m){return m!==void 0?this.asEnumerable().firstOrDefault(m):this.asEnumerable().firstOrDefault()},r.prototype.lastOrDefault=function(m){return m!==void 0?this.asEnumerable().lastOrDefault(m):this.asEnumerable().lastOrDefault()},r.prototype.forEach=function(m){return this.asEnumerable().forEach(m)},r.prototype.defaultIfEmpty=function(m){return m!==void 0?this.asEnumerable().defaultIfEmpty(m):this.asEnumerable().defaultIfEmpty()},r.prototype.zip=function(m,E){return this.asEnumerable().zip(m,E)},r);function r(){}e.EnumerableCollection=o,c(u,a=o),u.prototype.asArray=function(){return this.source},u.prototype.toArray=function(){return[].concat(this.source)},u.prototype.toList=function(){return new t(this.toArray())},u.prototype.asEnumerable=function(){return new d.ArrayEnumerable(this.source)},u.prototype.aggregate=function(m,E){return E!==void 0?this.source.reduce(m,E):this.source.reduce(m)},u.prototype.any=function(m){return m!==void 0?this.source.some(m):0<this.source.length},u.prototype.all=function(m){return this.source.every(m)},u.prototype.average=function(m){if(this.count()===0)throw new Error("Sequence contains no elements");for(var E=0,O=0,M=this.source.length;O<M;++O)E+=m(this.source[O]);return E/this.source.length},u.prototype.count=function(m){return(m!==void 0?this.source.filter(m):this.source).length},u.prototype.elementAtOrDefault=function(m){if(m<0)throw new Error("Negative index is forbiden");return this.source[m]},u.prototype.firstOrDefault=function(m){return(m!==void 0?this.source.filter(m):this.source)[0]},u.prototype.groupBy=function(m,E){for(var O=this.asArray(),M=new b,T=0;T<O.length;++T){var C=m(O[T]),F=E!==void 0?E(O[T]):O[T];M.containsKey(C)||M.set(C,new t),M.get(C).push(F)}return M.asEnumerable()},u.prototype.lastOrDefault=function(m){return m!==void 0?(m=this.source.filter(m))[m.length-1]:this.source[this.source.length-1]},u.prototype.forEach=function(m){for(var E=0,O=this.source.length;E<O;++E)m(this.source[E],E)},u.prototype.sequenceEqual=function(m,E){if(E===void 0&&(E=i.strictEqualityComparer()),m instanceof u||m instanceof Array){var O=this.asArray(),M=m instanceof u?m.asArray():m;if(O.length!=M.length)return!1;for(var T=0;T<O.length;++T)if(!E(O[T],M[T]))return!1;return!0}return this.asEnumerable().sequenceEqual(m,E)};var a,h=u;function u(m){m===void 0&&(m=[]);var E=a.call(this)||this;return E.source=m,E}e.ArrayQueryable=h,c(f,g=h),f.prototype.copy=function(){return new f(this.toArray())},f.prototype.asReadOnly=function(){return this},f.prototype.clear=function(){this.source=[]},f.prototype.remove=function(m){for(var E=[],O=0,M=this.source.length;O<M;++O)this.source[O]!==m&&E.push(this.source[O]);this.source=E},f.prototype.removeAt=function(m){if(m<0||this.source[m]===void 0)throw new Error("Out of bounds");return this.source.splice(m,1)[0]},f.prototype.get=function(m){return this.source[m]},f.prototype.push=function(m){return this.source.push(m)},f.prototype.pushRange=function(m){return m instanceof Array||(m=m.toArray()),this.source.push.apply(this.source,m)},f.prototype.pushFront=function(m){return this.source.unshift(m)},f.prototype.pop=function(){return this.source.pop()},f.prototype.popFront=function(){return this.source.shift()},f.prototype.set=function(m,E){if(m<0)throw new Error("Out of bounds");this.source[m]=E},f.prototype.insert=function(m,E){if(m<0||m>this.source.length)throw new Error("Out of bounds");this.source.splice(m,0,E)},f.prototype.indexOf=function(m){return this.source.indexOf(m)};var g,t=f;function f(){return g!==null&&g.apply(this,arguments)||this}e.List=t,c(w,p=h),w.prototype.copy=function(){return new w(this.toArray())},w.prototype.clear=function(){this.source=[]},w.prototype.peek=function(){return this.source[this.source.length-1]},w.prototype.pop=function(){return this.source.pop()},w.prototype.push=function(m){return this.source.push(m)};var p,h=w;function w(){return p!==null&&p.apply(this,arguments)||this}e.Stack=h,c(v,s=o),v.fromArray=function(m,E,O){return new v(m.map(function(M){return{key:E(M),value:O(M)}}))},v.fromJsObject=function(m){return new v(new t(Object.getOwnPropertyNames(m)).select(function(E){return{key:E,value:m[E]}}).toArray())},v.prototype.copy=function(){return new v(this.toArray())},v.prototype.asReadOnly=function(){return this},v.prototype.asEnumerable=function(){return new d.ArrayEnumerable(this.toArray())},v.prototype.toArray=function(){var m=this;return this.getKeys().select(function(E){return{key:E,value:m.dictionary[E]}}).toArray()},v.prototype.clear=function(){this.dictionary={}},v.prototype.containsKey=function(m){return this.dictionary.hasOwnProperty(m)},v.prototype.containsValue=function(m){for(var E=this.getKeysFast(),O=0;O<E.length;++O)if(this.dictionary[E[O]]===m)return!0;return!1},v.prototype.getKeys=function(){var m=this,E=this.getKeysFast();return new t(E.map(function(O){return m.keyType==="number"?parseFloat(O):O}))},v.prototype.getKeysFast=function(){return Object.getOwnPropertyNames(this.dictionary)},v.prototype.getValues=function(){for(var m=this.getKeysFast(),E=new Array(m.length),O=0;O<m.length;++O)E[O]=this.dictionary[m[O]];return new t(E)},v.prototype.remove=function(m){this.containsKey(m)&&delete this.dictionary[m]},v.prototype.get=function(m){if(this.containsKey(m))return this.dictionary[m];throw new Error("Key doesn't exist: "+m)},v.prototype.set=function(m,E){if(this.containsKey(m))throw new Error("Key already exists: "+m);this.setOrUpdate(m,E)},v.prototype.setOrUpdate=function(m,E){this.keyType===void 0&&(this.keyType=typeof m),this.dictionary[m]=E};var s,b=v;function v(m){var E=s.call(this)||this;if(E.clear(),m!==void 0)for(var O=0;O<m.length;++O){var M=m[O];E.set(M.key,M.value)}return E}e.Dictionary=b},{"./Comparers":21,"./Enumerables":22}],21:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.strictEqualityComparer=function(){return function(l,c){return l===c}},e.combineComparers=function(l,c){return function(d,i){return l(d,i)||c(d,i)}},e.createComparer=function(l,c,d){return d!==void 0?function(i,o){return d(l(i),l(o))}:c?function(i,o){return i=l(i),o=l(o),i<o?-1:o<i?1:0}:function(i,o){return i=l(i),o=l(o),i<o?1:o<i?-1:0}}},{}],22:[function(a,y,e){var l,c=this&&this.__extends||(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(_,A){_.__proto__=A}:function(_,A){for(var L in A)A.hasOwnProperty(L)&&(_[L]=A[L])}),function(_,A){function L(){this.constructor=_}l(_,A),_.prototype=A===null?Object.create(A):(L.prototype=A.prototype,new L)}),d=(Object.defineProperty(e,"__esModule",{value:!0}),a("./Iterators")),i=a("./Comparers"),o=a("./Collections"),r=a("./Utils"),a=(u.prototype.reset=function(){this.source.reset()},u.prototype.next=function(){return this.source.next()},u.prototype.asEnumerable=function(){return this},u.prototype.toArray=function(){var _=[];for(this.reset();this.next();)_.push(this.value());return _},u.prototype.toList=function(){return new o.List(this.toArray())},u.prototype.toDictionary=function(_,A){return o.Dictionary.fromArray(this.toArray(),_,A)},u.prototype.count=function(_){if(_!==void 0)return new h(this,_).count();var A=0;for(this.reset();this.next();)++A;return A>>>0},u.prototype.any=function(_){return _!==void 0?new h(this,_).any():(this.reset(),this.next())},u.prototype.all=function(_){for(this.reset();this.next();)if(!_(this.value()))return!1;return!0},u.prototype.reverse=function(){return new Re(this.copy())},u.prototype.contains=function(_){return this.any(function(A){return A===_})},u.prototype.sequenceEqual=function(_,A){A===void 0&&(A=i.strictEqualityComparer());var L=_ instanceof Array?new J(_):_.asEnumerable();for(this.reset(),L.reset();this.next();)if(!L.next()||!A(this.value(),L.value()))return!1;return!L.next()},u.prototype.where=function(_){return new h(this.copy(),_)},u.prototype.select=function(_){return new z(this.copy(),_)},u.prototype.selectMany=function(_){return this.select(function(A){return A=_(A),Array.isArray(A)?new J(A):A.asEnumerable()}).toArray().reduce(function(A,L){return new T(A,L)},t.empty())},u.prototype.skipWhile=function(_){return new b(this.copy(),_)},u.prototype.concat=function(_){for(var A=[],L=1;L<arguments.length;L++)A[L-1]=arguments[L];for(var D=function(je){return je instanceof Array?new J(je):je.asEnumerable()},N=new T(this.copy(),D(_).copy()),ee=0,Ne=A.length;ee<Ne;++ee)N=new T(N,D(A[ee]).copy());return N},u.prototype.defaultIfEmpty=function(_){return new Ot(this,_)},u.prototype.elementAt=function(_){if(_=this.elementAtOrDefault(_),_===void 0)throw new Error("Out of bounds");return _},u.prototype.elementAtOrDefault=function(_){if(_<0)throw new Error("Negative index is forbiden");this.reset();for(var A=-1;this.next()&&++A!==_;);if(A===_)return this.value()},u.prototype.except=function(_){return this.where(function(A){return!_.contains(A)})},u.prototype.first=function(_){if(_=_!==void 0?this.firstOrDefault(_):this.firstOrDefault(),_===void 0)throw new Error("Sequence contains no elements");return _},u.prototype.firstOrDefault=function(_){return _!==void 0?new h(this,_).firstOrDefault():(this.reset(),this.next()?this.value():void 0)},u.prototype.forEach=function(_){this.reset();for(var A=0;this.next();++A)_(this.value(),A)},u.prototype.groupBy=function(_,A){for(var L=this.toArray(),D=new o.Dictionary,N=0;N<L.length;++N){var ee=_(L[N]),Ne=A!==void 0?A(L[N]):L[N];D.containsKey(ee)||D.set(ee,new o.List),D.get(ee).push(Ne)}return D.asEnumerable()},u.prototype.last=function(_){if(_=_!==void 0?this.lastOrDefault(_):this.lastOrDefault(),_===void 0)throw new Error("Sequence contains no elements");return _},u.prototype.lastOrDefault=function(_){return _!==void 0?new h(this,_).lastOrDefault():((_=new Re(this)).reset(),_.next()?_.value():void 0)},u.prototype.single=function(_){if(_=_!==void 0?this.singleOrDefault(_):this.singleOrDefault(),_===void 0)throw new Error("Sequence contains no elements");return _},u.prototype.singleOrDefault=function(_){if(_!==void 0)return new h(this,_).singleOrDefault();if(this.reset(),this.next()){if(_=this.value(),this.next())throw new Error("Sequence contains more than 1 element");return _}},u.prototype.distinct=function(_){return new U(this.copy(),_)},u.prototype.aggregate=function(_,A){var L=A;if(this.reset(),A===void 0){if(!this.next())throw new Error("Sequence contains no elements");L=_(L,this.value())}for(;this.next();)L=_(L,this.value());return L},u.prototype.min=function(_){return _!==void 0?new z(this,_).min():this.aggregate(function(A,L){return A!==void 0&&A<L?A:L})},u.prototype.orderBy=function(_,A){return new xe(this.copy(),i.createComparer(_,!0,A))},u.prototype.orderByDescending=function(_){return new xe(this.copy(),i.createComparer(_,!1,void 0))},u.prototype.max=function(_){return _!==void 0?new z(this,_).max():this.aggregate(function(A,L){return A!==void 0&&L<A?A:L})},u.prototype.sum=function(_){return this.aggregate(function(A,L){return A+_(L)},0)},u.prototype.average=function(_){if(this.reset(),!this.next())throw new Error("Sequence contains no elements");for(var A=0,L=0;A+=_(this.value()),++L,this.next(););return A/L},u.prototype.skip=function(_){return new R(this.copy(),_,void 0)},u.prototype.take=function(_){return new R(this.copy(),void 0,_)},u.prototype.takeWhile=function(_){return new E(this.copy(),_)},u.prototype.union=function(_){return new U(this.concat(_))},u.prototype.zip=function(_,A){return _=_ instanceof Array?new J(_):_.asEnumerable(),new St(this,_,A)},u);function u(_){this.source=_}e.EnumerableBase=a,c(f,g=a),f.fromSource=function(_){return new(_ instanceof Array?J:f)(_)},f.empty=function(){return f.fromSource([])},f.range=function(_,A,L){if(L===void 0&&(L=!0),A<0)throw new Error("Count must be >= 0");var D=new Array(A);if(L)for(var N=0;N<A;D[N]=_+N++);else for(N=0;N<A;D[N]=_-N++);return new J(D)},f.repeat=function(_,A){if(A<0)throw new Error("Count must me >= 0");for(var L=new Array(A),D=0;D<A;++D)L[D]=_;return new J(L)},f.prototype.copy=function(){return new f(this.source.copy())},f.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=this.source.value()),this.currentValue.value},f.prototype.reset=function(){g.prototype.reset.call(this),this.currentValue.invalidate()},f.prototype.next=function(){return this.currentValue.invalidate(),g.prototype.next.call(this)};var g,t=f;function f(_){return _=g.call(this,_)||this,_.currentValue=new r.Cached,_}e.Enumerable=t,c(w,p=t),w.prototype.copy=function(){return new w(this.source.copy(),this._predicate)},w.prototype.next=function(){for(var _;(_=p.prototype.next.call(this))&&!this._predicate(this.value()););return _};var p,h=w;function w(_,A){return _=p.call(this,_)||this,_._predicate=A,_}e.ConditionalEnumerable=h,c(v,s=t),v.prototype.reset=function(){s.prototype.reset.call(this),this._shouldContinueChecking=!0},v.prototype.copy=function(){return new v(this.source.copy(),this._predicate)},v.prototype.next=function(){if(!this._shouldContinueChecking)return s.prototype.next.call(this);for(var _;(_=s.prototype.next.call(this))&&this._predicate(this.value()););return this._shouldContinueChecking=!1,_};var s,b=v;function v(_,A){return _=s.call(this,_)||this,_._predicate=A,_._shouldContinueChecking=!0,_}e.SkipWhileEnumerable=b,c(O,m=t),O.prototype.reset=function(){m.prototype.reset.call(this),this._shouldContinueTaking=!0},O.prototype.copy=function(){return new O(this.source.copy(),this._predicate)},O.prototype.next=function(){return!!(m.prototype.next.call(this)&&this._shouldContinueTaking&&this._predicate(this.value()))||(this._shouldContinueTaking=!1)};var m,E=O;function O(_,A){return _=m.call(this,_)||this,_._predicate=A,_._shouldContinueTaking=!0,_}e.TakeWhileEnumerable=E,c(C,M=t),C.prototype.copy=function(){return new C(this.source.copy(),this._otherSource.copy())},C.prototype.reset=function(){this.source.reset(),this._otherSource.reset(),this._isFirstSourceFinished=!1,this.currentValue.invalidate()},C.prototype.next=function(){this.currentValue.invalidate();var _=(this._isFirstSourceFinished?this._otherSource:this.source).next();return _||this._isFirstSourceFinished?_:(this._isFirstSourceFinished=!0,this.next())},C.prototype.value=function(){return this.currentValue.isValid()||(this.currentValue.value=(this._isFirstSourceFinished?this._otherSource:this.source).value()),this.currentValue.value};var M,T=C;function C(_,A){return _=M.call(this,_)||this,_._otherSource=A,_._isFirstSourceFinished=!1,_}e.ConcatEnumerable=T,c(k,F=t),k.prototype.copy=function(){return new k(this.source.copy(),this._keySelector)},k.prototype.reset=function(){F.prototype.reset.call(this),this._seen={primitive:{number:{},string:{},boolean:{}},complex:[]}},k.prototype.isUnique=function(A){var A=this._keySelector!==void 0?this._keySelector(A):A,L=typeof A;return L in this._seen.primitive?!this._seen.primitive[L].hasOwnProperty(A)&&(this._seen.primitive[L][A]=!0):this._seen.complex.indexOf(A)===-1&&-1<this._seen.complex.push(A)},k.prototype.next=function(){for(var _;(_=F.prototype.next.call(this))&&!this.isUnique(this.value()););return _};var F,U=k;function k(_,A){return _=F.call(this,_)||this,_._keySelector=A,_._seen={primitive:{number:{},string:{},boolean:{}},complex:[]},_}e.UniqueEnumerable=U,c(G,W=t),G.prototype.copy=function(){return new G(this.source.copy(),this._start,this._count)},G.prototype.reset=function(){W.prototype.reset.call(this),this._currentIndex=-1},G.prototype.isValidIndex=function(){var _=this._start!==void 0?this._start:0,A=this._count!==void 0?_+this._count:void 0;return this._currentIndex>=_&&(A===void 0||this._currentIndex<A)},G.prototype.performSkip=function(){for(var _=this._start!==void 0?this._start:0,A=!0;A&&this._currentIndex+1<_;)A=W.prototype.next.call(this),++this._currentIndex;return A},G.prototype.next=function(){return!(this._currentIndex<0&&!this.performSkip())&&(++this._currentIndex,W.prototype.next.call(this))&&this.isValidIndex()},G.prototype.value=function(){if(this.isValidIndex())return W.prototype.value.call(this);throw new Error("Out of bounds")};var W,R=G;function G(_,A,L){var D=this;if(A!==void 0&&A<0||L!==void 0&&L<0)throw new Error("Incorrect parameters");return(D=W.call(this,_)||this)._start=A,D._count=L,D._currentIndex=-1,D}e.RangeEnumerable=R,c(H,B=a),H.prototype.copy=function(){return new H(this.source.copy(),this._transform)},H.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._transform(this.source.value())),this._currentValue.value},H.prototype.reset=function(){B.prototype.reset.call(this),this._currentValue.invalidate()},H.prototype.next=function(){return this._currentValue.invalidate(),B.prototype.next.call(this)};var B,z=H;function H(_,A){return _=B.call(this,_)||this,_._transform=A,_._currentValue=new r.Cached,_}e.TransformEnumerable=z,c(j,bt=t),j.prototype.copy=function(){return new j(this.source.copy())},j.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},j.prototype.isValidIndex=function(){return 0<=this._currentIndex&&this._currentIndex<this._elements.value.length},j.prototype.all=function(_){return this.source.all(_)},j.prototype.any=function(_){return _!==void 0?this.source.any(_):this.source.any()},j.prototype.average=function(_){return this.source.average(_)},j.prototype.count=function(_){return _!==void 0?this.source.count(_):this.source.count()},j.prototype.max=function(_){return _!==void 0?this.source.max(_):this.source.max()},j.prototype.min=function(_){return _!==void 0?this.source.min(_):this.source.min()},j.prototype.reverse=function(){return this.source.copy()},j.prototype.sum=function(_){return this.source.sum(_)},j.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.source.toArray()),++this._currentIndex,this.isValidIndex()},j.prototype.value=function(){if(this._elements.isValid()&&this.isValidIndex())return this._elements.value[this._elements.value.length-1-this._currentIndex];throw new Error("Out of bounds")};var bt,Re=j;function j(_){return _=bt.call(this,_)||this,_._elements=new r.Cached,_._currentIndex=-1,_}e.ReverseEnumerable=Re,c(x,_t=a),x.prototype.isValidIndex=function(){return 0<=this._currentIndex&&this._currentIndex<this._elements.value.length},x.prototype.orderBy=function(_,A){return new x(this.source.copy(),i.createComparer(_,!0,A))},x.prototype.orderByDescending=function(_){return new x(this.source.copy(),i.createComparer(_,!1,void 0))},x.prototype.thenBy=function(_,A){return new x(this.source.copy(),i.combineComparers(this._comparer,i.createComparer(_,!0,A)))},x.prototype.thenByDescending=function(_){return new x(this.source.copy(),i.combineComparers(this._comparer,i.createComparer(_,!1,void 0)))},x.prototype.reset=function(){this._elements.invalidate(),this._currentIndex=-1},x.prototype.copy=function(){return new x(this.source.copy(),this._comparer)},x.prototype.value=function(){if(this._elements.isValid()&&this.isValidIndex())return this._elements.value[this._currentIndex];throw new Error("Out of bounds")},x.prototype.next=function(){return this._elements.isValid()||(this._elements.value=this.toArray()),++this._currentIndex,this.isValidIndex()},x.prototype.toArray=function(){return this.source.toArray().sort(this._comparer)};var _t,xe=x;function x(_,A){return _=_t.call(this,_)||this,_._comparer=A,_._elements=new r.Cached,_._currentIndex=-1,_}e.OrderedEnumerable=xe,c(V,Et=t),V.prototype.toArray=function(){return this.list.toArray()},V.prototype.aggregate=function(_,A){return A!==void 0?this.list.aggregate(_,A):this.list.aggregate(_)},V.prototype.any=function(_){return _!==void 0?this.list.any(_):this.list.any()},V.prototype.all=function(_){return this.list.all(_)},V.prototype.average=function(_){return this.list.average(_)},V.prototype.count=function(_){return _!==void 0?this.list.count(_):this.list.count()},V.prototype.copy=function(){return new V(this.list.asArray())},V.prototype.elementAtOrDefault=function(_){return this.list.elementAtOrDefault(_)},V.prototype.firstOrDefault=function(_){return _!==void 0?this.list.firstOrDefault(_):this.list.firstOrDefault()},V.prototype.lastOrDefault=function(_){return _!==void 0?this.list.lastOrDefault(_):this.list.lastOrDefault()};var Et,J=V;function V(_){var A=Et.call(this,new d.ArrayIterator(_))||this;return A.list=new o.List(_),A}e.ArrayEnumerable=J,c(Z,Ee=a),Z.prototype.copy=function(){return new Z(this.source.copy(),this._defaultValue)},Z.prototype.value=function(){return this._mustUseDefaultValue?this._defaultValue:this.source.value()},Z.prototype.next=function(){var _=Ee.prototype.next.call(this);return this._mustUseDefaultValue=this._mustUseDefaultValue===void 0&&!_,this._mustUseDefaultValue||_},Z.prototype.reset=function(){Ee.prototype.reset.call(this),this._mustUseDefaultValue=void 0};var Ee,Ot=Z;function Z(_,A){return _=Ee.call(this,_)||this,_._mustUseDefaultValue=void 0,_._defaultValue=A,_}e.DefaultIfEmptyEnumerable=Ot,c(X,Oe=a),X.prototype.copy=function(){return new X(this.source.copy(),this._otherSource.copy(),this._selector)},X.prototype.value=function(){return this._currentValue.isValid()||(this._currentValue.value=this._selector(this.source.value(),this._otherSource.value())),this._currentValue.value},X.prototype.reset=function(){Oe.prototype.reset.call(this),this._otherSource.reset(),this._isOneOfTheSourcesFinished=!1,this._currentValue.invalidate()},X.prototype.next=function(){return this._currentValue.invalidate(),this._isOneOfTheSourcesFinished||(this._isOneOfTheSourcesFinished=!Oe.prototype.next.call(this)||!this._otherSource.next()),!this._isOneOfTheSourcesFinished};var Oe,St=X;function X(_,A,L){return _=Oe.call(this,_)||this,_._otherSource=A,_._isOneOfTheSourcesFinished=!1,_._currentValue=new r.Cached,_._selector=L,_}e.ZippedEnumerable=St},{"./Collections":20,"./Comparers":21,"./Iterators":23,"./Utils":25}],23:[function(n,y,e){function l(c){this.source=c,this.reset()}Object.defineProperty(e,"__esModule",{value:!0}),l.prototype.copy=function(){return new l(this.source)},l.prototype.reset=function(){this._index=-1},l.prototype.isValidIndex=function(){return 0<=this._index&&this._index<this.source.length},l.prototype.next=function(){return++this._index,this.isValidIndex()},l.prototype.value=function(){if(this.isValidIndex())return this.source[this._index];throw new Error("Out of bounds")},e.ArrayIterator=l},{}],24:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0});var l=n("./Enumerables"),l=(e.Enumerable=l.Enumerable,n("./Iterators")),l=(e.ArrayIterator=l.ArrayIterator,n("./Collections")),l=(e.List=l.List,e.Dictionary=l.Dictionary,e.Stack=l.Stack,n("./Comparers"));e.strictEqualityComparer=l.strictEqualityComparer},{"./Collections":20,"./Comparers":21,"./Enumerables":22,"./Iterators":23}],25:[function(n,y,e){function l(){this._isValid=!1}Object.defineProperty(e,"__esModule",{value:!0}),l.prototype.invalidate=function(){this._isValid=!1},l.prototype.isValid=function(){return this._isValid},Object.defineProperty(l.prototype,"value",{get:function(){if(this._isValid)return this._value;throw new Error("Trying to get value of invalid cache")},set:function(c){this._value=c,this._isValid=!0},enumerable:!0,configurable:!0}),e.Cached=l},{}],26:[function(n,y,e){var l=this&&this.__spreadArray||function(t,f,p){if(p||arguments.length===2)for(var h,w=0,s=f.length;w<s;w++)!h&&w in f||((h=h||Array.prototype.slice.call(f,0,w))[w]=f[w]);return t.concat(h||Array.prototype.slice.call(f))},c=(Object.defineProperty(e,"__esModule",{value:!0}),e.bf=e.credits=e.getPageAdUnit=e.getCachedRegistries=e.getSlotDetails=e.setModuleLoaded=e.isModuleLoaded=e.setModuleReady=e.isModuleReady=e.moduleStatuses=e.getRocketeerSlots=e.getRegisteredModules=e.getQueuedSlots=e.getPageSlots=e.getExcludedSlotIds=e.getDispatchedSlots=e.getBuiltSlots=e.version=e.registerModule=e.__VERSION__=e.registry=e.setOptions=e.addEvent=e.dispatchQueue=e.enableLazyLoad=e.setBulkTargeting=e.clearSlots=e.removeSlotLevelTarget=e.addSlotLevelTarget=e.removePageLevelTarget=e.addPageLevelTarget=e.queueRegistry=e.refresh=e.destroySlots=e.configure=void 0,n("./presets.js"),n("@turnercode/digital-ads-utilities/dist")),d=n("./processors"),i=n("./system"),o=n("linq-collections"),r=n("./system/MissionControl"),a=n("./version.json"),u=(g.prototype.fireAdFuelCreated=function(){var t=this,f=1500,p=setInterval(function(){if(document.readyState==="interactive"||document.readyState==="complete"){try{t.logger.log("Dispatching AdFuelCreated..."),document.dispatchEvent(new CustomEvent("AdFuelCreated",{detail:{AdFuel:window.AdFuel}}))}catch(h){t.logger.error("Error dispatching AdFuelCreated",h)}clearInterval(p)}else f<1&&clearInterval(p);f--},1)},g.createInstance=function(){this._instance=new g,window.AdFuel=this._instance,(t=this._instance.logger)!=null&&t.warn("New AdFuel instance created.",this._instance.adFuelOptions);var t=Object.assign(i.BaseAdFuelOptions,(t=JSON.parse(JSON.stringify(this._instance.adFuelOptions)))!=null?t:{});this._instance.adFuelOptions=t,this.processLoadedModules()},g.processLoadedModules=function(){if(window.AdFuelModules){for(var t=0,f=window.AdFuelModules;t<f.length;t++){var p=f[t];this._instance.perf.addMark("Registering Module - ".concat(p.MODULE_NAME)),this._instance.registerModule(p)}window.AdFuelModules=void 0}},Object.defineProperty(g,"instance",{get:function(){var t,f=this;return(t=window.WM)!=null&&t.UserConsent&&window.WM.UserConsent.isReady()?window.WM.UserConsent.getRegion()==="us"||window.WM.UserConsent.getRegion()==="ccpa"||window.WM.UserConsent.getRegion()==="other-optout"?this._instance||this.createInstance():window.WM.UserConsent.getRegion()==="gdpr"||window.WM.UserConsent.getRegion()==="other-optin"?this._instance||(window.WM.UserConsent.isOneTrustLoaded()?window.WM.UserConsent.getUserConsentAdvertisingState()?this.createInstance():console.warn("Unable to create new instance of AdFuel due to consent restrictions."):(document.addEventListener("oneTrustLoaded",function(){var p;(p=(p=window.WM)==null?void 0:p.UserConsent)!=null&&p.getUserConsentAdvertisingState()?f.createInstance():console.warn("Unable to create new instance of AdFuel due to consent restrictions.")}),document.addEventListener("oneTrustFailed",function(){console.warn("Unable to create new instance of AdFuel due to OneTrust load failure.")}),document.addEventListener("oneTrustBlocked",function(){console.warn("Unable to create new instance of AdFuel due to OneTrust load blocking.")}))):window.WM.UserConsent.getRegion()==="global"?this._instance||this.createInstance():console.warn("Unable to create new instance of AdFuel due to unknown region."):(t=window.WM)!=null&&t.UserConsent||this._instance||(console.warn("No User Consent.  Assuming consent is granted.  User Location switching will be unavailble."),this.createInstance()),this._instance},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"missionControl",{get:function(){return this._missionControl},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"moduleManager",{get:function(){return this._moduleManager},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"adFuelOptions",{get:function(){var t;return(t=(t=window.AdFuelOptions)==null?void 0:t.ADFUEL)!=null?t:i.BaseAdFuelOptions},set:function(t){window.AdFuelOptions?window.AdFuelOptions.ADFUEL=t:window.AdFuelOptions={ADFUEL:t,USER_CONSENT:{ENABLED:!0}}},enumerable:!1,configurable:!0}),g.prototype.configure=function(t){var f=this;return typeof t=="string"?fetch(t).then(function(p){f.ingestOptions(p.json())}):this.ingestOptions(t),this},g.prototype.ingestOptions=function(t){if("ADFUEL"in t)for(var f in window.AdFuelOptions||(window.AdFuelOptions={ADFUEL:{},USER_CONSENT:{ENABLED:!0}}),t)window.AdFuelOptions&&f in window.AdFuelOptions?Object.assign(window.AdFuelOptions[f],t[f]):window.AdFuelOptions[f]=t[f];else this.adFuelOptions=Object.assign(this.adFuelOptions,t)},Object.defineProperty(g.prototype,"registryOptions",{get:function(){return this._registryOptions},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"logger",{get:function(){return this._logger},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"perf",{get:function(){return this._perf},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"ver",{get:function(){return this._version.toString()},enumerable:!1,configurable:!0}),Object.defineProperty(g.prototype,"fetchedRegistries",{get:function(){return this._registryLoader.fetchedRegistries},enumerable:!1,configurable:!0}),g.prototype.lastProcessed=function(){var t;return 0<this.processedData.count()?(t=this.processedData.max(function(f){return f.value.timestamp}),this.processedData.first(function(f){return f.value.timestamp===t}).value):new i.GptProcessData},g.prototype.undispatched=function(){return 0<this.processedData.count()?this.processedData.select(function(t){return t.value}).where(function(t){return!t.dispatched}).where(function(t){var f=!1;return t.wrappedSlots.forEach(function(p){f=f||!!p.gSlot}),f}).toArray():[]},g.prototype.isModuleReady=function(t){return(t=this.registeredModules.get(t).isReady)!=null&&t},g.prototype.setModuleReady=function(t){this.logger.info("Module ".concat(t," is reporting ready.")),this.perf.addMark("Module ".concat(t," is ready.")),this.registeredModules.containsKey(t)?this.registeredModules.get(t).isReady=!0:this.registeredModules.setOrUpdate(t,{moduleName:t,isLoaded:!0,isReady:!0,unWrappedModule:void 0}),this._moduleManager.areAllModulesReady&&this._moduleManager.areAllExpectedModulesLoaded&&this._missionControl.setReady({readyId:"modules"})},g.prototype.isModuleLoaded=function(t){return(t=this.registeredModules.get(t).isLoaded)!=null&&t},g.prototype.setModuleLoaded=function(t){this.logger.log("Module ".concat(t," is reporting loaded.")),this.perf.addMark("Module ".concat(t," is loaded.")),this.registeredModules.containsKey(t)?this.registeredModules.get(t).isLoaded=!0:this.registeredModules.setOrUpdate(t,{moduleName:t,isLoaded:!1,isReady:!1,unWrappedModule:void 0})},g.prototype.queueRegistry=function(t,h){h===void 0&&(h={dispatch:this.adFuelOptions.AUTO_DISPATCH||!0}),(p=this.logger)!=null&&p.info("[queueRegistry] Queueing registry...",t,h),this.perf.addMark("Queueing Registry START"),this._initialRequestComplete=0<this.processedData.count(),h.slots&&(h.slots=Array.isArray(h.slots)?h.slots:[h.slots]),h.exclude&&(h.exclude=Array.isArray(h.exclude)?h.exclude:[h.exclude]),this._registryOptions=h,p=Array.isArray(t)?{registry:t}:t;var p,h=Object.assign({},this.adFuelOptions,h);return p.registry?this._registryLoader.loadRegistryFromJson(p.registry,h):this._registryLoader.loadRegistryFromUrl(t,h),this},g.prototype.flushCmdQueue=function(){for(this.logger.log("Flushing command",this._cmdQueue.length);0<this._cmdQueue.length;){var t=this._cmdQueue.shift();t&&(t(),this.logger.log("Command flushed."))}},g.prototype.dispatchQueue=function(t){var f=this;return t===void 0&&(t={}),this.undispatched().forEach(function(p){f.logger.log("[dispatchQueue] Dispatching Data: ",p),f._requestProcessor.dispatch(p)}),this},g.prototype.destroySlots=function(t){var f,p,h=this,w=(t?Array.isArray(t)||(t=[t]):t=[],this.logger.log("[ADFUEL] START ---------- destroySlots::slotsToDestroy:",t),new Set),s=[],b=[];if(0<t.length){if(this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::Searching registries for matching candidates..."),this.processedData.getValues().forEach(function(v){s=Array.from(new Set(s.concat(v.wrappedSlots.where(function(m){return t!==void 0&&(t==null?void 0:t.includes(m.slotId))&&m.isBuilt}).toArray())))}),0<s.length)try{this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - RegistrySlotWrappers...",s),b=((p=(f=window.googletag)==null?void 0:f.pubads().getSlots())==null?void 0:p.map(function(v){if(h.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - Googletag Slot:",v.getSlotElementId()),t!=null&&t.includes(v.getSlotElementId()))return v}).filter(function(v){return v!=null}))||[],this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - GoogleTag Candidates",b),b.forEach(function(v){v&&w.add(v)})}catch(v){this.logger.error("There was an error in DestroySlots.",v)}else this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::INTERIM - registrySlotWrappers array was empty.");this.logger.log("[ADFUEL] ---------- destroySlots[SELECTIVE]::FINAL CANDIDATES:",w)}else this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::Getting all built slots..."),this.processedData.getValues().forEach(function(v){s=s.concat(v.wrappedSlots.where(function(m){return m.isBuilt}).toArray())}),this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::Registry Slot Wrappers:",s),(typeof((f=window.googletag)==null?void 0:f.pubads)=="function"?(p=window.googletag)==null?void 0:p.pubads().getSlots():[]).forEach(function(v){w.add(v)}),this.logger.log("[ADFUEL] ---------- destroySlots[ALL]::CANDIDATES:",w);return 0<t.length&&s.length!==t.length?this.logger.warn("Slot numbers do not match. Not destroying slots: ",s,t):(this.logger.log("[ADFUEL] ---------- destroySlots::Matching Registry Slot Wrappers: ",s),s.forEach(function(v){h.logger.log("[ADFUEL] ---------- destroySlots::Clearing GSlot from Wrapper: ",v),h.perf.addMark("Destroying Slot ".concat(v.slotId)),v.gSlot=void 0}),this.logger.log("[ADFUEL] ---------- destroySlots::Updated Registry Slot Wrappers: ",{registrySlotWrappers:s}),this.logger.log("[ADFUEL] ---------- destroySlots::handoffToSlotProcessor:",w),this._slotProcessor.destroySlots(Array.from(w)),Array.from(document.getElementsByClassName("adfuel-rendered")).forEach(function(v){(t!=null&&t.includes(v.id)||(t==null?void 0:t.length)===0)&&(h.logger.log("[ADFUEL] ---------- DestroySlots::Removing Class from Element:",v),v.classList.remove("adfuel-rendered"))})),this},g.prototype.addPageLevelTarget=function(t,f){return f=Array.isArray(f)?f:[f],this._targetProcessor.addPageLevelTargets(t,f),this.logger.log("Adding page level target ".concat(t)),this.perf.addMark("Adding Page-Level Target - ".concat(t)),this},g.prototype.removePageLevelTarget=function(t,f){var p=[];return f&&(p=Array.isArray(f)?f:[f]),this._targetProcessor.removePageLevelTargets(t,p),this.perf.addMark("Removing Page-Level Target - ".concat(t)),this},g.prototype.addSlotLevelTarget=function(t,f,p){var h=Array.isArray(p)?p:[p];return this._targetProcessor.addSlotLevelTargets(t,f,h),this.logger.log("Adding slot-level target slotId: ".concat(t,", targetKey: ").concat(f),p),this.perf.addMark("Adding Slot-Level Target - ".concat(f)),this},g.prototype.removeSlotLevelTarget=function(t,f,p){var h=[];return p&&(h=Array.isArray(p)?p:[p]),this._targetProcessor.removeSlotLevelTargets(t,f,h),this.perf.addMark("Removing Slot-Level Target - ".concat(f)),this},g.prototype.registerModule=function(t){return this.logger.info("Registering module: ".concat(t.MODULE_NAME,".")),this.perf.addMark("Registering Module - ".concat(t.MODULE_NAME)),this._moduleManager.registerModule(t),this},g.prototype.moduleStatuses=function(){var t=[];return this.registeredModules.forEach(function(f){t.push({name:f.value.moduleName,isReady:f.value.isReady,isLoaded:f.value.isLoaded})}),t},g.prototype.getSlotsForRefresh=function(t){var f,p=[];if(0<(t=t===void 0?[]:t).length)for(var h=this,w=0,s=t;w<s.length;w++)(v=>{var m=(f=h.processedData.firstOrDefault(function(E){return E.value.wrappedSlots.any(function(O){return v.includes(O.slotId)&&O.isBuilt})}))==null?void 0:f.value.wrappedSlots.firstOrDefault(function(E){return v.includes(E.slotId)&&E.isBuilt});m&&p.push(m)})(s[w]);else{var b=[];this.processedData.where(function(v){return v.value.wrappedSlots.any(function(m){return m.isBuilt})}).forEach(function(v){b.concat(v.value.wrappedSlots.where(function(m){return m.isBuilt}).toArray())}),b&&p.concat(b)}return p},g.prototype.refresh=function(t,f){var p=this,h=(f===void 0&&(f=0),this.moduleManager.callPreRefresh(this.lastProcessed().wrappedSlots),new o.List),h=t&&!["ALL","all","*","All"].includes(t)?(Array.isArray(t)||(t=[t]),new o.List(this.getSlotsForRefresh(t))):new o.List(this.lastProcessed().wrappedSlots.toArray());return this.lastProcessed().wrappedSlots?(t=function(){var w;0<h.count()&&0<f?(w=setInterval(function(){p._requestProcessor.refresh(h),p.moduleManager.callPostRefresh(h)},1e3*f),h.forEach(function(s){p._refreshers.containsKey(s.slotId)&&clearInterval(p._refreshers.get(s.slotId)),p._refreshers.setOrUpdate(s.slotId,w)})):0<h.count()&&f===0?p._requestProcessor.refresh(h):p.logger.warn("There is nothing to refresh.",h)},this._initialRequestComplete?t():this._waitingFunctions.push(t)):(t=this.logger)!=null&&t.warn("There are no slots defined. Has the registry been loaded?"),this},g.prototype.waitFor=function(t){return this.missionControl.register({readyId:t}),this},g.prototype.makeReady=function(t){return this.missionControl.setReady({readyId:t}),this},g.prototype.version=function(){return this._version},g.prototype.getBuiltSlots=function(){var t=[];return this.processedData.forEach(function(f){f.value.wrappedSlots.any(function(p){return p.isBuilt})&&t.push({timeStamp:f.value.timestamp,slots:f.value.wrappedSlots.where(function(p){return p.isBuilt}).toArray()})}),t},g.prototype.getDispatchedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(t){return t.hasBeenDisplayed}).toArray()},g.prototype.getExcludedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(t){return t.isExcluded}).toArray()},g.prototype.getPageSlots=function(){return this.lastProcessed().wrappedSlots.where(function(t){return t.isBuilt}).select(function(t){return t.gSlot}).toArray()},g.prototype.getQueuedSlots=function(){return this.lastProcessed().wrappedSlots.where(function(t){return!t.isBuilt}).toArray()},g.prototype.getRegisteredModules=function(){return this.registeredModules.select(function(t){return t.value.unWrappedModule}).toArray()},g.prototype.getRocketeerSlots=function(){return this._registry.slots},g.prototype.getPageAdUnit=function(){return this._pageAdUnit},Object.defineProperty(g.prototype,"pageAdUnit",{get:function(){return this._pageAdUnit},set:function(t){this._pageAdUnit=t},enumerable:!1,configurable:!0}),g.prototype.clearSlots=function(t){return this._slotProcessor.clearSlots(t),this},g.prototype.setBulkTargeting=function(t){return this._targetProcessor.setBulkTargeting(t),this},g.prototype.enableLazyLoad=function(t){return t.fetch=t.fetch||500,t.render=t.render||200,t.scaling=t.scaling||2,this.perf.addMark("Enabling Lazy Load"),this.logger.log("#################### Enabling Lazy Load"),this._googleApi.enableLazyLoad(t),this},g.prototype.getSlotDetails=function(t){var f,p=this.lastProcessed().wrappedSlots.firstOrDefault(function(h){return h.slotId===t});if(p)return{adUnitPath:(f=(f=p.gSlot)==null?void 0:f.getAdUnitPath())!=null?f:"UNKNOWN",slotTargeting:p.targeting,programmatic:p.programmatic,response:(f=p.gSlot)==null?void 0:f.getResponseInformation()};this.logger.log("Couldn't find details for slot: ".concat(t))},g.prototype.getCachedRegistries=function(){var t=new Map;return this.processedData.forEach(function(f){t.set(f.value.url,l([f.value.registry],f.value.registry.slots,!0))}),t},g);function g(){var t=this;this._version=new c.Version(a.major,a.minor,a.revision,a.family),this._googleApi=new i.GoogleApi(this),this._missionControl=new r.MissionControl(this,this._googleApi),this._requestProcessor=new d.RequestProcessor(this,void 0,this._googleApi),this._moduleManager=new i.ModuleManager(this),this._targetProcessor=new d.TargetProcessor(this,this._googleApi,this._requestProcessor),this._slotProcessor=new d.SlotProcessor(this,this._targetProcessor,this._googleApi),this._queueDispatched=!1,this._pageAdUnit="",this._initialRequestComplete=!1,this._waitingFunctions=[],this._refreshers=new o.Dictionary,this.processedData=new o.Dictionary,this._cmdQueue=[],this.registeredModules=new o.Dictionary,this._logger=new c.Logger("AdFuel TS",this._version.toString(),"adfuel","color: #4f86f7; padding: 2px"),this._perf=new c.Performance("ADFUEL TS"),this._gptScriptLoader=new i.GptScriptLoader(this.missionControl,this._logger),this._registryLoader=new i.RegistryLoader(this),this._overlayLoader=new i.OverlayLoader(this),this._gptScriptLoader.loadScript().then(function(){t._googleApi.flushCmdQueue()}),this._missionControl.firstProcessor=this._slotProcessor,this._perf.addMark("AdFuel Load END"),this._perf.addMeasure("AdFuel Load"),this.fireAdFuelCreated(),this._overlayLoader.startConsoleTool(),document.addEventListener("AdFuelRequestComplete",function(){t._initialRequestComplete=!0,t._waitingFunctions.forEach(function(f){f()}),t._waitingFunctions=[]}),window.addEventListener("load",function(){var f,p;t.logger.log("[window.load] Load fired:  AUTO_DISPATCH: ".concat(t.adFuelOptions.AUTO_DISPATCH," queueDispatched: ").concat(t._queueDispatched)),t.adFuelOptions.AUTO_DISPATCH||t._queueDispatched?t.adFuelOptions.AUTO_DISPATCH&&(t.dispatchQueue(),f=1,p=setInterval(function(){0<t.undispatched().length&&(t.logger.warn("[window.load] AdFuel is configured to automatically dispatch the queue on window.load but ".concat(100*f," milliseconds later and there are slots that still are not dispatched.")),t.logger.warn("[window.load] Undispatched: ",t.undispatched()),t.dispatchQueue()),5e3<100*f&&clearInterval(p),f++},100)):t.logger.error("[window.load] AdFuel is not configured to automatically dispatch the queue and the user's code never called AdFuel.dispatchQueue().")}),this.perf.addMark("AdFuel Created")}window.AdFuel=u.instance,e.configure=function(t){return u.instance.configure(t)},e.destroySlots=function(t){return u.instance.destroySlots(t=t===void 0?[]:t)},e.refresh=function(t,f){return u.instance.refresh(t,f)},e.queueRegistry=function(t,f){return u.instance.queueRegistry(t,f)},e.addPageLevelTarget=function(t,f){return u.instance.addPageLevelTarget(t,f)},e.removePageLevelTarget=function(t,f){return u.instance.removePageLevelTarget(t,f)},e.addSlotLevelTarget=function(t,f,p){return u.instance.addSlotLevelTarget(t,f,p)},e.removeSlotLevelTarget=function(t,f,p){return u.instance.removeSlotLevelTarget(t,f,p)},e.clearSlots=function(t){return u.instance.clearSlots(t=t===void 0?[]:t)},e.setBulkTargeting=function(t){return u.instance.setBulkTargeting(t)},e.enableLazyLoad=function(t){return u.instance.enableLazyLoad(t)},e.dispatchQueue=function(t){return u.instance.dispatchQueue(t)},e.addEvent=function(t,f,p){var h="background: red;color:white;",w="background: inherit;color:inherit;";console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",h,w),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",h,w),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",h,w),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",h,w),console.error("%c ***              DO NOT USE AdFuel.addEvent()               *** %c",h,w),console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",h,w),console.error("%c *** use addEventListener() instead.                         *** %c",h,w),console.error("%c *** No event was added                                      *** %c",h,w)},e.setOptions=function(){var t="background: red;color:white;",f="background: inherit;color:inherit;";console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",t,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",t,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",t,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",t,f),console.error("%c ***             DO NOT USE AdFuel.setOptions()              *** %c",t,f),console.error("%c *** DEPRECATED FUNCTION WILL BE REMOVED IN THE NEXT BUILD.  *** %c",t,f),console.error("%c *** No options were set                                     *** %c",t,f)},e.registry={push:function(t,f){console.warn("%c *** This functionality will be removed in future releases. Instead of 'registry.push()', please use AdFuel.queueRegistry() *** %c","background: orange;color:white;","background: inherit;color:inherit;"),u.instance.queueRegistry(t,f)}},e.__VERSION__=function(){return u.instance.version().toString()},e.registerModule=function(t){return u.instance.registerModule(t)},e.version=function(){return u.instance.version()},e.getBuiltSlots=function(){return u.instance.getBuiltSlots()},e.getDispatchedSlots=function(){return u.instance.getDispatchedSlots()},e.getExcludedSlotIds=function(){return u.instance.getExcludedSlots()},e.getPageSlots=function(){return u.instance.getPageSlots()},e.getQueuedSlots=function(){return u.instance.getQueuedSlots()},e.getRegisteredModules=function(){return u.instance.getRegisteredModules()},e.getRocketeerSlots=function(){return u.instance.getRocketeerSlots()},e.moduleStatuses=function(){return u.instance.moduleStatuses()},e.isModuleReady=function(t){return u.instance.isModuleReady(t)},e.setModuleReady=function(t){u.instance.setModuleReady(t)},e.isModuleLoaded=function(t){return u.instance.isModuleLoaded(t)},e.setModuleLoaded=function(t){u.instance.setModuleLoaded(t)},e.getSlotDetails=function(t){return u.instance.getSlotDetails(t)},e.getCachedRegistries=function(){return u.instance.getCachedRegistries()},e.getPageAdUnit=function(){return u.instance.getPageAdUnit()},e.credits=function(){var t="\n\n          \u2591\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2557\n          \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2557\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2588\u2588\u2554\u2550\u2550\u255D\u2588\u2588\u2554\u2550\u2550\u2550\u2550\u255D\n          \u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2551\u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2557\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u255A\u2588\u2588\u2588\u2588\u2588\u2557\u2591\n          \u2588\u2588\u2554\u2550\u2550\u2588\u2588\u2551\u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u255D\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2554\u2550\u2550\u255D\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2588\u2588\u2557\n          \u2588\u2588\u2551\u2591\u2591\u2588\u2588\u2551\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2551\u2591\u2591\u2591\u2591\u2591\u255A\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2588\u2588\u2588\u2588\u2588\u2557\u2588\u2588\u2557\u2591\u2591\u2591\u2588\u2588\u2551\u2591\u2591\u2591\u2588\u2588\u2588\u2588\u2588\u2588\u2554\u255D\n          \u255A\u2550\u255D\u2591\u2591\u255A\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591\u255A\u2550\u255D\u2591\u2591\u2591\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u2550\u2550\u2550\u2550\u2550\u255D\u255A\u2550\u255D\u2591\u2591\u2591\u255A\u2550\u255D\u2591\u2591\u2591\u255A\u2550\u2550\u2550\u2550\u2550\u255D\u2591\n          =====================================================================\n          Version: ".concat(u.instance.version().toString(),"\n          Developed by: \n            Joe Lazarski\n            Steve Trofemuk\n\n          Serve ads or die trying!\n  ");console.log(t)},e.bf=function(){console.info("\n  ++++++++++[>+>+++>+++++++>++++++++++<<<<-]>>>>--.+++++++++++++++++++++++.<<++.>+++++++++++++.>-----.---------------.\n  +++++++++++++++++.-----------------.<<.>+.>+++++++++++++.---.---------.-.++++++++.++++++++.----------.>++++++++++.\n  ")}},{"./presets.js":27,"./processors":31,"./system":46,"./system/MissionControl":37,"./version.json":47,"@turnercode/digital-ads-utilities/dist":12,"linq-collections":24}],27:[function(n,y,e){window.googletag=window.googletag||{},window.googletag.cmd=window.googletag.cmd||[]},{}],28:[function(n,y,e){var l=this&&this.__awaiter||function(o,r,a,u){return new(a=a||Promise)(function(g,t){function f(w){try{h(u.next(w))}catch(s){t(s)}}function p(w){try{h(u.throw(w))}catch(s){t(s)}}function h(w){var s;w.done?g(w.value):((s=w.value)instanceof a?s:new a(function(b){b(s)})).then(f,p)}h((u=u.apply(o,r||[])).next())})},c=this&&this.__generator||function(o,r){var a,u,g,t={label:0,sent:function(){if(1&g[0])throw g[1];return g[1]},trys:[],ops:[]},f={next:p(0),throw:p(1),return:p(2)};return typeof Symbol=="function"&&(f[Symbol.iterator]=function(){return this}),f;function p(h){return function(w){var s=[h,w];if(a)throw new TypeError("Generator is already executing.");for(;t=f&&s[f=0]?0:t;)try{if(a=1,u&&(g=2&s[0]?u.return:s[0]?u.throw||((g=u.return)&&g.call(u),0):u.next)&&!(g=g.call(u,s[1])).done)return g;switch(u=0,(s=g?[2&s[0],g.value]:s)[0]){case 0:case 1:g=s;break;case 4:return t.label++,{value:s[1],done:!1};case 5:t.label++,u=s[1],s=[0];continue;case 7:s=t.ops.pop(),t.trys.pop();continue;default:if(!(g=0<(g=t.trys).length&&g[g.length-1])&&(s[0]===6||s[0]===2)){t=0;continue}if(s[0]===3&&(!g||s[1]>g[0]&&s[1]<g[3]))t.label=s[1];else if(s[0]===6&&t.label<g[1])t.label=g[1],g=s;else{if(!(g&&t.label<g[2])){g[2]&&t.ops.pop(),t.trys.pop();continue}t.label=g[2],t.ops.push(s)}}s=r.call(o,t)}catch(b){s=[6,b],u=0}finally{a=g=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}},d=(Object.defineProperty(e,"__esModule",{value:!0}),e.RequestProcessor=void 0,n("@turnercode/digital-ads-utilities"));function i(o,r,a){this.adFuel=o,this.nextProcessor=r,this.googleApi=a}i.prototype.process=function(o){var r=this;return new Promise(function(a,u){return l(r,void 0,void 0,function(){var g,t=this;return c(this,function(f){switch(f.label){case 0:return f.trys.push([0,2,,3]),(g=this.adFuel.logger)!=null&&g.log(" ### START Request Processor ====",o.wrappedSlots.select(function(p){return p.toLogging()}).toArray(),o.options),(g=this.adFuel.perf)!=null&&g.addMark("Processing Request START"),[4,(g=this.googleApi)==null?void 0:g.configurePubAds().then(function(){return l(t,void 0,void 0,function(){var p,h;return c(this,function(w){switch(w.label){case 0:return(o.options.dispatch!==void 0?o.options.dispatch:o.options.AUTO_DISPATCH)&&((p=this.adFuel.logger)!=null&&p.info("RequestProcessor.process is calling Dispatch",o),o.wrappedSlots.where(function(s){return!s.hasBeenDisplayed&&s.isBuilt&&!s.isExcluded}).toList(),this.dispatch(o)),(p=this.adFuel.perf)!=null&&p.addMark("Processing Request END"),(h=this.adFuel.perf)!=null&&h.addMeasure("Processing Request"),(h=this.adFuel.logger)!=null&&h.log("========== [RequestProcessor/process] CALLING POST DISPATCH =========="),[4,this.adFuel.moduleManager.callPostDispatch(o.wrappedSlots)];case 1:return w.sent(),(h=this.adFuel.logger)!=null&&h.log(" ### STOP Request Processor ====",o.wrappedSlots.select(function(s){return s.toLogging()}).toArray(),o.options),this.nextProcessor?a(this.nextProcessor.process(o)):a(o),[2]}})})})];case 1:return f.sent(),[3,3];case 2:return g=f.sent(),u(g),[3,3];case 3:return[2]}})})})},i.prototype.dispatch=function(o){var r,a;return l(this,void 0,void 0,function(){var u,g,t=this;return c(this,function(f){return 0<(u=o.wrappedSlots.where(function(p){return!p.hasBeenDisplayed&&p.isBuilt&&!p.isExcluded}).toList()).count()?(o.dispatched=!0,(r=this.adFuel.logger)!=null&&r.log("[RequestProcessor - dispatch] Setting dispatched to true",o),this.adFuel.processedData.setOrUpdate(o.timestamp,o),(r=this.adFuel.logger)!=null&&r.log("========== [RequestProcessor/dispatch] CALLING PRE DISPATCH =========="),this.adFuel.moduleManager.callPreDispatch(u).then(function(){var p;try{document.dispatchEvent(new CustomEvent("PreDispatchComplete",{detail:{slots:u.count()}}))}catch(h){(p=t.adFuel.logger)!=null&&p.error("Error dispatching custom event: PreDispatchComplete",{error:h})}t.buildGPTObject(o),u.forEach(function(h){var w;(w=t.adFuel.perf)!=null&&w.addMark("[".concat(h.slotId,"] Slot Displayed With Googletag")),googletag.display(h.gSlot),h.hasBeenDisplayed=!0}),(p=t.googleApi)!=null&&p.refreshSlots(u,{dispatch:!0}),(p=t.adFuel.logger)!=null&&p.log("========== [RequestProcessor/dispatch] CALLING POST DISPATCH =========="),t.adFuel.moduleManager.callPostDispatch(u),document.dispatchEvent(new CustomEvent("AdFuelRequestComplete",{detail:{slots:u.select(function(h){return h.unWrappedSlot}).toArray(),options:t.adFuel.registryOptions}}))})):(r=this.adFuel.logger)!=null&&r.log("No slots to dispatch."),g={slotsBuilt:o.wrappedSlots.where(function(p){return p.hasBeenDisplayed&&!p.isExcluded}).toArray(),registry:o.registry,optionsUsed:o.options},window.AdFuelHistory||((a=this.adFuel.logger)!=null&&a.log("Creating AdFuelHistory"),window.AdFuelHistory=[]),(a=this.adFuel.logger)!=null&&a.log("Adding to AdFuelHistory",g),window.AdFuelHistory.push(g),[2]})})},i.prototype.refresh=function(o,r,a){var u;return r===void 0&&(r=!0),a===void 0&&(a=!0),l(this,void 0,void 0,function(){return c(this,function(g){switch(g.label){case 0:return(u=this.adFuel.perf)!=null&&u.addMark("Refresh Called..."),(u=this.adFuel.logger)!=null&&u.log("Refreshing slots",o.select(function(t){return t.toLogging()}).toArray()),r?[4,this.adFuel.moduleManager.callPreRefresh(o)]:[3,2];case 1:g.sent(),g.label=2;case 2:return(u=this.googleApi)!=null&&u.refreshSlots(o,this.adFuel.registryOptions),a?[4,this.adFuel.moduleManager.callPostRefresh(o)]:[3,4];case 3:g.sent(),g.label=4;case 4:return[2]}})})},i.prototype.buildGPTObject=function(o){var r,a,u,g=d.CookieHelper.readCookie("gptgeo");g?(u=g.split("%2C"),a=parseFloat(u[0]),u=parseFloat(u[1]),(r=this.googleApi)!=null&&r.setLocation(a,u),o.registry.child_directed_treatment&&(r=this.googleApi)!=null&&r.setChildDirectedTreatmentTag(o.registry.child_directed_treatment),o.registry.safeframe_config&&((a=this.adFuel.logger)!=null&&a.log("Setting SafeFrame config tag: ",o.registry.safeframe_config),(u=this.googleApi)!=null)&&u.setSafeFrameConfig(o.registry.safeframe_config)):(r=this.adFuel.logger)!=null&&r.log("Unable to retrieve location cookie",g)},e.RequestProcessor=i},{"@turnercode/digital-ads-utilities":12}],29:[function(n,y,e){var l=this&&this.__awaiter||function(r,a,u,g){return new(u=u||Promise)(function(t,f){function p(s){try{w(g.next(s))}catch(b){f(b)}}function h(s){try{w(g.throw(s))}catch(b){f(b)}}function w(s){var b;s.done?t(s.value):((b=s.value)instanceof u?b:new u(function(v){v(b)})).then(p,h)}w((g=g.apply(r,a||[])).next())})},c=this&&this.__generator||function(r,a){var u,g,t,f={label:0,sent:function(){if(1&t[0])throw t[1];return t[1]},trys:[],ops:[]},p={next:h(0),throw:h(1),return:h(2)};return typeof Symbol=="function"&&(p[Symbol.iterator]=function(){return this}),p;function h(w){return function(s){var b=[w,s];if(u)throw new TypeError("Generator is already executing.");for(;f=p&&b[p=0]?0:f;)try{if(u=1,g&&(t=2&b[0]?g.return:b[0]?g.throw||((t=g.return)&&t.call(g),0):g.next)&&!(t=t.call(g,b[1])).done)return t;switch(g=0,(b=t?[2&b[0],t.value]:b)[0]){case 0:case 1:t=b;break;case 4:return f.label++,{value:b[1],done:!1};case 5:f.label++,g=b[1],b=[0];continue;case 7:b=f.ops.pop(),f.trys.pop();continue;default:if(!(t=0<(t=f.trys).length&&t[t.length-1])&&(b[0]===6||b[0]===2)){f=0;continue}if(b[0]===3&&(!t||b[1]>t[0]&&b[1]<t[3]))f.label=b[1];else if(b[0]===6&&f.label<t[1])f.label=t[1],t=b;else{if(!(t&&f.label<t[2])){t[2]&&f.ops.pop(),f.trys.pop();continue}f.label=t[2],f.ops.push(b)}}b=a.call(r,f)}catch(v){b=[6,v],g=0}finally{u=t=0}if(5&b[0])throw b[1];return{value:b[0]?b[1]:void 0,done:!0}}}},d=(Object.defineProperty(e,"__esModule",{value:!0}),e.SlotProcessor=void 0,n("../system")),i=n("linq-collections");function o(r,a,u){u===void 0&&(u=new d.GoogleApi(r)),this.adFuel=r,this.nextProcessor=a,this.googleApi=u}o.prototype.process=function(r){var a=this;return new Promise(function(u,g){return l(a,void 0,void 0,function(){var t,f,p,h,w=this;return c(this,function(s){switch(s.label){case 0:return s.trys.push([0,3,,4]),(t=this.adFuel.logger)!=null&&t.info("Entering SlotProcessor.Process()"),(t=this.adFuel.perf)!=null&&t.addMark("SlotProcessor.Process() START"),t=r.wrappedSlots.select(function(b){return b.toLogging()}).toArray(),(f=this.adFuel.logger)!=null&&f.log(" ### START Slot Processor ====",t,r.options),r.wrappedSlots.forEach(function(b){var v;(v=w.adFuel.perf)!=null&&v.addMark("[".concat(b.slotId,"] SlotProcessor.Process()"))}),(f=this.adFuel.logger)!=null&&f.log(" #################### Building Slots: ",r),this.buildSlots(r),[4,this.adFuel.moduleManager.callPostQueue(r.wrappedSlots)];case 1:return s.sent(),(f=this.adFuel.logger)!=null&&f.log(" ### STOP Slot Processor ====",t,r.options),(p=this.adFuel.logger)!=null&&p.log("========== [slotProcessor/process] CALLING PRE DISPATCH =========="),[4,this.adFuel.moduleManager.callPreDispatch(r.wrappedSlots)];case 2:return s.sent(),(p=this.adFuel.perf)!=null&&p.addMark("SlotProcessor.Process() END"),(h=this.adFuel.perf)!=null&&h.addMeasure("SlotProcessor.Process()"),this.nextProcessor?u((h=this.nextProcessor)==null?void 0:h.process(r)):u(r),[3,4];case 3:return h=s.sent(),g(h),[3,4];case 4:return[2]}})})})},o.prototype.buildSlots=function(r){var a,u=this,g=((g=this.adFuel.logger)!=null&&g.log("#################### Wrapped Slots: ",r.wrappedSlots.toArray()),r.wrappedSlots.where(function(t){return!t.isBuilt&&!t.hasBeenDisplayed&&t.slotExistsOnPage&&!t.isExcluded}));(a=this.adFuel.logger)!=null&&a.log("#################### Filtered Slots: ",g.toArray()),g.forEach(function(t){var f,p=u.adFuel.processedData.where(function(h){return h.value.url===r.url}).select(function(h){return(h=h.value.wrappedSlots.firstOrDefault(function(w){return w.isBuilt&&w.slotId===t.slotId}))==null?void 0:h.gSlot}).toArray();0<p.length&&p[0]!==void 0&&(f=u.adFuel.logger)!=null&&f.info("#################### Found historic gslot for ".concat(t.slotId),p)}),(a=this.adFuel.logger)!=null&&a.info("Building these slots: ",g.select(function(t){return t.toLogging()}).toArray()),g.where(function(t){return!t.isBuilt}).forEach(function(t){var f;(f=u.adFuel.logger)!=null&&f.info("Building slot for ".concat(t.slotId)),u.buildSlot(t),u.setResponsive(t),t.unWrappedSlot.safeframe_config&&u.googleApi.setSlotSafeFrameConfig(t.gSlot,t.unWrappedSlot.safeframe_config)})},o.prototype.buildSlot=function(r){(a=this.adFuel.logger)!=null&&a.log("Wrapped Slot: ",r);var a="/".concat(this.adFuel.adFuelOptions.NETWORK_ID,"/").concat(r.adUnitMap||r.unWrappedSlot.rktr_ad_id),u=r.slotId,g=((g=this.adFuel.perf)!=null&&g.addMark("Building Slot [".concat(r.slotId,"] adPath ").concat(a," START")),r=this.getSlotIfAlreadyProcessed(r),document.getElementById(r.slotId));if(g!=null&&g.className.includes("adfuel-rendered"))(g=this.adFuel.logger)!=null&&g.warn("".concat(r.slotId," element has already been rendered."));else if(r.isBuilt)(g=this.adFuel.logger)!=null&&g.log("You are trying to build ".concat(r.slotId," but it already exists in processedData."),r);else if(r.isOutOfPage)r.gSlot=this.googleApi.defineOutOfPageSlot(a,u);else{(g=this.adFuel.logger)!=null&&g.log("Defining slot for ".concat(r.slotId),r);try{r.gSlot=this.googleApi.defineSlot(a,r.unWrappedSlot.sizes,u)}catch(t){(g=this.adFuel.logger)!=null&&g.error("Error defining slot: ",t)}(u=this.adFuel.logger)!=null&&u.log("Slot built!",r)}(g=this.adFuel.perf)!=null&&g.addMark("Building Slot [".concat(r.slotId,"] adPath ").concat(a," END")),(u=this.adFuel.perf)!=null&&u.addMeasure("Building Slot [".concat(r.slotId,"] adPath ").concat(a))},o.prototype.getSlotIfAlreadyProcessed=function(r){var a=(a=this.adFuel.processedData.firstOrDefault(function(u){return u.value.wrappedSlots.any(function(g){return g.slotId===r.slotId&&g.isBuilt})}))==null?void 0:a.value.wrappedSlots.firstOrDefault(function(u){return u.slotId===r.slotId&&u.isBuilt});return r=a!=null?a:r},o.prototype.setResponsive=function(r){var a;r.isBuilt&&((a=this.adFuel.perf)!=null&&a.addMark("Setting Responsive Mapping [".concat(r.slotId,"]")),this.googleApi.defineSlotSizeMapping(r.gSlot,r.unWrappedSlot.responsive))},o.prototype.changeSlotId=function(r,a){var u=r.slotId.slice();r.unWrappedSlot.rktr_slot_id=a;try{document.dispatchEvent(new CustomEvent("SlotIdChange",{detail:{asset:r.unWrappedSlot,originalId:u,newId:a}}))}catch(g){(r=this.adFuel.logger)!=null&&r.error("Error dispatching SlotIdChange event.",g)}},o.prototype.destroySlots=function(r){var a;r===void 0&&(r=[]),(a=this.adFuel.logger)!=null&&a.log("[SLOT PROCESSOR] START ---------- destroySlots::slotsToDestroy:",r),(a=this.adFuel.perf)!=null&&a.addMark("Destroying Slots [".concat(JSON.stringify(r.map(function(u){return u.getSlotElementId()})),"]")),(a=this.adFuel.logger)!=null&&a.log("[SLOT PROCESSOR] ---------- destroySlots::handoffToGoogleAPI:",r),this.googleApi.destroySlots(r)},o.prototype.clearSlots=function(r){var a=this;this.googleApi.executeWhenAvailable(function(){var u,g=((g=(g=a.adFuel.lastProcessed())==null?void 0:g.wrappedSlots)!=null?g:new i.List).where(function(t){return r.includes(t.slotId)&&t.isBuilt}).select(function(t){return t.gSlot}).toArray();(u=a.adFuel.perf)!=null&&u.addMark("Clearing Slots [".concat(JSON.stringify(g.map(function(t){return t.getSlotElementId()})),"]")),a.googleApi.clearSlots(g)})},e.SlotProcessor=o},{"../system":46,"linq-collections":24}],30:[function(n,y,e){var l=this&&this.__assign||function(){return(l=Object.assign||function(o){for(var r,a=1,u=arguments.length;a<u;a++)for(var g in r=arguments[a])Object.prototype.hasOwnProperty.call(r,g)&&(o[g]=r[g]);return o}).apply(this,arguments)},c=this&&this.__spreadArray||function(o,r,a){if(a||arguments.length===2)for(var u,g=0,t=r.length;g<t;g++)!u&&g in r||((u=u||Array.prototype.slice.call(r,0,g))[g]=r[g]);return o.concat(u||Array.prototype.slice.call(r))},d=(Object.defineProperty(e,"__esModule",{value:!0}),e.TargetProcessor=void 0,n("@turnercode/digital-ads-utilities/dist/getUrlParam"));function i(o,r,a){a===void 0&&(a=void 0),this.adFuel=o,this._googleApi=r,this.nextProcessor=a,this._slotTargets={},this._pageTargets={}}i.prototype.process=function(o){var r=this;return new Promise(function(a,u){var g,t,f,p,h,w,s,b,v,m,E,O;try{(g=r.adFuel.perf)!=null&&g.addMark("TargetProcessor.Process() START"),(t=r.adFuel.logger)!=null&&t.log(" ### START Target Processor ====",o.wrappedSlots.select(function(M){return M.toLogging()}).toArray(),o.options),(f=r.adFuel.logger)!=null&&f.log("slotTargets",r._slotTargets),(p=r.adFuel.logger)!=null&&p.log("pageTargets",r._pageTargets),r._slotTargets=Object.assign({},r._slotTargets,o.slotTargets),r._pageTargets=Object.assign({},r._pageTargets,o.pageTargets),(h=r.adFuel.logger)!=null&&h.log("slotTargets",r._slotTargets),(w=r.adFuel.logger)!=null&&w.log("pageTargets",r._pageTargets),r.getAdsQaTargeting(),(s=r.adFuel.logger)!=null&&s.log(" ### START BUILDING SLOT TARGETING ====",o),r.buildSlotLevelTargeting(o),(b=r.adFuel.logger)!=null&&b.log(" ### START BUILDING PAGE TARGETING ====",o),r.buildPageLevelTargeting(o),(v=r.adFuel.logger)!=null&&v.log(" ### STOP Target Processor ====",o.wrappedSlots.select(function(M){return M.toLogging()}).toArray(),o.options),(m=r.adFuel.perf)!=null&&m.addMark("TargetProcessor.Process() END"),(E=r.adFuel.perf)!=null&&E.addMeasure("TargetProcessor.Process()"),r.nextProcessor?a((O=r.nextProcessor)==null?void 0:O.process(o)):a(o)}catch(M){u(M)}})},i.prototype.windowObjectName=function(o){var r;return((r=(r=o.options)==null?void 0:r.SITE_OBJECT)!=null?r:(o=(r=(r=o.registry)==null?void 0:r.root)!=null?r:(r=o.registry)==null?void 0:r.site)!=null?o:"").toUpperCase()},i.prototype.buildSlotLevelTargeting=function(o){(r=this.adFuel.logger)!=null&&r.log("Building slot level targeting.",{raw:window.CNN,root:this.windowObjectName(o),data:o});for(var r,a,u,g=function(h){(u=t.adFuel.perf)!=null&&u.addMark("Building Slot-Level Targeting [".concat(h.slotId,"]")),(u=t.adFuel.logger)!=null&&u.log("[TargetProcessor] Building Slot-Level Targeting [".concat(h.slotId,"]"),h);var w,s=(((u=window[t.windowObjectName(o)])==null?void 0:u.slotTargets)||{})[h.slotId]||{},b=((u=t.adFuel.logger)!=null&&u.log("[TargetProcessor] Site Slot Targets [".concat(h.slotId,"]"),s),{pos:[h.posMap]}),v=((u=t.adFuel.logger)!=null&&u.log("[TargetProcessor] posTargets::",b),new Map(h.targeting)),m=(v.delete("pos"),l(l(l(l({},t._slotTargets[h.slotId]),Object.fromEntries(v)),b),s));(u=t.adFuel.logger)!=null&&u.log("[TargetProcessor] slotTargets to be built are: ",m,h);for(w in m)(E=>{var O,M;h.gSlot?0<(M=(a=m[E].filter(function(T){var C;return(C=!((C=h.requestedSlotTargets[E])!=null&&C.includes(T)))!==null&&C}))!=null?a:[]).length&&((a=t.adFuel.logger)!=null&&a.log("Setting slot targeting: ",{slot:h.slotId,key:E,value:M}),h.gSlot.setTargeting(E,M),h.requestedSlotTargets[E]?(O=h.requestedSlotTargets[E]).push.apply(O,M):h.requestedSlotTargets[E]=c([],M,!0)):(a=t.adFuel.logger)!=null&&a.warn("Slot ".concat(h.slotId," could not find the gslot and goes home disappointed."))})(w);(u=t.adFuel.logger)!=null&&u.log("Built slot targeting:",m,h)},t=this,f=0,p=o.wrappedSlots.where(function(h){return h.isBuilt&&!h.isExcluded}).toArray();f<p.length;f++)g(p[f])},i.prototype.buildPageLevelTargeting=function(o){var r,a,u=this,g=((g=this.adFuel.logger)!=null&&g.log("Building page level targeting.",{root:this.windowObjectName(o),data:window[this.windowObjectName(o)]}),(g=this.adFuel.perf)!=null&&g.addMark("Building Page-Level Targeting"),((g=window[this.windowObjectName(o)])==null?void 0:g.adTargets)||{}),t=((r=this.adFuel.logger)!=null&&r.log("[TargetProcessor] Site Page Targets",g),new Map),f=(Array.isArray((r=o.registry)==null?void 0:r.targeting)&&(r=o.registry)!=null&&r.targeting.forEach(function(s){(w=u.adFuel.logger)!=null&&w.log("[TargetProcessor] Registry Page Target Item: ",s),(w=u.adFuel.logger)!=null&&w.log("[TargetProcessor] Registry Page Target Item Types: ",{first:typeof s[0],second:typeof s[1]});var h,w=s[0]||"undefined",s=s[1];(h=u.adFuel.logger)!=null&&h.log("[TargetProcessor] Registry Page Target KVP: ",{keyName:w,keyValue:s}),t.set(w,s)}),(o=this.adFuel.logger)!=null&&o.log("[TargetProcessor] Registry Targets: ",Object.fromEntries(t)),l(l(l({},this._pageTargets),Object.fromEntries(t)),g));for(a in(r=this.adFuel.logger)!=null&&r.log("pageTargets to be built are: ",f),f)f[a]!=null&&this._googleApi.setTargeting(a,f[a]);(o=this.adFuel.logger)!=null&&o.log("Built page targeting",f)},i.prototype.getAdsQaTargeting=function(){var o,r,a;try{(a=this.adFuel.perf)!=null&&a.addMark("Getting AdsQA Targeting");var u,g,t,f,p=(0,d.getUrlParam)("adsqa");p&&((o=this.adFuel.logger)!=null&&o.log("ADSQA detected."),u=p.split("%3D"),1<p.length?(g=u[0],t=u[1],f=Array.isArray(t)?t:[t],this._pageTargets[g]=f):(r=this.adFuel.logger)!=null&&r.info("ADSQA parsing problem",u))}catch(h){(a=this.adFuel.logger)!=null&&a.error("checkForAdsQA",h)}},i.prototype.removeTargets=function(o,r,a){var u;o===void 0&&(o={}),(u=this.adFuel.perf)!=null&&u.addMark("Removing Targeting [".concat(r,"] ").concat(JSON.stringify(a))),a&&o[r]?o[r]=o[r].filter(function(g){return!a.includes(g)}):delete o[r]},i.prototype.addTargets=function(o,r,a){var u;o[r]=a,(u=this.adFuel.perf)!=null&&u.addMark("Adding Targeting [".concat(r,"] ").concat(JSON.stringify(a))),o[r]=o[r]?c(c([],(u=o[r])!=null?u:[],!0),a.filter(function(g){return!o[r].includes(g)}),!0):c([],a,!0)},i.prototype.addPageLevelTargets=function(o,r){this.addTargets(this._pageTargets,o,r)},i.prototype.removePageLevelTargets=function(o,r){this.removeTargets(this._pageTargets,o,r)},i.prototype.addSlotLevelTargets=function(o,r,a){this._slotTargets[o]||(this._slotTargets[o]={}),this.addTargets(this._slotTargets[o],r,a)},i.prototype.removeSlotLevelTargets=function(o,r,a){this.removeTargets(this._slotTargets[o],r,a)},i.prototype.setBulkTargeting=function(o){var r;if(o.slotTargets||o.adTargets){if((r=this.adFuel.perf)!=null&&r.addMark("Setting Bulk Targeting"),o.slotTargets)for(var a=0,u=o.slotTargets;a<u.length;a++){var g=u[a];this.addSlotLevelTargets(g.slotId,g.targetKey,g.targetValues)}if(o.adTargets)for(var t=0,f=o.adTargets;t<f.length;t++){var p=f[t];this.addPageLevelTargets(p.targetKey,p.targetValues)}}else(r=this.adFuel.logger)!=null&&r.error("setBulkTargeting was passed a bad parameter.",o)},e.TargetProcessor=i},{"@turnercode/digital-ads-utilities/dist/getUrlParam":9}],31:[function(n,y,e){var l=this&&this.__createBinding||(Object.create?function(d,i,o,r){r===void 0&&(r=o);var a=Object.getOwnPropertyDescriptor(i,o);a&&("get"in a?i.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(d,r,a)}:function(d,i,o,r){d[r=r===void 0?o:r]=i[o]}),c=this&&this.__exportStar||function(d,i){for(var o in d)o==="default"||Object.prototype.hasOwnProperty.call(i,o)||l(i,d,o)};Object.defineProperty(e,"__esModule",{value:!0}),c(n("../system/OptionsParser"),e),c(n("./RequestProcessor"),e),c(n("./SlotProcessor"),e),c(n("./TargetProcessor"),e)},{"../system/OptionsParser":40,"./RequestProcessor":28,"./SlotProcessor":29,"./TargetProcessor":30}],32:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.AController=void 0,e.AController=function(l){(this.missionControl=l).register(this)}},{}],33:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.BaseAdFuelOptions=void 0,e.BaseAdFuelOptions={AUTO_DISPATCH:!0,COLLAPSE_EMPTY_DIVS:!0,DEFAULT_TIMEOUT:1200,DEFAULT_DESKTOP_TIMEOUT:1200,DEFAULT_MOBILE_TIMEOUT:800,IFRAME_TITLE:"advertisement",NETWORK_ID:"8663477"}},{}],34:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.GoogleApi=void 0;var l=n("@turnercode/digital-ads-utilities/dist/getUrlParam");function c(d){this.adFuel=d,this._pubAdsConfigured=!1,this._commandQueue=[],this._setChildDirectedTreatment=!0}c.prototype.executeWhenAvailable=function(d){var i;this.isAvailable?d():((i=this.adFuel.logger)!=null&&i.warn("It seems googletag is not ready yet. Queuing command...",{apiReady:googletag.apiReady,pubadsReady:googletag.pubadsReady}),(i=window.googletag)!=null&&i.cmd.push(d))},c.prototype.flushCmdQueue=function(){for(;0<this._commandQueue.length;)googletag.cmd.push(this._commandQueue.shift())},Object.defineProperty(c.prototype,"isAvailable",{get:function(){var d;return(d=googletag.apiReady)!=null&&d},enumerable:!1,configurable:!0}),c.prototype.destroySlots=function(d){var i=this;0<d.length?this.executeWhenAvailable(function(){var o;d.forEach(function(r){var a;(a=i.adFuel.logger)!=null&&a.log("[GOOGLEAPI] ---------- destroySlots::Destroying Slot: ".concat(r.getSlotElementId())),(a=i.adFuel.perf)!=null&&a.addMark("Destroying Slot: ".concat(r.getSlotElementId()))}),(o=window.googletag)!=null&&o.destroySlots(d)}):this.executeWhenAvailable(function(){var o;(o=i.adFuel.logger)!=null&&o.log("[GOOGLEAPI] ---------- destroySlots::Destroying All Slots"),(o=i.adFuel.perf)!=null&&o.addMark("Destroying All Slots"),(o=window.googletag)!=null&&o.destroySlots()})},c.prototype.clearSlots=function(d){var i=this;0<(d=d===void 0?[]:d).length?this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Clearing Slots"),d.forEach(function(r){var a;(a=i.adFuel.perf)!=null&&a.addMark("Clearing Slot: ".concat(r.getSlotElementId()))}),googletag.pubads().clear(d)}):googletag.cmd.push(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Clearing All Slots"),googletag.pubads().clear()})},c.prototype.defineOutOfPageSlot=function(r,i){var o,r=googletag.defineOutOfPageSlot(r,i);if(window.googletag&&r)(o=this.adFuel.perf)!=null&&o.addMark("Defined OOP GPT Slot - ".concat(i)),r.addService(window.googletag.pubads());else{if(!window.googletag)throw Error("Googletag not defined.");(o=this.adFuel.logger)!=null&&o.warn("Unable to define slot: ".concat(i))}return r},c.prototype.defineSlot=function(d,i,o){(u=this.adFuel.logger)!=null&&u.info("Building Standard Slot Object adPath:".concat(d," sizes:").concat(i," slotId:").concat(o));for(var r,a,u=void 0,g=[],t=0,f=i;t<f.length;t++){var p=f[t].map(Number);g.push([p[0],p[1]])}try{u=googletag.defineSlot(d,g,o),window.googletag&&u&&((r=this.adFuel.logger)!=null&&r.info("Defined slot: ".concat(o),u),(a=this.adFuel.perf)!=null&&a.addMark("Defined Standard GPT Slot - ".concat(o)),u.addService(window.googletag.pubads()))}catch(h){(i=this.adFuel.logger)!=null&&i.warn("Unable to define slot: ".concat(o),h)}return u},c.prototype.defineSlotSizeMapping=function(d,i){var o,r;d&&(r=d.getSlotElementId(),(o=this.adFuel.logger)!=null&&o.info("Setting Slot size mapping slotId: ".concat(r," responsiveMap: "),i),d.defineSizeMapping(i),(o=this.adFuel.perf)!=null)&&o.addMark("Defined Slot Responsive Mapping - ".concat(d.getSlotElementId()))},c.prototype.setTargeting=function(d,i){var o=this;this.executeWhenAvailable(function(){var r;googletag.pubads().setTargeting(d,i),(r=o.adFuel.perf)!=null&&r.addMark("Defined Page Target - ".concat(d))})},c.prototype.displaySlotById=function(d){var i=this;this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Displaying Slot - ".concat(d)),googletag.display(d)})},c.prototype.refreshSlots=function(d,i){var o=this,r=i||{maintainCorrelator:!0},a=d.where(function(u){return u.isBuilt}).select(function(u){return u.gSlot}).toArray();0<a.length?this.executeWhenAvailable(function(){var u;(u=o.adFuel.logger)!=null&&u.log("GoogleAPI, Refreshing Slots: ".concat(JSON.stringify(a.map(function(g){return g.getSlotElementId()})))),a.forEach(function(g){var t;(t=o.adFuel.perf)!=null&&t.addMark("Refreshing Slot ".concat(g.getSlotElementId()))}),googletag.pubads().refresh(a,{changeCorrelator:!r.maintainCorrelator})}):this.executeWhenAvailable(function(){var u;(u=o.adFuel.logger)!=null&&u.log("GoogleAPI, Refreshing all slots"),(u=o.adFuel.perf)!=null&&u.addMark("Refreshing All Slots"),googletag.pubads().refresh(void 0,{changeCorrelator:!r.maintainCorrelator})})},c.prototype.configurePubAds=function(){var d=this;return new Promise(function(i){d._pubAdsConfigured?i():(d._pubAdsConfigured=!0,d.executeWhenAvailable(function(){(o=d.adFuel.perf)!=null&&o.addMark("Configuring GPT START"),googletag.pubads().addEventListener("impressionViewable",function(a){var u,g=a.slot.getSlotElementId();(u=d.adFuel.perf)!=null&&u.addMark("[".concat(g,"] Impression Viewable")),(u=d.adFuel.logger)!=null&&u.info("impressionViewable",a),document.dispatchEvent(new CustomEvent("SlotViewable",{detail:a}))}).addEventListener("slotVisibilityChanged",function(a){var u;(u=d.adFuel.logger)!=null&&u.info("slotVisibilityChanged",a),document.dispatchEvent(new CustomEvent("slotVisibilityChanged",{detail:a}))}).addEventListener("slotRenderEnded",function(a){var u,g,t,f,p,h,w,s,b,v,m,E,O,M,T,C=a.slot.getSlotElementId();(u=d.adFuel.perf)!=null&&u.addMark("[".concat(C,"] Slot Render Ended")),(u=d.adFuel.logger)!=null&&u.info("slotRenderEnded",a);try{var F,U=d.adFuel.processedData.getKeys(),k=(t=(g=a.slot)==null?void 0:g.getSlotElementId())!=null?t:"NO ID",W={},R=(U.forEach(function(z){d.adFuel.processedData.get(z).wrappedSlots.forEach(function(H){H.unWrappedSlot.rktr_slot_id===k&&(W=H)})}),(f=d.adFuel.logger)!=null&&f.log("========== Active Slot: ",W),W.responseData={advertiserId:a.advertiserId,campaignId:a.campaignId,creativeId:a.creativeId,isEmpty:a.isEmpty,lineItemId:a.lineItemId,renderedSize:a.size,sourceAgnosticCreativeId:a.sourceAgnosticCreativeId,sourceAgnosticLineItemId:a.sourceAgnosticLineItemId},{asset:a.slot,pos:a.slot?a.slot.getTargeting("pos"):[""],empty:!!a.isEmpty,renderedSize:(p=a.size)!=null?p:"0x0",creativeId:(h=a.sourceAgnosticCreativeId)!=null?h:"0",lineItemId:(w=a.sourceAgnosticLineItemId)!=null?w:"0",serviceName:(s=a.serviceName)!=null?s:"",divId:(v=(b=a.slot)==null?void 0:b.getSlotElementId())!=null?v:"NO ID"}),G=(R.empty&&d.adFuel.adFuelOptions.COLLAPSE_EMPTY_DIVS&&(document.getElementById(R.divId).style.display="none"),a.slot.getTargeting("creativeId")||[]),B=(a.creativeId&&G.indexOf(""+a.creativeId)<0&&G.push(""+a.creativeId),a.slot.getTargeting("lineItemId")||[]);a.lineItemId&&B.indexOf(""+a.lineItemId)<0&&B.push(""+a.lineItemId),R.divId!="NO ID"&&(F=document.getElementById(R.divId),(m=d.adFuel.logger)!=null&&m.log("Getting element for ".concat(R.divId," to set className."),F),F?F.className.includes("adfuel-rendered")||(F.className="".concat(F.className," adfuel-rendered").trim(),(E=d.adFuel.logger)!=null&&E.log("".concat(R.divId," className ").concat(F.className))):(O=d.adFuel.logger)!=null&&O.warn("Could not find element ".concat(R.divId," to set adfuel-rendered in className."))),d.executeWhenAvailable(function(){a.slot.setTargeting("creativeId",G),a.slot.setTargeting("lineItemId",B)}),(M=d.adFuel.logger)!=null&&M.info("Dispatching GPTRenderComplete: ",R),R.divId?(T=document.getElementById(R.divId))!=null&&T.dispatchEvent(new CustomEvent("GPTRenderComplete",{detail:R,bubbles:!0})):document.dispatchEvent(new CustomEvent("GPTRenderComplete",{detail:R}))}catch(z){(C=d.adFuel.logger)!=null&&C.error("Error dispatching custom event: GPTRenderComplete",z)}}).addEventListener("slotOnload",function(a){var u,g=a.slot.getSlotElementId();(u=d.adFuel.perf)!=null&&u.addMark("[".concat(g,"] Slot Loaded")),(u=d.adFuel.logger)!=null&&u.info("slotOnLoad",a),document.dispatchEvent(new CustomEvent("GPTSlotLoaded",{detail:a}))}),(o=d.adFuel.logger)!=null&&o.info("Enabling 'Collapse Empty Divs'"),googletag.pubads().collapseEmptyDivs((o=d.adFuel.adFuelOptions.COLLAPSE_EMPTY_DIVS)==null||o),(o=d.adFuel.logger)!=null&&o.info("Enabling 'Async Rendering'"),googletag.pubads().enableAsyncRendering(),(o=d.adFuel.logger)!=null&&o.info("Enabling 'Single Request'"),googletag.pubads().enableSingleRequest(),(0,l.getUrlParam)("enableInitialLoad")||((o=d.adFuel.logger)!=null&&o.info("Disabling 'Initial Load'"),googletag.pubads().disableInitialLoad());var o=((o=(o=window.WM)==null?void 0:o.UserConsent)==null?void 0:o.isInRegion("global"))===!1,r=(r=(r=window.WM)==null?void 0:r.UserConsent)==null?void 0:r.inUserConsentState(["data-store","ads-contextual","ads-person-prof","ads-person","vendor"]);o&&!r&&((o=d.adFuel.logger)!=null&&o.log("Restricting Data Processing..."),googletag.pubads().setPrivacySettings({restrictDataProcessing:!0})),(r=d.adFuel.logger)!=null&&r.info("Enabling 'Services'"),(o=d.adFuel.perf)!=null&&o.addMark("Configuring GPT END"),(r=d.adFuel.perf)!=null&&r.addMeasure("Configuring GPT"),(o=d.adFuel.perf)!=null&&o.addMark("Enabling GPT Services"),googletag.enableServices(),i()}))})},c.prototype.enableLazyLoad=function(d){var i=this;this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Enabling GPT Lazy Load"),googletag.pubads().enableLazyLoad({fetchMarginPercent:d.fetch,renderMarginPercent:d.render,mobileScaling:d.scaling})})},c.prototype.setChildDirectedTreatmentTag=function(d){var i,o=this;this._setChildDirectedTreatment?(this.executeWhenAvailable(function(){var r;(r=o.adFuel.perf)!=null&&r.addMark("Setting Child-Directed Treatment"),googletag.pubads().setPrivacySettings({childDirectedTreatment:!0,underAgeOfConsent:!0})}),this._setChildDirectedTreatment=!1):(i=this.adFuel.logger)!=null&&i.info("setChidlDirectedTreatment has already been caleld.")},c.prototype.setLocation=function(d,i){var o=this;this.executeWhenAvailable(function(){var r;(r=o.adFuel.perf)!=null&&r.addMark("Setting Location"),googletag.pubads().setLocation(d,i)})},c.prototype.setSafeFrameConfig=function(d){var i=this;this.executeWhenAvailable(function(){var o;(o=i.adFuel.perf)!=null&&o.addMark("Setting SafeFrame Config"),googletag.pubads().setSafeFrameConfig(d)})},c.prototype.setSlotSafeFrameConfig=function(d,i){var o=this;d&&this.executeWhenAvailable(function(){var r;(r=o.adFuel.perf)!=null&&r.addMark("[".concat(d.getSlotElementId(),"] Setting Slot SafeFrame Config")),d.setSafeFrameConfig(i)})},e.GoogleApi=c},{"@turnercode/digital-ads-utilities/dist/getUrlParam":9}],35:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.GptProcessData=void 0;var l=n("linq-collections");function c(){this.wrappedSlots=new l.List,this.url="",this.pageTargets={},this.slotTargets={},this.dispatched=!1}c.prototype.build=function(d,i,o,r,a,u){return r===void 0&&(r=""),a===void 0&&(a={}),u===void 0&&(u={}),this.timestamp=new Date().getTime(),this.registry=d,this.wrappedSlots=i,this.options=o,this.url=r,this.pageTargets=a,this.slotTargets=u,this.dispatched=!1,this},c.prototype.clone=function(){return new c().build(this.registry&&JSON.parse(JSON.stringify(this.registry)),new l.List(this.wrappedSlots.toArray()),this.options&&JSON.parse(JSON.stringify(this.options)),"".concat(this.url),JSON.parse(JSON.stringify(this.pageTargets)),JSON.parse(JSON.stringify(this.slotTargets)))},e.GptProcessData=c},{"linq-collections":24}],36:[function(o,y,e){var l,c,d=this&&this.__extends||(l=function(a,u){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(g,t){g.__proto__=t}:function(g,t){for(var f in t)Object.prototype.hasOwnProperty.call(t,f)&&(g[f]=t[f])}))(a,u)},function(a,u){if(typeof u!="function"&&u!==null)throw new TypeError("Class extends value "+String(u)+" is not a constructor or null");function g(){this.constructor=a}l(a,u),a.prototype=u===null?Object.create(u):(g.prototype=u.prototype,new g)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.GptScriptLoader=void 0,o("@turnercode/digital-ads-utilities/dist/loadScriptFromUrl")),o=o("../system/AController"),o=(c=o.AController,d(r,c),Object.defineProperty(r.prototype,"readyId",{get:function(){return"gptScript"},enumerable:!1,configurable:!0}),r.prototype.loadScript=function(){var a,u=this;return(a=this.perf)!=null&&a.addMark("GPT Script Load START"),(a=this.perf)!=null&&a.addMark("GPT Script Ready START"),(0,i.loadScriptFromUrl)("https://securepubads.g.doubleclick.net/tag/js/gpt.js","GPTScript",this._document).then(function(){var g;(g=u.logger)!=null&&g.info("GPT is loaded."),(g=u.perf)!=null&&g.addMark("GPT Script Load END"),(g=u.perf)!=null&&g.addMeasure("GPT Script Load"),(g=window.googletag)!=null&&g.cmd.push(function(){var t,f=((f=window.googletag)==null?void 0:f.getVersion())||"unknown";(t=u.logger)!=null&&t.info("GPT is ready. Version is ".concat(f)),(t=u.perf)!=null&&t.addMark("GPT Script Ready END"),(f=u.perf)!=null&&f.addMeasure("GPT Script Ready")})})},r);function r(a,u,g,t){t===void 0&&(t=document);var f=c.call(this,a)||this;return f.missionControl=a,f.logger=u,f.perf=g,f._document=t,f.missionControl.setReady(f),f}e.GptScriptLoader=o},{"../system/AController":32,"@turnercode/digital-ads-utilities/dist/loadScriptFromUrl":13}],37:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.MissionControl=void 0;var l=n("linq-collections");function c(d,i){this.adFuel=d,this.googleApi=i,this._ready=new l.Dictionary,this._optanonLoaded=!1,this._consentStatus=!0,this._iabRegion="global",this.processQueue=[]}c.prototype.register=function(d){this._ready.setOrUpdate(d.readyId,!1),(d=this.adFuel.logger)!=null&&d.info("Ready at Register",JSON.parse(JSON.stringify(this._ready))),(d=this.adFuel.perf)!=null&&d.addMark("Ready at Register")},Object.defineProperty(c.prototype,"firstProcessor",{get:function(){return this._firstProcessor},set:function(d){this._firstProcessor=d},enumerable:!1,configurable:!0}),c.prototype.setReady=function(d){var i,o=this;if(d){if((i=this.adFuel.logger)!=null&&i.log("Setting Processor Ready: ",d),!this._ready.containsKey(d.readyId))throw new Error("Key not found in ReadyEngine: ".concat(d.readyId));this._ready.setOrUpdate(d.readyId,!0),(i=this.adFuel.logger)!=null&&i.info("Ready",JSON.parse(JSON.stringify(this._ready)))}if(this.readyToLaunch()){if((d=this.adFuel.perf)!=null&&d.addMark("Ready To Launch"),!this._firstProcessor)throw new Error("All processes are ready, but FirstProcessor is not set.");(i=this.adFuel.perf)!=null&&i.addMark("First Processor - Processing"),this.googleApi.executeWhenAvailable(function(){o.runProcessChain(),o.adFuel.flushCmdQueue()})}},c.prototype.runProcessChain=function(){var d,i=this,o=this.processQueue.shift();(d=this.adFuel.logger)!=null&&d.log("[runProcessChain] ProcessData: ",o),o?((d=this.adFuel.logger)!=null&&d.info("[runProcessChain] Starting chain with this data",o),this.adFuel.moduleManager.callStart(o.wrappedSlots.where(function(r){return r.slotExistsOnPage}).toList()).then(function(){i.adFuel.moduleManager.callPreQueue(o.wrappedSlots.where(function(r){return r.slotExistsOnPage&&!r.isExcluded}).toList()).then(function(){var r;(r=i.adFuel.logger)!=null&&r.info("[runProcessChain] calling first processor..."),i._firstProcessor.process(o).then(function(){o.timestamp=new Date().getTime(),i.adFuel.processedData.setOrUpdate(o.timestamp,o),i.runProcessChain(),i.adFuel.flushCmdQueue()})})}).catch(function(r){var a;(a=i.adFuel.logger)!=null&&a.error("[runProcessChain] There was an error in processing the chain.  Mission Control has aborted liftoff.",r)})):(d=this.adFuel.logger)!=null&&d.info("[runProcessChain] No data to process.")},c.prototype.getSlotIfAlreadyProcessed=function(d){var i=(i=this.adFuel.processedData.firstOrDefault(function(o){return o.value.wrappedSlots.any(function(r){return r.slotId===d.slotId&&r.isBuilt})}))==null?void 0:i.value.wrappedSlots.firstOrDefault(function(o){return o.slotId===d.slotId&&o.isBuilt});return d=i!=null?i:d},c.prototype.isReady=function(d){return this._ready.get(d.readyId)},c.prototype.readyToLaunch=function(){var d,i=this._ready.all(function(o){return o.value===!0});return(d=this.adFuel.logger)!=null&&d.info("Ready to launch ".concat(i),this._ready),i},e.MissionControl=c},{"linq-collections":24}],38:[function(r,y,e){var l,c,d=this&&this.__extends||(l=function(u,g){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(t,f){t.__proto__=f}:function(t,f){for(var p in f)Object.prototype.hasOwnProperty.call(f,p)&&(t[p]=f[p])}))(u,g)},function(u,g){if(typeof g!="function"&&g!==null)throw new TypeError("Class extends value "+String(g)+" is not a constructor or null");function t(){this.constructor=u}l(u,g),u.prototype=g===null?Object.create(g):(t.prototype=g.prototype,new t)}),i=(Object.defineProperty(e,"__esModule",{value:!0}),e.ModuleManager=e.ModuleWrapper=void 0,r("@turnercode/digital-ads-utilities")),r=r("../system/AController"),o=function(u,g,t,f){g===void 0&&(g=void 0),t===void 0&&(t=!1),f===void 0&&(f=!1),this.moduleName=u,this.unWrappedModule=g,this.isLoaded=t,this.isReady=f},r=(e.ModuleWrapper=o,c=r.AController,d(a,c),Object.defineProperty(a.prototype,"readyId",{get:function(){return"modules"},enumerable:!1,configurable:!0}),a.prototype.executeWhenWindowLoads=function(){var u;(u=this.adFuel.perf)!=null&&u.addMark("Executing Window Processes START"),(u=this.adFuel.perf)!=null&&u.addMark("Executing Window Processes END"),(u=this.adFuel.perf)!=null&&u.addMeasure("Executing Window Processes")},a.prototype.executeWhenDOMLoads=function(){var u;(u=this.adFuel.perf)!=null&&u.addMark("Executing DOM Processes START"),this.adFuel.adFuelOptions.ACTIVE_MODULES?((u=this.adFuel.logger)!=null&&u.log("Are all expected modules loaded? ",{expected:this.adFuel.adFuelOptions.ACTIVE_MODULES,loaded:this.areAllExpectedModulesLoaded}),this.areAllExpectedModulesLoaded?((u=this.adFuel.perf)!=null&&u.addMark("Executing DOM Processes END"),(u=this.adFuel.perf)!=null&&u.addMeasure("Executing DOM Processes")):(u=this.adFuel.logger)!=null&&u.warn("Failed to load all expected modules:",this.adFuel.adFuelOptions.ACTIVE_MODULES)):((u=this.adFuel.logger)!=null&&u.log("~~ ~~ ~~ === === === SETTING MODULE MANAGER READY (A) === === === ~~ ~~ ~~"),this.adFuel.missionControl.setReady(this))},a.prototype.registerModule=function(u){var g,t;this.adFuel.registeredModules.containsKey(u.MODULE_LOG_TAG)?(t=this.adFuel.registeredModules.get(u.MODULE_LOG_TAG)).unWrappedModule=u:((g=this.adFuel.perf)!=null&&g.addMark("Creating ModuleWrapper [".concat(u.MODULE_NAME,"]")),t=new o(u.MODULE_LOG_TAG,u)),(g=this.adFuel.logger)!=null&&g.log("Setting Registered Module: ",{module:u,wrappedModule:t}),this.adFuel.registeredModules.setOrUpdate(u.MODULE_LOG_TAG,t),(g=this.adFuel.logger)!=null&&g.log("Expected Loaded and All Ready?: ",{expected:this.areAllExpectedModulesLoaded,ready:this.areAllModulesReady}),this.areAllExpectedModulesLoaded&&this.areAllModulesReady&&((u=this.adFuel.logger)!=null&&u.info("All modules are loaded and ready, so setting ModuleManager ready."),(t=this.adFuel.perf)!=null&&t.addMark("All Modules Ready"),(g=this.adFuel.logger)!=null&&g.log("~~ ~~ ~~ === === === SETTING MODULE MANAGER READY (B) === === === ~~ ~~ ~~"),this.missionControl.setReady(this))},Object.defineProperty(a.prototype,"areAllExpectedModulesLoaded",{get:function(){for(var u,g,t=0,f=(g=this.adFuel.adFuelOptions.ACTIVE_MODULES)!=null?g:[];t<f.length;t++){var p=f[t];if((u=this.adFuel.logger)!=null&&u.log("moduleLogTag: ",p),!this.adFuel.registeredModules.containsKey(p))return!1}return(g=this.adFuel.logger)!=null&&g.log("notNot: ",!!this.adFuel.adFuelOptions.ACTIVE_MODULES),!!this.adFuel.adFuelOptions.ACTIVE_MODULES},enumerable:!1,configurable:!0}),Object.defineProperty(a.prototype,"areAllModulesReady",{get:function(){return this.adFuel.registeredModules.count()<1||this.adFuel.registeredModules.all(function(u){return u.value.isReady})},enumerable:!1,configurable:!0}),a.prototype.callStart=function(){var u=this;return new Promise(function(g){u.adFuel.registeredModules.where(function(t){return t.value.isReady}).forEach(function(t){var f,p=(p=t.value)==null?void 0:p.unWrappedModule;if(p!=null&&p.start)try{(f=u.adFuel.perf)!=null&&f.addMark("Calling Module Start Process [".concat(t.value.moduleName,"]")),p.start()}catch(h){(f=u.adFuel.logger)!=null&&f.error("Problem calling start for ".concat(p.MODULE_NAME),h)}}),g()})},a.prototype.callPreQueue=function(u){var g=this;return new Promise(function(t){var f,p=u,h=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,b=w.value.unWrappedModule;b!=null&&b.preQueue&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module preQueue Process [".concat(w.value.moduleName,"]")),h.push((0,i.promiseWithTimeout)(1500,b.preQueue(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("MODULE-MANAGER - Problem calling preQueue ".concat(b.MODULE_NAME),v)}),"".concat(b.MODULE_NAME," PreQueue timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PreQueue Callback Promises: ",h),t(Promise.allSettled(h).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PreQueue Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callPostQueue=function(u){var g=this;return new Promise(function(t){var f,p=u,h=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,b=w.value.unWrappedModule;b!=null&&b.postQueue&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module postQueue Process [".concat(w.value.moduleName,"]")),h.push((0,i.promiseWithTimeout)(1500,b.postQueue(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling postQueue ".concat(b.MODULE_NAME),v)}),"".concat(b.MODULE_NAME," PostQueue timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PostQueue Callback Promises: ",h),t(Promise.allSettled(h).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PostQueue Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callPreDispatch=function(u){var g=this;return new Promise(function(t){var f,p=u,h=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,b=w.value.unWrappedModule;b!=null&&b.preDispatch&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module preDispatch Process [".concat(w.value.moduleName,"]")),h.push((0,i.promiseWithTimeout)(1500,b.preDispatch(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling preDispatch ".concat(b.MODULE_NAME),v)}),"".concat(b.MODULE_NAME," PreDispatch timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PreDispatch Callback Promises: ",h),t(Promise.allSettled(h).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PreDispatch Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callPostDispatch=function(u){var g=this;return new Promise(function(t){var f,p=u,h=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,b=w.value.unWrappedModule;b!=null&&b.postDispatch&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module postDispatch Process [".concat(w.value.moduleName,"]")),h.push((0,i.promiseWithTimeout)(1500,b.postDispatch(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling postDispatch ".concat(b.MODULE_NAME),v)}),"".concat(b.MODULE_NAME," PostDispatch timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PostDispatch Callback Promises: ",h),t(Promise.allSettled(h).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PostDispatch Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callPreRefresh=function(u){var g=this;return new Promise(function(t){var f,p=u,h=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,b=w.value.unWrappedModule;b!=null&&b.preRefresh&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module preRefresh Process [".concat(w.value.moduleName,"]")),h.push((0,i.promiseWithTimeout)(1500,b.preRefresh(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling preRefresh ".concat(b.MODULE_NAME),v)}),"".concat(b.MODULE_NAME," PreRefresh timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PreRefresh Callback Promises: ",h),t(Promise.allSettled(h).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PreRefreesh Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callPostRefresh=function(u){var g=this;return new Promise(function(t){var f,p=u,h=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,b=w.value.unWrappedModule;b!=null&&b.postRefresh&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module postRefresh Process [".concat(w.value.moduleName,"]")),h.push((0,i.promiseWithTimeout)(1500,b.postRefresh(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling postRefresh ".concat(b.MODULE_NAME),v)}),"".concat(b.MODULE_NAME," PostRefresh timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - PostRefresh Callback Promises: ",h),t(Promise.allSettled(h).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - PostRefresh Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a.prototype.callDestroySlot=function(u){var g=this;return new Promise(function(t){var f,p=u,h=[];g.adFuel.registeredModules.where(function(w){return w.value.isReady}).forEach(function(w){var s,b=w.value.unWrappedModule;b!=null&&b.destroySlots&&((s=g.adFuel.perf)!=null&&s.addMark("Calling Module destroySlots Process [".concat(w.value.moduleName,"]")),h.push((0,i.promiseWithTimeout)(1500,b.destroySlots(p.toArray()).catch(function(v){var m;(m=g.adFuel.logger)!=null&&m.error("Problem calling destroySlots ".concat(b.MODULE_NAME),v)}),"".concat(b.MODULE_NAME," DestroySlot timed out."))))}),(f=g.adFuel.logger)!=null&&f.log("MODULE-MANAGER - DestroySlot Callback Promises: ",h),t(Promise.allSettled(h).then(function(w){var s;(s=g.adFuel.logger)!=null&&s.log("MODULE-MANAGER - DestroySlot Callback Promises Results: ",w)}).catch(function(w){var s;(s=g.adFuel.logger)!=null&&s.error("MODULE-MANAGER - Error waiting for all promises to resolve:",w)}))})},a);function a(u){var g=c.call(this,u.missionControl)||this;return g.adFuel=u,g._windowLoaded=!1,g._domContentLoaded=!1,window.addEventListener("DOMContentLoaded",function(){var t;g._domContentLoaded||((t=g.adFuel.perf)!=null&&t.addMark("DOMContentLoaded"),g.executeWhenDOMLoads(),g._domContentLoaded=!0)}),window.addEventListener("load",function(){var t;g._windowLoaded||((t=g.adFuel.perf)!=null&&t.addMark("window.load"),g.executeWhenWindowLoads(),g._windowLoaded=!0)}),g}e.ModuleManager=r},{"../system/AController":32,"@turnercode/digital-ads-utilities":12}],39:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.Monetization=void 0;var l=n("@turnercode/digital-ads-utilities/dist/Logger"),c=n("@turnercode/digital-ads-utilities/dist/getViewport");function d(i){var o,r=this,a=(this.wrappedSlot=i,this.invalidMappings=["_ns_","_nfs_"],this.invalidSegments=[],this.invalidAdUnits=["CNN/health","CNN/health/healthgrades","CNN/health/leaf","CNN/health/list","CNN/health/photos","CNN/health/specials","CNN/health/video","CNN/student-news"],this.monetizedSizes=["160x600","300x250","300x600","320x50","728x90","970x90","970x250"],this.concertSizes=["1030x590","620x366","325x508","325x204"],this.isMonetized=!0,this.isSuppressed=!1,this.isOutstream=!1,this.isConcert=!1,this.viewportSizes=[],this.filteredSizes=[],this._logger=new l.Logger("AdFuel T$","Monetization","mon","color: #85BB65; padding: 2px"),this._logger.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$"),this._logger.log("$$$$$$$$$$  Monetization for Slot: ",i.slotId),this.posValue=i.posMap,(0,c.getViewport)()),u=this.isSuppressed=!1;this.isOutstream=0<=i.slotId.indexOf("_out_"),i.slotId==="page"&&(this.isMonetized=!1),this.hasInvalidMapping()&&(this.isMonetized=!1),this.hasInvalidUnitSegment()&&(this.isMonetized=!1),this.hasInvalidAdUnit()&&(this.isMonetized=!1),i.responsive&&0<i.responsive.length&&(u=!0,this._logger.log("$$$$$$$$$$ Client Viewport : ",a),o=i.responsive.filter(function(g){return r._logger.log("$$$$$$$$$$ Slot Viewport : ",g),g=g.unwrapped[0][0],r._logger.log("$$$$$$$$$$ Client Min: ",g),parseInt(g,10)<a.width})[0].sizes,this.viewportSizes=o.sizes.map(function(g){return g.unwrapped}),this.isSuppressed=o.suppressed,this._logger.log("$$$$$$$$$$ Viewport Sizes: ",this.viewportSizes)),this._logger.log("$$$$$$$$$$ Is Responsive/Monetized/Suppressed/Outstream: ",{isResponsive:u,isMonetized:this.isMonetized,isSuppressed:this.isSuppressed,isOutstream:this.isOutstream}),this.isOutstream?(this.isMonetized=!0,u?this.viewportSizes.forEach(function(g){r.filteredSizes.push({unwrapped:g,width:parseInt(g[0],10),height:parseInt(g[1],10)})}):i.sizes.forEach(function(g){r.filteredSizes.push(g)})):this.isMonetized&&!this.isSuppressed&&this.monetizedSizes.forEach(function(g){u?r.viewportSizes.forEach(function(t){0<r.concertSizes.indexOf(t.join("x"))&&(r._logger.log("$$$$$$$$$$ Is size a Concert size?",{size:t.join("x"),index:r.concertSizes.indexOf(t.join("x"))}),r.isConcert=!0),g===t.join("x")&&r.filteredSizes.push({unwrapped:t,width:parseInt(t[0],10),height:parseInt(t[1],10)})}):i.sizes.forEach(function(t){0<r.concertSizes.indexOf(t.unwrapped.join("x"))&&(r._logger.log("$$$$$$$$$$ Is size a Concert size?",{size:t.unwrapped.join("x"),index:r.concertSizes.indexOf(t.unwrapped.join("x"))}),r.isConcert=!0),g===t.unwrapped.join("x")&&r.filteredSizes.push(t)})}),this.filteredSizes.length!==0||this.isOutstream||(this.isMonetized=!1),this._logger.log("$$$$$$$$$$ Is Concert: ",this.isConcert),this.isConcert&&(this.isMonetized=!0,this.concertSizes.forEach(function(f){var f=f.split("x"),t=[0,0],f=(f.forEach(function(p,h){t[h]=parseInt(p,10)}),{unwrapped:f,width:t[0],height:t[1]});r._logger.log("$$$$$$$$$$ Pushing Concert Size to Filtered Sizes:",f),r.filteredSizes.push(f)})),this._logger.log("$$$$$$$$$$ Filtered Sizes: ",this.filteredSizes),this._logger.log("$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$$")}d.prototype.hasInvalidMapping=function(){var i=this,o=!1;return this.invalidMappings.forEach(function(r){(i.wrappedSlot.slotId.includes(r)||i.posValue.includes(r))&&(o=!0)}),o},d.prototype.hasInvalidUnitSegment=function(){var i=this,o=!1;return this.invalidSegments.forEach(function(r){i.wrappedSlot.slotId.includes(r)&&(o=!0)}),o},d.prototype.hasInvalidAdUnit=function(){return this.invalidAdUnits.includes(this.wrappedSlot.adUnitMap)},e.Monetization=d},{"@turnercode/digital-ads-utilities/dist/Logger":4,"@turnercode/digital-ads-utilities/dist/getViewport":10}],40:[function(n,y,e){var l=this&&this.__assign||function(){return(l=Object.assign||function(o){for(var r,a=1,u=arguments.length;a<u;a++)for(var g in r=arguments[a])Object.prototype.hasOwnProperty.call(r,g)&&(o[g]=r[g]);return o}).apply(this,arguments)},c=(Object.defineProperty(e,"__esModule",{value:!0}),e.OptionsParser=void 0,n("./SlotWrapper")),d=n("linq-collections");function i(o){this.adFuel=o}i.prototype.processOptions=function(o){(a=this.adFuel.perf)!=null&&a.addMark("Processing Options"),(a=this.adFuel.logger)!=null&&a.log("----slots before processOptions",o.wrappedSlots.select(function(g){return g.toLogging()}).toArray());var r,a=o.options,u=(this.processPageAdUnit(o),a!=null&&a.usePageAdUnit?((r=this.adFuel.logger)!=null&&r.log("Using page ad unit for ad unit mapping."),this.processAdUnitMapping(this.adFuel.pageAdUnit,o)):a!=null&&a.adUnitMap&&this.processAdUnitMapping(a.adUnitMap,o),a!=null&&a.slotMap&&this.processSlotMapping(a.slotMap,o),a!=null&&a.exclude&&this.processExclusions(a.exclude,o),a!=null&&a.slots&&this.processIncludes(a.slots,o),a!=null&&a.posMap&&this.processPosMapping(a.posMap,o),[]);return a!=null&&a.sync?o.wrappedSlots.forEach(function(g){return u.push(g.slotId)}):a!=null&&a.syncSlots&&(Array.isArray(a.syncSlots)||(this.adFuel.adFuelOptions.syncSlots=[a.syncSlots]),u.push.apply(u,a.syncSlots)),o.wrappedSlots.where(function(g){return u.includes(g.slotId)}).forEach(function(g){return g.sync=!0}),(r=this.adFuel.logger)!=null&&r.log("----slots after processOptions",o.wrappedSlots.toArray()),o},i.prototype.processAdUnitMapping=function(o,r){var a,u,g=this;(a=this.adFuel.perf)!=null&&a.addMark("Processing AdUnit Mapping [".concat(JSON.stringify(o),"]")),(a=this.adFuel.logger)!=null&&a.log("Processing AdUnit Mapping ".concat(JSON.stringify(o))),u=JSON.parse(JSON.stringify(typeof o=="string"?{all:o}:o)),(a=this.adFuel.logger)!=null&&a.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= UnitMapClone: ",u),r.wrappedSlots.forEach(function(t){var f;(f=g.adFuel.logger)!=null&&f.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Checking if slot should be mapped: ",{slot:t,id:t.slotId,unitMapClone:u}),u.all!==void 0?((f=g.adFuel.logger)!=null&&f.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Mapping Slot to Global: ",u.all),t.adUnitMap=u.all):u[t.slotId]!==void 0&&((f=g.adFuel.logger)!=null&&f.log("-=-=-=-=-=-=-=-=-=-=-=-=-=-=-=-= Mapping Slot to Specific: ",u[t.slotId]),t.adUnitMap=u[t.slotId])})},i.prototype.processPageAdUnit=function(o){var r;this.adFuel.pageAdUnit===""&&1<o.wrappedSlots.toArray().length&&(o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id===""?(r=this.adFuel.logger)!=null&&r.error("Could not determine page ad unit.",o.wrappedSlots):((r=this.adFuel.logger)!=null&&r.info("Setting pageAdUnit to:",o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id),this.adFuel.pageAdUnit=o.wrappedSlots.toArray()[0].unWrappedSlot.rktr_ad_id))},i.prototype.processSlotMapping=function(o,r){(a=this.adFuel.logger)!=null&&a.log("[OptionsParser] Processing Slot Mapping",{slotMap:o,data:r});for(var a,u,g=this,t=0,f=Object.keys(o);t<f.length;t++)(p=>{var h=(u=r.wrappedSlots.firstOrDefault(function(w){return w.slotId===p}))==null?void 0:u.unWrappedSlot;h?r.wrappedSlots.firstOrDefault(function(w){return w.slotId===o[p]})?(u=g.adFuel.logger)!=null&&u.warn("Mapped ".concat(o[p]," slot already exists!")):document.getElementById(o[p])?((u=g.adFuel.logger)!=null&&u.log("[OptionsParser] Creating slot ".concat(p," mapped to ").concat(o[p])),r.wrappedSlots.push(new c.SlotWrapper(l(l({},h),{rktr_slot_id:o[p]})))):(u=g.adFuel.logger)!=null&&u.warn("".concat(o[p]," has no matching element on the page and won't be added to allWrappedSlots.'")):(u=g.adFuel.logger)!=null&&u.warn("Could not find source slot data for ".concat(p," in the registry or allWrappedSlots in processSlotMap."))})(f[t])},i.prototype.processPosMapping=function(o,r){var a,u,g=this;if((a=this.adFuel.perf)!=null&&a.addMark("Processing POS Mapping ".concat(JSON.stringify(o),"]")),(a=this.adFuel.logger)!=null&&a.log("[OptionsParser] Processing POS Mapping",o),typeof o=="string")r.wrappedSlots.forEach(function(p){var h;(h=g.adFuel.logger)!=null&&h.log("[OptionsParser] Setting pos to global:",o),p.posMap=o});else{var t,f=this;for(t in o)(p=>{var h=r.wrappedSlots.firstOrDefault(function(w){return w.slotId===p});if((u=f.adFuel.logger)!=null&&u.log("[OptionsParser] Validating specific pos:",{source:h,key:p}),!h)return(u=f.adFuel.logger)!=null&&u.warn("Cant' find slot ".concat(p," to use as a source in POS Mapping."));h&&((u=f.adFuel.logger)!=null&&u.log("[OptionsParser] Setting pos to specific:",{source:h,key:p}),h.posMap=o[p])})(t)}},i.prototype.processExclusions=function(o,r){var a;(a=this.adFuel.perf)!=null&&a.addMark("Processing Exclusions ".concat(JSON.stringify(o),"]")),Array.isArray(o)||(o=[o]),(a=this.adFuel.logger)!=null&&a.log("#################### Should process exclusions?",0<o.length),o.length<1||((a=this.adFuel.logger)!=null&&a.log("#################### Processing exclusions:",o),(a=this.adFuel.logger)!=null&&a.log("#################### Pre Exclusions: ",r.wrappedSlots),a=r.wrappedSlots.toArray().map(function(u){return o.includes(u.slotId)&&(u.isExcluded=!0),u}),r.wrappedSlots=new d.List(a),(r=this.adFuel.logger)!=null&&r.log("#################### Post Exclusions: ",a))},i.prototype.processIncludes=function(o,r){var a;(a=this.adFuel.perf)!=null&&a.addMark("Processing Slots (inclusions) ".concat(JSON.stringify(o))),Array.isArray(o)||(o=[o]),(a=this.adFuel.logger)!=null&&a.log("#################### Should process inclusions?",0<o.length),o.length<1||((a=this.adFuel.logger)!=null&&a.log("#################### Processing inclusions:",o),(a=this.adFuel.logger)!=null&&a.log("#################### Pre Inclusions: ",r.wrappedSlots),a=r.wrappedSlots.where(function(u){return o.includes(u.slotId)}).toArray().map(function(u){return u.isExcluded=!1,u}),r.wrappedSlots=new d.List(a),(r=this.adFuel.logger)!=null&&r.log("#################### Post Inclusions: ",a))},e.OptionsParser=i},{"./SlotWrapper":44,"linq-collections":24}],41:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.OverlayLoader=void 0;var l=n("@turnercode/digital-ads-utilities/dist/localization");function c(d){this.adFuel=d,this._overlaysHidden=!0}Object.defineProperty(c.prototype,"overlaysHidden",{get:function(){return this._overlaysHidden},enumerable:!1,configurable:!0}),c.prototype._togglePageOverlay=function(){var d,i,o,r;(d=this.adFuel.logger)!=null&&d.log("===== OVERLAY LOADER ===== Toggling Page Overlay...",this.overlaysHidden),this.overlaysHidden&&((d=document.createElement("style")).innerHTML="\n        html::-webkit-scrollbar:horizontal { display: none; width: 0; height: 0; }\n        html body::-webkit-scrollbar:horizontal { display: none; width: 0; height: 0; }\n      ",(i=document.createElement("div")).className="pos_overlay",i.id="page_overlay",i.style.position="fixed",i.style.bottom="0",i.style.left="10",i.style.textAlign="left",i.style.padding="5px",i.style.marginBottom="25px",i.style.fontFamily="Verdana",i.style.fontSize="12px",i.style.fontWeight="normal",i.style.lineHeight="12px",i.style.background="rgba(0,50,100,0.7)",i.style.color="#ffffff",i.style.zIndex="2147483000",i.style.overflow="hidden",i.style.overflowY="auto",i.style.overflowX="auto",i.style.width="500px",i.style.height="30vh",(o=document.createElement("ul")).style.listStyleType="none",o.style.margin="0px",o.style.marginTop="5px",o.style.marginBottom="5px",o.style.padding="5px",o.innerHTML=o.innerHTML+'<div style="position: absolute; top: 5px; right: 5px; align: right; text-align: right; display: inline-block;"><a style="cursor: copy; color: white;" onClick="copyPageInfo()">[COPY]</a></div>',r=this.adFuel,["afv","uc","mv","reg"].forEach(function(a){var u,g=document.createElement("li"),t=(g.style.margin="5px",g.style.padding="0px",r.version()),f=r.registeredModules.getKeys(),p=r.fetchedRegistries.keys(),h=((u=r.logger)!=null&&u.log("Version: ",t),(u=r.logger)!=null&&u.log("Modules: ",f),(u=r.logger)!=null&&u.log("Registries: ",p),((u=(u=window.WM)==null?void 0:u.UserConsent)==null?void 0:u.getRegion())||"global"),w=h==="global"?"N/A":JSON.stringify((u=(u=window.WM)==null?void 0:u.UserConsent)==null?void 0:u.getConsentState(),null,2);switch((u=r.logger)!=null&&u.log("Consent Region: -".concat(h,"-")),(u=r.logger)!=null&&u.log("Consent Status: ",w),g.style.direction="ltr",a){case"afv":g.innerHTML='<b style="font-size: 1.25em;">AdFuel v'.concat(t,"</b>");break;case"mv":g.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>Modules:</b>',g.innerHTML=g.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',f.forEach(function(v){var b,v=r.registeredModules.get(v);g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px;">'.concat((b=v.unWrappedModule)==null?void 0:b.MODULE_NAME," v").concat((b=v.unWrappedModule)==null?void 0:b.MODULE_VERSION,"</li>")}),g.innerHTML=g.innerHTML+"</ul>";break;case"reg":g.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>Registries:</b>',g.innerHTML=g.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',Array.from(p).forEach(function(s){var b,v;r.fetchedRegistries.get(s)!==void 0&&(b=r.fetchedRegistries.get(s)||null,v={rktr_id:"",rktr_deployed_date:new Date},b&&(v=b[0]),g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Name:</b> '.concat(v==null?void 0:v.rktr_id,"</li>"),g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Website:</b> <a style="color: yellow;" href="'.concat(s,'" target="_blank">').concat(s,"</a></li>"),g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px; padding-bottom: 5px; border-bottom: solid 1px white;"><b>Last Updated:</b> '.concat(v==null?void 0:v.rktr_deployed_date,"<br /></li>"))}),g.innerHTML=g.innerHTML+"</ul>";break;case"uc":g.innerHTML='<hr style="margin: 2px; padding: 2px; width: 80%"><b>User Consent:</b>',g.innerHTML=g.innerHTML+'<ul style="list-style-type: none; margin: 0px; margin-left: 5px; padding-top: 2px; padding-bottom: 2px;">',g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Region:</b> '.concat(h.toUpperCase(),"</li>"),g.innerHTML=g.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>Status:</b> '.concat(w?"Granted":"Denied","</li>"),g.innerHTML=g.innerHTML+"</ul>"}o.appendChild(g)}),i.appendChild(o),window.copyPageInfo=function(){var a=(a=document.getElementById("page_overlay"))==null?void 0:a.innerText.replace("[COPY]","");return console.log("Overlay Text: ",a),navigator.clipboard.writeText(a||""),a},this.showTemporalData(i),document.head.appendChild(d),document.body.appendChild(i))},c.prototype._toggleOverlays=function(){var d,i,o=this;if(this._overlaysHidden){(r=this.adFuel.logger)!=null&&r.log("===== OVERLAY LOADER ===== Showing Overlays..."),this._togglePageOverlay();var r=document.querySelectorAll(".adfuel-rendered");(d=this.adFuel.logger)!=null&&d.log("===== OVERLAY LOADER ===== Ad Slots:",r),u=r.length,r.forEach(function(t){var f=t.id,p=document.getElementById(f)||document.createElement("div"),h=(p.style.position="relative",(b=o.adFuel)==null?void 0:b.processedData),b=h.getKeys(),w={},s=(b.forEach(function(m){var E=h.get(m);(m=o.adFuel.logger)!=null&&m.log("===== OVERLAY LOADER ===== Registry:",E),E.wrappedSlots.forEach(function(O){O.unWrappedSlot.rktr_slot_id===f&&O.isBuilt&&O.gSlot&&((w=O).parentRegistry=E.url)})}),(b=o.adFuel.logger)!=null&&b.log("===== OVERLAY LOADER ===== data: ",{processedData:h,adElement:t,adFuel:Object.keys(o.adFuel),activeSlot:w}),f.substring(f.indexOf("_")+1)),b=document.createElement("div"),v=(b.className="pos_overlay",b.style.position="absolute",b.style.top="0",b.style.left="0",b.style.right="0",b.style.bottom="0",b.style.textAlign="left",b.style.padding="5px",b.style.fontFamily="Verdana",b.style.fontSize="12px",b.style.fontWeight="normal",b.style.lineHeight="12px",b.style.background="rgba(0,100,0,0.7)",b.style.color="#ffffff",b.style.zIndex="2147483000",b.style.resize="both",b.style.overflow="hidden",b.style.overflowY="auto",b.style.overflowX="auto",b.style.width=p.style.width+"px",b.style.height=p.style.height+"px",b.id="overlay_"+f,document.createElement("ul"));v.style.listStyleType="none",v.style.margin="0px",v.style.marginTop="5px",v.style.marginBottom="5px",v.style.padding="5px",v.innerHTML=v.innerHTML+'<div style="position: absolute; top: 5px; right: 5px; display: inline-block; align: right; text-align: right"><a style="cursor: copy; color: white;" onClick="copySlotInfo(\''.concat(f,"')\">[COPY]</a></div>"),["Slot","Details","Response","Programmatic","Bids","Targeting"].forEach(function(m){function E(F){return'<ul style="list-style-type: none; margin: 0px; margin-left: '.concat(F,'px; padding-top: 2px; padding-bottom: 2px;">')}function O(F){return'<li style="direction: ltr; margin-left: '.concat(F,'px; padding: 0px;">')}switch(v.innerHTML=v.innerHTML+O(5),m){case"Slot":v.innerHTML=v.innerHTML+'<b style="font-size: 1.25em;">Slot: '.concat(f,"</b>");break;case"Details":v.innerHTML=v.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Details:</b>',v.innerHTML=v.innerHTML+E(10),v.innerHTML=v.innerHTML+O(10)+"<b>POS:</b> "+s+"</li>",v.innerHTML=v.innerHTML+O(10)+"<b>AdUnit:</b> "+((w==null?void 0:w.adUnitMap)||(w==null?void 0:w.unWrappedSlot.rktr_ad_id))+"</li>",v.innerHTML=v.innerHTML+O(10)+"<b>Registry:</b> "+(w==null?void 0:w.parentRegistry)+"</li>",v.innerHTML=v.innerHTML+O(10)+"<b>Monetized:</b> "+(w&&w.monetization?w.monetization.isMonetized:"false")+"</li>",v.innerHTML=v.innerHTML+"</ul>";break;case"Response":v.innerHTML=v.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Response:</b>',v.innerHTML=v.innerHTML+E(10);var M,T=w.responseData;if(T)for(var C in T)C!=="renderedSize"&&(M=T[C])!==null&&(v.innerHTML=v.innerHTML+'<li style="margin: 0px; margin-left: 5px;"><b>'.concat(C,":</b> ").concat(JSON.stringify(M),"</li>"));v.innerHTML=v.innerHTML+O(10)+"<b>Rendered Size:</b> ".concat(typeof w.responseData.renderedSize!="string"?w.responseData.renderedSize.join("x"):w.responseData.renderedSize,"</li>"),v.innerHTML=v.innerHTML+"</ul>";break;case"Programmatic":v.innerHTML=v.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Programmatic:</b>',v.innerHTML=v.innerHTML+E(10),Object.keys(w.programmatic).forEach(function(F){var U;switch(v.innerHTML=v.innerHTML+O(10),F){case"a9":(U=o.adFuel.logger)!=null&&U.log("===== OVERLAY LOADER ===== A9: ",w.programmatic.a9),v.innerHTML=v.innerHTML+"<b>A9:</b> ",v.innerHTML=v.innerHTML+E(15),v.innerHTML=v.innerHTML+O(15)+"<b>SlotName:</b> "+w.programmatic.a9.slotName+"</li>",v.innerHTML=v.innerHTML+"</ul>";break;case"ias":(U=o.adFuel.logger)!=null&&U.log("===== OVERLAY LOADER ===== IAS: ",w.programmatic.ias),v.innerHTML=v.innerHTML+"<b>IAS:</b> ",v.innerHTML=v.innerHTML+E(15),v.innerHTML=v.innerHTML+O(15)+"<b>adUnitPath:</b> "+w.programmatic.ias.adUnitPath+"</li>",v.innerHTML=v.innerHTML+"</ul>";break;case"krux":(U=o.adFuel.logger)!=null&&U.log("===== OVERLAY LOADER ===== Krux: ",w.programmatic.krux),v.innerHTML=v.innerHTML+"<b>Krux:</b> ",v.innerHTML=v.innerHTML+E(15),v.innerHTML=v.innerHTML+O(15)+"<b>controlTag:</b> "+((0,l.isIntl)()?w.programmatic.krux.intl_controltag:w.programmatic.krux.dom_controltag)+"</li>",v.innerHTML=v.innerHTML+"</ul>";break;case"prebid":(U=o.adFuel.logger)!=null&&U.log("===== OVERLAY LOADER ===== Prebid: ",w.programmatic.prebid),v.innerHTML=v.innerHTML+"<b>Prebid:</b> ",v.innerHTML=v.innerHTML+E(15),Object.keys(w.programmatic.prebid).forEach(function(k){k!=="bids"&&(v.innerHTML=v.innerHTML+O(15)+"<b>".concat(k.toUpperCase(),":</b><br />"),v.innerHTML=v.innerHTML+E(20),Object.keys(w.programmatic.prebid[k]).forEach(function(W){var R=W!=="keywords"?w.programmatic.prebid[k][W]:JSON.stringify(w.programmatic.prebid[k][W]);v.innerHTML=v.innerHTML+O(20)+"<b>".concat(W,":</b> ").concat(R,"</li>")}),v.innerHTML=v.innerHTML+"</ul>",v.innerHTML=v.innerHTML+"</li>")}),v.innerHTML=v.innerHTML+"</ul>"}v.innerHTML=v.innerHTML+"</li>"}),v.innerHTML=v.innerHTML+"</ul>";break;case"Targeting":v.innerHTML=v.innerHTML+'<hr style="margin: 2px; padding: 2px; width: 80%"><b>Targeting:</b>',v.innerHTML=v.innerHTML+E(10),Object.keys(w.requestedSlotTargets).forEach(function(F){0<w.requestedSlotTargets[F].length?v.innerHTML=v.innerHTML+O(10)+"<b>".concat(F,":</b> ").concat(JSON.stringify(w.requestedSlotTargets[F].join(", ")),"</li>"):(F=o.adFuel.logger)!=null&&F.log("===== OVERLAY LOADER ===== No Slot Targets [".concat(w.slotId,"]"))}),v.innerHTML=v.innerHTML+"</ul>"}v.innerHTML=v.innerHTML+"</li>"}),window.copySlotInfo=function(m){return m=(m=document.getElementById("overlay_"+m))==null?void 0:m.innerText.replace("[COPY]",""),console.log("Overlay Text: ",m),navigator.clipboard.writeText(m||""),m},b.appendChild(v),p.appendChild(b)}),this._overlaysHidden=!1}else{(d=this.adFuel.logger)!=null&&d.log("===== OVERLAY LOADER ===== Removing Overlays...");for(var a=document.querySelectorAll(".pos_overlay"),u=a.length,g=0;g<u;g++)(i=a[g].parentNode)!=null&&i.removeChild(a[g]);this._overlaysHidden=!0}},c.prototype.startConsoleTool=function(){var d,i=this;try{document.addEventListener("keydown",function(o){o.isComposing||o.keyCode===229||o.code==="229"||o.code==="KeyZ"&&o.ctrlKey&&o.shiftKey&&i._toggleOverlays()})}catch(o){(d=this.adFuel.logger)!=null&&d.log("Error Starting Console Tool: ",o)}},c.prototype.getTemporalData=function(){var d=[];return performance.getEntries().forEach(function(i,o){o===0?["connectEnd","connectStart","domComplete","domContentLoadedEventStart","domContentLoadedEventEnd","domInteractive","domainLookupStart","domainLookupEnd","fetchStart","loadEventEnd","loadEventStart","requestStart","responseStart","responseEnd"].forEach(function(r){i[r]!==1&&d.push({name:r,startTime:i[r],duration:0,entryType:"navigation"})}):(0<=i.name.indexOf("ADFUEL")||0<=["gpt-tag-load","gpt-first-ad-request","gpt-first-ad-render"].indexOf(i.name))&&d.push(i)}),d.sort(function(i,o){return i.startTime>o.startTime?1:i.startTime<o.startTime?-1:0}),d},c.prototype.showTemporalData=function(d){var i=document.createElement("div"),o=(i.style.textAlign="left",i.innerHTML="<b>Performance Data:</b>",this.getTemporalData()),r=["name","entryType","startTime","duration"],a=document.createElement("table"),u=(a.border="1",a.style.width="100%",document.createElement("thead")),g=document.createElement("tr"),t=(u.appendChild(g),r.forEach(function(f){var p=document.createElement("td");p.innerHTML=f.toUpperCase(),p.style.padding="5px",p.style.paddingLeft="5px",p.style.paddingRight="5px",p.style.fontSize="1em",p.style.fontWeight="bolder",p.style.textAlign="center",g.appendChild(p)}),document.createElement("tbody"));o.forEach(function(f){var p=document.createElement("tr");p.style.padding="15px",r.forEach(function(h){var w=document.createElement("td");switch(h){case"name":w.innerHTML=f[h].replace("[ADFUEL TS] ","");break;case"startTime":case"duration":w.innerHTML=parseFloat(f[h]).toFixed(4);break;default:w.innerHTML=f[h]}w.style.padding="2px",w.style.paddingLeft="5px",w.style.paddingRight="5px",w.style.fontSize=".8em",w.style.fontWeight="normal",p.appendChild(w)}),t.appendChild(p)}),a.appendChild(u),a.appendChild(t),i.appendChild(a),d.appendChild(i)},e.OverlayLoader=c},{"@turnercode/digital-ads-utilities/dist/localization":14}],42:[function(p,y,e){var l,c,d=this&&this.__extends||(l=function(w,s){return(l=Object.setPrototypeOf||({__proto__:[]}instanceof Array?function(b,v){b.__proto__=v}:function(b,v){for(var m in v)Object.prototype.hasOwnProperty.call(v,m)&&(b[m]=v[m])}))(w,s)},function(w,s){if(typeof s!="function"&&s!==null)throw new TypeError("Class extends value "+String(s)+" is not a constructor or null");function b(){this.constructor=w}l(w,s),w.prototype=s===null?Object.create(s):(b.prototype=s.prototype,new b)}),i=this&&this.__awaiter||function(w,s,b,v){return new(b=b||Promise)(function(m,E){function O(C){try{T(v.next(C))}catch(F){E(F)}}function M(C){try{T(v.throw(C))}catch(F){E(F)}}function T(C){var F;C.done?m(C.value):((F=C.value)instanceof b?F:new b(function(U){U(F)})).then(O,M)}T((v=v.apply(w,s||[])).next())})},o=this&&this.__generator||function(w,s){var b,v,m,E={label:0,sent:function(){if(1&m[0])throw m[1];return m[1]},trys:[],ops:[]},O={next:M(0),throw:M(1),return:M(2)};return typeof Symbol=="function"&&(O[Symbol.iterator]=function(){return this}),O;function M(T){return function(C){var F=[T,C];if(b)throw new TypeError("Generator is already executing.");for(;E=O&&F[O=0]?0:E;)try{if(b=1,v&&(m=2&F[0]?v.return:F[0]?v.throw||((m=v.return)&&m.call(v),0):v.next)&&!(m=m.call(v,F[1])).done)return m;switch(v=0,(F=m?[2&F[0],m.value]:F)[0]){case 0:case 1:m=F;break;case 4:return E.label++,{value:F[1],done:!1};case 5:E.label++,v=F[1],F=[0];continue;case 7:F=E.ops.pop(),E.trys.pop();continue;default:if(!(m=0<(m=E.trys).length&&m[m.length-1])&&(F[0]===6||F[0]===2)){E=0;continue}if(F[0]===3&&(!m||F[1]>m[0]&&F[1]<m[3]))E.label=F[1];else if(F[0]===6&&E.label<m[1])E.label=m[1],m=F;else{if(!(m&&E.label<m[2])){m[2]&&E.ops.pop(),E.trys.pop();continue}E.label=m[2],E.ops.push(F)}}F=s.call(w,E)}catch(U){F=[6,U],v=0}finally{b=m=0}if(5&F[0])throw F[1];return{value:F[0]?F[1]:void 0,done:!0}}}},r=(Object.defineProperty(e,"__esModule",{value:!0}),e.RegistryLoader=void 0,p("./AController")),a=p("@turnercode/digital-ads-utilities"),u=p("linq-collections"),g=p("../system"),t=p("."),f=p("./OptionsParser"),p=(c=r.AController,d(h,c),Object.defineProperty(h.prototype,"readyId",{get:function(){return"registry"},enumerable:!1,configurable:!0}),h.prototype.loadRegistryFromUrl=function(w,s){var b;return i(this,void 0,void 0,function(){var v,m=this;return o(this,function(E){return(b=this.adFuel.logger)!=null&&b.info("Loading registry JSON from ".concat(w)),typeof w!="string"?(b=this.adFuel.logger)!=null&&b.log("loadRegistryFromUrl was given a Url value that wasn't a string.",console.trace()):(w.slice(2+(w.lastIndexOf(".")-1>>>0))==="js"&&((b=this.adFuel.logger)!=null&&b.warn("The 'min.js' and '.js' registry file formats are deprecated. Please change your code to use the '.json' registry file."),(v=w.split(".")).pop(),w="".concat(v.filter(function(O){return O.toLowerCase()!=="min"}).join("."),".json"),(b=this.adFuel.logger)!=null)&&b.info("Converting input to use '.json' registry file. Converted to: ".concat(w,". ")),w=(0,a.normalizeUrl)(w),(b=this.adFuel.logger)!=null&&b.log("Looking for Registry JSON: ",w),this.fetchedRegistries.has(w)?((b=this.adFuel.logger)!=null&&b.log("Fetching Registry object from Cache"),v=this.fetchedRegistries.get(w),(b=this.adFuel.logger)!=null&&b.log("===== [RegistryLoader/loadRegistryFromUrl] Registry: ",v),this.loadRegistryFromJson(JSON.parse(JSON.stringify(v)),s,w)):((b=this.adFuel.logger)!=null&&b.log("Fetching Registry JSON from CDN"),(b=this.adFuel.perf)!=null&&b.addMark("Loading Registry JSON START"),fetch(w).then(function(O){return O.json()}).then(function(O){return m.fetchedRegistries.set(w,JSON.parse(JSON.stringify(O.registry))),O.registry}).then(function(O){var M;(M=m.adFuel.perf)!=null&&M.addMark("Loading Registry JSON END"),(M=m.adFuel.perf)!=null&&M.addMeasure("Loading Registry JSON"),m.loadRegistryFromJson(O,s,w)}).catch(function(O){var M;throw(M=m.adFuel.logger)!=null&&M.error("Error loading ".concat(w),O),Error(O)}))),[2]})})},h.prototype.loadRegistryFromJson=function(w,s,b){(O=this.adFuel.perf)!=null&&O.addMark("Processing Registry [".concat(w[0].rktr_id,"]")),b=b||"".concat(w[0].rktr_id),(O=this.adFuel.logger)!=null&&O.log("===== [RegistryLoader/loadRegistryFromJson] Registry: ",{registry:w,jsonUrl:b});var v,m=new u.List,E=w[0];E.slots=[],(O=this.adFuel.logger)!=null&&O.log("===== [RegistryLoader/loadRegistryFromJson] Options: ",s);for(var O,M=1;M<w.length;M++)E.slots.push(JSON.parse(JSON.stringify(w[M]))),s.slots&&s.slots.length!==0?0<=s.slots.indexOf(JSON.parse(JSON.stringify(w[M])).rktr_slot_id)&&((v=this.adFuel.logger)!=null&&v.log("===== [RegistryLoader/loadRegistryFromJson] Selective Slot: ",w[M]),m.push(new g.SlotWrapper(JSON.parse(JSON.stringify(w[M]))))):((v=this.adFuel.logger)!=null&&v.log("===== [RegistryLoader/loadRegistryFromJson] All Slots: ",w[M]),m.push(new g.SlotWrapper(JSON.parse(JSON.stringify(w[M])))));O=new t.GptProcessData().build(E,m,s,b),(b=this.adFuel.logger)!=null&&b.log("data variable in loadRegistryfromJson",O),this.loadRegistryFromObject(O)},h.prototype.loadRegistryFromObject=function(w){var s;w=new f.OptionsParser(this.adFuel).processOptions(w),(s=this.adFuel.logger)!=null&&s.info("GptProcessDataObject for processing",w),this.adFuel.missionControl.processQueue.push(w),this.missionControl.setReady(this)},h);function h(w){var s=c.call(this,w.missionControl)||this;return s.adFuel=w,s.fetchedRegistries=new Map,s}e.RegistryLoader=p},{".":46,"../system":46,"./AController":32,"./OptionsParser":40,"@turnercode/digital-ads-utilities":12,"linq-collections":24}],43:[function(n,y,e){function l(c){this.unwrapped=c}Object.defineProperty(e,"__esModule",{value:!0}),e.SizeWrapper=void 0,Object.defineProperty(l.prototype,"width",{get:function(){return+this.unwrapped[0]},enumerable:!1,configurable:!0}),Object.defineProperty(l.prototype,"height",{get:function(){return+this.unwrapped[1]},enumerable:!1,configurable:!0}),e.SizeWrapper=l},{}],44:[function(n,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.SlotWrapper=void 0;var l=n("./Monetization"),c=n("./SizeWrapper"),d=n("./ViewportWrapper");function i(o){this.unWrappedSlot=o,this._sync=!1,this._isExcluded=!1,this._hasBeenDisplayed=!1,this._gslot=void 0,this._monetization={isMonetized:!1,filteredSizes:[],isSuppressed:!1},this._adUnitMap="",this._parentRegistry="",this._responsive=[],this._sizes=[],this._requestedSlotTargets={},this._posMap="",this.programmatic={},this.responseData={advertiserId:void 0,campaignId:void 0,creativeId:void 0,isEmpty:!0,lineItemId:void 0,renderedSize:"",sourceAgnosticCreativeId:void 0,sourceAgnosticLineItemId:void 0},this._adUnitMap=o.rktr_ad_id,this._posMap="";for(var r=0,a=this.targeting;r<a.length;r++){var u=a[r];if(u[0]==="pos"){this._posMap=u[1][0];break}}this.unWrappedSlot.responsive=this.formatResponsiveMapping(o);for(var g=0,t=this.unWrappedSlot.responsive;g<t.length;g++){var f=t[g];this._responsive.push(new d.ViewportWrapper(f))}for(var p=0,h=this.unWrappedSlot.sizes;p<h.length;p++){var w=h[p];this._sizes.push(new c.SizeWrapper(w))}this._monetization=new l.Monetization(this),this._parentRegistry=""}i.prototype.formatResponsiveMapping=function(o){return o.responsive.map(function(r){return r.map(function(a){return a[0]==="suppress"?[]:a.map(function(u){return Array.isArray(u)?u.map(function(g){return typeof g!="string"||g==="fluid"?g:parseInt(g,10)}):typeof u=="string"?parseInt(u,10):u})})})},Object.defineProperty(i.prototype,"slotId",{get:function(){return this.unWrappedSlot.rktr_slot_id},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sync",{get:function(){return this._sync},set:function(o){this._sync=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isOutOfPage",{get:function(){return 1<=this.unWrappedSlot.rktr_slot_id.indexOf("_oop")},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isBuilt",{get:function(){return!!this._gslot},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isExcluded",{get:function(){return this._isExcluded},set:function(o){this._isExcluded=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"hasBeenDisplayed",{get:function(){return this._hasBeenDisplayed},set:function(o){this._hasBeenDisplayed=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"slotExistsOnPage",{get:function(){return!!document.getElementById(this.slotId)},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"gSlot",{get:function(){return this._gslot},set:function(o){this._gslot=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"monetization",{get:function(){return this._monetization},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"parentRegistry",{get:function(){return this._parentRegistry},set:function(o){this._parentRegistry=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"adUnitMap",{get:function(){return this._adUnitMap},set:function(o){this._adUnitMap=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"posMap",{get:function(){return this._posMap||""},set:function(o){this._posMap=o},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"targeting",{get:function(){return this.unWrappedSlot.targeting},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"responsive",{get:function(){return this._responsive},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"sizes",{get:function(){return this._sizes},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"isSinglton",{get:function(){return this.unWrappedSlot.rktr_slot_id.indexOf("ad_mod")===0},enumerable:!1,configurable:!0}),Object.defineProperty(i.prototype,"requestedSlotTargets",{get:function(){return this._requestedSlotTargets},set:function(o){this._requestedSlotTargets=o},enumerable:!1,configurable:!0}),i.prototype.toLogging=function(){return{slotId:this.slotId,isExcluded:this.isExcluded,isBuilt:this.isBuilt,hasBeenDisplayed:this.hasBeenDisplayed,slotExistsOnPage:this.slotExistsOnPage,isOOP:this.isOutOfPage}},e.SlotWrapper=i},{"./Monetization":39,"./SizeWrapper":43,"./ViewportWrapper":45}],45:[function(c,y,e){Object.defineProperty(e,"__esModule",{value:!0}),e.ViewportWrapper=void 0;var l=c("./SizeWrapper"),c=(Object.defineProperty(d.prototype,"viewport",{get:function(){return new l.SizeWrapper(this.unwrapped[0])},enumerable:!1,configurable:!0}),Object.defineProperty(d.prototype,"sizes",{get:function(){for(var i={sizes:[],suppressed:!1},o=0,r=this.unwrapped[1];o<r.length;o++){var a=r[o];Array.isArray(a)?i.sizes.push(new l.SizeWrapper(a)):i.suppressed=!0}return i},enumerable:!1,configurable:!0}),d);function d(i){this.unwrapped=i}e.ViewportWrapper=c},{"./SizeWrapper":43}],46:[function(n,y,e){var l=this&&this.__createBinding||(Object.create?function(d,i,o,r){r===void 0&&(r=o);var a=Object.getOwnPropertyDescriptor(i,o);a&&("get"in a?i.__esModule:!a.writable&&!a.configurable)||(a={enumerable:!0,get:function(){return i[o]}}),Object.defineProperty(d,r,a)}:function(d,i,o,r){d[r=r===void 0?o:r]=i[o]}),c=this&&this.__exportStar||function(d,i){for(var o in d)o==="default"||Object.prototype.hasOwnProperty.call(i,o)||l(i,d,o)};Object.defineProperty(e,"__esModule",{value:!0}),e.processors=void 0,e.processors=n("../processors/index"),c(n("./MissionControl"),e),c(n("./SlotWrapper"),e),c(n("./ViewportWrapper"),e),c(n("./SizeWrapper"),e),c(n("./GoogleApi"),e),c(n("./GptProcessData"),e),c(n("./RegistryLoader"),e),c(n("./ModuleManager"),e),c(n("./GptScriptLoader"),e),c(n("./OverlayLoader"),e),c(n("./BaseAdFuelOptions"),e)},{"../processors/index":31,"./BaseAdFuelOptions":33,"./GoogleApi":34,"./GptProcessData":35,"./GptScriptLoader":36,"./MissionControl":37,"./ModuleManager":38,"./OverlayLoader":41,"./RegistryLoader":42,"./SizeWrapper":43,"./SlotWrapper":44,"./ViewportWrapper":45}],47:[function(n,y,e){y.exports={family:"Rusty Robotman",major:3,minor:0,revision:51}},{}]},{},[26])(26)})});var Ue=cs();function Es(){Ue.get("TRINITY_CONFIGURATION.international.michonne.features.enableCep")&&ps(),Ue.get("TRINITY_CONFIGURATION.international.michonne.features.enableInViewRefresh")&&hs(),Ue.get("TRINITY_CONFIGURATION.international.michonne.features.enableMalvertisingDetection")&&ms(),Ue.get("TRINITY_CONFIGURATION.international.michonne.features.enableBlockThrough")&&ws(),_s()}(function(){window.AdFuelOptions?Es():window.addEventListener("adfuel.loaded",Es)})();})();
//# sourceMappingURL=cnn-edition-adfuel-body.map
