(()=>{var So=Object.create;var Me=Object.defineProperty,bo=Object.defineProperties,wo=Object.getOwnPropertyDescriptor,Io=Object.getOwnPropertyDescriptors,Eo=Object.getOwnPropertyNames,lr=Object.getOwnPropertySymbols,To=Object.getPrototypeOf,fr=Object.prototype.hasOwnProperty,Po=Object.prototype.propertyIsEnumerable;var pr=(e,r,t)=>r in e?Me(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,A=(e,r)=>{for(var t in r||(r={}))fr.call(r,t)&&pr(e,t,r[t]);if(lr)for(var t of lr(r))Po.call(r,t)&&pr(e,t,r[t]);return e},Ee=(e,r)=>bo(e,Io(r));var V=(e,r)=>()=>(e&&(r=e(e=0)),r);var G=(e,r)=>()=>(r||e((r={exports:{}}).exports,r),r.exports),Co=(e,r)=>{for(var t in r)Me(e,t,{get:r[t],enumerable:!0})},gr=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Eo(r))!fr.call(e,o)&&o!==t&&Me(e,o,{get:()=>r[o],enumerable:!(n=wo(r,o))||n.enumerable});return e};var Pt=(e,r,t)=>(t=e!=null?So(To(e)):{},gr(r||!e||!e.__esModule?Me(t,"default",{value:e,enumerable:!0}):t,e)),Ao=e=>gr(Me({},"__esModule",{value:!0}),e);function Ne(){if(!tt&&(tt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!tt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return tt(xo)}var tt,xo,At=V(()=>{xo=new Uint8Array(16)});var _r,Sr=V(()=>{_r=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i});function jo(e){return typeof e=="string"&&_r.test(e)}var le,Ue=V(()=>{Sr();le=jo});function ko(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(L[e[r+0]]+L[e[r+1]]+L[e[r+2]]+L[e[r+3]]+"-"+L[e[r+4]]+L[e[r+5]]+"-"+L[e[r+6]]+L[e[r+7]]+"-"+L[e[r+8]]+L[e[r+9]]+"-"+L[e[r+10]]+L[e[r+11]]+L[e[r+12]]+L[e[r+13]]+L[e[r+14]]+L[e[r+15]]).toLowerCase();if(!le(t))throw TypeError("Stringified UUID is invalid");return t}var L,rt,pe,Fe=V(()=>{Ue();L=[];for(rt=0;rt<256;++rt)L.push((rt+256).toString(16).substr(1));pe=ko});function Ro(e,r,t){var n=r&&t||0,o=r||new Array(16);e=e||{};var s=e.node||br,i=e.clockseq!==void 0?e.clockseq:Ot;if(s==null||i==null){var a=e.random||(e.rng||Ne)();s==null&&(s=br=[a[0]|1,a[1],a[2],a[3],a[4],a[5]]),i==null&&(i=Ot=(a[6]<<8|a[7])&16383)}var c=e.msecs!==void 0?e.msecs:Date.now(),u=e.nsecs!==void 0?e.nsecs:jt+1,l=c-xt+(u-jt)/1e4;if(l<0&&e.clockseq===void 0&&(i=i+1&16383),(l<0||c>xt)&&e.nsecs===void 0&&(u=0),u>=1e4)throw new Error("uuid.v1(): Can't create more than 10M uuids/sec");xt=c,jt=u,Ot=i,c+=122192928e5;var d=((c&268435455)*1e4+u)%4294967296;o[n++]=d>>>24&255,o[n++]=d>>>16&255,o[n++]=d>>>8&255,o[n++]=d&255;var p=c/4294967296*1e4&268435455;o[n++]=p>>>8&255,o[n++]=p&255,o[n++]=p>>>24&15|16,o[n++]=p>>>16&255,o[n++]=i>>>8|128,o[n++]=i&255;for(var f=0;f<6;++f)o[n+f]=s[f];return r||pe(o)}var br,Ot,xt,jt,wr,Ir=V(()=>{At();Fe();xt=0,jt=0;wr=Ro});function Do(e){if(!le(e))throw TypeError("Invalid UUID");var r,t=new Uint8Array(16);return t[0]=(r=parseInt(e.slice(0,8),16))>>>24,t[1]=r>>>16&255,t[2]=r>>>8&255,t[3]=r&255,t[4]=(r=parseInt(e.slice(9,13),16))>>>8,t[5]=r&255,t[6]=(r=parseInt(e.slice(14,18),16))>>>8,t[7]=r&255,t[8]=(r=parseInt(e.slice(19,23),16))>>>8,t[9]=r&255,t[10]=(r=parseInt(e.slice(24,36),16))/1099511627776&255,t[11]=r/4294967296&255,t[12]=r>>>24&255,t[13]=r>>>16&255,t[14]=r>>>8&255,t[15]=r&255,t}var nt,kt=V(()=>{Ue();nt=Do});function Lo(e){e=unescape(encodeURIComponent(e));for(var r=[],t=0;t<e.length;++t)r.push(e.charCodeAt(t));return r}function ot(e,r,t){function n(o,s,i,a){if(typeof o=="string"&&(o=Lo(o)),typeof s=="string"&&(s=nt(s)),s.length!==16)throw TypeError("Namespace must be array-like (16 iterable integer values, 0-255)");var c=new Uint8Array(16+o.length);if(c.set(s),c.set(o,s.length),c=t(c),c[6]=c[6]&15|r,c[8]=c[8]&63|128,i){a=a||0;for(var u=0;u<16;++u)i[a+u]=c[u];return i}return pe(c)}try{n.name=e}catch(o){}return n.DNS=Mo,n.URL=No,n}var Mo,No,Rt=V(()=>{Fe();kt();Mo="6ba7b810-9dad-11d1-80b4-00c04fd430c8",No="6ba7b811-9dad-11d1-80b4-00c04fd430c8"});function Uo(e){if(typeof e=="string"){var r=unescape(encodeURIComponent(e));e=new Uint8Array(r.length);for(var t=0;t<r.length;++t)e[t]=r.charCodeAt(t)}return Fo(qo(Bo(e),e.length*8))}function Fo(e){for(var r=[],t=e.length*32,n="0123456789abcdef",o=0;o<t;o+=8){var s=e[o>>5]>>>o%32&255,i=parseInt(n.charAt(s>>>4&15)+n.charAt(s&15),16);r.push(i)}return r}function Er(e){return(e+64>>>9<<4)+14+1}function qo(e,r){e[r>>5]|=128<<r%32,e[Er(r)-1]=r;for(var t=1732584193,n=-271733879,o=-1732584194,s=271733878,i=0;i<e.length;i+=16){var a=t,c=n,u=o,l=s;t=N(t,n,o,s,e[i],7,-680876936),s=N(s,t,n,o,e[i+1],12,-389564586),o=N(o,s,t,n,e[i+2],17,606105819),n=N(n,o,s,t,e[i+3],22,-1044525330),t=N(t,n,o,s,e[i+4],7,-176418897),s=N(s,t,n,o,e[i+5],12,1200080426),o=N(o,s,t,n,e[i+6],17,-1473231341),n=N(n,o,s,t,e[i+7],22,-45705983),t=N(t,n,o,s,e[i+8],7,1770035416),s=N(s,t,n,o,e[i+9],12,-1958414417),o=N(o,s,t,n,e[i+10],17,-42063),n=N(n,o,s,t,e[i+11],22,-1990404162),t=N(t,n,o,s,e[i+12],7,1804603682),s=N(s,t,n,o,e[i+13],12,-40341101),o=N(o,s,t,n,e[i+14],17,-1502002290),n=N(n,o,s,t,e[i+15],22,1236535329),t=U(t,n,o,s,e[i+1],5,-165796510),s=U(s,t,n,o,e[i+6],9,-1069501632),o=U(o,s,t,n,e[i+11],14,643717713),n=U(n,o,s,t,e[i],20,-373897302),t=U(t,n,o,s,e[i+5],5,-701558691),s=U(s,t,n,o,e[i+10],9,38016083),o=U(o,s,t,n,e[i+15],14,-660478335),n=U(n,o,s,t,e[i+4],20,-405537848),t=U(t,n,o,s,e[i+9],5,568446438),s=U(s,t,n,o,e[i+14],9,-1019803690),o=U(o,s,t,n,e[i+3],14,-187363961),n=U(n,o,s,t,e[i+8],20,1163531501),t=U(t,n,o,s,e[i+13],5,-1444681467),s=U(s,t,n,o,e[i+2],9,-51403784),o=U(o,s,t,n,e[i+7],14,1735328473),n=U(n,o,s,t,e[i+12],20,-1926607734),t=F(t,n,o,s,e[i+5],4,-378558),s=F(s,t,n,o,e[i+8],11,-2022574463),o=F(o,s,t,n,e[i+11],16,1839030562),n=F(n,o,s,t,e[i+14],23,-35309556),t=F(t,n,o,s,e[i+1],4,-1530992060),s=F(s,t,n,o,e[i+4],11,1272893353),o=F(o,s,t,n,e[i+7],16,-155497632),n=F(n,o,s,t,e[i+10],23,-1094730640),t=F(t,n,o,s,e[i+13],4,681279174),s=F(s,t,n,o,e[i],11,-358537222),o=F(o,s,t,n,e[i+3],16,-722521979),n=F(n,o,s,t,e[i+6],23,76029189),t=F(t,n,o,s,e[i+9],4,-640364487),s=F(s,t,n,o,e[i+12],11,-421815835),o=F(o,s,t,n,e[i+15],16,530742520),n=F(n,o,s,t,e[i+2],23,-995338651),t=q(t,n,o,s,e[i],6,-198630844),s=q(s,t,n,o,e[i+7],10,1126891415),o=q(o,s,t,n,e[i+14],15,-1416354905),n=q(n,o,s,t,e[i+5],21,-57434055),t=q(t,n,o,s,e[i+12],6,1700485571),s=q(s,t,n,o,e[i+3],10,-1894986606),o=q(o,s,t,n,e[i+10],15,-1051523),n=q(n,o,s,t,e[i+1],21,-2054922799),t=q(t,n,o,s,e[i+8],6,1873313359),s=q(s,t,n,o,e[i+15],10,-30611744),o=q(o,s,t,n,e[i+6],15,-1560198380),n=q(n,o,s,t,e[i+13],21,1309151649),t=q(t,n,o,s,e[i+4],6,-145523070),s=q(s,t,n,o,e[i+11],10,-1120210379),o=q(o,s,t,n,e[i+2],15,718787259),n=q(n,o,s,t,e[i+9],21,-343485551),t=fe(t,a),n=fe(n,c),o=fe(o,u),s=fe(s,l)}return[t,n,o,s]}function Bo(e){if(e.length===0)return[];for(var r=e.length*8,t=new Uint32Array(Er(r)),n=0;n<r;n+=8)t[n>>5]|=(e[n/8]&255)<<n%32;return t}function fe(e,r){var t=(e&65535)+(r&65535),n=(e>>16)+(r>>16)+(t>>16);return n<<16|t&65535}function Ko(e,r){return e<<r|e>>>32-r}function st(e,r,t,n,o,s){return fe(Ko(fe(fe(r,e),fe(n,s)),o),t)}function N(e,r,t,n,o,s,i){return st(r&t|~r&n,e,r,o,s,i)}function U(e,r,t,n,o,s,i){return st(r&n|t&~n,e,r,o,s,i)}function F(e,r,t,n,o,s,i){return st(r^t^n,e,r,o,s,i)}function q(e,r,t,n,o,s,i){return st(t^(r|~n),e,r,o,s,i)}var Tr,Pr=V(()=>{Tr=Uo});var Wo,Cr,Ar=V(()=>{Rt();Pr();Wo=ot("v3",48,Tr),Cr=Wo});function Vo(e,r,t){e=e||{};var n=e.random||(e.rng||Ne)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(var o=0;o<16;++o)r[t+o]=n[o];return r}return pe(n)}var ge,Or=V(()=>{At();Fe();ge=Vo});function Go(e,r,t,n){switch(e){case 0:return r&t^~r&n;case 1:return r^t^n;case 2:return r&t^r&n^t&n;case 3:return r^t^n}}function Dt(e,r){return e<<r|e>>>32-r}function $o(e){var r=[1518500249,1859775393,2400959708,3395469782],t=[1732584193,4023233417,2562383102,271733878,3285377520];if(typeof e=="string"){var n=unescape(encodeURIComponent(e));e=[];for(var o=0;o<n.length;++o)e.push(n.charCodeAt(o))}else Array.isArray(e)||(e=Array.prototype.slice.call(e));e.push(128);for(var s=e.length/4+2,i=Math.ceil(s/16),a=new Array(i),c=0;c<i;++c){for(var u=new Uint32Array(16),l=0;l<16;++l)u[l]=e[c*64+l*4]<<24|e[c*64+l*4+1]<<16|e[c*64+l*4+2]<<8|e[c*64+l*4+3];a[c]=u}a[i-1][14]=(e.length-1)*8/Math.pow(2,32),a[i-1][14]=Math.floor(a[i-1][14]),a[i-1][15]=(e.length-1)*8&4294967295;for(var d=0;d<i;++d){for(var p=new Uint32Array(80),f=0;f<16;++f)p[f]=a[d][f];for(var g=16;g<80;++g)p[g]=Dt(p[g-3]^p[g-8]^p[g-14]^p[g-16],1);for(var h=t[0],v=t[1],_=t[2],w=t[3],S=t[4],I=0;I<80;++I){var P=Math.floor(I/20),C=Dt(h,5)+Go(P,v,_,w)+S+r[P]+p[I]>>>0;S=w,w=_,_=Dt(v,30)>>>0,v=h,h=C}t[0]=t[0]+h>>>0,t[1]=t[1]+v>>>0,t[2]=t[2]+_>>>0,t[3]=t[3]+w>>>0,t[4]=t[4]+S>>>0}return[t[0]>>24&255,t[0]>>16&255,t[0]>>8&255,t[0]&255,t[1]>>24&255,t[1]>>16&255,t[1]>>8&255,t[1]&255,t[2]>>24&255,t[2]>>16&255,t[2]>>8&255,t[2]&255,t[3]>>24&255,t[3]>>16&255,t[3]>>8&255,t[3]&255,t[4]>>24&255,t[4]>>16&255,t[4]>>8&255,t[4]&255]}var xr,jr=V(()=>{xr=$o});var Ho,kr,Rr=V(()=>{Rt();jr();Ho=ot("v5",80,xr),kr=Ho});var Dr,Lr=V(()=>{Dr="00000000-0000-0000-0000-000000000000"});function Jo(e){if(!le(e))throw TypeError("Invalid UUID");return parseInt(e.substr(14,1),16)}var Mr,Nr=V(()=>{Ue();Mr=Jo});var Ur={};Co(Ur,{NIL:()=>Dr,parse:()=>nt,stringify:()=>pe,v1:()=>wr,v3:()=>Cr,v4:()=>ge,v5:()=>kr,validate:()=>le,version:()=>Mr});var qe=V(()=>{Ir();Ar();Or();Rr();Lr();Nr();Ue();Fe();kt()});var Qr=G(zr=>{var Se=256,lt=[],dt;for(;Se--;)lt[Se]=(Se+256).toString(16).substring(1);function ls(){var e=0,r,t="";if(!dt||Se+16>256){for(dt=Array(e=256);e--;)dt[e]=256*Math.random()|0;e=Se=0}for(;e<16;e++)r=dt[Se+e],e==6?t+=lt[r&15|64]:e==8?t+=lt[r&63|128]:t+=lt[r],e&1&&e>1&&e<11&&(t+="-");return Se++,t}zr.v4=ls});var pt=G((cc,Zr)=>{"use strict";var ps=Object.prototype.hasOwnProperty,fs=String.prototype.charAt,gs=Object.prototype.toString,hs=function(e,r){return fs.call(e,r)},Mt=function(r,t){return ps.call(r,t)},ms=function(r){return gs.call(r)==="[object String]"},vs=function(r){return r!=null&&typeof r!="function"&&typeof r.length=="number"},Yr=function(r,t){t=t||Mt;for(var n=[],o=0,s=r.length;o<s;o+=1)t(r,o)&&n.push(String(o));return n},ys=function(r,t){t=t||Mt;var n=[];for(var o in r)t(r,o)&&n.push(String(o));return n},_s=function(r){return r==null?[]:ms(r)?Yr(r,hs):vs(r)?Yr(r,Mt):ys(r)};Zr.exports=_s});var Ft=G((uc,Ut)=>{"use strict";var Nt=pt(),Ss=(qe(),Ao(Ur)).v4,Xr={_data:{},length:0,setItem:function(e,r){return this._data[e]=r,this.length=Nt(this._data).length,r},getItem:function(e){return e in this._data?this._data[e]:null},removeItem:function(e){return e in this._data&&delete this._data[e],this.length=Nt(this._data).length,null},clear:function(){this._data={},this.length=0},key:function(e){return Nt(this._data)[e]}};function bs(){try{if(!window.localStorage)return!1;var e=Ss();window.localStorage.setItem(e,"test_value");var r=window.localStorage.getItem(e);return window.localStorage.removeItem(e),r==="test_value"}catch(t){return!1}}function ws(){return bs()?window.localStorage:Xr}Ut.exports.defaultEngine=ws();Ut.exports.inMemoryEngine=Xr});var ft=G((dc,tn)=>{"use strict";var Is=pt(),en=Object.prototype.toString,Es=function(r){var t=typeof r;return t==="number"||t==="object"&&en.call(r)==="[object Number]"},Ts=typeof Array.isArray=="function"?Array.isArray:function(r){return en.call(r)==="[object Array]"},Ps=function(r){return r!=null&&(Ts(r)||r!=="function"&&Es(r.length))},Cs=function(r,t){for(var n=0;n<t.length&&r(t[n],n,t)!==!1;n+=1);},As=function(r,t){for(var n=Is(t),o=0;o<n.length&&r(t[n[o]],n[o],t)!==!1;o+=1);},Os=function(r,t){return(Ps(t)?Cs:As).call(this,r,t)};tn.exports=Os});var an=G((lc,sn)=>{"use strict";var xs=Ft().defaultEngine,rn=Ft().inMemoryEngine,nn=ft(),js=pt(),on=JSON;function be(e,r,t,n){this.id=r,this.name=e,this.keys=t||{},this.engine=n||xs,this.originalEngine=this.engine}be.prototype.set=function(e,r){var t=this._createValidKey(e);if(!!t)try{this.engine.setItem(t,on.stringify(r))}catch(n){ks(n)&&(this._swapEngine(),this.set(e,r))}};be.prototype.get=function(e){try{var r=this.engine.getItem(this._createValidKey(e));return r===null?null:on.parse(r)}catch(t){return null}};be.prototype.getOriginalEngine=function(){return this.originalEngine};be.prototype.remove=function(e){this.engine.removeItem(this._createValidKey(e))};be.prototype._createValidKey=function(e){var r=this.name,t=this.id;if(!js(this.keys).length)return[r,t,e].join(".");var n;return nn(function(o){o===e&&(n=[r,t,e].join("."))},this.keys),n};be.prototype._swapEngine=function(){var e=this;nn(function(r){var t=e.get(r);rn.setItem([e.name,e.id,r].join("."),t),e.remove(r)},this.keys),this.engine=rn};sn.exports=be;function ks(e){var r=!1;if(e.code)switch(e.code){case 22:r=!0;break;case 1014:e.name==="NS_ERROR_DOM_QUOTA_REACHED"&&(r=!0);break;default:break}else e.number===-2147024882&&(r=!0);return r}});var dn=G((pc,un)=>{"use strict";var Rs=ft(),Ds=2,cn={setTimeout:function(e,r){return window.setTimeout(e,r)},clearTimeout:function(e){return window.clearTimeout(e)},Date:window.Date},Oe=cn,gt={ASAP:1,RESCHEDULE:2,ABANDON:3};function ne(){this.tasks={},this.nextId=1}ne.prototype.now=function(){return+new Oe.Date};ne.prototype.run=function(e,r,t){var n=this.nextId++;return this.tasks[n]=Oe.setTimeout(this._handle(n,e,r,t||gt.ASAP),r),n};ne.prototype.cancel=function(e){this.tasks[e]&&(Oe.clearTimeout(this.tasks[e]),delete this.tasks[e])};ne.prototype.cancelAll=function(){Rs(Oe.clearTimeout,this.tasks),this.tasks={}};ne.prototype._handle=function(e,r,t,n){var o=this,s=o.now();return function(){if(delete o.tasks[e],n>=gt.RESCHEDULE&&s+t*Ds<o.now()){n===gt.RESCHEDULE&&o.run(r,t,n);return}return r()}};ne.setClock=function(e){Oe=e};ne.resetClock=function(){Oe=cn};ne.Modes=gt;un.exports=ne});var pn=G((fc,ln)=>{ln.exports=R;function R(e){return R.enabled(e)?function(r){r=Ls(r);var t=new Date,n=t-(R[e]||t);R[e]=t,r=e+" "+r+" +"+R.humanize(n),window.console&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}:function(){}}R.names=[];R.skips=[];R.enable=function(e){try{localStorage.debug=e}catch(o){}for(var r=(e||"").split(/[\s,]+/),t=r.length,n=0;n<t;n++)e=r[n].replace("*",".*?"),e[0]==="-"?R.skips.push(new RegExp("^"+e.substr(1)+"$")):R.names.push(new RegExp("^"+e+"$"))};R.disable=function(){R.enable("")};R.humanize=function(e){var r=1e3,t=60*1e3,n=60*t;return e>=n?(e/n).toFixed(1)+"h":e>=t?(e/t).toFixed(1)+"m":e>=r?(e/r|0)+"s":e+"ms"};R.enabled=function(e){for(var r=0,t=R.skips.length;r<t;r++)if(R.skips[r].test(e))return!1;for(var r=0,t=R.names.length;r<t;r++)if(R.names[r].test(e))return!0;return!1};function Ls(e){return e instanceof Error?e.stack||e.message:e}try{window.localStorage&&R.enable(localStorage.debug)}catch(e){}});var fn=G((gc,qt)=>{typeof qt<"u"&&(qt.exports=J);function J(e){if(e)return Ms(e)}function Ms(e){for(var r in J.prototype)e[r]=J.prototype[r];return e}J.prototype.on=J.prototype.addEventListener=function(e,r){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(r),this};J.prototype.once=function(e,r){function t(){this.off(e,t),r.apply(this,arguments)}return t.fn=r,this.on(e,t),this};J.prototype.off=J.prototype.removeListener=J.prototype.removeAllListeners=J.prototype.removeEventListener=function(e,r){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var t=this._callbacks["$"+e];if(!t)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var n,o=0;o<t.length;o++)if(n=t[o],n===r||n.fn===r){t.splice(o,1);break}return t.length===0&&delete this._callbacks["$"+e],this};J.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var r=new Array(arguments.length-1),t=this._callbacks["$"+e],n=1;n<arguments.length;n++)r[n-1]=arguments[n];if(t){t=t.slice(0);for(var n=0,o=t.length;n<o;++n)t[n].apply(this,r)}return this};J.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};J.prototype.hasListeners=function(e){return!!this.listeners(e).length}});var Vt=G((hc,gn)=>{"use strict";var Be=Qr().v4,Kt=an(),Wt=ft(),xe=dn(),Ns=pn()("localstorage-retry"),Us=fn();function Bt(e,r){return function(){return e.apply(r,arguments)}}function z(e,r,t){typeof r=="function"&&(t=r),this.name=e,this.id=Be(),this.fn=t,this.maxItems=r.maxItems||1/0,this.maxAttempts=r.maxAttempts||1/0,this.backoff={MIN_RETRY_DELAY:r.minRetryDelay||1e3,MAX_RETRY_DELAY:r.maxRetryDelay||3e4,FACTOR:r.backoffFactor||2,JITTER:r.backoffJitter||0},this.timeouts={ACK_TIMER:1e3,RECLAIM_TIMER:3e3,RECLAIM_TIMEOUT:1e4,RECLAIM_WAIT:500},this.keys={IN_PROGRESS:"inProgress",QUEUE:"queue",RECLAIM_START:"reclaimStart",RECLAIM_END:"reclaimEnd",ACK:"ack"},this._schedule=new xe,this._processId=0,this._store=new Kt(this.name,this.id,this.keys),this._store.set(this.keys.IN_PROGRESS,{}),this._store.set(this.keys.QUEUE,[]),this._ack=Bt(this._ack,this),this._checkReclaim=Bt(this._checkReclaim,this),this._processHead=Bt(this._processHead,this),this._running=!1}Us(z.prototype);z.prototype.start=function(){this._running&&this.stop(),this._running=!0,this._ack(),this._checkReclaim(),this._processHead()};z.prototype.stop=function(){this._schedule.cancelAll(),this._running=!1};z.prototype.shouldRetry=function(e,r){return!(r>this.maxAttempts)};z.prototype.getDelay=function(e){var r=this.backoff.MIN_RETRY_DELAY*Math.pow(this.backoff.FACTOR,e);if(this.backoff.JITTER){var t=Math.random(),n=Math.floor(t*this.backoff.JITTER*r);Math.floor(t*10)<5?r-=n:r+=n}return Number(Math.min(r,this.backoff.MAX_RETRY_DELAY).toPrecision(1))};z.prototype.addItem=function(e){this._enqueue({item:e,attemptNumber:0,time:this._schedule.now(),id:Be()})};z.prototype.requeue=function(e,r,t,n){this.shouldRetry(e,r,t)?this._enqueue({item:e,attemptNumber:r,time:this._schedule.now()+this.getDelay(r),id:n||Be()}):this.emit("discard",e,r)};z.prototype._enqueue=function(e){var r=this._store.get(this.keys.QUEUE)||[];r=r.slice(-(this.maxItems-1)),r.push(e),r=r.sort(function(t,n){return t.time-n.time}),this._store.set(this.keys.QUEUE,r),this._running&&this._processHead()};z.prototype._processHead=function(){var e=this,r=this._store;this._schedule.cancel(this._processId);var t=r.get(this.keys.QUEUE)||[],n=r.get(this.keys.IN_PROGRESS)||{},o=this._schedule.now(),s=[];function i(l,d){s.push({item:l.item,done:function(f,g){var h=r.get(e.keys.IN_PROGRESS)||{};delete h[d],r.set(e.keys.IN_PROGRESS,h),e.emit("processed",f,g,l.item),f&&e.requeue(l.item,l.attemptNumber+1,f,l.id)}})}for(var a=Object.keys(n).length;t.length&&t[0].time<=o&&a++<e.maxItems;){var c=t.shift(),u=Be();n[u]={item:c.item,attemptNumber:c.attemptNumber,time:e._schedule.now()},i(c,u)}r.set(this.keys.QUEUE,t),r.set(this.keys.IN_PROGRESS,n),Wt(function(l){try{e.fn(l.item,l.done)}catch(d){Ns("Process function threw error: "+d)}},s),t=r.get(this.keys.QUEUE)||[],this._schedule.cancel(this._processId),t.length>0&&(this._processId=this._schedule.run(this._processHead,t[0].time-o,xe.Modes.ASAP))};z.prototype._ack=function(){this._store.set(this.keys.ACK,this._schedule.now()),this._store.set(this.keys.RECLAIM_START,null),this._store.set(this.keys.RECLAIM_END,null),this._schedule.run(this._ack,this.timeouts.ACK_TIMER,xe.Modes.ASAP)};z.prototype._checkReclaim=function(){var e=this;function r(n){n.set(e.keys.RECLAIM_START,e.id),n.set(e.keys.ACK,e._schedule.now()),e._schedule.run(function(){n.get(e.keys.RECLAIM_START)===e.id&&(n.set(e.keys.RECLAIM_END,e.id),e._schedule.run(function(){n.get(e.keys.RECLAIM_END)===e.id&&n.get(e.keys.RECLAIM_START)===e.id&&e._reclaim(n.id)},e.timeouts.RECLAIM_WAIT,xe.Modes.ABANDON))},e.timeouts.RECLAIM_WAIT,xe.Modes.ABANDON)}function t(n){for(var o=[],s=e._store.getOriginalEngine(),i=0;i<s.length;i++){var a=s.key(i),c=a.split(".");c.length===3&&c[0]===n&&c[2]==="ack"&&o.push(new Kt(n,c[1],e.keys))}return o}Wt(function(n){n.id!==e.id&&(e._schedule.now()-n.get(e.keys.ACK)<e.timeouts.RECLAIM_TIMEOUT||r(n))},t(this.name)),this._schedule.run(this._checkReclaim,this.timeouts.RECLAIM_TIMER,xe.Modes.RESCHEDULE)};z.prototype._reclaim=function(e){var r=this,t=new Kt(this.name,e,this.keys),n={queue:this._store.get(this.keys.QUEUE)||[]},o={inProgress:t.get(this.keys.IN_PROGRESS)||{},queue:t.get(this.keys.QUEUE)||[]},s=[],i=function(a,c){Wt(function(u){var l=u.id||Be();s.indexOf(l)>=0?r.emit("duplication",u.item,u.attemptNumber):(n.queue.push({item:u.item,attemptNumber:u.attemptNumber+c,time:r._schedule.now(),id:l}),s.push(l))},a)};i(o.queue,0),i(o.inProgress,1),n.queue=n.queue.sort(function(a,c){return a.time-c.time}),this._store.set(this.keys.QUEUE,n.queue),t.remove(this.keys.IN_PROGRESS),t.remove(this.keys.QUEUE),t.remove(this.keys.RECLAIM_START),t.remove(this.keys.RECLAIM_END),t.remove(this.keys.ACK),this._processHead()};gn.exports=z});var no=G(k=>{"use strict";k.__esModule=!0;k.COPPAPrivacyModesEnum=k.BrandsEnum=k.EnvNames=k.PlayerMediaStates=k.ResponseHandlers=k.ResponseStatusCodes=void 0;var oa;(function(e){e[e.Code201Created=201]="Code201Created",e[e.Code400BadRequest=400]="Code400BadRequest",e[e.Code999Test=999]="Code999Test"})(oa=k.ResponseStatusCodes||(k.ResponseStatusCodes={}));var sa;(function(e){e.Success="Success",e.Failure="Failure",e.Retry="Retry"})(sa=k.ResponseHandlers||(k.ResponseHandlers={}));var ia;(function(e){e.PLAYING="playing",e.PENDING="pending"})(ia=k.PlayerMediaStates||(k.PlayerMediaStates={}));var aa;(function(e){e.PROD="PROD",e.DEV="DEV",e.INTEGRATION="INTEGRATION",e.QA="TEST"})(aa=k.EnvNames||(k.EnvNames={}));var ca;(function(e){e.TBS="TBS",e.CNN="CNN",e.CartoonNetwork="CartoonNetwork",e.AdultSwim="AdultSwim",e.TNT="TNT",e.truTV="truTV",e.TCM="TCM",e.BR="BR",e.NCAA="NCAA",e.WMInternalEvents="WMInternalEvents",e.MML="MML",e.WMSpecialEvents="WMSpecialEvents",e.psmInvalidType="psmInvalidType"})(ca=k.BrandsEnum||(k.BrandsEnum={}));var ua;(function(e){e.ALL_ID="ALL_ID",e.ZERO_ID="ZERO_ID"})(ua=k.COPPAPrivacyModesEnum||(k.COPPAPrivacyModesEnum={}))});var so=G(oo=>{"use strict";oo.__esModule=!0});var ao=G(io=>{"use strict";io.__esModule=!0});var uo=G(co=>{"use strict";co.__esModule=!0});var lo=G(te=>{"use strict";var da=te&&te.__createBinding||(Object.create?function(e,r,t,n){n===void 0&&(n=t);var o=Object.getOwnPropertyDescriptor(r,t);(!o||("get"in o?!r.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return r[t]}}),Object.defineProperty(e,n,o)}:function(e,r,t,n){n===void 0&&(n=t),e[n]=r[t]}),Et=te&&te.__exportStar||function(e,r){for(var t in e)t!=="default"&&!Object.prototype.hasOwnProperty.call(r,t)&&da(r,e,t)};te.__esModule=!0;Et(no(),te);Et(so(),te);Et(ao(),te);Et(uo(),te)});var Te={name:"@turnercode/cdp-psm-core",version:"4.0.0",description:"Prism core functions",private:!0,main:"dist/psm.legacy.min.umd.cjs",module:"dist/psm.legacy.min.umd.mjs",exports:{".":{import:"./dist/psm.legacy.min.umd.mjs",require:"./dist/psm.legacy.min.umd.cjs"},"./web":{import:"./dist/psm.legacy.min.umd.mjs",require:"./dist/psm.legacy.min.umd.cjs"},"./rn":{import:"./dist/psm-rn.mjs",require:"./dist/psm-rn.cjs"},"./src/*":"./src/*","./package.json":"./package.json"},repository:{type:"git",url:"https://github.com/turnercode/cdp.git",directory:"packages/psm-core"},author:"The CDP Development Team <CDP-TECH-TEAM@warnermedia.com>",license:"UNLICENSED",scripts:{build:"tsup --minify",clean:"rm -rf .turbo && rm -rf node_modules && rm -rf dist",lint:"TIMING=1 eslint src --fix",test:"jest"},devDependencies:{"@iabtcf/cmpapi":"^1.5.3","@iabtcf/core":"^1.5.3","@segment/localstorage-retry":"^1.3.0","@turnercode/cdp-cookie":"workspace:*","@turnercode/cdp-feature-flag-client":"workspace:*","@turnercode/cdp-prism-module-telemetry":"workspace:*","@turnercode/eslint-config-cdp":"workspace:*","@turnercode/scripts":"workspace:*","@turnercode/tsconfig":"workspace:*","@turnercode/types":"workspace:*",tsup:"^6.1.3",uuid:"^8.3.2"},jest:{preset:"@turnercode/scripts/jest/node",testEnvironment:"jsdom"}};var hr="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJuZXR3b3JrIjoiYWxsIiwicHJvZHVjdCI6InByaXNtIiwicGxhdGZvcm0iOiJ3ZWIiLCJhcHBJZCI6ImFsbC1wcmlzbS13ZWItNzI4aGtyIn0.4Fk4E28ffoFgCIcgNSG8xX5TP2n3PIU6c3jadumKULo",H={lightningOrigin:"https://lightning.warnermediacdn.com",iFramePath:{DEV:"/cdptest/psmtk/getcdpid.html",TEST:"/cdptest/psmtk/getcdpid.html",PROD:"/cdp/psmtk/getcdpid.html",INTEGRATION:"/cdptest/psmtk/getcdpid.html",AUTOMATED_TEST:"/cdptest/psmtk/getcdpid.html"},thirdPartyCookie:"/cdp/psmtk/start.html",carouselScript:"/cdp/psm/assets/swiper/swiper-bundle.min.js",carouselStyles:"/cdp/psm/assets/swiper/swiper-bundle.min.css",locate:"https://geo.ngtv.io/locate",locateV2:"https://atlas.ngtv.io/v2/locate",featureFlag:{DEV:"https://wmff.warnermediacdn.com/psm_2_dev_full.json",TEST:"https://wmff.warnermediacdn.com/psm_2_qa_full.json",PROD:"https://wmff.warnermediacdn.com/psm_2_prod_full.json",INTEGRATION:"https://wmff.warnermediacdn.com/psm_2_brand_integration_full.json",AUTOMATED_TEST:"https://wmff.warnermediacdn.com/psm_2_automated_test_full.json"},identity:{DEV:"https://dev.receive.wmcdp.io/v1/reg",TEST:"https://test.receive.wmcdp.io/v1/reg",PROD:"https://receive.wmcdp.io/v1/reg",INTEGRATION:"https://test.receive.wmcdp.io/v1/reg",AUTOMATED_TEST:"https://test.receive.wmcdp.io/v1/reg"},logs:{DEV:"https://dev.receive.wmcdp.io/v1/reg",TEST:"https://test.receive.wmcdp.io/v1/reg",PROD:"https://receive.wmcdp.io/v1/reg",INTEGRATION:"https://test.receive.wmcdp.io/v1/reg",AUTOMATED_TEST:"https://test.receive.wmcdp.io/v1/reg"},authSvc:{DEV:"https://dev.token.wmcdp.io/v1/token",TEST:"https://test.token.wmcdp.io/v1/token",PROD:"https://token.wmcdp.io/v1/token",INTEGRATION:"https://test.token.wmcdp.io/v1/token",AUTOMATED_TEST:"https://test.token.wmcdp.io/v1/token"}},Pe=["","US","GU","AS","PR","VI","MH","UM","MP"];var mr={"auth-service":!1,"doppler-identity-onstart":!0,"doppler-identity-oncomplete":!0,"doppler-session":!0,"doppler-privacy":!0,"doppler-telemetry":!0,"doppler-consent-update":!0,"doppler-pubsub-event":!1,"outside-us-location-check":!1,"doppler-send-logs":!0,"doppler-send-token-event":!1,sendAuthToken:!1,isInAuthTokenExperiment:!1,sendWMSegs:!1,"test-enabled":!0,"test-disabled":!1},et={minRetryDelay:3e4,maxRetryDelay:12e4,maxItems:5,maxAttempts:10,backoffFactor:2,backoffJitter:0};var Ct=class{constructor(){this.ready=!1;this.config={appId:hr,platform:"web",brand:"",psmBrandToken:"",subBrand:"",productName:"",psmEnvironment:void 0,psmPlatform:"",psmTelEnabled:!0};this.consentRule="Other";this.flags=[];this.location={asn:{id:"",name:""},continent:"",continentName:"",country:"",country_alpha2:"",country_alpha3:"",ip_address:"",lat:"",lon:"",proxy:null,states:[{cities:[],counties:[],state:"",zipcodes:[]}]};this.timezone=null;this.wmukid="Unknown";this.cdpid=null}getVersion(){return Te.version}getConfig(){return this.config}getBrand(){return this.config.brand}getBrandToken(){return this.config.psmBrandToken}getSubBrand(){return this.config.subBrand}getCoppaPrivacyMode(){return this.coppaPrivacyMode}getCoreWMUKID(){return this.wmukid}setCoreWMUKID(r){this.wmukid=r}getSessionProperties(){return this.session}validateConfig(r){let t=[];if(this.hasProperty("psmEnvironment",r)||t.push("Please specify your psmEnvironment."),this.hasProperty("brand",r)||t.push("Please specify your brand."),t.length)throw new Error(["[PSM]: Invalid configuration provided."].concat(t).join(`
`))}hasProperty(r,t){return Object.prototype.hasOwnProperty.call(t,r)}getLocationProperties(){return{city:this.location.states[0].cities[0],state:this.location.states[0].state,country:this.location.country,zip:this.location.states[0].zipcodes[0],timezone:this.timezone||Intl.DateTimeFormat().resolvedOptions().timeZone,locale:"locale",language:"language"}}initCoppaPrivacyMode(){var n;let r="ALL_ID";Pe.includes(this.getLocationProperties().country)?(n=this.config)!=null&&n.privacyMode&&(r=this.config.privacyMode):r="ZERO_ID",this.coppaPrivacyMode=r}},yr=Ct;qe();var zo=Object.create,Br=Object.defineProperty,Qo=Object.getOwnPropertyDescriptor,Kr=Object.getOwnPropertyNames,Yo=Object.getPrototypeOf,Zo=Object.prototype.hasOwnProperty,Ce=(e,r)=>function(){return r||(0,e[Kr(e)[0]])((r={exports:{}}).exports,r),r.exports},Xo=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Kr(r))!Zo.call(e,o)&&o!==t&&Br(e,o,{get:()=>r[o],enumerable:!(n=Qo(r,o))||n.enumerable});return e},es=(e,r,t)=>(t=e!=null?zo(Yo(e)):{},Xo(r||!e||!e.__esModule?Br(t,"default",{value:e,enumerable:!0}):t,e)),ts=Ce({"../../node_modules/.pnpm/component-url@0.2.1/node_modules/component-url/index.js"(e){e.parse=function(t){var n=document.createElement("a");return n.href=t,{href:n.href,host:n.host||location.host,port:n.port==="0"||n.port===""?r(n.protocol):n.port,hash:n.hash,hostname:n.hostname||location.hostname,pathname:n.pathname.charAt(0)!="/"?"/"+n.pathname:n.pathname,protocol:!n.protocol||n.protocol==":"?location.protocol:n.protocol,search:n.search,query:n.search.slice(1)}},e.isAbsolute=function(t){return t.indexOf("//")==0||!!~t.indexOf("://")},e.isRelative=function(t){return!e.isAbsolute(t)},e.isCrossDomain=function(t){t=e.parse(t);var n=e.parse(window.location.href);return t.hostname!==n.hostname||t.port!==n.port||t.protocol!==n.protocol};function r(t){switch(t){case"http:":return 80;case"https:":return 443;default:return location.port}}}}),rs=Ce({"../../node_modules/.pnpm/ms@2.0.0/node_modules/ms/index.js"(e,r){var t=1e3,n=t*60,o=n*60,s=o*24,i=s*365.25;r.exports=function(d,p){p=p||{};var f=typeof d;if(f==="string"&&d.length>0)return a(d);if(f==="number"&&isNaN(d)===!1)return p.long?u(d):c(d);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(d))};function a(d){if(d=String(d),!(d.length>100)){var p=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(d);if(!!p){var f=parseFloat(p[1]),g=(p[2]||"ms").toLowerCase();switch(g){case"years":case"year":case"yrs":case"yr":case"y":return f*i;case"days":case"day":case"d":return f*s;case"hours":case"hour":case"hrs":case"hr":case"h":return f*o;case"minutes":case"minute":case"mins":case"min":case"m":return f*n;case"seconds":case"second":case"secs":case"sec":case"s":return f*t;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return f;default:return}}}}function c(d){return d>=s?Math.round(d/s)+"d":d>=o?Math.round(d/o)+"h":d>=n?Math.round(d/n)+"m":d>=t?Math.round(d/t)+"s":d+"ms"}function u(d){return l(d,s,"day")||l(d,o,"hour")||l(d,n,"minute")||l(d,t,"second")||d+" ms"}function l(d,p,f){if(!(d<p))return d<p*1.5?Math.floor(d/p)+" "+f:Math.ceil(d/p)+" "+f+"s"}}}),ns=Ce({"../../node_modules/.pnpm/debug@2.6.9/node_modules/debug/src/debug.js"(e,r){e=r.exports=o.debug=o.default=o,e.coerce=c,e.disable=i,e.enable=s,e.enabled=a,e.humanize=rs(),e.names=[],e.skips=[],e.formatters={};var t;function n(u){var l=0,d;for(d in u)l=(l<<5)-l+u.charCodeAt(d),l|=0;return e.colors[Math.abs(l)%e.colors.length]}function o(u){function l(){if(!!l.enabled){var d=l,p=+new Date,f=p-(t||p);d.diff=f,d.prev=t,d.curr=p,t=p;for(var g=new Array(arguments.length),h=0;h<g.length;h++)g[h]=arguments[h];g[0]=e.coerce(g[0]),typeof g[0]!="string"&&g.unshift("%O");var v=0;g[0]=g[0].replace(/%([a-zA-Z%])/g,function(w,S){if(w==="%%")return w;v++;var I=e.formatters[S];if(typeof I=="function"){var P=g[v];w=I.call(d,P),g.splice(v,1),v--}return w}),e.formatArgs.call(d,g);var _=l.log||e.log||console.log.bind(console);_.apply(d,g)}}return l.namespace=u,l.enabled=e.enabled(u),l.useColors=e.useColors(),l.color=n(u),typeof e.init=="function"&&e.init(l),l}function s(u){e.save(u),e.names=[],e.skips=[];for(var l=(typeof u=="string"?u:"").split(/[\s,]+/),d=l.length,p=0;p<d;p++)!l[p]||(u=l[p].replace(/\*/g,".*?"),u[0]==="-"?e.skips.push(new RegExp("^"+u.substr(1)+"$")):e.names.push(new RegExp("^"+u+"$")))}function i(){e.enable("")}function a(u){var l,d;for(l=0,d=e.skips.length;l<d;l++)if(e.skips[l].test(u))return!1;for(l=0,d=e.names.length;l<d;l++)if(e.names[l].test(u))return!0;return!1}function c(u){return u instanceof Error?u.stack||u.message:u}}}),os=Ce({"../../node_modules/.pnpm/debug@2.6.9/node_modules/debug/src/browser.js"(e,r){e=r.exports=ns(),e.log=o,e.formatArgs=n,e.save=s,e.load=i,e.useColors=t,e.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:a(),e.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function t(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}e.formatters.j=function(c){try{return JSON.stringify(c)}catch(u){return"[UnexpectedJSONParseError]: "+u.message}};function n(c){var u=this.useColors;if(c[0]=(u?"%c":"")+this.namespace+(u?" %c":" ")+c[0]+(u?"%c ":" ")+"+"+e.humanize(this.diff),!!u){var l="color: "+this.color;c.splice(1,0,l,"color: inherit");var d=0,p=0;c[0].replace(/%[a-zA-Z%]/g,function(f){f!=="%%"&&(d++,f==="%c"&&(p=d))}),c.splice(p,0,l)}}function o(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function s(c){try{c==null?e.storage.removeItem("debug"):e.storage.debug=c}catch(u){}}function i(){var c;try{c=e.storage.debug}catch(u){}return!c&&typeof process<"u"&&"env"in process&&(c=process.env.DEBUG),c}e.enable(i());function a(){try{return window.localStorage}catch(c){}}}}),ss=Ce({"../../node_modules/.pnpm/component-cookie@1.1.5/node_modules/component-cookie/index.js"(e,r){var t=os()("cookie");r.exports=function(u,l,d){switch(arguments.length){case 3:case 2:return n(u,l,d);case 1:return s(u);default:return o()}};function n(u,l,d){d=d||{};var p=a(u)+"="+a(l);l==null&&(d.maxage=-1),d.maxage&&(d.expires=new Date(+new Date+d.maxage)),d.path&&(p+="; path="+d.path),d.domain&&(p+="; domain="+d.domain),d.expires&&(p+="; expires="+d.expires.toUTCString()),d.secure&&(p+="; secure"),document.cookie=p}function o(){var u;try{u=document.cookie}catch(l){return typeof console<"u"&&typeof console.error=="function"&&console.error(l.stack||l),{}}return i(u)}function s(u){return o()[u]}function i(u){var l={},d=u.split(/ *; */),p;if(d[0]=="")return l;for(var f=0;f<d.length;++f)p=d[f].split("="),l[c(p[0])]=c(p[1]);return l}function a(u){try{return encodeURIComponent(u)}catch(l){t("error `encode(%o)` - %o",u,l)}}function c(u){try{return decodeURIComponent(u)}catch(l){t("error `decode(%o)` - %o",u,l)}}}}),is=Ce({"../../node_modules/.pnpm/@segment+top-domain@3.0.1/node_modules/@segment/top-domain/lib/index.js"(e,r){"use strict";var t=ts().parse,n=ss();function o(s){for(var i=e.cookie,a=e.levels(s),c=0;c<a.length;++c){var u="__tld__",l=a[c],d={domain:"."+l};if(i(u,1,d),i(u))return i(u,null,d),l}return""}o.levels=function(s){var i=t(s).hostname,a=i.split("."),c=a[a.length-1],u=[];if(a.length===4&&c===parseInt(c,10)||a.length<=1)return u;for(var l=a.length-2;l>=0;--l)u.push(a.slice(l).join("."));return u},o.cookie=n,e=r.exports=o}}),Wr=es(is()),_e=(...e)=>{window.location.search.search(/[?&]wmpsm_debug=[1t]/)!==-1&&console.info(...e)};function it(e,r,t){switch(arguments.length){case 3:case 2:return as(e,r,t);case 1:return cs(e);default:return Vr()}}function as(e,r,t){t=t||{};let n=Fr(e)+"="+Fr(r);t.encode===!1&&(n=e+"="+r),r==null&&(t.maxage=-1),t.maxage&&!t.expires&&(t.expires=new Date(+new Date+t.maxage)),t.path&&(n+="; Path="+t.path),t.domain&&(n+="; Domain="+t.domain),t.expires&&(n+="; Expires="+t.expires.toUTCString()),t.samesite&&(n+="; SameSite="+t.samesite),t.secure&&(n+="; Secure"),_e("[COOKIE]: cookie.helper.set()",n,t),document.cookie=n}function Vr(){let e;try{e=document.cookie}catch(r){return typeof console<"u"&&typeof console.error=="function"&&console.error(r.stack||r),{}}return us(e)}function cs(e){let r=Vr()[e];return _e(`[COOKIE]: helper.get() - getting ${e} cookie value ${r}`),r}function us(e){let r={},t=e.split(/ *; */),n;if(t[0]=="")return r;for(let o=0;o<t.length;++o){let s=t[o].substr(0,t[o].indexOf("=")),i=t[o].substr(t[o].indexOf("=")+1);r[qr(s)]=qr(i)}return r}function Fr(e){try{return encodeURIComponent(e)}catch(r){}}function qr(e){try{return decodeURIComponent(e)}catch(r){}}var ds=class{constructor(e){this._options={},this.options=this.options.bind(this),this.set=this.set.bind(this),this.get=this.get.bind(this),this.getAll=this.getAll.bind(this),this.remove=this.remove.bind(this),this.options(e)}options(e){if(arguments.length===0)return this._options;e=e||{};let r=e.domain||`.${(0,Wr.default)(window.location.href)}`;if(r==="."&&(r=null),this._options=Ee(A({maxage:31536e6,path:"/",samesite:"Lax",encode:!0},e),{domain:r}),this.set("psm:test",!0,this._options),!this.get("psm:test")){_e("[Cookie]: psm:test cookie could not be set at domain: ",this._options.domain);let t=new RegExp(document.location.hostname,"g");document.referrer!==""&&document.referrer.search(t)===-1?this._options.samesite="None":this._options.domain=null}this.remove("psm:test"),_e("[COOKIE]: this._options",this._options)}set(e,r,t={}){let n=A(A({},this._options),t);_e("[COOKIE]: this.set() options",n);try{return typeof r!="string"&&(r=JSON.stringify(r)),it(e,r==="null"?null:r,n),!0}catch(o){return _e("[COOKIE]: this.set() encountered an error",o),!1}}get(e){let r=it(e);try{return JSON.parse(r)}catch(t){return r||null}}getAll(){return it()}remove(e){try{return it(e,null,A({},this._options)),!0}catch(r){return _e("[COOKIE]: this.remove() encountered an error",r),!1}}},b=new ds,at=Wr.default;function re(){try{let e=document.cookie;e="cookietest=1; SameSite=Strict;";let r=e.indexOf("cookietest=")!==1;return e="cookietest=1; SameSite=Strict; expires=Thu, 01-Jan-1970 00:00:01 GMT",r}catch(e){return!1}}function Lt(){try{return!!window.localStorage}catch(e){return!0}}function ct(){let e="__psm_test__";if(!Lt())return!1;try{return window.localStorage.setItem(e,e),window.localStorage.removeItem(e),!0}catch(r){return!1}}function Gr(){let e=window,r="inner";"innerWidth"in window||(r="client",e=document.documentElement||document.body);let t=e[r+"Width"],n=e[r+"Height"];return t>=0&&n>=0?t+"x"+n:null}function $r(){let e=document.documentElement,r=document.body,t=r?Math.max(r.offsetHeight,r.scrollHeight):0,n=Math.max(e.clientWidth,e.offsetWidth,e.scrollWidth),o=Math.max(e.clientHeight,e.offsetHeight,e.scrollHeight,t);return isNaN(n)||isNaN(o)?[0,0]:[n,o]}function Hr(){return window.screen.width+"x"+window.screen.height}function ut(e){let r="";if(e)return e;try{r=window.top.document.referrer}catch(t){if(window.parent)try{r=window.parent.document.referrer}catch(n){r=""}}return r===""&&(r=document.referrer),r}function Jr(){let e=window.navigator.userAgent,r=e.indexOf("Safari")>-1&&e.indexOf("Chrome")===-1&&e.indexOf("Chromium")===-1&&e.indexOf("CriOS")===-1&&e.indexOf("EdgiOS")===-1&&e.indexOf("FxiOS")===-1,t=(e.indexOf("Firefox")>-1||e.indexOf("FxiOS")>-1)&&e.indexOf("Seamonkey")===-1,n=(e.indexOf("Chrome")>-1||e.indexOf("CriOS")>-1)&&e.indexOf("Chromium")===-1&&e.indexOf("Edg")===-1&&e.indexOf("OPR")===-1,o=e.indexOf("Edg")>-1;switch(!0){case r:return"safari";case t:return"firefox";case n:return"chrome";case o:return"edge";default:return"unknown"}}function Ae(e,r){let t=new RegExp("^[^#]*[?&]"+e+"=([^&#]*)").exec(r);return t?decodeURIComponent(t[1].replace(/\+/g," ")):null}var hn=Pt(Vt());var ht=class extends Error{constructor(t){let{request:n,url:o,opts:s}=t,i=n.responseText?n.responseText:"network failure";super(i);this.context={url:o,code:n.status,headers:s.headers,method:s.method}}};function he(e,r={}){return new Promise((t,n)=>{let o=new XMLHttpRequest;o.open(r.method||"get",e),o.onload=()=>{if((o.status/100|0)==2)try{t(JSON.parse(o.responseText))}catch(s){t(o.responseText)}else n(new ht({request:o,url:e,opts:r}))},o.onerror=()=>{n(new ht({request:o,url:e,opts:r}))};for(let s in r.headers)o.setRequestHeader(s,r.headers[s]);o.send(r.body||null)})}var Gt,ke,je;function mn(e){ke=e.config.psmEnvironment?e.config.psmEnvironment.toUpperCase():"PROD",je=e,Gt=new hn.default("logger",et,(r,t)=>{if(/bot|crawl|spider/i.test(window.navigator.userAgent))return t(null,{});r.ts=new Date().toISOString(),he(H.logs[ke],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(n=>t(null,n)).catch(n=>t(n))}),Gt.start()}function $t(e,r){let t,n,o;e.err?(t=e.err.toString(),n=e.err.stack,o=e.err.context||{}):(t=e.message,o=e.context);let s={brand:je.config.brand,device:{type:window.navigator.platform,userAgent:window.navigator.userAgent},eventName:r,eventProperties:{logMessage:t,method:e.methodName,featureFlagValues:je.getFlags(),stackTrace:n},eventType:"log",eventTimestamp:new Date().toISOString(),library:{name:"PrismJS",version:Te.version,initConfig:je.config},platform:"web",session:je.session,wmukid:je.wmukid},i=Lt()&&window.localStorage.getItem("wmpsm_debug")=="true",a=window.location.search.includes("wmpsm_debug");return r!=="debug"&&(i||a||ke==="AUTOMATED_TEST"?ke==="AUTOMATED_TEST"?console[r](`[PSM]: ${r}:`,JSON.stringify(s.eventProperties)):console[r](`[PSM]: ${r}:`,s):s.eventProperties.featureFlagValues["doppler-send-logs"]&&Gt.addItem(s)),s}function Re(e){return $t(e,"info")}function x(e){return $t(e,"debug")}function vn(e){return $t(e,"warn")}var Fs=/^[1][nNyY-][nNyY-][nNyY-]$/,mt=class{constructor(){this.version=1,this.baseString=null}getUSPrivacyString(){return this.baseString}getVersion(){return this.version}setUSPrivacyString(r){let t=!1;if(Fs.test(r)){this.baseString=r,this.version=Number(r[0]);let n={version:Number(r[0]),uspString:r};b.set("usprivacy",r),b.set("uspData",n),t=!0}return t}};var Cc=new mt;function yn(e){let r=null,t;for(t=window;t;t=t.parent){try{if(t.frames&&t.frames[e]){r=t;break}}catch(n){throw new Error(n)}if(t===window.top)break}return r}function _n(e={}){return new Promise(r=>{typeof window.__tcfapi!="function"&&r({shouldLoad:!1,categories:[]});let t=A({1:"data-store",3:"ads-person-prof",5:"content-person-prof",6:"consent-person",8:"measure-content",9:"measure-market",10:"product-develop"},e);window.__tcfapi("getTCData",2,(n,o)=>{if(o&&"purpose"in n&&"legitimateInterests"in n.purpose){let s=A(A({},n.purpose.legitimateInterests),n.purpose.consents),i=[],a=!0;Object.entries(t).forEach(([c,u])=>{s[c]?i.push({[u]:s[c]}):(i.push({[u]:!1}),a=!1)}),r({shouldLoad:a,categories:i.concat([{"special-purpose-1":!0},{"special-purpose-2":!0},{"feature-1":!0},{"feature-2":!0},{"feature-3":!0}])})}r({shouldLoad:!1,categories:[]})})})}var Y="",j="",B="";function qs(e){switch(e){case"Samsung TV":return!1;case"Vizio TV":return!1;case"LG TV":return!1;default:return!0}}function wn(e){return/^[0-9A-F]{8}-[0-9A-F]{4}-[4][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i.test(e)}function Bs(){let e=Ae("utm_term",window.location.href),r=new RegExp(/cdpid_([0-9A-F]{8}-[0-9A-F]{4}-[4][0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12})/i).exec(e),t=null;return r&&(t=r[1]),t}function Sn(e,r){wn(e)?(B=Bs()||e,b.set("CDPID",JSON.stringify({cdpId:B,wmukId:r}),{samesite:"None",secure:!0,encode:!1})):x({message:`CDPID value ${JSON.stringify(B)} is invalid. Returning without updating`,methodName:"updateCdpData",eventType:"cdpid"})}function Ks(e,r){let t=document.createElement("iframe");t.setAttribute("id",e),t.setAttribute("style","display:none"),t.setAttribute("src",r),document.body.appendChild(t)}var bn=e=>e.split(";").map(r=>r.split("=")).reduce((r,t)=>(r[decodeURIComponent(t[0].trim())]=decodeURIComponent(t[1].trim()),r),{});function In(e,r){return re()?(Y=r?bn(document.cookie).WMUKID:b.get("WMUKID"),j=r?bn(document.cookie).WMUKID_STABLE:b.get("WMUKID_STABLE"),x({message:`[PSM]: Cookies enabled. Retrieving ID values
    WMUKID: ${JSON.stringify(Y)}
    WMUKID_STABLE: ${j}
    `,methodName:"initIdentity",eventType:"identity"}),j==null&&(Y==null?(j=ge(),x({message:`WMUKID and WMUKID_STABLE cookies not found. Generating WMUKID_STABLE value: ${j}`,methodName:"initIdentity",eventType:"identity"})):typeof Y=="object"&&"id"in Y?(j=Y.id,x({message:`Legacy WMUKID value ${Y.id} found. Setting WMUKID_STABLE value: ${j}`,methodName:"initIdentity",eventType:"identity"})):(j=Y,x({message:`WMUKID string value ${Y} found. Setting WMUKID_STABLE value: ${j}`,methodName:"initIdentity",eventType:"identity"}))),x({message:`Setting WMUKID_STABLE cookie to ${j}. Cookie options: ${JSON.stringify(b.options())}`,methodName:"initIdentity",eventType:"identity"}),e==="ZERO_ID"?r?(document.cookie=`WMUKID_STABLE=${j}; max-age=0; SameSite=None; Secure`,document.cookie=`dateid=${Y}; max-age=0; SameSite=None; Secure`):(b.set("WMUKID_STABLE",j,b.options({maxage:0})),b.set("datid",j,b.options({maxage:0}))):r?(document.cookie=`WMUKID_STABLE=${j}; SameSite=None; Secure`,document.cookie=`dateid=${Y}; SameSite=None; Secure`):(b.set("WMUKID_STABLE",j),b.set("datid",j)),j):""}function En(e,r){return new Promise(t=>{if(window==null||window.addEventListener("message",n=>{n.origin===H.lightningOrigin&&(x({message:`Updating CDPID from iFrame value: ${JSON.stringify(n.data)}`,methodName:"initIdentity",eventType:"message"}),Sn(n.data,j),t(n.data))},!1),re()){B=b.get("CDPID");let n=B&&typeof B=="object"&&"cdpId"in B&&wn(B.cdpId);if(x({message:`[PSM]: Cookies enabled. Retrieving ID values
    CDPID: ${JSON.stringify(B)}
    `,methodName:"initIdentity",eventType:"identity"}),B===null||!n)yn("prism_toolkit")===null&&(qs(r)?Ks("prism_toolkit",H.lightningOrigin+H.iFramePath[e]):t(""));else if(typeof B=="object"&&"cdpId"in B&&"wmukId"in B&&n){let o=B.cdpId,s=B.wmukId;j!==s?(x({message:`Updating CDPID value ${o} with WMUKID: ${j}`,methodName:"initIdentity",eventType:"cdpid"}),Sn(o,j)):x({message:`CDPID cookie has already been set to value ${JSON.stringify(B)}. To start a new test, delete the CDPID cookie on this domain and lightning.warnermediacdn.com.`,methodName:"initIdentity",eventType:"cdpid"}),t(o)}}})}function Ws(){var e,r;return re()?((r=(e=window==null?void 0:window.mParticle)==null?void 0:e.Identity)==null?void 0:r.getCurrentUser().getMPID())||"":null}function Ke(){return ct()?window.localStorage.getItem("kxkuid"):re()?b.get("kxkuid"):null}function We(){if(re()){let e=b.get("firstpartyuid");return e&&typeof e=="object"&&"id"in e?e.id:null}return null}function Ht(){let e=null;return re()&&(e=b.get("OptanonConsent")),e}function Vs(e){let r=b.get("AMCV_7FF852E2556756057F000101@AdobeOrg");if(r){let t=r.split("|"),n=t.indexOf(e);if(n!=-1){let o=n+1;return t[o]}}return null}function Ve(){let e=b.get("s_ecid"),r=b.get("s_vi");return e||r||Vs("MCMID")}function De(){let e=null,r=null;if(ct()&&(r=window.localStorage.getItem("zion.cnn_uid"),r))try{r=JSON.parse(r),e=r.id}catch(t){window.location.search.includes("wmpsm_debug")}return e}function Ge(){if(ct()){let e=["Conviva/sdkConfig","Conviva.sdkConfig","top-player::Conviva.sdkConfig"],r=null;for(let t=0;t<e.length;t++)if(r=window.localStorage.getItem(e[t]),r)try{return JSON.parse(r).clId}catch(n){window.location.search.includes("wmpsm_debug")}}return null}function $e(){let e=null;if(window.ZionMessageBus){let t=window.ZionMessageBus.getInstance().watching.id_found.messageQueue;if(t&&t instanceof Array){let n=t.find(o=>{var i;let s=(i=o.message)==null?void 0:i.type;if(typeof s=="string")return s.toLowerCase()==="zaid"});e=n?n.message.value:null}}return e}function Tn(e,r){let t=null;if(e)for(let n of e){if(typeof n!="string")continue;r&&(n=n.replace(/^data/,r));let o=n.match(/[^.[\]()]+/g);for(let s=0;s<o.length;s++)if(s===0&&(t=window),t=t[o[s]],typeof t=="function"&&(t=t()),typeof t>"u"){t=null;break}if(t)return t}return t}function Pn(e,r){let t={};return e&&e[r]&&e[r].forEach(n=>{let o=Tn(n.staticLocations);o||(o=Tn(n.dynamicLocations,"psmPubSubData."+r)),t[n.name]=o}),t}var me=(e,r)=>{let t=$r(),n=e.coppaPrivacyMode==="ALL_ID"?{attuuid:We(),cdpid:e.getCDPID(),cnnuid:De(),convivaid:Ge(),ecid:Ve(),kruxid:Ke(),liverampatsid:b.get("tok_lr"),mpid:Ws(),tradedeskuid:b.get("tok_ttuid"),wminid:b.get("wminid"),zionid:$e()}:{};r.setPlatform(e.config.platform),r.addEntry("companyName","WarnerMedia"),r.setBrand(e.config.brand),r.setSubBrand(e.config.subBrand),r.setProductName(e.config.productName),r.setLibrary({name:"PrismJS",version:Te.version,initConfig:e.config}),r.setDevice({type:window.navigator.platform,userAgent:window.navigator.userAgent,totalWidth:t[0],totalHeight:t[1],screenResolution:Hr(),viewportSize:Gr()}),r.setNavigationProperties({url:window.location.href,rootDomain:at(window.location.href),referrer:ut(),path:window.location.pathname,search:window.location.search,title:window.document.title}),r.setClientResolvedIp(e.location.ip_address),r.setLocation({city:e.location.states[0].cities[0],state:e.location.states[0].state,country:e.location.country,zip:e.location.states[0].zipcodes[0],timezone:Intl.DateTimeFormat().resolvedOptions().timeZone||null,locale:window.navigator.language,language:window.navigator.language.split("-")[0]||null}),r.setConsentProperties({uspString:b.get("usprivacy"),consentRule:e.consentRule,optanonConsent:Ht(),psmPrivacyMode:e.coppaPrivacyMode}),r.setIABCategories({consentCategories:e.consentCategories}),r.setWMUKID(e.wmukid),r.setEventProperties({cookiesEnabled:re(),doNotTrack:!!(window.navigator.doNotTrack||window.doNotTrack),featureFlagValues:e.getFlags(),cookies:b.getAll(),automatedTest:e.config.psmEnvironment==="AUTOMATED_TEST"}),r.setSessionProperties(e.session),r.setThirdPartyIds(n),r.setContentMetadata({page:Pn(e.config.contentMetadata,"page"),video:Pn(e.config.contentMetadata,"video")})};var Gs=e=>e.split(";").map(r=>r.split("=")).reduce((r,t)=>(r[decodeURIComponent(t[0].trim())]=decodeURIComponent(t[1].trim()),r),{}),Cn=e=>{let r=window;return r.WM=r.WM||{},r.WM.PSM=r.WM.PSM||{},{psmObject:r.WM.PSM,initWMUKID:In,initCDPID:En,getWMUKID:n=>n?Gs(document.cookie).WMUKID_STABLE||"Unknown":b.get("WMUKID_STABLE")||"Unknown",getCDPID:()=>{let n=b.get("CDPID");return n&&typeof n=="object"&&"cdpId"in n&&"wmukId"in n?n.cdpId:n||"Unknown"},getConsentProperties:()=>({uspString:b.get("usprivacy"),consentRule:e.consentRule,optanonConsent:Ht()||"",psmPrivacyMode:e.coppaPrivacyMode}),resolveAuthTokens:async(n,o,s)=>{if(!s.queryFlag("auth-service"))return x({message:"[PSM]: auth-service flag is disabled",methodName:"resolveAuthTokens",eventType:"authService"}),!1;let i=!0,a=!1,c=o.get("resolveAuthTimestamp");if(c){let E=new Date(c),T=(Date.now()-E.getTime())/1e3/60/60;if(T<24)return Re({message:`Resolve Auth Token lifespan, ${T}, less than 24 hours`,methodName:"resolveAuthTokens",eventType:"authService"}),!1}let u,l,d,p,f,g=o.get("tok_lr"),h=o.get("glp_ggw"),v=o.get("tok_lr2");v&&(u={provider:"Liveramp ATS",details:{id:v}},i=!1,a=!0);let _=Ae("bt_ts",window.location.href),w=Ae("utm_term",window.location.href);if(_&&w){let E=(Date.now()-parseInt(_))/1e3/60/60;if(E>24)return Re({message:`bt_ts Parameter lifespan, ${E}, greater than 24 hours`,methodName:"resolveAuthTokens",eventType:"authService"}),!1;l={provider:"zeta",details:{id:w}}}let S=Ae("primo",window.location.href);S&&(d={provider:"braze",details:{id:S}});let I=De();if(I&&(p={provider:"cnnAuthentication",details:{id:I}}),h&&(f={provider:"tradedesk",details:{id:h}}),g&&o.remove("tok_lr"),!v&&(!w||!_)&&!S&&!I)return x({message:"[PSM]: No token information present",methodName:"resolveAuthTokens",eventType:"authService"}),!1;let P=[];u!=null&&u.provider&&P.push(u),l!=null&&l.provider&&P.push(l),d!=null&&d.provider&&P.push(d),p!=null&&p.provider&&P.push(p),f!=null&&f.provider&&P.push(f);let C={wmukid:s.getWMUKID(),brand:s.config.brand,ids:{attuuid:We(),cdpid:s.getCDPID(),convivaid:Ge(),ecid:Ve(),kruxid:Ke(),wminid:o.get("wminid"),zionid:$e(),cnnuid:De()},location:s.getLocationProperties(),consentProperties:{usp:o.get("usprivacy")},authentication:P};try{let E=await he(H.authSvc[s.config.psmEnvironment],{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),{tokens:T}=E,O=T.filter(D=>D.provider==="liveramp")[0];O&&(o.set("tok_lr",O.token,{expires:new Date(O.expiration)}),o.set("tok_lr2",O.token,{expires:new Date(O.expiration)}));let W=T.filter(D=>D.provider==="tradedesk")[0];W&&o.set("glp_ggw",W.token,{expires:new Date(W.expiration)})}catch(E){x({err:E,eventType:"authService",methodName:"resolveAuthTokens"})}return s.setSessionProperties(),me(s,n),i&&n.trackTokenEvent("new token",new Date().toISOString(),E=>{s.queryFlag("doppler-send-token-event")&&(s.requestQueue.addItem(E),s.resetNewSessionFields())}),a&&n.trackTokenEvent("token updated",new Date().toISOString(),E=>{s.queryFlag("doppler-send-token-event")&&(s.requestQueue.addItem(E),s.resetNewSessionFields())}),o.set("resolveAuthTimestamp",new Date),!0},platform:window.navigator.platform}};qe();var $s=Object.create,Rn=Object.defineProperty,Hs=Object.getOwnPropertyDescriptor,Dn=Object.getOwnPropertyNames,Js=Object.getPrototypeOf,zs=Object.prototype.hasOwnProperty,m=(e,r)=>function(){return r||(0,e[Dn(e)[0]])((r={exports:{}}).exports,r),r.exports},Qs=(e,r,t,n)=>{if(r&&typeof r=="object"||typeof r=="function")for(let o of Dn(r))!zs.call(e,o)&&o!==t&&Rn(e,o,{get:()=>r[o],enumerable:!(n=Hs(r,o))||n.enumerable});return e},Ys=(e,r,t)=>(t=e!=null?$s(Js(e)):{},Qs(r||!e||!e.__esModule?Rn(t,"default",{value:e,enumerable:!0}):t,e)),X=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/fails.js"(e,r){r.exports=function(t){try{return!!t()}catch(n){return!0}}}}),Ln=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/function-bind-native.js"(e,r){var t=X();r.exports=!t(function(){var n=function(){}.bind();return typeof n!="function"||n.hasOwnProperty("prototype")})}}),ee=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/function-uncurry-this.js"(e,r){var t=Ln(),n=Function.prototype,o=n.bind,s=n.call,i=t&&o.bind(s,s);r.exports=t?function(a){return a&&i(a)}:function(a){return a&&function(){return s.apply(a,arguments)}}}}),Zs=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/classof-raw.js"(e,r){var t=ee(),n=t({}.toString),o=t("".slice);r.exports=function(s){return o(n(s),8,-1)}}}),Xs=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/indexed-object.js"(e,r){var t=ee(),n=X(),o=Zs(),s=Object,i=t("".split);r.exports=n(function(){return!s("z").propertyIsEnumerable(0)})?function(a){return o(a)=="String"?i(a,""):s(a)}:s}}),Mn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/require-object-coercible.js"(e,r){var t=TypeError;r.exports=function(n){if(n==null)throw t("Can't call method on "+n);return n}}}),Je=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/to-indexed-object.js"(e,r){var t=Xs(),n=Mn();r.exports=function(o){return t(n(o))}}}),oe=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/global.js"(e,r){var t=function(n){return n&&n.Math==Math&&n};r.exports=t(typeof globalThis=="object"&&globalThis)||t(typeof window=="object"&&window)||t(typeof self=="object"&&self)||t(typeof global=="object"&&global)||function(){return this}()||Function("return this")()}}),bt=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/is-pure.js"(e,r){r.exports=!1}}),Yt=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/define-global-property.js"(e,r){var t=oe(),n=Object.defineProperty;r.exports=function(o,s){try{n(t,o,{value:s,configurable:!0,writable:!0})}catch(i){t[o]=s}return s}}}),Zt=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/shared-store.js"(e,r){var t=oe(),n=Yt(),o="__core-js_shared__",s=t[o]||n(o,{});r.exports=s}}),Nn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/shared.js"(e,r){var t=bt(),n=Zt();(r.exports=function(o,s){return n[o]||(n[o]=s!==void 0?s:{})})("versions",[]).push({version:"3.23.4",mode:t?"pure":"global",copyright:"\xA9 2014-2022 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.23.4/LICENSE",source:"https://github.com/zloirock/core-js"})}}),Un=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/to-object.js"(e,r){var t=Mn(),n=Object;r.exports=function(o){return n(t(o))}}}),se=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/has-own-property.js"(e,r){var t=ee(),n=Un(),o=t({}.hasOwnProperty);r.exports=Object.hasOwn||function(i,a){return o(n(i),a)}}}),Fn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/uid.js"(e,r){var t=ee(),n=0,o=Math.random(),s=t(1 .toString);r.exports=function(i){return"Symbol("+(i===void 0?"":i)+")_"+s(++n+o,36)}}}),$=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/is-callable.js"(e,r){r.exports=function(t){return typeof t=="function"}}}),wt=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/get-built-in.js"(e,r){var t=oe(),n=$(),o=function(s){return n(s)?s:void 0};r.exports=function(s,i){return arguments.length<2?o(t[s]):t[s]&&t[s][i]}}}),ei=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/engine-user-agent.js"(e,r){var t=wt();r.exports=t("navigator","userAgent")||""}}),ti=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/engine-v8-version.js"(e,r){var t=oe(),n=ei(),o=t.process,s=t.Deno,i=o&&o.versions||s&&s.version,a=i&&i.v8,c,u;a&&(c=a.split("."),u=c[0]>0&&c[0]<4?1:+(c[0]+c[1])),!u&&n&&(c=n.match(/Edge\/(\d+)/),(!c||c[1]>=74)&&(c=n.match(/Chrome\/(\d+)/),c&&(u=+c[1]))),r.exports=u}}),qn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/native-symbol.js"(e,r){var t=ti(),n=X();r.exports=!!Object.getOwnPropertySymbols&&!n(function(){var o=Symbol();return!String(o)||!(Object(o)instanceof Symbol)||!Symbol.sham&&t&&t<41})}}),Bn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/use-symbol-as-uid.js"(e,r){var t=qn();r.exports=t&&!Symbol.sham&&typeof Symbol.iterator=="symbol"}}),ze=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/well-known-symbol.js"(e,r){var t=oe(),n=Nn(),o=se(),s=Fn(),i=qn(),a=Bn(),c=n("wks"),u=t.Symbol,l=u&&u.for,d=a?u:u&&u.withoutSetter||s;r.exports=function(p){if(!o(c,p)||!(i||typeof c[p]=="string")){var f="Symbol."+p;i&&o(u,p)?c[p]=u[p]:a&&l?c[p]=l(f):c[p]=d(f)}return c[p]}}}),Qe=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/is-object.js"(e,r){var t=$();r.exports=function(n){return typeof n=="object"?n!==null:t(n)}}}),Ye=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/an-object.js"(e,r){var t=Qe(),n=String,o=TypeError;r.exports=function(s){if(t(s))return s;throw o(n(s)+" is not an object")}}}),ie=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/descriptors.js"(e,r){var t=X();r.exports=!t(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})}}),Kn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/v8-prototype-define-bug.js"(e,r){var t=ie(),n=X();r.exports=t&&n(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!=42})}}),Wn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/document-create-element.js"(e,r){var t=oe(),n=Qe(),o=t.document,s=n(o)&&n(o.createElement);r.exports=function(i){return s?o.createElement(i):{}}}}),Vn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/ie8-dom-define.js"(e,r){var t=ie(),n=X(),o=Wn();r.exports=!t&&!n(function(){return Object.defineProperty(o("div"),"a",{get:function(){return 7}}).a!=7})}}),It=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/function-call.js"(e,r){var t=Ln(),n=Function.prototype.call;r.exports=t?n.bind(n):function(){return n.apply(n,arguments)}}}),ri=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-is-prototype-of.js"(e,r){var t=ee();r.exports=t({}.isPrototypeOf)}}),Gn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/is-symbol.js"(e,r){var t=wt(),n=$(),o=ri(),s=Bn(),i=Object;r.exports=s?function(a){return typeof a=="symbol"}:function(a){var c=t("Symbol");return n(c)&&o(c.prototype,i(a))}}}),ni=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/try-to-string.js"(e,r){var t=String;r.exports=function(n){try{return t(n)}catch(o){return"Object"}}}}),oi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/a-callable.js"(e,r){var t=$(),n=ni(),o=TypeError;r.exports=function(s){if(t(s))return s;throw o(n(s)+" is not a function")}}}),si=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/get-method.js"(e,r){var t=oi();r.exports=function(n,o){var s=n[o];return s==null?void 0:t(s)}}}),ii=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/ordinary-to-primitive.js"(e,r){var t=It(),n=$(),o=Qe(),s=TypeError;r.exports=function(i,a){var c,u;if(a==="string"&&n(c=i.toString)&&!o(u=t(c,i))||n(c=i.valueOf)&&!o(u=t(c,i))||a!=="string"&&n(c=i.toString)&&!o(u=t(c,i)))return u;throw s("Can't convert object to primitive value")}}}),ai=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/to-primitive.js"(e,r){var t=It(),n=Qe(),o=Gn(),s=si(),i=ii(),a=ze(),c=TypeError,u=a("toPrimitive");r.exports=function(l,d){if(!n(l)||o(l))return l;var p=s(l,u),f;if(p){if(d===void 0&&(d="default"),f=t(p,l,d),!n(f)||o(f))return f;throw c("Can't convert object to primitive value")}return d===void 0&&(d="number"),i(l,d)}}}),$n=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/to-property-key.js"(e,r){var t=ai(),n=Gn();r.exports=function(o){var s=t(o,"string");return n(s)?s:s+""}}}),we=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-define-property.js"(e){var r=ie(),t=Vn(),n=Kn(),o=Ye(),s=$n(),i=TypeError,a=Object.defineProperty,c=Object.getOwnPropertyDescriptor,u="enumerable",l="configurable",d="writable";e.f=r?n?function(f,g,h){if(o(f),g=s(g),o(h),typeof f=="function"&&g==="prototype"&&"value"in h&&d in h&&!h[d]){var v=c(f,g);v&&v[d]&&(f[g]=h.value,h={configurable:l in h?h[l]:v[l],enumerable:u in h?h[u]:v[u],writable:!1})}return a(f,g,h)}:a:function(f,g,h){if(o(f),g=s(g),o(h),t)try{return a(f,g,h)}catch(v){}if("get"in h||"set"in h)throw i("Accessors not supported");return"value"in h&&(f[g]=h.value),f}}}),ci=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/math-trunc.js"(e,r){var t=Math.ceil,n=Math.floor;r.exports=Math.trunc||function(s){var i=+s;return(i>0?n:t)(i)}}}),Hn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/to-integer-or-infinity.js"(e,r){var t=ci();r.exports=function(n){var o=+n;return o!==o||o===0?0:t(o)}}}),ui=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/to-absolute-index.js"(e,r){var t=Hn(),n=Math.max,o=Math.min;r.exports=function(s,i){var a=t(s);return a<0?n(a+i,0):o(a,i)}}}),di=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/to-length.js"(e,r){var t=Hn(),n=Math.min;r.exports=function(o){return o>0?n(t(o),9007199254740991):0}}}),li=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/length-of-array-like.js"(e,r){var t=di();r.exports=function(n){return t(n.length)}}}),pi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/array-includes.js"(e,r){var t=Je(),n=ui(),o=li(),s=function(i){return function(a,c,u){var l=t(a),d=o(l),p=n(u,d),f;if(i&&c!=c){for(;d>p;)if(f=l[p++],f!=f)return!0}else for(;d>p;p++)if((i||p in l)&&l[p]===c)return i||p||0;return!i&&-1}};r.exports={includes:s(!0),indexOf:s(!1)}}}),Xt=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/hidden-keys.js"(e,r){r.exports={}}}),Jn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-keys-internal.js"(e,r){var t=ee(),n=se(),o=Je(),s=pi().indexOf,i=Xt(),a=t([].push);r.exports=function(c,u){var l=o(c),d=0,p=[],f;for(f in l)!n(i,f)&&n(l,f)&&a(p,f);for(;u.length>d;)n(l,f=u[d++])&&(~s(p,f)||a(p,f));return p}}}),er=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/enum-bug-keys.js"(e,r){r.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]}}),fi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-keys.js"(e,r){var t=Jn(),n=er();r.exports=Object.keys||function(s){return t(s,n)}}}),gi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-define-properties.js"(e){var r=ie(),t=Kn(),n=we(),o=Ye(),s=Je(),i=fi();e.f=r&&!t?Object.defineProperties:function(c,u){o(c);for(var l=s(u),d=i(u),p=d.length,f=0,g;p>f;)n.f(c,g=d[f++],l[g]);return c}}}),hi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/html.js"(e,r){var t=wt();r.exports=t("document","documentElement")}}),tr=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/shared-key.js"(e,r){var t=Nn(),n=Fn(),o=t("keys");r.exports=function(s){return o[s]||(o[s]=n(s))}}}),rr=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-create.js"(e,r){var t=Ye(),n=gi(),o=er(),s=Xt(),i=hi(),a=Wn(),c=tr(),u=">",l="<",d="prototype",p="script",f=c("IE_PROTO"),g=function(){},h=function(I){return l+p+u+I+l+"/"+p+u},v=function(I){I.write(h("")),I.close();var P=I.parentWindow.Object;return I=null,P},_=function(){var I=a("iframe"),P="java"+p+":",C;return I.style.display="none",i.appendChild(I),I.src=String(P),C=I.contentWindow.document,C.open(),C.write(h("document.F=Object")),C.close(),C.F},w,S=function(){try{w=new ActiveXObject("htmlfile")}catch(P){}S=typeof document<"u"?document.domain&&w?v(w):_():v(w);for(var I=o.length;I--;)delete S[d][o[I]];return S()};s[f]=!0,r.exports=Object.create||function(P,C){var E;return P!==null?(g[d]=t(P),E=new g,g[d]=null,E[f]=P):E=S(),C===void 0?E:n.f(E,C)}}}),mi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/add-to-unscopables.js"(e,r){var t=ze(),n=rr(),o=we().f,s=t("unscopables"),i=Array.prototype;i[s]==null&&o(i,s,{configurable:!0,value:n(null)}),r.exports=function(a){i[s][a]=!0}}}),nr=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/iterators.js"(e,r){r.exports={}}}),zn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/inspect-source.js"(e,r){var t=ee(),n=$(),o=Zt(),s=t(Function.toString);n(o.inspectSource)||(o.inspectSource=function(i){return s(i)}),r.exports=o.inspectSource}}),vi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/native-weak-map.js"(e,r){var t=oe(),n=$(),o=zn(),s=t.WeakMap;r.exports=n(s)&&/native code/.test(o(s))}}),or=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/create-property-descriptor.js"(e,r){r.exports=function(t,n){return{enumerable:!(t&1),configurable:!(t&2),writable:!(t&4),value:n}}}}),sr=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/create-non-enumerable-property.js"(e,r){var t=ie(),n=we(),o=or();r.exports=t?function(s,i,a){return n.f(s,i,o(1,a))}:function(s,i,a){return s[i]=a,s}}}),Qn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/internal-state.js"(e,r){var t=vi(),n=oe(),o=ee(),s=Qe(),i=sr(),a=se(),c=Zt(),u=tr(),l=Xt(),d="Object already initialized",p=n.TypeError,f=n.WeakMap,g,h,v,_=function(T){return v(T)?h(T):g(T,{})},w=function(T){return function(O){var W;if(!s(O)||(W=h(O)).type!==T)throw p("Incompatible receiver, "+T+" required");return W}};t||c.state?(S=c.state||(c.state=new f),I=o(S.get),P=o(S.has),C=o(S.set),g=function(T,O){if(P(S,T))throw new p(d);return O.facade=T,C(S,T,O),O},h=function(T){return I(S,T)||{}},v=function(T){return P(S,T)}):(E=u("state"),l[E]=!0,g=function(T,O){if(a(T,E))throw new p(d);return O.facade=T,i(T,E,O),O},h=function(T){return a(T,E)?T[E]:{}},v=function(T){return a(T,E)});var S,I,P,C,E;r.exports={set:g,get:h,has:v,enforce:_,getterFor:w}}}),yi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-property-is-enumerable.js"(e){"use strict";var r={}.propertyIsEnumerable,t=Object.getOwnPropertyDescriptor,n=t&&!r.call({1:2},1);e.f=n?function(s){var i=t(this,s);return!!i&&i.enumerable}:r}}),Yn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-get-own-property-descriptor.js"(e){var r=ie(),t=It(),n=yi(),o=or(),s=Je(),i=$n(),a=se(),c=Vn(),u=Object.getOwnPropertyDescriptor;e.f=r?u:function(d,p){if(d=s(d),p=i(p),c)try{return u(d,p)}catch(f){}if(a(d,p))return o(!t(n.f,d,p),d[p])}}}),Zn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/function-name.js"(e,r){var t=ie(),n=se(),o=Function.prototype,s=t&&Object.getOwnPropertyDescriptor,i=n(o,"name"),a=i&&function(){}.name==="something",c=i&&(!t||t&&s(o,"name").configurable);r.exports={EXISTS:i,PROPER:a,CONFIGURABLE:c}}}),_i=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/make-built-in.js"(e,r){var t=X(),n=$(),o=se(),s=ie(),i=Zn().CONFIGURABLE,a=zn(),c=Qn(),u=c.enforce,l=c.get,d=Object.defineProperty,p=s&&!t(function(){return d(function(){},"length",{value:8}).length!==8}),f=String(String).split("String"),g=r.exports=function(h,v,_){String(v).slice(0,7)==="Symbol("&&(v="["+String(v).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),_&&_.getter&&(v="get "+v),_&&_.setter&&(v="set "+v),(!o(h,"name")||i&&h.name!==v)&&(s?d(h,"name",{value:v,configurable:!0}):h.name=v),p&&_&&o(_,"arity")&&h.length!==_.arity&&d(h,"length",{value:_.arity});try{_&&o(_,"constructor")&&_.constructor?s&&d(h,"prototype",{writable:!1}):h.prototype&&(h.prototype=void 0)}catch(S){}var w=u(h);return o(w,"source")||(w.source=f.join(typeof v=="string"?v:"")),h};Function.prototype.toString=g(function(){return n(this)&&l(this).source||a(this)},"toString")}}),ir=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/define-built-in.js"(e,r){var t=$(),n=we(),o=_i(),s=Yt();r.exports=function(i,a,c,u){u||(u={});var l=u.enumerable,d=u.name!==void 0?u.name:a;if(t(c)&&o(c,d,u),u.global)l?i[a]=c:s(a,c);else{try{u.unsafe?i[a]&&(l=!0):delete i[a]}catch(p){}l?i[a]=c:n.f(i,a,{value:c,enumerable:!1,configurable:!u.nonConfigurable,writable:!u.nonWritable})}return i}}}),Si=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-get-own-property-names.js"(e){var r=Jn(),t=er(),n=t.concat("length","prototype");e.f=Object.getOwnPropertyNames||function(s){return r(s,n)}}}),bi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-get-own-property-symbols.js"(e){e.f=Object.getOwnPropertySymbols}}),wi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/own-keys.js"(e,r){var t=wt(),n=ee(),o=Si(),s=bi(),i=Ye(),a=n([].concat);r.exports=t("Reflect","ownKeys")||function(u){var l=o.f(i(u)),d=s.f;return d?a(l,d(u)):l}}}),Ii=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/copy-constructor-properties.js"(e,r){var t=se(),n=wi(),o=Yn(),s=we();r.exports=function(i,a,c){for(var u=n(a),l=s.f,d=o.f,p=0;p<u.length;p++){var f=u[p];!t(i,f)&&!(c&&t(c,f))&&l(i,f,d(a,f))}}}}),Ei=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/is-forced.js"(e,r){var t=X(),n=$(),o=/#|\.prototype\./,s=function(l,d){var p=a[i(l)];return p==u?!0:p==c?!1:n(d)?t(d):!!d},i=s.normalize=function(l){return String(l).replace(o,".").toLowerCase()},a=s.data={},c=s.NATIVE="N",u=s.POLYFILL="P";r.exports=s}}),Ti=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/export.js"(e,r){var t=oe(),n=Yn().f,o=sr(),s=ir(),i=Yt(),a=Ii(),c=Ei();r.exports=function(u,l){var d=u.target,p=u.global,f=u.stat,g,h,v,_,w,S;if(p?h=t:f?h=t[d]||i(d,{}):h=(t[d]||{}).prototype,h)for(v in l){if(w=l[v],u.dontCallGetSet?(S=n(h,v),_=S&&S.value):_=h[v],g=c(p?v:d+(f?".":"#")+v,u.forced),!g&&_!==void 0){if(typeof w==typeof _)continue;a(w,_)}(u.sham||_&&_.sham)&&o(w,"sham",!0),s(h,v,w,u)}}}}),Pi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/correct-prototype-getter.js"(e,r){var t=X();r.exports=!t(function(){function n(){}return n.prototype.constructor=null,Object.getPrototypeOf(new n)!==n.prototype})}}),Xn=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-get-prototype-of.js"(e,r){var t=se(),n=$(),o=Un(),s=tr(),i=Pi(),a=s("IE_PROTO"),c=Object,u=c.prototype;r.exports=i?c.getPrototypeOf:function(l){var d=o(l);if(t(d,a))return d[a];var p=d.constructor;return n(p)&&d instanceof p?p.prototype:d instanceof c?u:null}}}),eo=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/iterators-core.js"(e,r){"use strict";var t=X(),n=$(),o=rr(),s=Xn(),i=ir(),a=ze(),c=bt(),u=a("iterator"),l=!1,d,p,f;[].keys&&(f=[].keys(),"next"in f?(p=s(s(f)),p!==Object.prototype&&(d=p)):l=!0);var g=d==null||t(function(){var h={};return d[u].call(h)!==h});g?d={}:c&&(d=o(d)),n(d[u])||i(d,u,function(){return this}),r.exports={IteratorPrototype:d,BUGGY_SAFARI_ITERATORS:l}}}),to=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/set-to-string-tag.js"(e,r){var t=we().f,n=se(),o=ze(),s=o("toStringTag");r.exports=function(i,a,c){i&&!c&&(i=i.prototype),i&&!n(i,s)&&t(i,s,{configurable:!0,value:a})}}}),Ci=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/create-iterator-constructor.js"(e,r){"use strict";var t=eo().IteratorPrototype,n=rr(),o=or(),s=to(),i=nr(),a=function(){return this};r.exports=function(c,u,l,d){var p=u+" Iterator";return c.prototype=n(t,{next:o(+!d,l)}),s(c,p,!1,!0),i[p]=a,c}}}),Ai=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/a-possible-prototype.js"(e,r){var t=$(),n=String,o=TypeError;r.exports=function(s){if(typeof s=="object"||t(s))return s;throw o("Can't set "+n(s)+" as a prototype")}}}),Oi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/object-set-prototype-of.js"(e,r){var t=ee(),n=Ye(),o=Ai();r.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var s=!1,i={},a;try{a=t(Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set),a(i,[]),s=i instanceof Array}catch(c){}return function(u,l){return n(u),o(l),s?a(u,l):u.__proto__=l,u}}():void 0)}}),xi=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/internals/define-iterator.js"(e,r){"use strict";var t=Ti(),n=It(),o=bt(),s=Zn(),i=$(),a=Ci(),c=Xn(),u=Oi(),l=to(),d=sr(),p=ir(),f=ze(),g=nr(),h=eo(),v=s.PROPER,_=s.CONFIGURABLE,w=h.IteratorPrototype,S=h.BUGGY_SAFARI_ITERATORS,I=f("iterator"),P="keys",C="values",E="entries",T=function(){return this};r.exports=function(O,W,D,ce,ve,_o,ar){a(D,W,ce);var Ze=function(de){if(de===ve&&ye)return ye;if(!S&&de in Q)return Q[de];switch(de){case P:return function(){return new D(this,de)};case C:return function(){return new D(this,de)};case E:return function(){return new D(this,de)}}return function(){return new D(this)}},cr=W+" Iterator",Tt=!1,Q=O.prototype,Ie=Q[I]||Q["@@iterator"]||ve&&Q[ve],ye=!S&&Ie||Ze(ve),ur=W=="Array"&&Q.entries||Ie,ue,Le,Xe;if(ur&&(ue=c(ur.call(new O)),ue!==Object.prototype&&ue.next&&(!o&&c(ue)!==w&&(u?u(ue,w):i(ue[I])||p(ue,I,T)),l(ue,cr,!0,!0),o&&(g[cr]=T))),v&&ve==C&&Ie&&Ie.name!==C&&(!o&&_?d(Q,"name",C):(Tt=!0,ye=function(){return n(Ie,this)})),ve)if(Le={values:Ze(C),keys:_o?ye:Ze(P),entries:Ze(E)},ar)for(Xe in Le)(S||Tt||!(Xe in Q))&&p(Q,Xe,Le[Xe]);else t({target:W,proto:!0,forced:S||Tt},Le);return(!o||ar)&&Q[I]!==ye&&p(Q,I,ye,{name:ve}),g[W]=ye,Le}}}),ji=m({"../../node_modules/.pnpm/core-js@3.23.4/node_modules/core-js/modules/es.array.iterator.js"(e,r){"use strict";var t=Je(),n=mi(),o=nr(),s=Qn(),i=we().f,a=xi(),c=bt(),u=ie(),l="Array Iterator",d=s.set,p=s.getterFor(l);r.exports=a(Array,"Array",function(g,h){d(this,{type:l,target:t(g),index:0,kind:h})},function(){var g=p(this),h=g.target,v=g.kind,_=g.index++;return!h||_>=h.length?(g.target=void 0,{value:void 0,done:!0}):v=="keys"?{value:_,done:!1}:v=="values"?{value:h[_],done:!1}:{value:[_,h[_]],done:!1}},"values");var f=o.Arguments=o.Array;if(n("keys"),n("values"),n("entries"),!c&&u&&f.name!=="values")try{i(f,"name",{value:"values"})}catch(g){}}});function ki(e,r){return r=r||{},new Promise(function(t,n){var o=new XMLHttpRequest,s=[],i=[],a={},c=function(){return{ok:(o.status/100|0)==2,statusText:o.statusText,status:o.status,url:o.responseURL,text:function(){return Promise.resolve(o.responseText)},json:function(){return Promise.resolve(o.responseText).then(JSON.parse)},blob:function(){return Promise.resolve(new Blob([o.response]))},clone:c,headers:{keys:function(){return s},entries:function(){return i},get:function(l){return a[l.toLowerCase()]},has:function(l){return l.toLowerCase()in a}}}};for(var u in o.open(r.method||"get",e,!0),o.onload=function(){o.getAllResponseHeaders().replace(/^(.*?):[^\S\n]*([\s\S]*?)$/gm,function(l,d,p){s.push(d=d.toLowerCase()),i.push([d,p]),a[d]=a[d]?a[d]+","+p:p}),t(c())},o.onerror=n,o.withCredentials=r.credentials=="include",r.headers)o.setRequestHeader(u,r.headers[u]);o.send(r.body||null)})}async function Ri(e){let r=A({"Content-Type":"application/json"},e.headers),t=await ki(e.url,{method:e.method,headers:r,body:Di(e)});if(t.ok)return Li(t);let n=new Error(t.statusText);return n.response=t,Promise.reject(n)}function Di(e){return typeof e.payload=="string"?e.payload:e.payload instanceof String?e.payload.valueOf():JSON.stringify(e.payload)}async function Li(e){let r="";e.headers&&e.headers.entries().forEach(n=>r+=`${n[0]}: ${n[1]}\r
`);let t={status:e.status,statusText:e.statusText,headers:r,data:""};try{let n=await e.json();t.data=n}catch(n){new Error(`response.payload cannot be parsed. Failed with error:
 ${n}`)}return t}var vt,Mi=new Uint8Array(16);function Ni(){if(!vt&&(vt=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto)||typeof msCrypto<"u"&&typeof msCrypto.getRandomValues=="function"&&msCrypto.getRandomValues.bind(msCrypto),!vt))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return vt(Mi)}var Ui=/^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-5][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000)$/i;function Fi(e){return typeof e=="string"&&Ui.test(e)}var qi=Fi,M=[];for(yt=0;yt<256;++yt)M.push((yt+256).toString(16).substr(1));var yt;function Bi(e){var r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,t=(M[e[r+0]]+M[e[r+1]]+M[e[r+2]]+M[e[r+3]]+"-"+M[e[r+4]]+M[e[r+5]]+"-"+M[e[r+6]]+M[e[r+7]]+"-"+M[e[r+8]]+M[e[r+9]]+"-"+M[e[r+10]]+M[e[r+11]]+M[e[r+12]]+M[e[r+13]]+M[e[r+14]]+M[e[r+15]]).toLowerCase();if(!qi(t))throw TypeError("Stringified UUID is invalid");return t}var Ki=Bi;function Wi(e,r,t){e=e||{};var n=e.random||(e.rng||Ni)();if(n[6]=n[6]&15|64,n[8]=n[8]&63|128,r){t=t||0;for(var o=0;o<16;++o)r[t+o]=n[o];return r}return Ki(n)}var Vi=Wi;function Gi(){return Vi()}var Jt={ffLibraryVersionCode:1,ffLibraryVersionName:"1.0.2-beta",ffLibraryLanguage:"Javascript",minimumPollFrequencySeconds:60},An="wmAppUserId",_t="wmFeatureFlagConfig",On="wmFeatureFlagUserId",xn="wmFeatureFlagConfigEtag",zt="wmFeatureFlagResults",jn="wmConfigCacheStart",kn="Cache was used due to remote loading failing.",$i="Fallback used because remote config loading failed.",Hi="Fallback or cache used because remote config loading failed.",Ji="Fallback used because a requested flag was present in it and not the remote.",zi="Remote config used because a fallback config is not present.",Qi="There was a problem reading the config object from storage, possibly due to invalid config JSON.",He="Unable to access localStorage",Yi="Unable to access sessionStorage",Zi="A clientId must be provided for multiple instance support.",Xi=class{constructor(e,r){if(this.storageType=e,this.clientId=r,this.warnings=[],!this.clientId){let t={code:"MULTIPLE_INSTANCES_SUPPORT",message:`${Zi}`};this.warnings.push(t)}switch(this.storageType){case"localStorage":try{this.storage=localStorage}catch(t){let n={code:"UNABLE_TO_ACCESS_LOCAL_STORAGE",message:`${He}: ${t}`};this.warnings.push(n)}break;case"sessionStorage":try{this.storage=sessionStorage}catch(t){let n={code:"UNABLE_TO_ACCESS_SESSION_STORAGE",message:`${Yi}: ${t}`};this.warnings.push(n)}break;case"inMemory":default:try{this.storage=localStorage;break}catch(t){let n={code:"UNABLE_TO_ACCESS_LOCAL_STORAGE",message:`${He}: ${t}`};this.warnings.push(n)}}}get(e){let r;if(typeof Storage>"u")return;let t=e;this.clientId&&(t=`${t}-${this.clientId}`);try{r=this.storage.getItem(t)}catch(n){let o={code:"UNABLE_TO_ACCESS_LOCAL_STORAGE",message:`${He}: ${n}`};this.warnings.push(o)}return r}set(e,r){if(typeof Storage>"u")return;let t=e;this.clientId&&(t=`${t}-${this.clientId}`);try{this.storage.setItem(t,r)}catch(n){let o={code:"UNABLE_TO_ACCESS_LOCAL_STORAGE",message:`${He}: ${n}`};this.warnings.push(o)}}delete(e){if(typeof Storage>"u")return;let r=e;this.clientId&&(r=`${r}-${this.clientId}`);try{this.storage.deleteItem(r)}catch(t){let n={code:"UNABLE_TO_ACCESS_LOCAL_STORAGE",message:`${He}: ${t}`};this.warnings.push(n)}}},Qc=Ys(ji()),ea=()=>{Object.entries||(Object.entries=function(e){let r=Object.keys(e),t=r.length,n=new Array(t);for(;t--;)n[t]=[r[t],e[r[t]]];return n}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e){if(this==null)throw TypeError('"this" is null or not defined');let r=Object(this),t=r.length>>>0;if(typeof e!="function")throw TypeError("predicate must be a function");let n=arguments[1],o=0;for(;o<t;){let s=r[o];if(e.call(n,s,o,r))return s;o++}},configurable:!0,writable:!0})},ta=ea,Qt="input is invalid type",y="0123456789abcdef".split(""),ra=[-2147483648,8388608,32768,128],Z=[24,16,8,0],St=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],na=class{constructor(){this.blocks=[],this.blocks=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0],this.h0=1779033703,this.h1=3144134277,this.h2=1013904242,this.h3=2773480762,this.h4=1359893119,this.h5=2600822924,this.h6=528734635,this.h7=1541459225,this.block=this.start=this.bytes=this.hBytes=0,this.finalized=this.hashed=!1,this.first=!0}create(){return this}update(e){if(this.finalized)return;let r,t=typeof e;if(t!=="string"){if(t==="object"){if(e===null)throw new Error(Qt);if(e.constructor===ArrayBuffer)e=new Uint8Array(e);else if(!Array.isArray(e)&&!ArrayBuffer.isView(e))throw new Error(Qt)}else throw new Error(Qt);r=!0}let n,o=0,s,i=e.length,a=this.blocks;for(;o<i;){if(this.hashed&&(this.hashed=!1,a[0]=this.block,a[16]=a[1]=a[2]=a[3]=a[4]=a[5]=a[6]=a[7]=a[8]=a[9]=a[10]=a[11]=a[12]=a[13]=a[14]=a[15]=0),r)for(s=this.start;o<i&&s<64;++o)a[s>>2]|=e[o]<<Z[s++&3];else for(s=this.start;o<i&&s<64;++o)n=e.charCodeAt(o),n<128?a[s>>2]|=n<<Z[s++&3]:n<2048?(a[s>>2]|=(192|n>>6)<<Z[s++&3],a[s>>2]|=(128|n&63)<<Z[s++&3]):n<55296||n>=57344?(a[s>>2]|=(224|n>>12)<<Z[s++&3],a[s>>2]|=(128|n>>6&63)<<Z[s++&3],a[s>>2]|=(128|n&63)<<Z[s++&3]):(n=65536+((n&1023)<<10|e.charCodeAt(++o)&1023),a[s>>2]|=(240|n>>18)<<Z[s++&3],a[s>>2]|=(128|n>>12&63)<<Z[s++&3],a[s>>2]|=(128|n>>6&63)<<Z[s++&3],a[s>>2]|=(128|n&63)<<Z[s++&3]);this.lastByteIndex=s,this.bytes+=s-this.start,s>=64?(this.block=a[16],this.start=s-64,this.hash(),this.hashed=!0):this.start=s}return this.bytes>4294967295&&(this.hBytes+=this.bytes/4294967296<<0,this.bytes=this.bytes%4294967296),this}finalize(){if(this.finalized)return;this.finalized=!0;let e=this.blocks,r=this.lastByteIndex;e[16]=this.block,e[r>>2]|=ra[r&3],this.block=e[16],r>=56&&(this.hashed||this.hash(),e[0]=this.block,e[16]=e[1]=e[2]=e[3]=e[4]=e[5]=e[6]=e[7]=e[8]=e[9]=e[10]=e[11]=e[12]=e[13]=e[14]=e[15]=0),e[14]=this.hBytes<<3|this.bytes>>>29,e[15]=this.bytes<<3,this.hash()}hash(){let e=this.h0,r=this.h1,t=this.h2,n=this.h3,o=this.h4,s=this.h5,i=this.h6,a=this.h7,c,u,l,d,p,f,g,h,v,_,w,S=this.blocks;for(c=16;c<64;++c)p=S[c-15],u=(p>>>7|p<<25)^(p>>>18|p<<14)^p>>>3,p=S[c-2],l=(p>>>17|p<<15)^(p>>>19|p<<13)^p>>>10,S[c]=S[c-16]+u+S[c-7]+l<<0;for(w=r&t,c=0;c<64;c+=4)this.first?(h=704751109,p=S[0]-210244248,a=p-1521486534<<0,n=p+143694565<<0,this.first=!1):(u=(e>>>2|e<<30)^(e>>>13|e<<19)^(e>>>22|e<<10),l=(o>>>6|o<<26)^(o>>>11|o<<21)^(o>>>25|o<<7),h=e&r,d=h^e&t^w,g=o&s^~o&i,p=a+l+g+St[c]+S[c],f=u+d,a=n+p<<0,n=p+f<<0),u=(n>>>2|n<<30)^(n>>>13|n<<19)^(n>>>22|n<<10),l=(a>>>6|a<<26)^(a>>>11|a<<21)^(a>>>25|a<<7),v=n&e,d=v^n&r^h,g=a&o^~a&s,p=i+l+g+St[c+1]+S[c+1],f=u+d,i=t+p<<0,t=p+f<<0,u=(t>>>2|t<<30)^(t>>>13|t<<19)^(t>>>22|t<<10),l=(i>>>6|i<<26)^(i>>>11|i<<21)^(i>>>25|i<<7),_=t&n,d=_^t&e^v,g=i&a^~i&o,p=s+l+g+St[c+2]+S[c+2],f=u+d,s=r+p<<0,r=p+f<<0,u=(r>>>2|r<<30)^(r>>>13|r<<19)^(r>>>22|r<<10),l=(s>>>6|s<<26)^(s>>>11|s<<21)^(s>>>25|s<<7),w=r&t,d=w^r&n^_,g=s&i^~s&a,p=o+l+g+St[c+3]+S[c+3],f=u+d,o=e+p<<0,e=p+f<<0;this.h0=this.h0+e<<0,this.h1=this.h1+r<<0,this.h2=this.h2+t<<0,this.h3=this.h3+n<<0,this.h4=this.h4+o<<0,this.h5=this.h5+s<<0,this.h6=this.h6+i<<0,this.h7=this.h7+a<<0}hex(){this.finalize();let e=this.h0,r=this.h1,t=this.h2,n=this.h3,o=this.h4,s=this.h5,i=this.h6,a=this.h7,c=y[e>>28&15]+y[e>>24&15]+y[e>>20&15]+y[e>>16&15]+y[e>>12&15]+y[e>>8&15]+y[e>>4&15]+y[e&15]+y[r>>28&15]+y[r>>24&15]+y[r>>20&15]+y[r>>16&15]+y[r>>12&15]+y[r>>8&15]+y[r>>4&15]+y[r&15]+y[t>>28&15]+y[t>>24&15]+y[t>>20&15]+y[t>>16&15]+y[t>>12&15]+y[t>>8&15]+y[t>>4&15]+y[t&15]+y[n>>28&15]+y[n>>24&15]+y[n>>20&15]+y[n>>16&15]+y[n>>12&15]+y[n>>8&15]+y[n>>4&15]+y[n&15]+y[o>>28&15]+y[o>>24&15]+y[o>>20&15]+y[o>>16&15]+y[o>>12&15]+y[o>>8&15]+y[o>>4&15]+y[o&15]+y[s>>28&15]+y[s>>24&15]+y[s>>20&15]+y[s>>16&15]+y[s>>12&15]+y[s>>8&15]+y[s>>4&15]+y[s&15]+y[i>>28&15]+y[i>>24&15]+y[i>>20&15]+y[i>>16&15]+y[i>>12&15]+y[i>>8&15]+y[i>>4&15]+y[i&15];return c+=y[a>>28&15]+y[a>>24&15]+y[a>>20&15]+y[a>>16&15]+y[a>>12&15]+y[a>>8&15]+y[a>>4&15]+y[a&15],c}toString(){return this.hex()}digest(){this.finalize();let e=this.h0,r=this.h1,t=this.h2,n=this.h3,o=this.h4,s=this.h5,i=this.h6,a=this.h7,c=[e>>24&255,e>>16&255,e>>8&255,e&255,r>>24&255,r>>16&255,r>>8&255,r&255,t>>24&255,t>>16&255,t>>8&255,t&255,n>>24&255,n>>16&255,n>>8&255,n&255,o>>24&255,o>>16&255,o>>8&255,o&255,s>>24&255,s>>16&255,s>>8&255,s&255,i>>24&255,i>>16&255,i>>8&255,i&255];return c.push(a>>24&255,a>>16&255,a>>8&255,a&255),c}array(){return this.digest()}arrayBuffer(){this.finalize();let e=new ArrayBuffer(32),r=new DataView(e);return r.setUint32(0,this.h0),r.setUint32(4,this.h1),r.setUint32(8,this.h2),r.setUint32(12,this.h3),r.setUint32(16,this.h4),r.setUint32(20,this.h5),r.setUint32(24,this.h6),r.setUint32(28,this.h7),e}};ta();var ro=class{constructor(e,r,t=!1){if(this.addStorageWarnings=()=>{let o=[];return this.storage.warnings&&this.storage.warnings.length>0&&this.storage.warnings.map(s=>{o.push(s)}),o},this.targetingPropsToLowerCase=o=>Object.entries(o).reduce((s,[i,a])=>{let c;return typeof a=="string"&&(c=a.toLowerCase()),Array.isArray(a)&&(c=a.map(u=>u.toLowerCase())),s[i.toLowerCase()]=c,s},{}),!e)throw new Error("Please provide a context object to the constructor.");if(!e.configUrl&&!r)throw new Error("Please provide either a config url or a valid config object.");this.config=void 0,this.configRefreshIntervalDefault=Jt.minimumPollFrequencySeconds,this.context=e,this.fallbackConfig=r,this.featureFlagUserId="",this.libraryLanguage=Jt.ffLibraryLanguage,this.initialized=!1,this.quickInit=t;let n=e&&e.storageType?e.storageType:"";this.storage=new Xi(n,e.clientId),this.globalWarnings=[]}createHash(e,r){let n=new na().create();return n.update(`${e}${r}`),n.hex()}createUserId(){return Gi()}getUserFeatureIndex(e){return parseInt(e.substring(0,10),16).toString().slice(-2)}async init(){let e=[],{config:r,fallbackConfig:t,initialized:n,featureFlagUserId:o,libraryLanguage:s,storage:i,configRefreshIntervalDefault:a,quickInit:c}=this,{configUrl:u,userId:l,configRefreshInterval:d}=this.context,p=typeof d<"u"?d:a,f=this.checkConfigCacheExpiry(p);if(!r||f){let g=i.get(_t);try{g&&(this.config=JSON.parse(g))}catch(h){let v={code:"FAILED_TO_READ_CONFIG_FROM_STORAGE",message:Qi};e.push(v)}if(!g||f)if(u){!f&&t&&this.updateConfig(t);let h=i.get(xn)||"-1";h=g?h:"-1";try{if(c&&t)return g||this.updateConfig(t),this.loadAndSetRemoteConfig(u,h),e;if(c&&!t){let v={code:"REMOTE_CONFIG_USED_NO_FALLBACK_PRESENT",message:zi};e.push(v)}await this.loadAndSetRemoteConfig(u,h)}catch(v){if(g||t)this.setNoNewConfigWarning();else throw new Error(`Failed to load config file - no config url or default config provided. ${v}`)}}else{if(!t)throw new Error("Failed to load config file - no config url or default config provided.");this.updateConfig(t)}}if(n)return e;if(l)i.set(An,l);else{let g=i.get(An);g&&(this.context.userId=g)}if(!o){let g=i.get(On);g&&(this.featureFlagUserId=g),g||(this.featureFlagUserId=this.createUserId(),i.set(On,this.featureFlagUserId))}if(!this.context.userTargetingProperties||this.context.userTargetingProperties&&!this.context.userTargetingProperties.ffLibraryLanguage){let g={ffLibraryLanguage:s};this.updateContext(void 0,g)}return this.initialized=!0,e}checkConfigCacheExpiry(e){let{storage:r}=this,t=new Date,n=!1,o=c=>r.set(jn,c),s=r.get(jn);if(!s){let c=new Date;o(JSON.stringify(c.getTime()))}let i=s?JSON.parse(s):t.getTime();if(n=t.getTime()-i>e,n===!0){let c=new Date;o(JSON.stringify(c.getTime()))}return n}async isFeatureEnabled(e){return(await this.queryFeatureFlag(e)).enabled}setNoNewConfigWarning(){let{fallbackConfig:e,storage:r}=this,t=r.get(_t);if(t){let n={code:"CACHE_USED",message:kn};this.globalWarnings.push(n)}else!t&&e&&(this.globalWarnings.push({code:"FALLBACK_USED_REMOTE_LOAD_FAILED",message:kn}),this.updateConfig(e))}parseHeaders(e){return e.split(`\r
`).reduce(function(t,n){let o=n.split(": ");return t[o[0]]=o[1],t},{})}async loadAndSetRemoteConfig(e,r){try{let t=await this.loadConfig(e,r);if(t){this.config=t.data?t.data:this.config,t.data||this.globalWarnings.push({code:"FALLBACK_USED_REMOTE_LOAD_FAILED",message:$i});let n=t.headers&&t.headers.etag?t.headers.etag:"";t.headers&&typeof t.headers=="string"&&(n=this.parseHeaders(t.headers).etag),n&&this.storage.set(xn,n),this.storage.set(_t,JSON.stringify(this.config))}}catch(t){this.globalWarnings.push({code:"FALLBACK_OR_CACHE_USED_REMOTE_LOAD_FAILED",message:Hi}),this.setNoNewConfigWarning()}}async loadConfig(e,r="-1"){let t,n=`${e}?version=${Jt.ffLibraryVersionCode}`,o={"If-None-Match":r},s={headers:o};try{t=await Ri({url:n,method:"GET",headers:o})}catch(i){throw new Error(`Failed to fetch config file: ${i}`)}return t}updateConfig(e){this.config=e,this.storage.set(_t,JSON.stringify(e))}updateContext(e,r,t){let n=A({},this.context);if(e&&(n.userId=e),t)n.userTargetingProperties=r;else{let o=A(A({},n.userTargetingProperties),r);n.userTargetingProperties=o}this.context=n}getCohortConfig(e,r){let t=e.userId?"appUserId":"ffUserId",n={rolloutValue:"-1",cohortPriority:1,stickinessProperty:t},o=[...r];o.sort((a,c)=>a.cohortPriority>c.cohortPriority?1:-1);let s=this.targetingPropsToLowerCase(e.userTargetingProperties),i=o.find(a=>{let c=!1;if(!e.userId&&a.stickinessProperty==="appUserId")return!1;if(!a.cohortCriteria||a.cohortCriteria.length<1)return!0;let u=a.cohortCriteria;for(let l=0;l<u.length;l++){let{requiredFieldName:d}=u[l],{requiredFieldValues:p}=u[l];if(d=d.toLowerCase(),c=p.some(g=>{if(g=g.toLowerCase(),!s.hasOwnProperty(d)&&g==="")return!0;if(typeof s[d]=="string")return s[d]===g;if(Array.isArray(s[d]))return s[d].some(h=>h===g)}),!c)break}return c});return i&&(n=A({},i)),n}cacheFlagResults(e){let{storage:r}=this,t=[],n=[],o=[];Array.isArray(e)?o=e?[...e]:[]:o.push(e);let s=r.get(zt);t=[...s?JSON.parse(s):[]],t.length>0&&(n=t.reduce((c,u)=>o.find(l=>l.flagId===u.flagId)?c:[...c,u],[]));let a=[...n,...o];return r.set(zt,JSON.stringify(a)),a}checkIfFlagUpdated(e){let{storage:r}=this,t=r.get(zt),n=t?JSON.parse(t):[];if(n.length<1)return!0;let o=n.find(i=>i.flagId===e.flagId);return o?o.enabled!==e.enabled:!0}async queryFeatureFlag(e,r=!1){let{context:t,fallbackConfig:n}=this,o=!1,s,i,a,c,u,l="appUserId",d=[],p=_=>{let w=r?[]:this.globalWarnings;return d.concat(_,w)},f=(_,w)=>_.flags.find(S=>S.id===w),g=(_,w)=>{if(s=f(_,w),s){let S=this.addStorageWarnings();d=p(S);let I={clientId:t.clientId,flagId:s.id,flagName:s.name?s.name:void 0,enabled:s.defaultValue,updatedSinceLastQuery:!0,warnings:d};return I.updatedSinceLastQuery=this.checkIfFlagUpdated(I),this.cacheFlagResults(I),I}};try{if(d=(await this.init()).concat(d),c=this.context.userId?this.context.userId:void 0,!this.config||!this.config.flags)throw new Error("Operation failed - no config file or invalid config file detected.");if(s=f(this.config,e),!s){if(n){let D=g(n,e);if(D){let ce={code:"FALLBACK_USED_FLAG_NOT_IN_REMOTE",message:Ji};return d.push(ce),D}}throw new Error("Flag not found")}let{cohorts:w,defaultValue:S,name:I,type:P}=s;if(P&&P.toLowerCase()!=="boolean"&&!r)throw new Error("Flag not found");if(!w||w.length<1){let D=this.addStorageWarnings();d=p(D);let ce={clientId:t.clientId,flagId:s.id,flagName:I,enabled:s.defaultValue,updatedSinceLastQuery:!0,warnings:d};return ce.updatedSinceLastQuery=this.checkIfFlagUpdated(ce),this.cacheFlagResults(ce),ce}i=I;let C=this.getCohortConfig(t,w),{rolloutValue:E}=C,{stickinessProperty:T}=C;E=E||"0";let O=s.id;a=this.context.userId?this.context.userId:void 0,T==="ffUserId"&&(c=this.featureFlagUserId,l="ffUserId",a=c);let W=a?this.createHash(a,O):void 0;if(u=W?this.getUserFeatureIndex(W):"-1",o=parseInt(u,10)<parseInt(E,10),parseInt(E,10)<0||parseInt(u,10)<0||parseInt(u,10)>99){if(typeof S>"u"){if(n){let D=g(n,e);if(D)return D;throw new Error("Flag not found")}throw new Error("Unable to determine flag default value")}o=S}}catch(_){throw new Error(`Failed to query feature flag: ${_}`)}let h=this.addStorageWarnings();d=p(h);let v={flagId:e,flagName:i,enabled:o,updatedSinceLastQuery:!0,clientId:t.clientId,userId:c,userIdType:l,warnings:d};return v.updatedSinceLastQuery=this.checkIfFlagUpdated(v),this.cacheFlagResults(v),v}async queryAllFeatureFlags(){await this.init();let{config:e}=this;if(!e||!e.flags)throw new Error("No config file or invalid config file detected.");let r={anyFlagsUpdatedSinceLastQuery:!1,globalWarnings:this.globalWarnings,results:[]},t=e.flags.map(async n=>{let o=await this.queryFeatureFlag(n.id,!0);o.updatedSinceLastQuery===!0&&(r.anyFlagsUpdatedSinceLastQuery=!0),r.results.push(o)});return Promise.all(t).then(()=>r)}};var vo=Pt(Vt()),yo=Pt(lo());qe();function la(e){let r=e;return typeof r<"u"&&r!==null&&(r.constructor==={}.constructor||r.constructor===[].constructor)}function pa(e){if(!la(e))return!1;for(let r in e)if(Object.prototype.hasOwnProperty.call(e,r))return!0;return!1}function ae(){let e={},r=(s,i)=>{i!=null&&i!==""&&(e[s]=i)};return{add:r,addMap:s=>{for(let i in s)Object.prototype.hasOwnProperty.call(s,i)&&r(i,s[i])},addJson:(s,i)=>{if(i&&pa(i)){let a=JSON.stringify(i);r(s,a)}},build:()=>e}}function fa(e){return e==null||e==null?new Date().toISOString():new Date(e).toISOString()}var po=e=>{let r={};return Array.isArray(e)?e:(Object.entries(e).forEach(([t,n])=>{n===Object(n)?r[t]=po(n):n!=null&&(r[t]=e[t])}),r)};function fo(e){let r={},t=(o,s)=>{r[o]=s},n=(o,s,i)=>{o.addMap(po(r)),o.add("eventTimestamp",fa(s)),o.add("eventId",ge()),typeof e=="function"&&e(o);try{i&&i(o.build())}catch(a){console.warn("[PSM]: error running custom callback")}return o};return{addEntry:t,setPlatform(o){t("platform",o)},setBrand(o){t("brand",o)},setSubBrand(o){t("subBrand",o)},setProductName(o){t("productName",o)},setWMUKID(o){t("wmukid",o)},setThirdPartyIds(o){t("ids",o)},setDevice(o){t("device",o)},setNavigationProperties(o){t("navigationProperties",o)},setClientResolvedIp(o){t("clientResolvedIp",o)},setLocation(o){t("location",o)},setConsentProperties(o){t("consentProperties",o)},setIABCategories(o){t("iabConsentCategories",o)},setLibrary(o){let i=window.WM,a=i==null?void 0:i.UserConsent,c=null;a&&(c={version:a.getVersion(),usingPsm:a.usingPSM(),initConfig:i.UserConsentConfig}),t("library",A({wmucLibrary:c},o))},setEventProperties(o){t("eventProperties",o)},setSessionProperties(o){t("session",o)},setContentMetadata(o){t("contentMetadata",o)},trackAppLoad(o,s){let i=ae();return i.add("eventType","telemetry"),i.add("eventName","appLoad"),n(i,o,s)},trackPubSub(o,s,i){let a=ae(),c={eventTrigger:"pubsub"};return a.add("eventType","telemetry"),a.add("eventName",o),t("eventProperties",c),n(a,s,i)},trackIdentityRegistration(o,s,i){let a=ae();return a.add("eventType","identity"),a.add("eventName",o),n(a,s,i)},trackTokenEvent(o,s,i){let a=ae();return a.add("eventType","token"),a.add("eventName",o),n(a,s,i)},trackConsentUpdated(o,s,i,a){let c=ae(),u={eventTrigger:o,uspString:s==null?void 0:s.usp,region:s==null?void 0:s.region};return c.add("eventType","privacy"),c.add("eventName","consent update"),t("eventProperties",u),n(c,i,a)},trackConsentGranted(o,s){let i=ae();return i.add("eventType","privacy"),i.add("eventName","ccpaShareData"),n(i,o,s)},trackConsentWithdrawn(o,s){let i=ae();return i.add("eventType","privacy"),i.add("eventName","ccpaShareData"),n(i,o,s)},trackPageExit(o,s,i){let a=ae();return a.add("eventType","telemetry"),a.add("eventName","pageExit"),a.add("eventTrigger",o),n(a,s,i)}}}function go(e){return(r,t)=>{let n=["bot","crawl","spider"];if(new RegExp(n.join("|"),"i").test(window.navigator.userAgent))return t(null,{});r.sentAtTimestamp=new Date().toISOString(),he(e,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(r)}).then(s=>t(null,s)).catch(s=>{x({err:s,methodName:"sendRequest",eventType:r.eventType||"queue"}),t(s)})}}var ho=(e,r)=>{let t=r.psmObject;t.initPsm=e.initPsm.bind(e),t.getVersion=e.getVersion.bind(e),t.getWMUKID=r.getWMUKID.bind(e),t.getCDPID=r.getCDPID.bind(e),t.getConfig=e.getConfig.bind(e),t.getConsentProperties=r.getConsentProperties.bind(e),t.getBrand=e.getBrand.bind(e),t.getBrandToken=e.getBrandToken.bind(e),t.getSubBrand=e.getSubBrand.bind(e),t.getCoppaPrivacyMode=e.getCoppaPrivacyMode.bind(e),t.getDeviceProperties=e.getDeviceProperties.bind(e),t.getIds=e.getIds.bind(e),t.getLibrary=e.getLibrary.bind(e),t.getLocationProperties=e.getLocationProperties.bind(e),t.getDeviceProperties=e.getDeviceProperties.bind(e),t.getNavigationProperties=e.getNavigationProperties.bind(e),t.getSessionProperties=e.getSessionProperties.bind(e),t.isDopplerIdentityOnStartEnabled=()=>e.queryFlag("doppler-identity-onstart"),t.isDopplerIdentityOnCompleteEnabled=()=>e.queryFlag("doppler-identity-oncomplete"),t.isDopplerPrivacyEnabled=()=>e.queryFlag("doppler-privacy"),t.isDopplerTelemetryEnabled=()=>e.queryFlag("doppler-telemetry"),e.setUspData&&(t.setUspData=e.setUspData.bind(e),t.getUspBoolean=e.getUspBoolean.bind(e),t.getUspString=e.getUspString.bind(e),t.getComScoreFromUsp=e.getComScoreFromUsp.bind(e),t.getUspData=e.getUspData.bind(e))};var mo="3.2.1";var K=class extends yr{constructor(){super();K.dependencies=Cn(this),ho(this,K.dependencies),K.dependencies.getFlags=this.getFlags.bind(this)}async initPsm(t){let n=window,o=n.psmInitialized;if(this.ready||o)return;if(n.psmInitialized=!0,this.browser=Jr(),this.config.browser=this.browser,this.config=Object.assign(this.config,t),mn(this),typeof t>"u")throw new Error("[PSM]: Please provide a valid configuration to initPsm");let s=async()=>{let a=t.psmEnvironment.toUpperCase(),c=fo();this.core=c,this.requestQueue=new vo.default("prismCE",et,go(H.identity[a]));let u=!1;if(!(window.location!==window.parent.location&&t.psmBrandToken!=="cnnamp")){if(t.psmBrandToken==="cnnamp"&&(u=!0),this.wmukid=K.dependencies.initWMUKID(this.coppaPrivacyMode,u),this.coppaPrivacyMode!==yo.COPPAPrivacyModesEnum.ZERO_ID){this.cdpid=await K.dependencies.initCDPID(a,this.config.platform);for(let l of document.links)l instanceof HTMLAnchorElement&&l.href.includes("hbomax.com/subscribe/plan-picker")&&l.addEventListener("click",()=>{me(this,c),c.trackPageExit("click",new Date().toISOString(),d=>{d.navigationProperties.destination=l.href,d.sentAtTimestamp=new Date().toISOString(),navigator.sendBeacon(H.identity[a],JSON.stringify(d))})});this.setSendWMSegs(),this.setSendAuth2Token(),K.dependencies.resolveAuthTokens(c,b,this),window.ZionMessageBus&&window.ZionMessageBus.getInstance().publish("id_found",{type:"wmukid",value:this.wmukid})}if(this.setSessionProperties(!0),this.setIsInExperiment("isInAuthTokenExperiment"),me(this,c),c.trackIdentityRegistration("identity on page start",new Date().toISOString(),l=>{this.queryFlag("doppler-identity-onstart")&&(this.requestQueue.addItem(l),this.resetNewSessionFields()),a==="AUTOMATED_TEST"&&window.localStorage.setItem("payload-on-start",JSON.stringify(l))}),window.addEventListener("load",()=>{this.setSessionProperties(),me(this,c),c.trackIdentityRegistration("identity on page complete",new Date().toISOString(),l=>{this.queryFlag("doppler-identity-oncomplete")&&(this.requestQueue.addItem(l),a==="AUTOMATED_TEST"&&window.localStorage.setItem("payload-on-complete",JSON.stringify(l)),this.resetNewSessionFields())})}),document.addEventListener("userConsentChanged",l=>{x({message:"userConsentChanged event received",methodName:"initPsm",eventType:"privacy",context:{eventDetails:l.detail}}),this.setSessionProperties(),me(this,c),c.trackConsentUpdated("userConsentChanged",l.detail,new Date().toISOString(),d=>{this.queryFlag("doppler-consent-update")&&(x({message:"Consent Update event registered",methodName:"initPsm",eventType:"privacy",context:{payload:d}}),this.requestQueue.addItem(d),this.resetNewSessionFields())})}),this.queryFlag("doppler-pubsub-event"))for(let l in t.topics)t.topics[l].forEach(d=>{window.PubSub&&window.PubSub.subscribe(d,(...p)=>{let f=typeof p[1]=="object"?p[1]:p[0];f=Object.keys(f).length<3&&f.video?f.video:f,window.psmPubSubData=window.psmPubSubData||{},window.psmPubSubData[l]=window.psmPubSubData[l]||{},Object.assign(window.psmPubSubData[l],f),me(this,c),c.trackPubSub(d,new Date().toISOString(),g=>{this.requestQueue.addItem(g),this.resetNewSessionFields()})})});this.requestQueue.start(),this.ready=!0}};if(this.validateConfig(t),this.countryCode=this.hasProperty("countryCode",t)&&typeof t.countryCode<"u"&&this.config.countryCode.length?this.config.countryCode.toUpperCase():"",Pe.includes(this.countryCode)||this.countryCode==="")try{this.config.appId=typeof this.config.appId<"u"||this.config.appId?this.config.appId:"";let a=await he(H.locateV2,{headers:{"app-id":this.config.appId}});this.location.ip_address=a.ip,this.location.country=a.country,this.location.country_alpha2=a.countryAlpha2,this.location.country_alpha3=a.countryAlpha3,this.countryCode=this.countryCode===""?this.location.country_alpha2:this.countryCode,this.location.states=[{cities:[a.city],counties:[...a.counties],state:a.state,zipcodes:[...a.zipcodes]}],this.location.proxy=a.proxy}catch(a){this.location.country=void 0,this.location.country_alpha2=void 0}try{let{shouldLoad:a,categories:c}=await _n();Pe.includes(this.countryCode)?this.consentRule="US":a&&c.length>0&&(this.consentRule="GDPR"),this.consentCategories=c.reduce((u,l)=>A(A({},u),l),{})}catch(a){this.consentCategories={}}this.initCoppaPrivacyMode();let i=`psmFFClient-${this.config.brand}-${this.config.subBrand}`;this.ffClient=new ro({configUrl:H.featureFlag[t.psmEnvironment.toUpperCase()],configRefreshInterval:6e4,userTargetingProperties:{Platform:["Web"],Brand:[t.brand],Browser:this.browser,ClientID:i,CountryCode:this.countryCode},clientId:i});try{let a=await this.ffClient.queryAllFeatureFlags();this.flags=a.results,(this.consentRule==="US"||this.consentRule==="GDPR"&&this.queryFlag("outside-us-location-check"))&&await s()}catch(a){console.log("[PSM]: Error encountered during location check",a)}}getWMUKID(){return K.dependencies.getWMUKID()}getCDPID(){return K.dependencies.getCDPID()}getConsentProperties(){return K.dependencies.getConsentProperties()}setSendAuth2Token(){let t=this.queryFlag("sendAuthToken2");return b.set("sendAuthToken",t),b.set("sendAuthToken2",t)}setIsInExperiment(t){let n=this.queryFlag(t);return b.set(t,n)}setSendWMSegs(){let t=this.queryFlag("sendWMSegs");return b.set("sendWMSegs",t)}getPageLoadId(t,n){let o=b.get("psmPageLoadId"),s=o&&parseInt(o),i=s;return t&&(i=1),!t&&n&&s&&(i=s+1),i}setSessionProperties(t=!1){let n=new Date,o={isSessionStart:!0,pageloadid:this.getPageLoadId(!0,t),psmLastActiveTimestamp:n.toISOString(),psmSessionStart:n.toISOString(),sessionDuration:0,sessionid:ge()},s=b.get("psmSessionId"),i=b.get("psmSessionStart"),a=b.get("psmLastActiveTimestamp");if(s!==null){let c=new Date(a),u=new Date(i),l=n.getTime()-c.getTime();l>18e5?(Re({message:`[PSM]: Session ${s} timed out after ${l/1e3} seconds.`,methodName:"setSessionProperties",eventType:"session"}),o=Ee(A({},o),{previousSession:{psmLastActiveTimestamp:a,psmSessionStart:i,sessionDuration:(c.getTime()-u.getTime())/1e3,sessionid:s}})):(x({message:`[PSM]: Session ${s} still active after ${l/1e3} seconds. Updating last active timestamp.`,methodName:"setSessionProperties",eventType:"session"}),o={isSessionStart:!1,pageloadid:this.getPageLoadId(!1,t),psmLastActiveTimestamp:n.toISOString(),psmSessionStart:i,sessionDuration:(n.getTime()-u.getTime())/1e3,sessionid:s})}else Re({message:"[PSM]: Creating new session",methodName:"setSessionProperties",eventType:"session"});b.set("psmSessionId",o.sessionid),b.set("psmLastActiveTimestamp",o.psmLastActiveTimestamp),b.set("psmSessionStart",o.psmSessionStart),b.set("psmPageLoadId",JSON.stringify(o.pageloadid)),this.session=o}resetNewSessionFields(){this.session=Ee(A({},this.session),{isSessionStart:!1,previousSession:null})}getFlags(){return this.flags.reduce((t,n)=>Ee(A({},t),{[n.flagId]:n}),{})}getDeviceProperties(){return{type:K.dependencies.platform,userAgent:window.navigator.userAgent}}getLibrary(){return{name:"Prism JS",version:mo,initConfig:this.config}}getIds(){return{attuuid:We()||"",cdpid:K.dependencies.getCDPID(),cnnuid:De()||"",convivaid:Ge()||"",ecid:Ve()||"",kruxid:Ke()||"",liverampatsid:b.get("tok_lr"),wminid:b.get("wminid"),zionid:$e()||""}}getNavigationProperties(){return{url:window.location.href,rootDomain:at(window.location.href),referrer:ut(),path:window.location.pathname,search:window.location.search,title:window.document.title}}queryFlag(t){let n=mr[t]||!1;try{let{enabled:o}=this.flags.find(s=>s.flagId===t);n=o}catch(o){vn({err:o,methodName:"queryFlag",eventType:"featureFlagging"})}return n}};var Wu=new K;})();
//# sourceMappingURL=psm.legacy.min.umd.js.map